var nI=Object.create;var rp=Object.defineProperty,rI=Object.defineProperties,iI=Object.getOwnPropertyDescriptor,oI=Object.getOwnPropertyDescriptors,sI=Object.getOwnPropertyNames,Bc=Object.getOwnPropertySymbols,aI=Object.getPrototypeOf,ip=Object.prototype.hasOwnProperty,j_=Object.prototype.propertyIsEnumerable;var V_=(n,e,t)=>e in n?rp(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Z=(n,e)=>{for(var t in e||={})ip.call(e,t)&&V_(n,t,e[t]);if(Bc)for(var t of Bc(e))j_.call(e,t)&&V_(n,t,e[t]);return n},Ce=(n,e)=>rI(n,oI(e));var B_=(n,e)=>{var t={};for(var r in n)ip.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Bc)for(var r of Bc(n))e.indexOf(r)<0&&j_.call(n,r)&&(t[r]=n[r]);return t};var z_=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var lI=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of sI(e))!ip.call(n,i)&&i!==t&&rp(n,i,{get:()=>e[i],enumerable:!(r=iI(e,i))||r.enumerable});return n};var op=(n,e,t)=>(t=n!=null?nI(aI(n)):{},lI(e||!n||!n.__esModule?rp(t,"default",{value:n,enumerable:!0}):t,n));var ee=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(d){i(d)}},s=c=>{try{a(t.throw(c))}catch(d){i(d)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});var Ny=z_((Py,ky)=>{"use strict";((n,e)=>{typeof define=="function"&&define.amd?define([],e):typeof ky=="object"&&typeof Py<"u"?ky.exports=e():n.Papa=e()})(Py,function n(){var e=typeof self<"u"?self:typeof window<"u"?window:e!==void 0?e:{},t,r=!e.document&&!!e.postMessage,i=e.IS_PAPA_WORKER||!1,o={},s=0,a={};function c(I){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(M){var $=B(M);$.chunkSize=parseInt($.chunkSize),M.step||M.chunk||($.chunkSize=null),this._handle=new v($),(this._handle.streamer=this)._config=$}.call(this,I),this.parseChunk=function(M,$){var re=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<re){let we=this._config.newline;we||(ce=this._config.quoteChar||'"',we=this._handle.guessLineEndings(M,ce)),M=[...M.split(we).slice(re)].join(we)}this.isFirstChunk&&G(this._config.beforeFirstChunk)&&(ce=this._config.beforeFirstChunk(M))!==void 0&&(M=ce),this.isFirstChunk=!1,this._halted=!1;var re=this._partialLine+M,ce=(this._partialLine="",this._handle.parse(re,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(M=ce.meta.cursor,re=(this._finished||(this._partialLine=re.substring(M-this._baseIndex),this._baseIndex=M),ce&&ce.data&&(this._rowCount+=ce.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),i)e.postMessage({results:ce,workerId:a.WORKER_ID,finished:re});else if(G(this._config.chunk)&&!$){if(this._config.chunk(ce,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=ce=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(ce.data),this._completeResults.errors=this._completeResults.errors.concat(ce.errors),this._completeResults.meta=ce.meta),this._completed||!re||!G(this._config.complete)||ce&&ce.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),re||ce&&ce.meta.paused||this._nextChunk(),ce}this._halted=!0},this._sendError=function(M){G(this._config.error)?this._config.error(M):i&&this._config.error&&e.postMessage({workerId:a.WORKER_ID,error:M,finished:!1})}}function d(I){var M;(I=I||{}).chunkSize||(I.chunkSize=a.RemoteChunkSize),c.call(this,I),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function($){this._input=$,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(M=new XMLHttpRequest,this._config.withCredentials&&(M.withCredentials=this._config.withCredentials),r||(M.onload=K(this._chunkLoaded,this),M.onerror=K(this._chunkError,this)),M.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var $,re=this._config.downloadRequestHeaders;for($ in re)M.setRequestHeader($,re[$])}var ce;this._config.chunkSize&&(ce=this._start+this._config.chunkSize-1,M.setRequestHeader("Range","bytes="+this._start+"-"+ce));try{M.send(this._config.downloadRequestBody)}catch(we){this._chunkError(we.message)}r&&M.status===0&&this._chunkError()}},this._chunkLoaded=function(){M.readyState===4&&(M.status<200||400<=M.status?this._chunkError():(this._start+=this._config.chunkSize||M.responseText.length,this._finished=!this._config.chunkSize||this._start>=($=>($=$.getResponseHeader("Content-Range"))!==null?parseInt($.substring($.lastIndexOf("/")+1)):-1)(M),this.parseChunk(M.responseText)))},this._chunkError=function($){$=M.statusText||$,this._sendError(new Error($))}}function h(I){(I=I||{}).chunkSize||(I.chunkSize=a.LocalChunkSize),c.call(this,I);var M,$,re=typeof FileReader<"u";this.stream=function(ce){this._input=ce,$=ce.slice||ce.webkitSlice||ce.mozSlice,re?((M=new FileReader).onload=K(this._chunkLoaded,this),M.onerror=K(this._chunkError,this)):M=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var ce=this._input,we=(this._config.chunkSize&&(we=Math.min(this._start+this._config.chunkSize,this._input.size),ce=$.call(ce,this._start,we)),M.readAsText(ce,this._config.encoding));re||this._chunkLoaded({target:{result:we}})},this._chunkLoaded=function(ce){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(ce.target.result)},this._chunkError=function(){this._sendError(M.error)}}function g(I){var M;c.call(this,I=I||{}),this.stream=function($){return M=$,this._nextChunk()},this._nextChunk=function(){var $,re;if(!this._finished)return $=this._config.chunkSize,M=$?(re=M.substring(0,$),M.substring($)):(re=M,""),this._finished=!M,this.parseChunk(re)}}function b(I){c.call(this,I=I||{});var M=[],$=!0,re=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(ce){this._input=ce,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){re&&M.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),M.length?this.parseChunk(M.shift()):$=!0},this._streamData=K(function(ce){try{M.push(typeof ce=="string"?ce:ce.toString(this._config.encoding)),$&&($=!1,this._checkIsFinished(),this.parseChunk(M.shift()))}catch(we){this._streamError(we)}},this),this._streamError=K(function(ce){this._streamCleanUp(),this._sendError(ce)},this),this._streamEnd=K(function(){this._streamCleanUp(),re=!0,this._streamData("")},this),this._streamCleanUp=K(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function v(I){var M,$,re,ce,we=Math.pow(2,53),Ve=-we,Fe=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,yt=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Ee=this,se=0,te=0,he=!1,fe=!1,Me=[],ve={data:[],errors:[],meta:{}};function Qe(He){return I.skipEmptyLines==="greedy"?He.join("").trim()==="":He.length===1&&He[0].length===0}function it(){if(ve&&re&&(Wt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),re=!1),I.skipEmptyLines&&(ve.data=ve.data.filter(function(Te){return!Qe(Te)})),Ae()){let Te=function(_t,wt){G(I.transformHeader)&&(_t=I.transformHeader(_t,wt)),Me.push(_t)};var Pe=Te;if(ve)if(Array.isArray(ve.data[0])){for(var He=0;Ae()&&He<ve.data.length;He++)ve.data[He].forEach(Te);ve.data.splice(0,1)}else ve.data.forEach(Te)}function ie(Te,_t){for(var wt=I.header?{}:[],at=0;at<Te.length;at++){var nt=at,un=Te[at],un=((ht,Tt)=>(jt=>(I.dynamicTypingFunction&&I.dynamicTyping[jt]===void 0&&(I.dynamicTyping[jt]=I.dynamicTypingFunction(jt)),(I.dynamicTyping[jt]||I.dynamicTyping)===!0))(ht)?Tt==="true"||Tt==="TRUE"||Tt!=="false"&&Tt!=="FALSE"&&((jt=>{if(Fe.test(jt)&&(jt=parseFloat(jt),Ve<jt&&jt<we))return 1})(Tt)?parseFloat(Tt):yt.test(Tt)?new Date(Tt):Tt===""?null:Tt):Tt)(nt=I.header?at>=Me.length?"__parsed_extra":Me[at]:nt,un=I.transform?I.transform(un,nt):un);nt==="__parsed_extra"?(wt[nt]=wt[nt]||[],wt[nt].push(un)):wt[nt]=un}return I.header&&(at>Me.length?Wt("FieldMismatch","TooManyFields","Too many fields: expected "+Me.length+" fields but parsed "+at,te+_t):at<Me.length&&Wt("FieldMismatch","TooFewFields","Too few fields: expected "+Me.length+" fields but parsed "+at,te+_t)),wt}var ct;ve&&(I.header||I.dynamicTyping||I.transform)&&(ct=1,!ve.data.length||Array.isArray(ve.data[0])?(ve.data=ve.data.map(ie),ct=ve.data.length):ve.data=ie(ve.data,0),I.header&&ve.meta&&(ve.meta.fields=Me),te+=ct)}function Ae(){return I.header&&Me.length===0}function Wt(He,ie,ct,Pe){He={type:He,code:ie,message:ct},Pe!==void 0&&(He.row=Pe),ve.errors.push(He)}G(I.step)&&(ce=I.step,I.step=function(He){ve=He,Ae()?it():(it(),ve.data.length!==0&&(se+=He.data.length,I.preview&&se>I.preview?$.abort():(ve.data=ve.data[0],ce(ve,Ee))))}),this.parse=function(He,ie,ct){var Pe=I.quoteChar||'"',Pe=(I.newline||(I.newline=this.guessLineEndings(He,Pe)),re=!1,I.delimiter?G(I.delimiter)&&(I.delimiter=I.delimiter(He),ve.meta.delimiter=I.delimiter):((Pe=((Te,_t,wt,at,nt)=>{var un,ht,Tt,jt;nt=nt||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var vn=0;vn<nt.length;vn++){for(var Jn,Sr=nt[vn],nn=0,bn=0,Ot=0,Ht=(Tt=void 0,new H({comments:at,delimiter:Sr,newline:_t,preview:10}).parse(Te)),er=0;er<Ht.data.length;er++)wt&&Qe(Ht.data[er])?Ot++:(Jn=Ht.data[er].length,bn+=Jn,Tt===void 0?Tt=Jn:0<Jn&&(nn+=Math.abs(Jn-Tt),Tt=Jn));0<Ht.data.length&&(bn/=Ht.data.length-Ot),(ht===void 0||nn<=ht)&&(jt===void 0||jt<bn)&&1.99<bn&&(ht=nn,un=Sr,jt=bn)}return{successful:!!(I.delimiter=un),bestDelimiter:un}})(He,I.newline,I.skipEmptyLines,I.comments,I.delimitersToGuess)).successful?I.delimiter=Pe.bestDelimiter:(re=!0,I.delimiter=a.DefaultDelimiter),ve.meta.delimiter=I.delimiter),B(I));return I.preview&&I.header&&Pe.preview++,M=He,$=new H(Pe),ve=$.parse(M,ie,ct),it(),he?{meta:{paused:!0}}:ve||{meta:{paused:!1}}},this.paused=function(){return he},this.pause=function(){he=!0,$.abort(),M=G(I.chunk)?"":M.substring($.getCharIndex())},this.resume=function(){Ee.streamer._halted?(he=!1,Ee.streamer.parseChunk(M,!0)):setTimeout(Ee.resume,3)},this.aborted=function(){return fe},this.abort=function(){fe=!0,$.abort(),ve.meta.aborted=!0,G(I.complete)&&I.complete(ve),M=""},this.guessLineEndings=function(Te,Pe){Te=Te.substring(0,1048576);var Pe=new RegExp(E(Pe)+"([^]*?)"+E(Pe),"gm"),ct=(Te=Te.replace(Pe,"")).split("\r"),Pe=Te.split(`
`),Te=1<Pe.length&&Pe[0].length<ct[0].length;if(ct.length===1||Te)return`
`;for(var _t=0,wt=0;wt<ct.length;wt++)ct[wt][0]===`
`&&_t++;return _t>=ct.length/2?`\r
`:"\r"}}function E(I){return I.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function H(I){var M=(I=I||{}).delimiter,$=I.newline,re=I.comments,ce=I.step,we=I.preview,Ve=I.fastMode,Fe=null,yt=!1,Ee=I.quoteChar==null?'"':I.quoteChar,se=Ee;if(I.escapeChar!==void 0&&(se=I.escapeChar),(typeof M!="string"||-1<a.BAD_DELIMITERS.indexOf(M))&&(M=","),re===M)throw new Error("Comment character same as delimiter");re===!0?re="#":(typeof re!="string"||-1<a.BAD_DELIMITERS.indexOf(re))&&(re=!1),$!==`
`&&$!=="\r"&&$!==`\r
`&&($=`
`);var te=0,he=!1;this.parse=function(fe,Me,ve){if(typeof fe!="string")throw new Error("Input must be a string");var Qe=fe.length,it=M.length,Ae=$.length,Wt=re.length,He=G(ce),ie=[],ct=[],Pe=[],Te=te=0;if(!fe)return nn();if(Ve||Ve!==!1&&fe.indexOf(Ee)===-1){for(var _t=fe.split($),wt=0;wt<_t.length;wt++){if(Pe=_t[wt],te+=Pe.length,wt!==_t.length-1)te+=$.length;else if(ve)return nn();if(!re||Pe.substring(0,Wt)!==re){if(He){if(ie=[],jt(Pe.split(M)),bn(),he)return nn()}else jt(Pe.split(M));if(we&&we<=wt)return ie=ie.slice(0,we),nn(!0)}}return nn()}for(var at=fe.indexOf(M,te),nt=fe.indexOf($,te),un=new RegExp(E(se)+E(Ee),"g"),ht=fe.indexOf(Ee,te);;)if(fe[te]===Ee)for(ht=te,te++;;){if((ht=fe.indexOf(Ee,ht+1))===-1)return ve||ct.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ie.length,index:te}),Jn();if(ht===Qe-1)return Jn(fe.substring(te,ht).replace(un,Ee));if(Ee===se&&fe[ht+1]===se)ht++;else if(Ee===se||ht===0||fe[ht-1]!==se){at!==-1&&at<ht+1&&(at=fe.indexOf(M,ht+1));var Tt=vn((nt=nt!==-1&&nt<ht+1?fe.indexOf($,ht+1):nt)===-1?at:Math.min(at,nt));if(fe.substr(ht+1+Tt,it)===M){Pe.push(fe.substring(te,ht).replace(un,Ee)),fe[te=ht+1+Tt+it]!==Ee&&(ht=fe.indexOf(Ee,te)),at=fe.indexOf(M,te),nt=fe.indexOf($,te);break}if(Tt=vn(nt),fe.substring(ht+1+Tt,ht+1+Tt+Ae)===$){if(Pe.push(fe.substring(te,ht).replace(un,Ee)),Sr(ht+1+Tt+Ae),at=fe.indexOf(M,te),ht=fe.indexOf(Ee,te),He&&(bn(),he))return nn();if(we&&ie.length>=we)return nn(!0);break}ct.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ie.length,index:te}),ht++}}else if(re&&Pe.length===0&&fe.substring(te,te+Wt)===re){if(nt===-1)return nn();te=nt+Ae,nt=fe.indexOf($,te),at=fe.indexOf(M,te)}else if(at!==-1&&(at<nt||nt===-1))Pe.push(fe.substring(te,at)),te=at+it,at=fe.indexOf(M,te);else{if(nt===-1)break;if(Pe.push(fe.substring(te,nt)),Sr(nt+Ae),He&&(bn(),he))return nn();if(we&&ie.length>=we)return nn(!0)}return Jn();function jt(Ot){ie.push(Ot),Te=te}function vn(Ot){var Ht=0;return Ht=Ot!==-1&&(Ot=fe.substring(ht+1,Ot))&&Ot.trim()===""?Ot.length:Ht}function Jn(Ot){return ve||(Ot===void 0&&(Ot=fe.substring(te)),Pe.push(Ot),te=Qe,jt(Pe),He&&bn()),nn()}function Sr(Ot){te=Ot,jt(Pe),Pe=[],nt=fe.indexOf($,te)}function nn(Ot){if(I.header&&!Me&&ie.length&&!yt){var Ht=ie[0],er=Object.create(null),ui=new Set(Ht);let is=!1;for(let Er=0;Er<Ht.length;Er++){let dn=Ht[Er];if(er[dn=G(I.transformHeader)?I.transformHeader(dn,Er):dn]){let Ur,os=er[dn];for(;Ur=dn+"_"+os,os++,ui.has(Ur););ui.add(Ur),Ht[Er]=Ur,er[dn]++,is=!0,(Fe=Fe===null?{}:Fe)[Ur]=dn}else er[dn]=1,Ht[Er]=dn;ui.add(dn)}is&&console.warn("Duplicate headers found and renamed."),yt=!0}return{data:ie,errors:ct,meta:{delimiter:M,linebreak:$,aborted:he,truncated:!!Ot,cursor:Te+(Me||0),renamedHeaders:Fe}}}function bn(){ce(nn()),ie=[],ct=[]}},this.abort=function(){he=!0},this.getCharIndex=function(){return te}}function W(I){var M=I.data,$=o[M.workerId],re=!1;if(M.error)$.userError(M.error,M.file);else if(M.results&&M.results.data){var ce={abort:function(){re=!0,oe(M.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:T,resume:T};if(G($.userStep)){for(var we=0;we<M.results.data.length&&($.userStep({data:M.results.data[we],errors:M.results.errors,meta:M.results.meta},ce),!re);we++);delete M.results}else G($.userChunk)&&($.userChunk(M.results,ce,M.file),delete M.results)}M.finished&&!re&&oe(M.workerId,M.results)}function oe(I,M){var $=o[I];G($.userComplete)&&$.userComplete(M),$.terminate(),delete o[I]}function T(){throw new Error("Not implemented.")}function B(I){if(typeof I!="object"||I===null)return I;var M,$=Array.isArray(I)?[]:{};for(M in I)$[M]=B(I[M]);return $}function K(I,M){return function(){I.apply(M,arguments)}}function G(I){return typeof I=="function"}return a.parse=function(I,M){var $=(M=M||{}).dynamicTyping||!1;if(G($)&&(M.dynamicTypingFunction=$,$={}),M.dynamicTyping=$,M.transform=!!G(M.transform)&&M.transform,!M.worker||!a.WORKERS_SUPPORTED)return $=null,a.NODE_STREAM_INPUT,typeof I=="string"?(I=(re=>re.charCodeAt(0)!==65279?re:re.slice(1))(I),$=new(M.download?d:g)(M)):I.readable===!0&&G(I.read)&&G(I.on)?$=new b(M):(e.File&&I instanceof File||I instanceof Object)&&($=new h(M)),$.stream(I);($=(()=>{var re;return!!a.WORKERS_SUPPORTED&&(re=(()=>{var ce=e.URL||e.webkitURL||null,we=n.toString();return a.BLOB_URL||(a.BLOB_URL=ce.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",we,")();"],{type:"text/javascript"})))})(),(re=new e.Worker(re)).onmessage=W,re.id=s++,o[re.id]=re)})()).userStep=M.step,$.userChunk=M.chunk,$.userComplete=M.complete,$.userError=M.error,M.step=G(M.step),M.chunk=G(M.chunk),M.complete=G(M.complete),M.error=G(M.error),delete M.worker,$.postMessage({input:I,config:M,workerId:$.id})},a.unparse=function(I,M){var $=!1,re=!0,ce=",",we=`\r
`,Ve='"',Fe=Ve+Ve,yt=!1,Ee=null,se=!1,te=((()=>{if(typeof M=="object"){if(typeof M.delimiter!="string"||a.BAD_DELIMITERS.filter(function(Me){return M.delimiter.indexOf(Me)!==-1}).length||(ce=M.delimiter),typeof M.quotes!="boolean"&&typeof M.quotes!="function"&&!Array.isArray(M.quotes)||($=M.quotes),typeof M.skipEmptyLines!="boolean"&&typeof M.skipEmptyLines!="string"||(yt=M.skipEmptyLines),typeof M.newline=="string"&&(we=M.newline),typeof M.quoteChar=="string"&&(Ve=M.quoteChar),typeof M.header=="boolean"&&(re=M.header),Array.isArray(M.columns)){if(M.columns.length===0)throw new Error("Option columns is empty");Ee=M.columns}M.escapeChar!==void 0&&(Fe=M.escapeChar+Ve),M.escapeFormulae instanceof RegExp?se=M.escapeFormulae:typeof M.escapeFormulae=="boolean"&&M.escapeFormulae&&(se=/^[=+\-@\t\r].*$/)}})(),new RegExp(E(Ve),"g"));if(typeof I=="string"&&(I=JSON.parse(I)),Array.isArray(I)){if(!I.length||Array.isArray(I[0]))return he(null,I,yt);if(typeof I[0]=="object")return he(Ee||Object.keys(I[0]),I,yt)}else if(typeof I=="object")return typeof I.data=="string"&&(I.data=JSON.parse(I.data)),Array.isArray(I.data)&&(I.fields||(I.fields=I.meta&&I.meta.fields||Ee),I.fields||(I.fields=Array.isArray(I.data[0])?I.fields:typeof I.data[0]=="object"?Object.keys(I.data[0]):[]),Array.isArray(I.data[0])||typeof I.data[0]=="object"||(I.data=[I.data])),he(I.fields||[],I.data||[],yt);throw new Error("Unable to serialize unrecognized input");function he(Me,ve,Qe){var it="",Ae=(typeof Me=="string"&&(Me=JSON.parse(Me)),typeof ve=="string"&&(ve=JSON.parse(ve)),Array.isArray(Me)&&0<Me.length),Wt=!Array.isArray(ve[0]);if(Ae&&re){for(var He=0;He<Me.length;He++)0<He&&(it+=ce),it+=fe(Me[He],He);0<ve.length&&(it+=we)}for(var ie=0;ie<ve.length;ie++){var ct=(Ae?Me:ve[ie]).length,Pe=!1,Te=Ae?Object.keys(ve[ie]).length===0:ve[ie].length===0;if(Qe&&!Ae&&(Pe=Qe==="greedy"?ve[ie].join("").trim()==="":ve[ie].length===1&&ve[ie][0].length===0),Qe==="greedy"&&Ae){for(var _t=[],wt=0;wt<ct;wt++){var at=Wt?Me[wt]:wt;_t.push(ve[ie][at])}Pe=_t.join("").trim()===""}if(!Pe){for(var nt=0;nt<ct;nt++){0<nt&&!Te&&(it+=ce);var un=Ae&&Wt?Me[nt]:nt;it+=fe(ve[ie][un],nt)}ie<ve.length-1&&(!Qe||0<ct&&!Te)&&(it+=we)}}return it}function fe(Me,ve){var Qe,it;return Me==null?"":Me.constructor===Date?JSON.stringify(Me).slice(1,25):(it=!1,se&&typeof Me=="string"&&se.test(Me)&&(Me="'"+Me,it=!0),Qe=Me.toString().replace(te,Fe),(it=it||$===!0||typeof $=="function"&&$(Me,ve)||Array.isArray($)&&$[ve]||((Ae,Wt)=>{for(var He=0;He<Wt.length;He++)if(-1<Ae.indexOf(Wt[He]))return!0;return!1})(Qe,a.BAD_DELIMITERS)||-1<Qe.indexOf(ce)||Qe.charAt(0)===" "||Qe.charAt(Qe.length-1)===" ")?Ve+Qe+Ve:Qe)}},a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!r&&!!e.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=H,a.ParserHandle=v,a.NetworkStreamer=d,a.FileStreamer=h,a.StringStreamer=g,a.ReadableStreamStreamer=b,e.jQuery&&((t=e.jQuery).fn.parse=function(I){var M=I.config||{},$=[];return this.each(function(we){if(!(t(this).prop("tagName").toUpperCase()==="INPUT"&&t(this).attr("type").toLowerCase()==="file"&&e.FileReader)||!this.files||this.files.length===0)return!0;for(var Ve=0;Ve<this.files.length;Ve++)$.push({file:this.files[Ve],inputElem:this,instanceConfig:t.extend({},M)})}),re(),this;function re(){if($.length===0)G(I.complete)&&I.complete();else{var we,Ve,Fe,yt,Ee=$[0];if(G(I.before)){var se=I.before(Ee.file,Ee.inputElem);if(typeof se=="object"){if(se.action==="abort")return we="AbortError",Ve=Ee.file,Fe=Ee.inputElem,yt=se.reason,void(G(I.error)&&I.error({name:we},Ve,Fe,yt));if(se.action==="skip")return void ce();typeof se.config=="object"&&(Ee.instanceConfig=t.extend(Ee.instanceConfig,se.config))}else if(se==="skip")return void ce()}var te=Ee.instanceConfig.complete;Ee.instanceConfig.complete=function(he){G(te)&&te(he,Ee.file,Ee.inputElem),ce()},a.parse(Ee.file,Ee.instanceConfig)}}function ce(){$.splice(0,1),re()}}),i&&(e.onmessage=function(I){I=I.data,a.WORKER_ID===void 0&&I&&(a.WORKER_ID=I.workerId),typeof I.input=="string"?e.postMessage({workerId:a.WORKER_ID,results:a.parse(I.input,I.config),finished:!0}):(e.File&&I.input instanceof File||I.input instanceof Object)&&(I=a.parse(I.input,I.config))&&e.postMessage({workerId:a.WORKER_ID,results:I,finished:!0})}),(d.prototype=Object.create(c.prototype)).constructor=d,(h.prototype=Object.create(c.prototype)).constructor=h,(g.prototype=Object.create(g.prototype)).constructor=g,(b.prototype=Object.create(c.prototype)).constructor=b,a})});var zE=z_((Fy,Ly)=>{"use strict";(function(n,e){typeof Fy=="object"&&typeof Ly<"u"?Ly.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self).Dexie=e()})(Fy,function(){"use strict";var n=function(l,u){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(f[m]=p[m])})(l,u)},e=function(){return(e=Object.assign||function(l){for(var u,f=1,p=arguments.length;f<p;f++)for(var m in u=arguments[f])Object.prototype.hasOwnProperty.call(u,m)&&(l[m]=u[m]);return l}).apply(this,arguments)};function t(l,u,f){if(f||arguments.length===2)for(var p,m=0,y=u.length;m<y;m++)!p&&m in u||((p=p||Array.prototype.slice.call(u,0,m))[m]=u[m]);return l.concat(p||Array.prototype.slice.call(u))}var r=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,i=Object.keys,o=Array.isArray;function s(l,u){return typeof u!="object"||i(u).forEach(function(f){l[f]=u[f]}),l}typeof Promise>"u"||r.Promise||(r.Promise=Promise);var a=Object.getPrototypeOf,c={}.hasOwnProperty;function d(l,u){return c.call(l,u)}function h(l,u){typeof u=="function"&&(u=u(a(l))),(typeof Reflect>"u"?i:Reflect.ownKeys)(u).forEach(function(f){b(l,f,u[f])})}var g=Object.defineProperty;function b(l,u,f,p){g(l,u,s(f&&d(f,"get")&&typeof f.get=="function"?{get:f.get,set:f.set,configurable:!0}:{value:f,configurable:!0,writable:!0},p))}function v(l){return{from:function(u){return l.prototype=Object.create(u.prototype),b(l.prototype,"constructor",l),{extend:h.bind(null,l.prototype)}}}}var E=Object.getOwnPropertyDescriptor,H=[].slice;function W(l,u,f){return H.call(l,u,f)}function oe(l,u){return u(l)}function T(l){if(!l)throw new Error("Assertion Failed")}function B(l){r.setImmediate?setImmediate(l):setTimeout(l,0)}function K(l,u){if(typeof u=="string"&&d(l,u))return l[u];if(!u)return l;if(typeof u!="string"){for(var f=[],p=0,m=u.length;p<m;++p){var y=K(l,u[p]);f.push(y)}return f}var C=u.indexOf(".");if(C!==-1){var x=l[u.substr(0,C)];return x==null?void 0:K(x,u.substr(C+1))}}function G(l,u,f){if(l&&u!==void 0&&!("isFrozen"in Object&&Object.isFrozen(l)))if(typeof u!="string"&&"length"in u){T(typeof f!="string"&&"length"in f);for(var p=0,m=u.length;p<m;++p)G(l,u[p],f[p])}else{var y,C,x=u.indexOf(".");x!==-1?(y=u.substr(0,x),(C=u.substr(x+1))===""?f===void 0?o(l)&&!isNaN(parseInt(y))?l.splice(y,1):delete l[y]:l[y]=f:G(x=!(x=l[y])||!d(l,y)?l[y]={}:x,C,f)):f===void 0?o(l)&&!isNaN(parseInt(u))?l.splice(u,1):delete l[u]:l[u]=f}}function I(l){var u,f={};for(u in l)d(l,u)&&(f[u]=l[u]);return f}var M=[].concat;function $(l){return M.apply([],l)}var Ot="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat($([8,16,32,64].map(function(l){return["Int","Uint","Float"].map(function(u){return u+l+"Array"})}))).filter(function(l){return r[l]}),re=new Set(Ot.map(function(l){return r[l]})),ce=null;function we(l){return ce=new WeakMap,l=function u(f){if(!f||typeof f!="object")return f;var p=ce.get(f);if(p)return p;if(o(f)){p=[],ce.set(f,p);for(var m=0,y=f.length;m<y;++m)p.push(u(f[m]))}else if(re.has(f.constructor))p=f;else{var C,x=a(f);for(C in p=x===Object.prototype?{}:Object.create(x),ce.set(f,p),f)d(f,C)&&(p[C]=u(f[C]))}return p}(l),ce=null,l}var Ve={}.toString;function Fe(l){return Ve.call(l).slice(8,-1)}var yt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ee=typeof yt=="symbol"?function(l){var u;return l!=null&&(u=l[yt])&&u.apply(l)}:function(){return null};function se(l,u){return u=l.indexOf(u),0<=u&&l.splice(u,1),0<=u}var te={};function he(l){var u,f,p,m;if(arguments.length===1){if(o(l))return l.slice();if(this===te&&typeof l=="string")return[l];if(m=Ee(l)){for(f=[];!(p=m.next()).done;)f.push(p.value);return f}if(l==null)return[l];if(typeof(u=l.length)!="number")return[l];for(f=new Array(u);u--;)f[u]=l[u];return f}for(u=arguments.length,f=new Array(u);u--;)f[u]=arguments[u];return f}var fe=typeof Symbol<"u"?function(l){return l[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},bn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],fr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(bn),Me={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ve(l,u){this.name=l,this.message=u}function Qe(l,u){return l+". Errors: "+Object.keys(u).map(function(f){return u[f].toString()}).filter(function(f,p,m){return m.indexOf(f)===p}).join(`
`)}function it(l,u,f,p){this.failures=u,this.failedKeys=p,this.successCount=f,this.message=Qe(l,u)}function Ae(l,u){this.name="BulkError",this.failures=Object.keys(u).map(function(f){return u[f]}),this.failuresByPos=u,this.message=Qe(l,this.failures)}v(ve).from(Error).extend({toString:function(){return this.name+": "+this.message}}),v(it).from(ve),v(Ae).from(ve);var Wt=fr.reduce(function(l,u){return l[u]=u+"Error",l},{}),He=ve,ie=fr.reduce(function(l,u){var f=u+"Error";function p(m,y){this.name=f,m?typeof m=="string"?(this.message="".concat(m).concat(y?`
 `+y:""),this.inner=y||null):typeof m=="object"&&(this.message="".concat(m.name," ").concat(m.message),this.inner=m):(this.message=Me[u]||f,this.inner=null)}return v(p).from(He),l[u]=p,l},{});ie.Syntax=SyntaxError,ie.Type=TypeError,ie.Range=RangeError;var ct=bn.reduce(function(l,u){return l[u+"Error"]=ie[u],l},{}),Pe=fr.reduce(function(l,u){return["Syntax","Type","Range"].indexOf(u)===-1&&(l[u+"Error"]=ie[u]),l},{});function Te(){}function _t(l){return l}function wt(l,u){return l==null||l===_t?u:function(f){return u(l(f))}}function at(l,u){return function(){l.apply(this,arguments),u.apply(this,arguments)}}function nt(l,u){return l===Te?u:function(){var f=l.apply(this,arguments);f!==void 0&&(arguments[0]=f);var p=this.onsuccess,m=this.onerror;this.onsuccess=null,this.onerror=null;var y=u.apply(this,arguments);return p&&(this.onsuccess=this.onsuccess?at(p,this.onsuccess):p),m&&(this.onerror=this.onerror?at(m,this.onerror):m),y!==void 0?y:f}}function un(l,u){return l===Te?u:function(){l.apply(this,arguments);var f=this.onsuccess,p=this.onerror;this.onsuccess=this.onerror=null,u.apply(this,arguments),f&&(this.onsuccess=this.onsuccess?at(f,this.onsuccess):f),p&&(this.onerror=this.onerror?at(p,this.onerror):p)}}function ht(l,u){return l===Te?u:function(f){var p=l.apply(this,arguments);s(f,p);var m=this.onsuccess,y=this.onerror;return this.onsuccess=null,this.onerror=null,f=u.apply(this,arguments),m&&(this.onsuccess=this.onsuccess?at(m,this.onsuccess):m),y&&(this.onerror=this.onerror?at(y,this.onerror):y),p===void 0?f===void 0?void 0:f:s(p,f)}}function Tt(l,u){return l===Te?u:function(){return u.apply(this,arguments)!==!1&&l.apply(this,arguments)}}function jt(l,u){return l===Te?u:function(){var f=l.apply(this,arguments);if(f&&typeof f.then=="function"){for(var p=this,m=arguments.length,y=new Array(m);m--;)y[m]=arguments[m];return f.then(function(){return u.apply(p,y)})}return u.apply(this,arguments)}}Pe.ModifyError=it,Pe.DexieError=ve,Pe.BulkError=Ae;var vn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Jn(l){vn=l}var Sr={},nn=100,Ot=typeof Promise>"u"?[]:function(){var l=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[l,a(l),l];var u=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[u,a(u),l]}(),bn=Ot[0],fr=Ot[1],Ot=Ot[2],fr=fr&&fr.then,Ht=bn&&bn.constructor,er=!!Ot,ui=function(l,u){Ia.push([l,u]),Er&&(queueMicrotask(Ax),Er=!1)},is=!0,Er=!0,dn=[],Ur=[],os=_t,Ti={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Te,pgp:!1,env:{},finalize:Te},Oe=Ti,Ia=[],io=0,mc=[];function De(l){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var u=this._PSD=Oe;if(typeof l!="function"){if(l!==Sr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Ih(this,this._value))}this._state=null,this._value=null,++u.ref,function f(p,m){try{m(function(y){if(p._state===null){if(y===p)throw new TypeError("A promise cannot be resolved with itself.");var C=p._lib&&ss();y&&typeof y.then=="function"?f(p,function(x,O){y instanceof De?y._then(x,O):y.then(x,O)}):(p._state=!0,p._value=y,s_(p)),C&&as()}},Ih.bind(null,p))}catch(y){Ih(p,y)}}(this,l)}var xh={get:function(){var l=Oe,u=Dc;function f(p,m){var y=this,C=!l.global&&(l!==Oe||u!==Dc),x=C&&!Ai(),O=new De(function(A,L){Mh(y,new o_(l_(p,l,C,x),l_(m,l,C,x),A,L,l))});return this._consoleTask&&(O._consoleTask=this._consoleTask),O}return f.prototype=Sr,f},set:function(l){b(this,"then",l&&l.prototype===Sr?xh:{get:function(){return l},set:xh.set})}};function o_(l,u,f,p,m){this.onFulfilled=typeof l=="function"?l:null,this.onRejected=typeof u=="function"?u:null,this.resolve=f,this.reject=p,this.psd=m}function Ih(l,u){var f,p;Ur.push(u),l._state===null&&(f=l._lib&&ss(),u=os(u),l._state=!1,l._value=u,p=l,dn.some(function(m){return m._value===p._value})||dn.push(p),s_(l),f&&as())}function s_(l){var u=l._listeners;l._listeners=[];for(var f=0,p=u.length;f<p;++f)Mh(l,u[f]);var m=l._PSD;--m.ref||m.finalize(),io===0&&(++io,ui(function(){--io==0&&Rh()},[]))}function Mh(l,u){if(l._state!==null){var f=l._state?u.onFulfilled:u.onRejected;if(f===null)return(l._state?u.resolve:u.reject)(l._value);++u.psd.ref,++io,ui(Ox,[f,l,u])}else l._listeners.push(u)}function Ox(l,u,f){try{var p,m=u._value;!u._state&&Ur.length&&(Ur=[]),p=vn&&u._consoleTask?u._consoleTask.run(function(){return l(m)}):l(m),u._state||Ur.indexOf(m)!==-1||function(y){for(var C=dn.length;C;)if(dn[--C]._value===y._value)return dn.splice(C,1)}(u),f.resolve(p)}catch(y){f.reject(y)}finally{--io==0&&Rh(),--f.psd.ref||f.psd.finalize()}}function Ax(){oo(Ti,function(){ss()&&as()})}function ss(){var l=is;return Er=is=!1,l}function as(){var l,u,f;do for(;0<Ia.length;)for(l=Ia,Ia=[],f=l.length,u=0;u<f;++u){var p=l[u];p[0].apply(null,p[1])}while(0<Ia.length);Er=is=!0}function Rh(){var l=dn;dn=[],l.forEach(function(p){p._PSD.onunhandled.call(null,p._value,p)});for(var u=mc.slice(0),f=u.length;f;)u[--f]()}function vc(l){return new De(Sr,!1,l)}function Lt(l,u){var f=Oe;return function(){var p=ss(),m=Oe;try{return Pi(f,!0),l.apply(this,arguments)}catch(y){u&&u(y)}finally{Pi(m,!1),p&&as()}}}h(De.prototype,{then:xh,_then:function(l,u){Mh(this,new o_(null,null,l,u,Oe))},catch:function(l){if(arguments.length===1)return this.then(null,l);var u=l,f=arguments[1];return typeof u=="function"?this.then(null,function(p){return(p instanceof u?f:vc)(p)}):this.then(null,function(p){return(p&&p.name===u?f:vc)(p)})},finally:function(l){return this.then(function(u){return De.resolve(l()).then(function(){return u})},function(u){return De.resolve(l()).then(function(){return vc(u)})})},timeout:function(l,u){var f=this;return l<1/0?new De(function(p,m){var y=setTimeout(function(){return m(new ie.Timeout(u))},l);f.then(p,m).finally(clearTimeout.bind(null,y))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&b(De.prototype,Symbol.toStringTag,"Dexie.Promise"),Ti.env=a_(),h(De,{all:function(){var l=he.apply(null,arguments).map(bc);return new De(function(u,f){l.length===0&&u([]);var p=l.length;l.forEach(function(m,y){return De.resolve(m).then(function(C){l[y]=C,--p||u(l)},f)})})},resolve:function(l){return l instanceof De?l:l&&typeof l.then=="function"?new De(function(u,f){l.then(u,f)}):new De(Sr,!0,l)},reject:vc,race:function(){var l=he.apply(null,arguments).map(bc);return new De(function(u,f){l.map(function(p){return De.resolve(p).then(u,f)})})},PSD:{get:function(){return Oe},set:function(l){return Oe=l}},totalEchoes:{get:function(){return Dc}},newPSD:Oi,usePSD:oo,scheduler:{get:function(){return ui},set:function(l){ui=l}},rejectionMapper:{get:function(){return os},set:function(l){os=l}},follow:function(l,u){return new De(function(f,p){return Oi(function(m,y){var C=Oe;C.unhandleds=[],C.onunhandled=y,C.finalize=at(function(){var x,O=this;x=function(){O.unhandleds.length===0?m():y(O.unhandleds[0])},mc.push(function A(){x(),mc.splice(mc.indexOf(A),1)}),++io,ui(function(){--io==0&&Rh()},[])},C.finalize),l()},u,f,p)})}}),Ht&&(Ht.allSettled&&b(De,"allSettled",function(){var l=he.apply(null,arguments).map(bc);return new De(function(u){l.length===0&&u([]);var f=l.length,p=new Array(f);l.forEach(function(m,y){return De.resolve(m).then(function(C){return p[y]={status:"fulfilled",value:C}},function(C){return p[y]={status:"rejected",reason:C}}).then(function(){return--f||u(p)})})})}),Ht.any&&typeof AggregateError<"u"&&b(De,"any",function(){var l=he.apply(null,arguments).map(bc);return new De(function(u,f){l.length===0&&f(new AggregateError([]));var p=l.length,m=new Array(p);l.forEach(function(y,C){return De.resolve(y).then(function(x){return u(x)},function(x){m[C]=x,--p||f(new AggregateError(m))})})})}),Ht.withResolvers&&(De.withResolvers=Ht.withResolvers));var fn={awaits:0,echoes:0,id:0},Px=0,yc=[],_c=0,Dc=0,kx=0;function Oi(l,u,f,p){var m=Oe,y=Object.create(m);return y.parent=m,y.ref=0,y.global=!1,y.id=++kx,Ti.env,y.env=er?{Promise:De,PromiseProp:{value:De,configurable:!0,writable:!0},all:De.all,race:De.race,allSettled:De.allSettled,any:De.any,resolve:De.resolve,reject:De.reject}:{},u&&s(y,u),++m.ref,y.finalize=function(){--this.parent.ref||this.parent.finalize()},p=oo(y,l,f,p),y.ref===0&&y.finalize(),p}function ls(){return fn.id||(fn.id=++Px),++fn.awaits,fn.echoes+=nn,fn.id}function Ai(){return!!fn.awaits&&(--fn.awaits==0&&(fn.id=0),fn.echoes=fn.awaits*nn,!0)}function bc(l){return fn.echoes&&l&&l.constructor===Ht?(ls(),l.then(function(u){return Ai(),u},function(u){return Ai(),Gt(u)})):l}function Nx(){var l=yc[yc.length-1];yc.pop(),Pi(l,!1)}function Pi(l,u){var f,p=Oe;(u?!fn.echoes||_c++&&l===Oe:!_c||--_c&&l===Oe)||queueMicrotask(u?function(m){++Dc,fn.echoes&&--fn.echoes!=0||(fn.echoes=fn.awaits=fn.id=0),yc.push(Oe),Pi(m,!0)}.bind(null,l):Nx),l!==Oe&&(Oe=l,p===Ti&&(Ti.env=a_()),er&&(f=Ti.env.Promise,u=l.env,(p.global||l.global)&&(Object.defineProperty(r,"Promise",u.PromiseProp),f.all=u.all,f.race=u.race,f.resolve=u.resolve,f.reject=u.reject,u.allSettled&&(f.allSettled=u.allSettled),u.any&&(f.any=u.any))))}function a_(){var l=r.Promise;return er?{Promise:l,PromiseProp:Object.getOwnPropertyDescriptor(r,"Promise"),all:l.all,race:l.race,allSettled:l.allSettled,any:l.any,resolve:l.resolve,reject:l.reject}:{}}function oo(l,u,f,p,m){var y=Oe;try{return Pi(l,!0),u(f,p,m)}finally{Pi(y,!1)}}function l_(l,u,f,p){return typeof l!="function"?l:function(){var m=Oe;f&&ls(),Pi(u,!0);try{return l.apply(this,arguments)}finally{Pi(m,!1),p&&queueMicrotask(Ai)}}}function Th(l){Promise===Ht&&fn.echoes===0?_c===0?l():enqueueNativeMicroTask(l):setTimeout(l,0)}(""+fr).indexOf("[native code]")===-1&&(ls=Ai=Te);var Gt=De.reject,so="\uFFFF",di="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",c_="String expected.",cs=[],wc="__dbnames",Oh="readonly",Ah="readwrite";function ao(l,u){return l?u?function(){return l.apply(this,arguments)&&u.apply(this,arguments)}:l:u}var u_={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Cc(l){return typeof l!="string"||/\./.test(l)?function(u){return u}:function(u){return u[l]===void 0&&l in u&&delete(u=we(u))[l],u}}function d_(){throw ie.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ut(l,u){try{var f=f_(l),p=f_(u);if(f!==p)return f==="Array"?1:p==="Array"?-1:f==="binary"?1:p==="binary"?-1:f==="string"?1:p==="string"?-1:f==="Date"?1:p!=="Date"?NaN:-1;switch(f){case"number":case"Date":case"string":return u<l?1:l<u?-1:0;case"binary":return function(m,y){for(var C=m.length,x=y.length,O=C<x?C:x,A=0;A<O;++A)if(m[A]!==y[A])return m[A]<y[A]?-1:1;return C===x?0:C<x?-1:1}(h_(l),h_(u));case"Array":return function(m,y){for(var C=m.length,x=y.length,O=C<x?C:x,A=0;A<O;++A){var L=ut(m[A],y[A]);if(L!==0)return L}return C===x?0:C<x?-1:1}(l,u)}}catch{}return NaN}function f_(l){var u=typeof l;return u!="object"?u:ArrayBuffer.isView(l)?"binary":(l=Fe(l),l==="ArrayBuffer"?"binary":l)}function h_(l){return l instanceof Uint8Array?l:ArrayBuffer.isView(l)?new Uint8Array(l.buffer,l.byteOffset,l.byteLength):new Uint8Array(l)}function Sc(l,u,f){var p=l.schema.yProps;return p?(u&&0<f.numFailures&&(u=u.filter(function(m,y){return!f.failures[y]})),Promise.all(p.map(function(m){return m=m.updatesTable,u?l.db.table(m).where("k").anyOf(u).delete():l.db.table(m).clear()})).then(function(){return f})):f}var Ma=(p_.prototype.execute=function(l){var u=this["@@propmod"];if(u.add!==void 0){var f=u.add;if(o(f))return t(t([],o(l)?l:[],!0),f,!0).sort();if(typeof f=="number")return(Number(l)||0)+f;if(typeof f=="bigint")try{return BigInt(l)+f}catch{return BigInt(0)+f}throw new TypeError("Invalid term ".concat(f))}if(u.remove!==void 0){var p=u.remove;if(o(p))return o(l)?l.filter(function(m){return!p.includes(m)}).sort():[];if(typeof p=="number")return Number(l)-p;if(typeof p=="bigint")try{return BigInt(l)-p}catch{return BigInt(0)-p}throw new TypeError("Invalid subtrahend ".concat(p))}return f=(f=u.replacePrefix)===null||f===void 0?void 0:f[0],f&&typeof l=="string"&&l.startsWith(f)?u.replacePrefix[1]+l.substring(f.length):l},p_);function p_(l){this["@@propmod"]=l}function g_(l,u){for(var f=i(u),p=f.length,m=!1,y=0;y<p;++y){var C=f[y],x=u[C],O=K(l,C);x instanceof Ma?(G(l,C,x.execute(O)),m=!0):O!==x&&(G(l,C,x),m=!0)}return m}var m_=(At.prototype._trans=function(l,u,f){var p=this._tx||Oe.trans,m=this.name,y=vn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(l==="readonly"?"read":"write"," ").concat(this.name));function C(A,L,R){if(!R.schema[m])throw new ie.NotFound("Table "+m+" not part of transaction");return u(R.idbtrans,R)}var x=ss();try{var O=p&&p.db._novip===this.db._novip?p===Oe.trans?p._promise(l,C,f):Oi(function(){return p._promise(l,C,f)},{trans:p,transless:Oe.transless||Oe}):function A(L,R,j,P){if(L.idbdb&&(L._state.openComplete||Oe.letThrough||L._vip)){var N=L._createTransaction(R,j,L._dbSchema);try{N.create(),L._state.PR1398_maxLoop=3}catch(F){return F.name===Wt.InvalidState&&L.isOpen()&&0<--L._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),L.close({disableAutoOpen:!1}),L.open().then(function(){return A(L,R,j,P)})):Gt(F)}return N._promise(R,function(F,V){return Oi(function(){return Oe.trans=N,P(F,V,N)})}).then(function(F){if(R==="readwrite")try{N.idbtrans.commit()}catch{}return R==="readonly"?F:N._completion.then(function(){return F})})}if(L._state.openComplete)return Gt(new ie.DatabaseClosed(L._state.dbOpenError));if(!L._state.isBeingOpened){if(!L._state.autoOpen)return Gt(new ie.DatabaseClosed);L.open().catch(Te)}return L._state.dbReadyPromise.then(function(){return A(L,R,j,P)})}(this.db,l,[this.name],C);return y&&(O._consoleTask=y,O=O.catch(function(A){return console.trace(A),Gt(A)})),O}finally{x&&as()}},At.prototype.get=function(l,u){var f=this;return l&&l.constructor===Object?this.where(l).first(u):l==null?Gt(new ie.Type("Invalid argument to Table.get()")):this._trans("readonly",function(p){return f.core.get({trans:p,key:l}).then(function(m){return f.hook.reading.fire(m)})}).then(u)},At.prototype.where=function(l){if(typeof l=="string")return new this.db.WhereClause(this,l);if(o(l))return new this.db.WhereClause(this,"[".concat(l.join("+"),"]"));var u=i(l);if(u.length===1)return this.where(u[0]).equals(l[u[0]]);var f=this.schema.indexes.concat(this.schema.primKey).filter(function(x){if(x.compound&&u.every(function(A){return 0<=x.keyPath.indexOf(A)})){for(var O=0;O<u.length;++O)if(u.indexOf(x.keyPath[O])===-1)return!1;return!0}return!1}).sort(function(x,O){return x.keyPath.length-O.keyPath.length})[0];if(f&&this.db._maxKey!==so){var y=f.keyPath.slice(0,u.length);return this.where(y).equals(y.map(function(O){return l[O]}))}!f&&vn&&console.warn("The query ".concat(JSON.stringify(l)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(u.join("+"),"]"));var p=this.schema.idxByName;function m(x,O){return ut(x,O)===0}var C=u.reduce(function(R,O){var A=R[0],L=R[1],R=p[O],j=l[O];return[A||R,A||!R?ao(L,R&&R.multi?function(P){return P=K(P,O),o(P)&&P.some(function(N){return m(j,N)})}:function(P){return m(j,K(P,O))}):L]},[null,null]),y=C[0],C=C[1];return y?this.where(y.name).equals(l[y.keyPath]).filter(C):f?this.filter(C):this.where(u).equals("")},At.prototype.filter=function(l){return this.toCollection().and(l)},At.prototype.count=function(l){return this.toCollection().count(l)},At.prototype.offset=function(l){return this.toCollection().offset(l)},At.prototype.limit=function(l){return this.toCollection().limit(l)},At.prototype.each=function(l){return this.toCollection().each(l)},At.prototype.toArray=function(l){return this.toCollection().toArray(l)},At.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},At.prototype.orderBy=function(l){return new this.db.Collection(new this.db.WhereClause(this,o(l)?"[".concat(l.join("+"),"]"):l))},At.prototype.reverse=function(){return this.toCollection().reverse()},At.prototype.mapToClass=function(l){var u,f=this.db,p=this.name;function m(){return u!==null&&u.apply(this,arguments)||this}(this.schema.mappedClass=l).prototype instanceof d_&&(function(O,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function L(){this.constructor=O}n(O,A),O.prototype=A===null?Object.create(A):(L.prototype=A.prototype,new L)}(m,u=l),Object.defineProperty(m.prototype,"db",{get:function(){return f},enumerable:!1,configurable:!0}),m.prototype.table=function(){return p},l=m);for(var y=new Set,C=l.prototype;C;C=a(C))Object.getOwnPropertyNames(C).forEach(function(O){return y.add(O)});function x(O){if(!O)return O;var A,L=Object.create(l.prototype);for(A in O)if(!y.has(A))try{L[A]=O[A]}catch{}return L}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=x,this.hook("reading",x),l},At.prototype.defineClass=function(){return this.mapToClass(function(l){s(this,l)})},At.prototype.add=function(l,u){var f=this,p=this.schema.primKey,m=p.auto,y=p.keyPath,C=l;return y&&m&&(C=Cc(y)(l)),this._trans("readwrite",function(x){return f.core.mutate({trans:x,type:"add",keys:u!=null?[u]:null,values:[C]})}).then(function(x){return x.numFailures?De.reject(x.failures[0]):x.lastResult}).then(function(x){if(y)try{G(l,y,x)}catch{}return x})},At.prototype.upsert=function(l,u){var f=this,p=this.schema.primKey.keyPath;return this._trans("readwrite",function(m){return f.core.get({trans:m,key:l}).then(function(y){var C=y??{};return g_(C,u),p&&G(C,p,l),f.core.mutate({trans:m,type:"put",values:[C],keys:[l],upsert:!0,updates:{keys:[l],changeSpecs:[u]}}).then(function(x){return x.numFailures?De.reject(x.failures[0]):!!y})})})},At.prototype.update=function(l,u){return typeof l!="object"||o(l)?this.where(":id").equals(l).modify(u):(l=K(l,this.schema.primKey.keyPath),l===void 0?Gt(new ie.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(l).modify(u))},At.prototype.put=function(l,u){var f=this,p=this.schema.primKey,m=p.auto,y=p.keyPath,C=l;return y&&m&&(C=Cc(y)(l)),this._trans("readwrite",function(x){return f.core.mutate({trans:x,type:"put",values:[C],keys:u!=null?[u]:null})}).then(function(x){return x.numFailures?De.reject(x.failures[0]):x.lastResult}).then(function(x){if(y)try{G(l,y,x)}catch{}return x})},At.prototype.delete=function(l){var u=this;return this._trans("readwrite",function(f){return u.core.mutate({trans:f,type:"delete",keys:[l]}).then(function(p){return Sc(u,[l],p)}).then(function(p){return p.numFailures?De.reject(p.failures[0]):void 0})})},At.prototype.clear=function(){var l=this;return this._trans("readwrite",function(u){return l.core.mutate({trans:u,type:"deleteRange",range:u_}).then(function(f){return Sc(l,null,f)})}).then(function(u){return u.numFailures?De.reject(u.failures[0]):void 0})},At.prototype.bulkGet=function(l){var u=this;return this._trans("readonly",function(f){return u.core.getMany({keys:l,trans:f}).then(function(p){return p.map(function(m){return u.hook.reading.fire(m)})})})},At.prototype.bulkAdd=function(l,u,f){var p=this,m=Array.isArray(u)?u:void 0,y=(f=f||(m?void 0:u))?f.allKeys:void 0;return this._trans("readwrite",function(C){var A=p.schema.primKey,x=A.auto,A=A.keyPath;if(A&&m)throw new ie.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(m&&m.length!==l.length)throw new ie.InvalidArgument("Arguments objects and keys must have the same length");var O=l.length,A=A&&x?l.map(Cc(A)):l;return p.core.mutate({trans:C,type:"add",keys:m,values:A,wantResults:y}).then(function(N){var R=N.numFailures,j=N.results,P=N.lastResult,N=N.failures;if(R===0)return y?j:P;throw new Ae("".concat(p.name,".bulkAdd(): ").concat(R," of ").concat(O," operations failed"),N)})})},At.prototype.bulkPut=function(l,u,f){var p=this,m=Array.isArray(u)?u:void 0,y=(f=f||(m?void 0:u))?f.allKeys:void 0;return this._trans("readwrite",function(C){var A=p.schema.primKey,x=A.auto,A=A.keyPath;if(A&&m)throw new ie.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(m&&m.length!==l.length)throw new ie.InvalidArgument("Arguments objects and keys must have the same length");var O=l.length,A=A&&x?l.map(Cc(A)):l;return p.core.mutate({trans:C,type:"put",keys:m,values:A,wantResults:y}).then(function(N){var R=N.numFailures,j=N.results,P=N.lastResult,N=N.failures;if(R===0)return y?j:P;throw new Ae("".concat(p.name,".bulkPut(): ").concat(R," of ").concat(O," operations failed"),N)})})},At.prototype.bulkUpdate=function(l){var u=this,f=this.core,p=l.map(function(C){return C.key}),m=l.map(function(C){return C.changes}),y=[];return this._trans("readwrite",function(C){return f.getMany({trans:C,keys:p,cache:"clone"}).then(function(x){var O=[],A=[];l.forEach(function(R,j){var P=R.key,N=R.changes,F=x[j];if(F){for(var V=0,z=Object.keys(N);V<z.length;V++){var q=z[V],Q=N[q];if(q===u.schema.primKey.keyPath){if(ut(Q,P)!==0)throw new ie.Constraint("Cannot update primary key in bulkUpdate()")}else G(F,q,Q)}y.push(j),O.push(P),A.push(F)}});var L=O.length;return f.mutate({trans:C,type:"put",keys:O,values:A,updates:{keys:p,changeSpecs:m}}).then(function(R){var j=R.numFailures,P=R.failures;if(j===0)return L;for(var N=0,F=Object.keys(P);N<F.length;N++){var V,z=F[N],q=y[Number(z)];q!=null&&(V=P[z],delete P[z],P[q]=V)}throw new Ae("".concat(u.name,".bulkUpdate(): ").concat(j," of ").concat(L," operations failed"),P)})})})},At.prototype.bulkDelete=function(l){var u=this,f=l.length;return this._trans("readwrite",function(p){return u.core.mutate({trans:p,type:"delete",keys:l}).then(function(m){return Sc(u,l,m)})}).then(function(C){var m=C.numFailures,y=C.lastResult,C=C.failures;if(m===0)return y;throw new Ae("".concat(u.name,".bulkDelete(): ").concat(m," of ").concat(f," operations failed"),C)})},At);function At(){}function Ra(l){function u(C,x){if(x){for(var O=arguments.length,A=new Array(O-1);--O;)A[O-1]=arguments[O];return f[C].subscribe.apply(null,A),l}if(typeof C=="string")return f[C]}var f={};u.addEventType=y;for(var p=1,m=arguments.length;p<m;++p)y(arguments[p]);return u;function y(C,x,O){if(typeof C!="object"){var A;x=x||Tt;var L={subscribers:[],fire:O=O||Te,subscribe:function(R){L.subscribers.indexOf(R)===-1&&(L.subscribers.push(R),L.fire=x(L.fire,R))},unsubscribe:function(R){L.subscribers=L.subscribers.filter(function(j){return j!==R}),L.fire=L.subscribers.reduce(x,O)}};return f[C]=u[C]=L}i(A=C).forEach(function(R){var j=A[R];if(o(j))y(R,A[R][0],A[R][1]);else{if(j!=="asap")throw new ie.InvalidArgument("Invalid event config");var P=y(R,_t,function(){for(var N=arguments.length,F=new Array(N);N--;)F[N]=arguments[N];P.subscribers.forEach(function(V){B(function(){V.apply(null,F)})})})}})}}function Ta(l,u){return v(u).from({prototype:l}),u}function us(l,u){return!(l.filter||l.algorithm||l.or)&&(u?l.justLimit:!l.replayFilter)}function Ph(l,u){l.filter=ao(l.filter,u)}function kh(l,u,f){var p=l.replayFilter;l.replayFilter=p?function(){return ao(p(),u())}:u,l.justLimit=f&&!p}function Ec(l,u){if(l.isPrimKey)return u.primaryKey;var f=u.getIndexByKeyPath(l.index);if(!f)throw new ie.Schema("KeyPath "+l.index+" on object store "+u.name+" is not indexed");return f}function v_(l,u,f){var p=Ec(l,u.schema);return u.openCursor({trans:f,values:!l.keysOnly,reverse:l.dir==="prev",unique:!!l.unique,query:{index:p,range:l.range}})}function xc(l,u,f,p){var m=l.replayFilter?ao(l.filter,l.replayFilter()):l.filter;if(l.or){var y={},C=function(x,O,A){var L,R;m&&!m(O,A,function(j){return O.stop(j)},function(j){return O.fail(j)})||((R=""+(L=O.primaryKey))=="[object ArrayBuffer]"&&(R=""+new Uint8Array(L)),d(y,R)||(y[R]=!0,u(x,O,A)))};return Promise.all([l.or._iterate(C,f),y_(v_(l,p,f),l.algorithm,C,!l.keysOnly&&l.valueMapper)])}return y_(v_(l,p,f),ao(l.algorithm,m),u,!l.keysOnly&&l.valueMapper)}function y_(l,u,f,p){var m=Lt(p?function(y,C,x){return f(p(y),C,x)}:f);return l.then(function(y){if(y)return y.start(function(){var C=function(){return y.continue()};u&&!u(y,function(x){return C=x},function(x){y.stop(x),C=Te},function(x){y.fail(x),C=Te})||m(y.value,y,function(x){return C=x}),C()})})}var Fx=(pt.prototype._read=function(l,u){var f=this._ctx;return f.error?f.table._trans(null,Gt.bind(null,f.error)):f.table._trans("readonly",l).then(u)},pt.prototype._write=function(l){var u=this._ctx;return u.error?u.table._trans(null,Gt.bind(null,u.error)):u.table._trans("readwrite",l,"locked")},pt.prototype._addAlgorithm=function(l){var u=this._ctx;u.algorithm=ao(u.algorithm,l)},pt.prototype._iterate=function(l,u){return xc(this._ctx,l,u,this._ctx.table.core)},pt.prototype.clone=function(l){var u=Object.create(this.constructor.prototype),f=Object.create(this._ctx);return l&&s(f,l),u._ctx=f,u},pt.prototype.raw=function(){return this._ctx.valueMapper=null,this},pt.prototype.each=function(l){var u=this._ctx;return this._read(function(f){return xc(u,l,f,u.table.core)})},pt.prototype.count=function(l){var u=this;return this._read(function(f){var p=u._ctx,m=p.table.core;if(us(p,!0))return m.count({trans:f,query:{index:Ec(p,m.schema),range:p.range}}).then(function(C){return Math.min(C,p.limit)});var y=0;return xc(p,function(){return++y,!1},f,m).then(function(){return y})}).then(l)},pt.prototype.sortBy=function(l,u){var f=l.split(".").reverse(),p=f[0],m=f.length-1;function y(O,A){return A?y(O[f[A]],A-1):O[p]}var C=this._ctx.dir==="next"?1:-1;function x(O,A){return ut(y(O,m),y(A,m))*C}return this.toArray(function(O){return O.sort(x)}).then(u)},pt.prototype.toArray=function(l){var u=this;return this._read(function(f){var p=u._ctx;if(p.dir==="next"&&us(p,!0)&&0<p.limit){var m=p.valueMapper,y=Ec(p,p.table.core.schema);return p.table.core.query({trans:f,limit:p.limit,values:!0,query:{index:y,range:p.range}}).then(function(x){return x=x.result,m?x.map(m):x})}var C=[];return xc(p,function(x){return C.push(x)},f,p.table.core).then(function(){return C})},l)},pt.prototype.offset=function(l){var u=this._ctx;return l<=0||(u.offset+=l,us(u)?kh(u,function(){var f=l;return function(p,m){return f===0||(f===1?--f:m(function(){p.advance(f),f=0}),!1)}}):kh(u,function(){var f=l;return function(){return--f<0}})),this},pt.prototype.limit=function(l){return this._ctx.limit=Math.min(this._ctx.limit,l),kh(this._ctx,function(){var u=l;return function(f,p,m){return--u<=0&&p(m),0<=u}},!0),this},pt.prototype.until=function(l,u){return Ph(this._ctx,function(f,p,m){return!l(f.value)||(p(m),u)}),this},pt.prototype.first=function(l){return this.limit(1).toArray(function(u){return u[0]}).then(l)},pt.prototype.last=function(l){return this.reverse().first(l)},pt.prototype.filter=function(l){var u;return Ph(this._ctx,function(f){return l(f.value)}),(u=this._ctx).isMatch=ao(u.isMatch,l),this},pt.prototype.and=function(l){return this.filter(l)},pt.prototype.or=function(l){return new this.db.WhereClause(this._ctx.table,l,this)},pt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},pt.prototype.desc=function(){return this.reverse()},pt.prototype.eachKey=function(l){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(f,p){l(p.key,p)})},pt.prototype.eachUniqueKey=function(l){return this._ctx.unique="unique",this.eachKey(l)},pt.prototype.eachPrimaryKey=function(l){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(f,p){l(p.primaryKey,p)})},pt.prototype.keys=function(l){var u=this._ctx;u.keysOnly=!u.isMatch;var f=[];return this.each(function(p,m){f.push(m.key)}).then(function(){return f}).then(l)},pt.prototype.primaryKeys=function(l){var u=this._ctx;if(u.dir==="next"&&us(u,!0)&&0<u.limit)return this._read(function(p){var m=Ec(u,u.table.core.schema);return u.table.core.query({trans:p,values:!1,limit:u.limit,query:{index:m,range:u.range}})}).then(function(p){return p.result}).then(l);u.keysOnly=!u.isMatch;var f=[];return this.each(function(p,m){f.push(m.primaryKey)}).then(function(){return f}).then(l)},pt.prototype.uniqueKeys=function(l){return this._ctx.unique="unique",this.keys(l)},pt.prototype.firstKey=function(l){return this.limit(1).keys(function(u){return u[0]}).then(l)},pt.prototype.lastKey=function(l){return this.reverse().firstKey(l)},pt.prototype.distinct=function(){var l=this._ctx,l=l.index&&l.table.schema.idxByName[l.index];if(!l||!l.multi)return this;var u={};return Ph(this._ctx,function(m){var p=m.primaryKey.toString(),m=d(u,p);return u[p]=!0,!m}),this},pt.prototype.modify=function(l){var u=this,f=this._ctx;return this._write(function(p){var m=typeof l=="function"?l:function(F){return g_(F,l)},y=f.table.core,A=y.schema.primaryKey,C=A.outbound,x=A.extractKey,O=200,A=u.db._options.modifyChunkSize;A&&(O=typeof A=="object"?A[y.name]||A["*"]||200:A);function L(F,q){var z=q.failures,q=q.numFailures;j+=F-q;for(var Q=0,ne=i(z);Q<ne.length;Q++){var de=ne[Q];R.push(z[de])}}var R=[],j=0,P=[],N=l===__;return u.clone().primaryKeys().then(function(F){function V(q){var Q=Math.min(O,F.length-q),ne=F.slice(q,q+Q);return(N?Promise.resolve([]):y.getMany({trans:p,keys:ne,cache:"immutable"})).then(function(de){var me=[],ue=[],pe=C?[]:null,ye=N?ne:[];if(!N)for(var ge=0;ge<Q;++ge){var xe=de[ge],We={value:we(xe),primKey:F[q+ge]};m.call(We,We.value,We)!==!1&&(We.value==null?ye.push(F[q+ge]):C||ut(x(xe),x(We.value))===0?(ue.push(We.value),C&&pe.push(F[q+ge])):(ye.push(F[q+ge]),me.push(We.value)))}return Promise.resolve(0<me.length&&y.mutate({trans:p,type:"add",values:me}).then(function(Xe){for(var ot in Xe.failures)ye.splice(parseInt(ot),1);L(me.length,Xe)})).then(function(){return(0<ue.length||z&&typeof l=="object")&&y.mutate({trans:p,type:"put",keys:pe,values:ue,criteria:z,changeSpec:typeof l!="function"&&l,isAdditionalChunk:0<q}).then(function(Xe){return L(ue.length,Xe)})}).then(function(){return(0<ye.length||z&&N)&&y.mutate({trans:p,type:"delete",keys:ye,criteria:z,isAdditionalChunk:0<q}).then(function(Xe){return Sc(f.table,ye,Xe)}).then(function(Xe){return L(ye.length,Xe)})}).then(function(){return F.length>q+Q&&V(q+O)})})}var z=us(f)&&f.limit===1/0&&(typeof l!="function"||N)&&{index:f.index,range:f.range};return V(0).then(function(){if(0<R.length)throw new it("Error modifying one or more objects",R,j,P);return F.length})})})},pt.prototype.delete=function(){var l=this._ctx,u=l.range;return!us(l)||l.table.schema.yProps||!l.isPrimKey&&u.type!==3?this.modify(__):this._write(function(f){var p=l.table.core.schema.primaryKey,m=u;return l.table.core.count({trans:f,query:{index:p,range:m}}).then(function(y){return l.table.core.mutate({trans:f,type:"deleteRange",range:m}).then(function(O){var x=O.failures,O=O.numFailures;if(O)throw new it("Could not delete some values",Object.keys(x).map(function(A){return x[A]}),y-O);return y-O})})})},pt);function pt(){}var __=function(l,u){return u.value=null};function Lx(l,u){return l<u?-1:l===u?0:1}function Vx(l,u){return u<l?-1:l===u?0:1}function tr(l,u,f){return l=l instanceof b_?new l.Collection(l):l,l._ctx.error=new(f||TypeError)(u),l}function ds(l){return new l.Collection(l,function(){return D_("")}).limit(0)}function Ic(l,u,f,p){var m,y,C,x,O,A,L,R=f.length;if(!f.every(function(N){return typeof N=="string"}))return tr(l,c_);function j(N){m=N==="next"?function(V){return V.toUpperCase()}:function(V){return V.toLowerCase()},y=N==="next"?function(V){return V.toLowerCase()}:function(V){return V.toUpperCase()},C=N==="next"?Lx:Vx;var F=f.map(function(V){return{lower:y(V),upper:m(V)}}).sort(function(V,z){return C(V.lower,z.lower)});x=F.map(function(V){return V.upper}),O=F.map(function(V){return V.lower}),L=(A=N)==="next"?"":p}j("next"),l=new l.Collection(l,function(){return ki(x[0],O[R-1]+p)}),l._ondirectionchange=function(N){j(N)};var P=0;return l._addAlgorithm(function(N,F,V){var z=N.key;if(typeof z!="string")return!1;var q=y(z);if(u(q,O,P))return!0;for(var Q=null,ne=P;ne<R;++ne){var de=function(me,ue,pe,ye,ge,xe){for(var We=Math.min(me.length,ye.length),Xe=-1,ot=0;ot<We;++ot){var nr=ue[ot];if(nr!==ye[ot])return ge(me[ot],pe[ot])<0?me.substr(0,ot)+pe[ot]+pe.substr(ot+1):ge(me[ot],ye[ot])<0?me.substr(0,ot)+ye[ot]+pe.substr(ot+1):0<=Xe?me.substr(0,Xe)+ue[Xe]+pe.substr(Xe+1):null;ge(me[ot],nr)<0&&(Xe=ot)}return We<ye.length&&xe==="next"?me+pe.substr(me.length):We<me.length&&xe==="prev"?me.substr(0,pe.length):Xe<0?null:me.substr(0,Xe)+ye[Xe]+pe.substr(Xe+1)}(z,q,x[ne],O[ne],C,A);de===null&&Q===null?P=ne+1:(Q===null||0<C(Q,de))&&(Q=de)}return F(Q!==null?function(){N.continue(Q+L)}:V),!1}),l}function ki(l,u,f,p){return{type:2,lower:l,upper:u,lowerOpen:f,upperOpen:p}}function D_(l){return{type:1,lower:l,upper:l}}var b_=(Object.defineProperty(hn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),hn.prototype.between=function(l,u,f,p){f=f!==!1,p=p===!0;try{return 0<this._cmp(l,u)||this._cmp(l,u)===0&&(f||p)&&(!f||!p)?ds(this):new this.Collection(this,function(){return ki(l,u,!f,!p)})}catch{return tr(this,di)}},hn.prototype.equals=function(l){return l==null?tr(this,di):new this.Collection(this,function(){return D_(l)})},hn.prototype.above=function(l){return l==null?tr(this,di):new this.Collection(this,function(){return ki(l,void 0,!0)})},hn.prototype.aboveOrEqual=function(l){return l==null?tr(this,di):new this.Collection(this,function(){return ki(l,void 0,!1)})},hn.prototype.below=function(l){return l==null?tr(this,di):new this.Collection(this,function(){return ki(void 0,l,!1,!0)})},hn.prototype.belowOrEqual=function(l){return l==null?tr(this,di):new this.Collection(this,function(){return ki(void 0,l)})},hn.prototype.startsWith=function(l){return typeof l!="string"?tr(this,c_):this.between(l,l+so,!0,!0)},hn.prototype.startsWithIgnoreCase=function(l){return l===""?this.startsWith(l):Ic(this,function(u,f){return u.indexOf(f[0])===0},[l],so)},hn.prototype.equalsIgnoreCase=function(l){return Ic(this,function(u,f){return u===f[0]},[l],"")},hn.prototype.anyOfIgnoreCase=function(){var l=he.apply(te,arguments);return l.length===0?ds(this):Ic(this,function(u,f){return f.indexOf(u)!==-1},l,"")},hn.prototype.startsWithAnyOfIgnoreCase=function(){var l=he.apply(te,arguments);return l.length===0?ds(this):Ic(this,function(u,f){return f.some(function(p){return u.indexOf(p)===0})},l,so)},hn.prototype.anyOf=function(){var l=this,u=he.apply(te,arguments),f=this._cmp;try{u.sort(f)}catch{return tr(this,di)}if(u.length===0)return ds(this);var p=new this.Collection(this,function(){return ki(u[0],u[u.length-1])});p._ondirectionchange=function(y){f=y==="next"?l._ascending:l._descending,u.sort(f)};var m=0;return p._addAlgorithm(function(y,C,x){for(var O=y.key;0<f(O,u[m]);)if(++m===u.length)return C(x),!1;return f(O,u[m])===0||(C(function(){y.continue(u[m])}),!1)}),p},hn.prototype.notEqual=function(l){return this.inAnyRange([[-1/0,l],[l,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},hn.prototype.noneOf=function(){var l=he.apply(te,arguments);if(l.length===0)return new this.Collection(this);try{l.sort(this._ascending)}catch{return tr(this,di)}var u=l.reduce(function(f,p){return f?f.concat([[f[f.length-1][1],p]]):[[-1/0,p]]},null);return u.push([l[l.length-1],this.db._maxKey]),this.inAnyRange(u,{includeLowers:!1,includeUppers:!1})},hn.prototype.inAnyRange=function(z,u){var f=this,p=this._cmp,m=this._ascending,y=this._descending,C=this._min,x=this._max;if(z.length===0)return ds(this);if(!z.every(function(q){return q[0]!==void 0&&q[1]!==void 0&&m(q[0],q[1])<=0}))return tr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ie.InvalidArgument);var O=!u||u.includeLowers!==!1,A=u&&u.includeUppers===!0,L,R=m;function j(q,Q){return R(q[0],Q[0])}try{(L=z.reduce(function(q,Q){for(var ne=0,de=q.length;ne<de;++ne){var me=q[ne];if(p(Q[0],me[1])<0&&0<p(Q[1],me[0])){me[0]=C(me[0],Q[0]),me[1]=x(me[1],Q[1]);break}}return ne===de&&q.push(Q),q},[])).sort(j)}catch{return tr(this,di)}var P=0,N=A?function(q){return 0<m(q,L[P][1])}:function(q){return 0<=m(q,L[P][1])},F=O?function(q){return 0<y(q,L[P][0])}:function(q){return 0<=y(q,L[P][0])},V=N,z=new this.Collection(this,function(){return ki(L[0][0],L[L.length-1][1],!O,!A)});return z._ondirectionchange=function(q){R=q==="next"?(V=N,m):(V=F,y),L.sort(j)},z._addAlgorithm(function(q,Q,ne){for(var de,me=q.key;V(me);)if(++P===L.length)return Q(ne),!1;return!N(de=me)&&!F(de)||(f._cmp(me,L[P][1])===0||f._cmp(me,L[P][0])===0||Q(function(){R===m?q.continue(L[P][0]):q.continue(L[P][1])}),!1)}),z},hn.prototype.startsWithAnyOf=function(){var l=he.apply(te,arguments);return l.every(function(u){return typeof u=="string"})?l.length===0?ds(this):this.inAnyRange(l.map(function(u){return[u,u+so]})):tr(this,"startsWithAnyOf() only works with strings")},hn);function hn(){}function $r(l){return Lt(function(u){return Oa(u),l(u.target.error),!1})}function Oa(l){l.stopPropagation&&l.stopPropagation(),l.preventDefault&&l.preventDefault()}var Aa="storagemutated",Nh="x-storagemutated-1",Ni=Ra(null,Aa),jx=(qr.prototype._lock=function(){return T(!Oe.global),++this._reculock,this._reculock!==1||Oe.global||(Oe.lockOwnerFor=this),this},qr.prototype._unlock=function(){if(T(!Oe.global),--this._reculock==0)for(Oe.global||(Oe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var l=this._blockedFuncs.shift();try{oo(l[1],l[0])}catch{}}return this},qr.prototype._locked=function(){return this._reculock&&Oe.lockOwnerFor!==this},qr.prototype.create=function(l){var u=this;if(!this.mode)return this;var f=this.db.idbdb,p=this.db._state.dbOpenError;if(T(!this.idbtrans),!l&&!f)switch(p&&p.name){case"DatabaseClosedError":throw new ie.DatabaseClosed(p);case"MissingAPIError":throw new ie.MissingAPI(p.message,p);default:throw new ie.OpenFailed(p)}if(!this.active)throw new ie.TransactionInactive;return T(this._completion._state===null),(l=this.idbtrans=l||(this.db.core||f).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Lt(function(m){Oa(m),u._reject(l.error)}),l.onabort=Lt(function(m){Oa(m),u.active&&u._reject(new ie.Abort(l.error)),u.active=!1,u.on("abort").fire(m)}),l.oncomplete=Lt(function(){u.active=!1,u._resolve(),"mutatedParts"in l&&Ni.storagemutated.fire(l.mutatedParts)}),this},qr.prototype._promise=function(l,u,f){var p=this;if(l==="readwrite"&&this.mode!=="readwrite")return Gt(new ie.ReadOnly("Transaction is readonly"));if(!this.active)return Gt(new ie.TransactionInactive);if(this._locked())return new De(function(y,C){p._blockedFuncs.push([function(){p._promise(l,u,f).then(y,C)},Oe])});if(f)return Oi(function(){var y=new De(function(C,x){p._lock();var O=u(C,x,p);O&&O.then&&O.then(C,x)});return y.finally(function(){return p._unlock()}),y._lib=!0,y});var m=new De(function(y,C){var x=u(y,C,p);x&&x.then&&x.then(y,C)});return m._lib=!0,m},qr.prototype._root=function(){return this.parent?this.parent._root():this},qr.prototype.waitFor=function(l){var u,f=this._root(),p=De.resolve(l);f._waitingFor?f._waitingFor=f._waitingFor.then(function(){return p}):(f._waitingFor=p,f._waitingQueue=[],u=f.idbtrans.objectStore(f.storeNames[0]),function y(){for(++f._spinCount;f._waitingQueue.length;)f._waitingQueue.shift()();f._waitingFor&&(u.get(-1/0).onsuccess=y)}());var m=f._waitingFor;return new De(function(y,C){p.then(function(x){return f._waitingQueue.push(Lt(y.bind(null,x)))},function(x){return f._waitingQueue.push(Lt(C.bind(null,x)))}).finally(function(){f._waitingFor===m&&(f._waitingFor=null)})})},qr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ie.Abort))},qr.prototype.table=function(l){var u=this._memoizedTables||(this._memoizedTables={});if(d(u,l))return u[l];var f=this.schema[l];if(!f)throw new ie.NotFound("Table "+l+" not part of transaction");return f=new this.db.Table(l,f,this),f.core=this.db.core.table(l),u[l]=f},qr);function qr(){}function Fh(l,u,f,p,m,y,C,x){return{name:l,keyPath:u,unique:f,multi:p,auto:m,compound:y,src:(f&&!C?"&":"")+(p?"*":"")+(m?"++":"")+w_(u),type:x}}function w_(l){return typeof l=="string"?l:l?"["+[].join.call(l,"+")+"]":""}function Lh(l,u,f){return{name:l,primKey:u,indexes:f,mappedClass:null,idxByName:(p=function(m){return[m.name,m]},f.reduce(function(m,y,C){return C=p(y,C),C&&(m[C[0]]=C[1]),m},{}))};var p}var Pa=function(l){try{return l.only([[]]),Pa=function(){return[[]]},[[]]}catch{return Pa=function(){return so},so}};function Vh(l){return l==null?function(){}:typeof l=="string"?(u=l).split(".").length===1?function(f){return f[u]}:function(f){return K(f,u)}:function(f){return K(f,l)};var u}function C_(l){return[].slice.call(l)}var Bx=0;function ka(l){return l==null?":id":typeof l=="string"?l:"[".concat(l.join("+"),"]")}function zx(l,u,O){function p(V){if(V.type===3)return null;if(V.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var P=V.lower,N=V.upper,F=V.lowerOpen,V=V.upperOpen;return P===void 0?N===void 0?null:u.upperBound(N,!!V):N===void 0?u.lowerBound(P,!!F):u.bound(P,N,!!F,!!V)}function m(j){var P,N=j.name;return{name:N,schema:j,mutate:function(F){var V=F.trans,z=F.type,q=F.keys,Q=F.values,ne=F.range;return new Promise(function(de,me){de=Lt(de);var ue=V.objectStore(N),pe=ue.keyPath==null,ye=z==="put"||z==="add";if(!ye&&z!=="delete"&&z!=="deleteRange")throw new Error("Invalid operation type: "+z);var ge,xe=(q||Q||{length:1}).length;if(q&&Q&&q.length!==Q.length)throw new Error("Given keys array must have same length as given values array.");if(xe===0)return de({numFailures:0,failures:{},results:[],lastResult:void 0});function We(An){++nr,Oa(An)}var Xe=[],ot=[],nr=0;if(z==="deleteRange"){if(ne.type===4)return de({numFailures:nr,failures:ot,results:[],lastResult:void 0});ne.type===3?Xe.push(ge=ue.clear()):Xe.push(ge=ue.delete(p(ne)))}else{var pe=ye?pe?[Q,q]:[Q,null]:[q,null],Ue=pe[0],Cn=pe[1];if(ye)for(var Sn=0;Sn<xe;++Sn)Xe.push(ge=Cn&&Cn[Sn]!==void 0?ue[z](Ue[Sn],Cn[Sn]):ue[z](Ue[Sn])),ge.onerror=We;else for(Sn=0;Sn<xe;++Sn)Xe.push(ge=ue[z](Ue[Sn])),ge.onerror=We}function jc(An){An=An.target.result,Xe.forEach(function(uo,np){return uo.error!=null&&(ot[np]=uo.error)}),de({numFailures:nr,failures:ot,results:z==="delete"?q:Xe.map(function(uo){return uo.result}),lastResult:An})}ge.onerror=function(An){We(An),jc(An)},ge.onsuccess=jc})},getMany:function(F){var V=F.trans,z=F.keys;return new Promise(function(q,Q){q=Lt(q);for(var ne,de=V.objectStore(N),me=z.length,ue=new Array(me),pe=0,ye=0,ge=function(Xe){Xe=Xe.target,ue[Xe._pos]=Xe.result,++ye===pe&&q(ue)},xe=$r(Q),We=0;We<me;++We)z[We]!=null&&((ne=de.get(z[We]))._pos=We,ne.onsuccess=ge,ne.onerror=xe,++pe);pe===0&&q(ue)})},get:function(F){var V=F.trans,z=F.key;return new Promise(function(q,Q){q=Lt(q);var ne=V.objectStore(N).get(z);ne.onsuccess=function(de){return q(de.target.result)},ne.onerror=$r(Q)})},query:(P=A,function(F){return new Promise(function(V,z){V=Lt(V);var q,Q,ne,pe=F.trans,de=F.values,me=F.limit,ge=F.query,ue=me===1/0?void 0:me,ye=ge.index,ge=ge.range,pe=pe.objectStore(N),ye=ye.isPrimaryKey?pe:pe.index(ye.name),ge=p(ge);if(me===0)return V({result:[]});P?((ue=de?ye.getAll(ge,ue):ye.getAllKeys(ge,ue)).onsuccess=function(xe){return V({result:xe.target.result})},ue.onerror=$r(z)):(q=0,Q=!de&&"openKeyCursor"in ye?ye.openKeyCursor(ge):ye.openCursor(ge),ne=[],Q.onsuccess=function(xe){var We=Q.result;return We?(ne.push(de?We.value:We.primaryKey),++q===me?V({result:ne}):void We.continue()):V({result:ne})},Q.onerror=$r(z))})}),openCursor:function(F){var V=F.trans,z=F.values,q=F.query,Q=F.reverse,ne=F.unique;return new Promise(function(de,me){de=Lt(de);var ye=q.index,ue=q.range,pe=V.objectStore(N),pe=ye.isPrimaryKey?pe:pe.index(ye.name),ye=Q?ne?"prevunique":"prev":ne?"nextunique":"next",ge=!z&&"openKeyCursor"in pe?pe.openKeyCursor(p(ue),ye):pe.openCursor(p(ue),ye);ge.onerror=$r(me),ge.onsuccess=Lt(function(xe){var We,Xe,ot,nr,Ue=ge.result;Ue?(Ue.___id=++Bx,Ue.done=!1,We=Ue.continue.bind(Ue),Xe=(Xe=Ue.continuePrimaryKey)&&Xe.bind(Ue),ot=Ue.advance.bind(Ue),nr=function(){throw new Error("Cursor not stopped")},Ue.trans=V,Ue.stop=Ue.continue=Ue.continuePrimaryKey=Ue.advance=function(){throw new Error("Cursor not started")},Ue.fail=Lt(me),Ue.next=function(){var Cn=this,Sn=1;return this.start(function(){return Sn--?Cn.continue():Cn.stop()}).then(function(){return Cn})},Ue.start=function(Cn){function Sn(){if(ge.result)try{Cn()}catch(An){Ue.fail(An)}else Ue.done=!0,Ue.start=function(){throw new Error("Cursor behind last entry")},Ue.stop()}var jc=new Promise(function(An,uo){An=Lt(An),ge.onerror=$r(uo),Ue.fail=uo,Ue.stop=function(np){Ue.stop=Ue.continue=Ue.continuePrimaryKey=Ue.advance=nr,An(np)}});return ge.onsuccess=Lt(function(An){ge.onsuccess=Sn,Sn()}),Ue.continue=We,Ue.continuePrimaryKey=Xe,Ue.advance=ot,Sn(),jc},de(Ue)):de(null)},me)})},count:function(F){var V=F.query,z=F.trans,q=V.index,Q=V.range;return new Promise(function(ne,de){var me=z.objectStore(N),ue=q.isPrimaryKey?me:me.index(q.name),me=p(Q),ue=me?ue.count(me):ue.count();ue.onsuccess=Lt(function(pe){return ne(pe.target.result)}),ue.onerror=$r(de)})}}}var y,C,x,L=(C=O,x=C_((y=l).objectStoreNames),{schema:{name:y.name,tables:x.map(function(j){return C.objectStore(j)}).map(function(j){var P=j.keyPath,V=j.autoIncrement,N=o(P),F={},V={name:j.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:P==null,compound:N,keyPath:P,autoIncrement:V,unique:!0,extractKey:Vh(P)},indexes:C_(j.indexNames).map(function(z){return j.index(z)}).map(function(ne){var q=ne.name,Q=ne.unique,de=ne.multiEntry,ne=ne.keyPath,de={name:q,compound:o(ne),keyPath:ne,unique:Q,multiEntry:de,extractKey:Vh(ne)};return F[ka(ne)]=de}),getIndexByKeyPath:function(z){return F[ka(z)]}};return F[":id"]=V.primaryKey,P!=null&&(F[ka(P)]=V.primaryKey),V})},hasGetAll:0<x.length&&"getAll"in C.objectStore(x[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),O=L.schema,A=L.hasGetAll,L=O.tables.map(m),R={};return L.forEach(function(j){return R[j.name]=j}),{stack:"dbcore",transaction:l.transaction.bind(l),table:function(j){if(!R[j])throw new Error("Table '".concat(j,"' not found"));return R[j]},MIN_KEY:-1/0,MAX_KEY:Pa(u),schema:O}}function Hx(l,u,f,p){var m=f.IDBKeyRange;return f.indexedDB,{dbcore:(p=zx(u,m,p),l.dbcore.reduce(function(y,C){return C=C.create,e(e({},y),C(y))},p))}}function Mc(l,p){var f=p.db,p=Hx(l._middlewares,f,l._deps,p);l.core=p.dbcore,l.tables.forEach(function(m){var y=m.name;l.core.schema.tables.some(function(C){return C.name===y})&&(m.core=l.core.table(y),l[y]instanceof l.Table&&(l[y].core=m.core))})}function Rc(l,u,f,p){f.forEach(function(m){var y=p[m];u.forEach(function(C){var x=function O(A,L){return E(A,L)||(A=a(A))&&O(A,L)}(C,m);(!x||"value"in x&&x.value===void 0)&&(C===l.Transaction.prototype||C instanceof l.Transaction?b(C,m,{get:function(){return this.table(m)},set:function(O){g(this,m,{value:O,writable:!0,configurable:!0,enumerable:!0})}}):C[m]=new l.Table(m,y))})})}function jh(l,u){u.forEach(function(f){for(var p in f)f[p]instanceof l.Table&&delete f[p]})}function Ux(l,u){return l._cfg.version-u._cfg.version}function $x(l,u,f,p){var m=l._dbSchema;f.objectStoreNames.contains("$meta")&&!m.$meta&&(m.$meta=Lh("$meta",E_("")[0],[]),l._storeNames.push("$meta"));var y=l._createTransaction("readwrite",l._storeNames,m);y.create(f),y._completion.catch(p);var C=y._reject.bind(y),x=Oe.transless||Oe;Oi(function(){return Oe.trans=y,Oe.transless=x,u!==0?(Mc(l,f),A=u,((O=y).storeNames.includes("$meta")?O.table("$meta").get("version").then(function(L){return L??A}):De.resolve(A)).then(function(L){return j=L,P=y,N=f,F=[],L=(R=l)._versions,V=R._dbSchema=Oc(0,R.idbdb,N),(L=L.filter(function(z){return z._cfg.version>=j})).length!==0?(L.forEach(function(z){F.push(function(){var q=V,Q=z._cfg.dbschema;Ac(R,q,N),Ac(R,Q,N),V=R._dbSchema=Q;var ne=Bh(q,Q);ne.add.forEach(function(ye){zh(N,ye[0],ye[1].primKey,ye[1].indexes)}),ne.change.forEach(function(ye){if(ye.recreate)throw new ie.Upgrade("Not yet support for changing primary key");var ge=N.objectStore(ye.name);ye.add.forEach(function(xe){return Tc(ge,xe)}),ye.change.forEach(function(xe){ge.deleteIndex(xe.name),Tc(ge,xe)}),ye.del.forEach(function(xe){return ge.deleteIndex(xe)})});var de=z._cfg.contentUpgrade;if(de&&z._cfg.version>j){Mc(R,N),P._memoizedTables={};var me=I(Q);ne.del.forEach(function(ye){me[ye]=q[ye]}),jh(R,[R.Transaction.prototype]),Rc(R,[R.Transaction.prototype],i(me),me),P.schema=me;var ue,pe=fe(de);return pe&&ls(),ne=De.follow(function(){var ye;(ue=de(P))&&pe&&(ye=Ai.bind(null,null),ue.then(ye,ye))}),ue&&typeof ue.then=="function"?De.resolve(ue):ne.then(function(){return ue})}}),F.push(function(q){var Q,ne,de=z._cfg.dbschema;Q=de,ne=q,[].slice.call(ne.db.objectStoreNames).forEach(function(me){return Q[me]==null&&ne.db.deleteObjectStore(me)}),jh(R,[R.Transaction.prototype]),Rc(R,[R.Transaction.prototype],R._storeNames,R._dbSchema),P.schema=R._dbSchema}),F.push(function(q){R.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(R.idbdb.version/10)===z._cfg.version?(R.idbdb.deleteObjectStore("$meta"),delete R._dbSchema.$meta,R._storeNames=R._storeNames.filter(function(Q){return Q!=="$meta"})):q.objectStore("$meta").put(z._cfg.version,"version"))})}),function z(){return F.length?De.resolve(F.shift()(P.idbtrans)).then(z):De.resolve()}().then(function(){S_(V,N)})):De.resolve();var R,j,P,N,F,V}).catch(C)):(i(m).forEach(function(L){zh(f,L,m[L].primKey,m[L].indexes)}),Mc(l,f),void De.follow(function(){return l.on.populate.fire(y)}).catch(C));var O,A})}function qx(l,u){S_(l._dbSchema,u),u.db.version%10!=0||u.objectStoreNames.contains("$meta")||u.db.createObjectStore("$meta").add(Math.ceil(u.db.version/10-1),"version");var f=Oc(0,l.idbdb,u);Ac(l,l._dbSchema,u);for(var p=0,m=Bh(f,l._dbSchema).change;p<m.length;p++){var y=function(C){if(C.change.length||C.recreate)return console.warn("Unable to patch indexes of table ".concat(C.name," because it has changes on the type of index or primary key.")),{value:void 0};var x=u.objectStore(C.name);C.add.forEach(function(O){vn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(C.name,".").concat(O.src)),Tc(x,O)})}(m[p]);if(typeof y=="object")return y.value}}function Bh(l,u){var f,p={del:[],add:[],change:[]};for(f in l)u[f]||p.del.push(f);for(f in u){var m=l[f],y=u[f];if(m){var C={name:f,def:y,recreate:!1,del:[],add:[],change:[]};if(""+(m.primKey.keyPath||"")!=""+(y.primKey.keyPath||"")||m.primKey.auto!==y.primKey.auto)C.recreate=!0,p.change.push(C);else{var x=m.idxByName,O=y.idxByName,A=void 0;for(A in x)O[A]||C.del.push(A);for(A in O){var L=x[A],R=O[A];L?L.src!==R.src&&C.change.push(R):C.add.push(R)}(0<C.del.length||0<C.add.length||0<C.change.length)&&p.change.push(C)}}else p.add.push([f,y])}return p}function zh(l,u,f,p){var m=l.db.createObjectStore(u,f.keyPath?{keyPath:f.keyPath,autoIncrement:f.auto}:{autoIncrement:f.auto});return p.forEach(function(y){return Tc(m,y)}),m}function S_(l,u){i(l).forEach(function(f){u.db.objectStoreNames.contains(f)||(vn&&console.debug("Dexie: Creating missing table",f),zh(u,f,l[f].primKey,l[f].indexes))})}function Tc(l,u){l.createIndex(u.name,u.keyPath,{unique:u.unique,multiEntry:u.multi})}function Oc(l,u,f){var p={};return W(u.objectStoreNames,0).forEach(function(m){for(var y=f.objectStore(m),C=Fh(w_(A=y.keyPath),A||"",!0,!1,!!y.autoIncrement,A&&typeof A!="string",!0),x=[],O=0;O<y.indexNames.length;++O){var L=y.index(y.indexNames[O]),A=L.keyPath,L=Fh(L.name,A,!!L.unique,!!L.multiEntry,!1,A&&typeof A!="string",!1);x.push(L)}p[m]=Lh(m,C,x)}),p}function Ac(l,u,f){for(var p=f.db.objectStoreNames,m=0;m<p.length;++m){var y=p[m],C=f.objectStore(y);l._hasGetAll="getAll"in C;for(var x=0;x<C.indexNames.length;++x){var O=C.indexNames[x],A=C.index(O).keyPath,L=typeof A=="string"?A:"["+W(A).join("+")+"]";!u[y]||(A=u[y].idxByName[L])&&(A.name=O,delete u[y].idxByName[L],u[y].idxByName[O]=A)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&r.WorkerGlobalScope&&r instanceof r.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(l._hasGetAll=!1)}function E_(l){return l.split(",").map(function(u,f){var y=u.split(":"),p=(m=y[1])===null||m===void 0?void 0:m.trim(),m=(u=y[0].trim()).replace(/([&*]|\+\+)/g,""),y=/^\[/.test(m)?m.match(/^\[(.*)\]$/)[1].split("+"):m;return Fh(m,y||null,/\&/.test(u),/\*/.test(u),/\+\+/.test(u),o(y),f===0,p)})}var Wx=(fs.prototype._createTableSchema=Lh,fs.prototype._parseIndexSyntax=E_,fs.prototype._parseStoresSpec=function(l,u){var f=this;i(l).forEach(function(p){if(l[p]!==null){var m=f._parseIndexSyntax(l[p]),y=m.shift();if(!y)throw new ie.Schema("Invalid schema for table "+p+": "+l[p]);if(y.unique=!0,y.multi)throw new ie.Schema("Primary key cannot be multiEntry*");m.forEach(function(C){if(C.auto)throw new ie.Schema("Only primary key can be marked as autoIncrement (++)");if(!C.keyPath)throw new ie.Schema("Index must have a name and cannot be an empty string")}),m=f._createTableSchema(p,y,m),u[p]=m}})},fs.prototype.stores=function(f){var u=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,f):f;var f=u._versions,p={},m={};return f.forEach(function(y){s(p,y._cfg.storesSource),m=y._cfg.dbschema={},y._parseStoresSpec(p,m)}),u._dbSchema=m,jh(u,[u._allTables,u,u.Transaction.prototype]),Rc(u,[u._allTables,u,u.Transaction.prototype,this._cfg.tables],i(m),m),u._storeNames=i(m),this},fs.prototype.upgrade=function(l){return this._cfg.contentUpgrade=jt(this._cfg.contentUpgrade||Te,l),this},fs);function fs(){}function Hh(l,u){var f=l._dbNamesDB;return f||(f=l._dbNamesDB=new fi(wc,{addons:[],indexedDB:l,IDBKeyRange:u})).version(1).stores({dbnames:"name"}),f.table("dbnames")}function Uh(l){return l&&typeof l.databases=="function"}function $h(l){return Oi(function(){return Oe.letThrough=!0,l()})}function qh(l){return!("from"in l)}var wn=function(l,u){if(!this){var f=new wn;return l&&"d"in l&&s(f,l),f}s(this,arguments.length?{d:1,from:l,to:1<arguments.length?u:l}:{d:0})};function Na(l,u,f){var p=ut(u,f);if(!isNaN(p)){if(0<p)throw RangeError();if(qh(l))return s(l,{from:u,to:f,d:1});var m=l.l,p=l.r;if(ut(f,l.from)<0)return m?Na(m,u,f):l.l={from:u,to:f,d:1,l:null,r:null},I_(l);if(0<ut(u,l.to))return p?Na(p,u,f):l.r={from:u,to:f,d:1,l:null,r:null},I_(l);ut(u,l.from)<0&&(l.from=u,l.l=null,l.d=p?p.d+1:1),0<ut(f,l.to)&&(l.to=f,l.r=null,l.d=l.l?l.l.d+1:1),f=!l.r,m&&!l.l&&Fa(l,m),p&&f&&Fa(l,p)}}function Fa(l,u){qh(u)||function f(p,O){var y=O.from,C=O.to,x=O.l,O=O.r;Na(p,y,C),x&&f(p,x),O&&f(p,O)}(l,u)}function x_(l,u){var f=Pc(u),p=f.next();if(p.done)return!1;for(var m=p.value,y=Pc(l),C=y.next(m.from),x=C.value;!p.done&&!C.done;){if(ut(x.from,m.to)<=0&&0<=ut(x.to,m.from))return!0;ut(m.from,x.from)<0?m=(p=f.next(x.from)).value:x=(C=y.next(m.from)).value}return!1}function Pc(l){var u=qh(l)?null:{s:0,n:l};return{next:function(f){for(var p=0<arguments.length;u;)switch(u.s){case 0:if(u.s=1,p)for(;u.n.l&&ut(f,u.n.from)<0;)u={up:u,n:u.n.l,s:1};else for(;u.n.l;)u={up:u,n:u.n.l,s:1};case 1:if(u.s=2,!p||ut(f,u.n.to)<=0)return{value:u.n,done:!1};case 2:if(u.n.r){u.s=3,u={up:u,n:u.n.r,s:0};continue}case 3:u=u.up}return{done:!0}}}}function I_(l){var u,f,p=(((u=l.r)===null||u===void 0?void 0:u.d)||0)-(((f=l.l)===null||f===void 0?void 0:f.d)||0),m=1<p?"r":p<-1?"l":"";m&&(u=m=="r"?"l":"r",f=e({},l),p=l[m],l.from=p.from,l.to=p.to,l[m]=p[m],f[m]=p[u],(l[u]=f).d=M_(f)),l.d=M_(l)}function M_(f){var u=f.r,f=f.l;return(u?f?Math.max(u.d,f.d):u.d:f?f.d:0)+1}function kc(l,u){return i(u).forEach(function(f){l[f]?Fa(l[f],u[f]):l[f]=function p(m){var y,C,x={};for(y in m)d(m,y)&&(C=m[y],x[y]=!C||typeof C!="object"||re.has(C.constructor)?C:p(C));return x}(u[f])}),l}function Wh(l,u){return l.all||u.all||Object.keys(l).some(function(f){return u[f]&&x_(u[f],l[f])})}h(wn.prototype,((fr={add:function(l){return Fa(this,l),this},addKey:function(l){return Na(this,l,l),this},addKeys:function(l){var u=this;return l.forEach(function(f){return Na(u,f,f)}),this},hasKey:function(l){var u=Pc(this).next(l).value;return u&&ut(u.from,l)<=0&&0<=ut(u.to,l)}})[yt]=function(){return Pc(this)},fr));var lo={},Gh={},Kh=!1;function Nc(l){kc(Gh,l),Kh||(Kh=!0,setTimeout(function(){Kh=!1,Yh(Gh,!(Gh={}))},0))}function Yh(l,u){u===void 0&&(u=!1);var f=new Set;if(l.all)for(var p=0,m=Object.values(lo);p<m.length;p++)R_(C=m[p],l,f,u);else for(var y in l){var C,x=/^idb\:\/\/(.*)\/(.*)\//.exec(y);x&&(y=x[1],x=x[2],(C=lo["idb://".concat(y,"/").concat(x)])&&R_(C,l,f,u))}f.forEach(function(O){return O()})}function R_(l,u,f,p){for(var m=[],y=0,C=Object.entries(l.queries.query);y<C.length;y++){for(var x=C[y],O=x[0],A=[],L=0,R=x[1];L<R.length;L++){var j=R[L];Wh(u,j.obsSet)?j.subscribers.forEach(function(V){return f.add(V)}):p&&A.push(j)}p&&m.push([O,A])}if(p)for(var P=0,N=m;P<N.length;P++){var F=N[P],O=F[0],A=F[1];l.queries.query[O]=A}}function Gx(l){var u=l._state,f=l._deps.indexedDB;if(u.isBeingOpened||l.idbdb)return u.dbReadyPromise.then(function(){return u.dbOpenError?Gt(u.dbOpenError):l});u.isBeingOpened=!0,u.dbOpenError=null,u.openComplete=!1;var p=u.openCanceller,m=Math.round(10*l.verno),y=!1;function C(){if(u.openCanceller!==p)throw new ie.DatabaseClosed("db.open() was cancelled")}function x(){return new De(function(j,P){if(C(),!f)throw new ie.MissingAPI;var N=l.name,F=u.autoSchema||!m?f.open(N):f.open(N,m);if(!F)throw new ie.MissingAPI;F.onerror=$r(P),F.onblocked=Lt(l._fireOnBlocked),F.onupgradeneeded=Lt(function(V){var z;L=F.transaction,u.autoSchema&&!l._options.allowEmptyDB?(F.onerror=Oa,L.abort(),F.result.close(),(z=f.deleteDatabase(N)).onsuccess=z.onerror=Lt(function(){P(new ie.NoSuchDatabase("Database ".concat(N," doesnt exist")))})):(L.onerror=$r(P),V=V.oldVersion>Math.pow(2,62)?0:V.oldVersion,R=V<1,l.idbdb=F.result,y&&qx(l,L),$x(l,V/10,L,P))},P),F.onsuccess=Lt(function(){L=null;var V,z,q,Q,ne,de=l.idbdb=F.result,me=W(de.objectStoreNames);if(0<me.length)try{var ue=de.transaction((Q=me).length===1?Q[0]:Q,"readonly");if(u.autoSchema)z=de,q=ue,(V=l).verno=z.version/10,q=V._dbSchema=Oc(0,z,q),V._storeNames=W(z.objectStoreNames,0),Rc(V,[V._allTables],i(q),q);else if(Ac(l,l._dbSchema,ue),((ne=Bh(Oc(0,(ne=l).idbdb,ue),ne._dbSchema)).add.length||ne.change.some(function(pe){return pe.add.length||pe.change.length}))&&!y)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),de.close(),m=de.version+1,y=!0,j(x());Mc(l,ue)}catch{}cs.push(l),de.onversionchange=Lt(function(pe){u.vcFired=!0,l.on("versionchange").fire(pe)}),de.onclose=Lt(function(){l.close({disableAutoOpen:!1})}),R&&(ne=l._deps,ue=N,de=ne.indexedDB,ne=ne.IDBKeyRange,Uh(de)||ue===wc||Hh(de,ne).put({name:ue}).catch(Te)),j()},P)}).catch(function(j){switch(j?.name){case"UnknownError":if(0<u.PR1398_maxLoop)return u.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),x();break;case"VersionError":if(0<m)return m=0,x()}return De.reject(j)})}var O,A=u.dbReadyResolve,L=null,R=!1;return De.race([p,(typeof navigator>"u"?De.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(j){function P(){return indexedDB.databases().finally(j)}O=setInterval(P,100),P()}).finally(function(){return clearInterval(O)}):Promise.resolve()).then(x)]).then(function(){return C(),u.onReadyBeingFired=[],De.resolve($h(function(){return l.on.ready.fire(l.vip)})).then(function j(){if(0<u.onReadyBeingFired.length){var P=u.onReadyBeingFired.reduce(jt,Te);return u.onReadyBeingFired=[],De.resolve($h(function(){return P(l.vip)})).then(j)}})}).finally(function(){u.openCanceller===p&&(u.onReadyBeingFired=null,u.isBeingOpened=!1)}).catch(function(j){u.dbOpenError=j;try{L&&L.abort()}catch{}return p===u.openCanceller&&l._close(),Gt(j)}).finally(function(){u.openComplete=!0,A()}).then(function(){var j;return R&&(j={},l.tables.forEach(function(P){P.schema.indexes.forEach(function(N){N.name&&(j["idb://".concat(l.name,"/").concat(P.name,"/").concat(N.name)]=new wn(-1/0,[[[]]]))}),j["idb://".concat(l.name,"/").concat(P.name,"/")]=j["idb://".concat(l.name,"/").concat(P.name,"/:dels")]=new wn(-1/0,[[[]]])}),Ni(Aa).fire(j),Yh(j,!0)),l})}function Qh(l){function u(y){return l.next(y)}var f=m(u),p=m(function(y){return l.throw(y)});function m(y){return function(O){var x=y(O),O=x.value;return x.done?O:O&&typeof O.then=="function"?O.then(f,p):o(O)?Promise.all(O).then(f,p):f(O)}}return m(u)()}function Fc(l,u,f){for(var p=o(l)?l.slice():[l],m=0;m<f;++m)p.push(u);return p}var Kx={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(l){return e(e({},l),{table:function(u){var f=l.table(u),p=f.schema,m={},y=[];function C(R,j,P){var N=ka(R),F=m[N]=m[N]||[],V=R==null?0:typeof R=="string"?1:R.length,z=0<j,z=e(e({},P),{name:z?"".concat(N,"(virtual-from:").concat(P.name,")"):P.name,lowLevelIndex:P,isVirtual:z,keyTail:j,keyLength:V,extractKey:Vh(R),unique:!z&&P.unique});return F.push(z),z.isPrimaryKey||y.push(z),1<V&&C(V===2?R[0]:R.slice(0,V-1),j+1,P),F.sort(function(q,Q){return q.keyTail-Q.keyTail}),z}u=C(p.primaryKey.keyPath,0,p.primaryKey),m[":id"]=[u];for(var x=0,O=p.indexes;x<O.length;x++){var A=O[x];C(A.keyPath,0,A)}function L(R){var j,P=R.query.index;return P.isVirtual?e(e({},R),{query:{index:P.lowLevelIndex,range:(j=R.query.range,P=P.keyTail,{type:j.type===1?2:j.type,lower:Fc(j.lower,j.lowerOpen?l.MAX_KEY:l.MIN_KEY,P),lowerOpen:!0,upper:Fc(j.upper,j.upperOpen?l.MIN_KEY:l.MAX_KEY,P),upperOpen:!0})}}):R}return e(e({},f),{schema:e(e({},p),{primaryKey:u,indexes:y,getIndexByKeyPath:function(R){return(R=m[ka(R)])&&R[0]}}),count:function(R){return f.count(L(R))},query:function(R){return f.query(L(R))},openCursor:function(R){var j=R.query.index,P=j.keyTail,N=j.isVirtual,F=j.keyLength;return N?f.openCursor(L(R)).then(function(z){return z&&V(z)}):f.openCursor(R);function V(z){return Object.create(z,{continue:{value:function(q){q!=null?z.continue(Fc(q,R.reverse?l.MAX_KEY:l.MIN_KEY,P)):R.unique?z.continue(z.key.slice(0,F).concat(R.reverse?l.MIN_KEY:l.MAX_KEY,P)):z.continue()}},continuePrimaryKey:{value:function(q,Q){z.continuePrimaryKey(Fc(q,l.MAX_KEY,P),Q)}},primaryKey:{get:function(){return z.primaryKey}},key:{get:function(){var q=z.key;return F===1?q[0]:q.slice(0,F)}},value:{get:function(){return z.value}}})}}})}})}};function Zh(l,u,f,p){return f=f||{},p=p||"",i(l).forEach(function(m){var y,C,x;d(u,m)?(y=l[m],C=u[m],typeof y=="object"&&typeof C=="object"&&y&&C?(x=Fe(y))!==Fe(C)?f[p+m]=u[m]:x==="Object"?Zh(y,C,f,p+m+"."):y!==C&&(f[p+m]=u[m]):y!==C&&(f[p+m]=u[m])):f[p+m]=void 0}),i(u).forEach(function(m){d(l,m)||(f[p+m]=u[m])}),f}function Xh(l,u){return u.type==="delete"?u.keys:u.keys||u.values.map(l.extractKey)}var Yx={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(l){return e(e({},l),{table:function(u){var f=l.table(u),p=f.schema.primaryKey;return e(e({},f),{mutate:function(m){var y=Oe.trans,C=y.table(u).hook,x=C.deleting,O=C.creating,A=C.updating;switch(m.type){case"add":if(O.fire===Te)break;return y._promise("readwrite",function(){return L(m)},!0);case"put":if(O.fire===Te&&A.fire===Te)break;return y._promise("readwrite",function(){return L(m)},!0);case"delete":if(x.fire===Te)break;return y._promise("readwrite",function(){return L(m)},!0);case"deleteRange":if(x.fire===Te)break;return y._promise("readwrite",function(){return function R(j,P,N){return f.query({trans:j,values:!1,query:{index:p,range:P},limit:N}).then(function(F){var V=F.result;return L({type:"delete",keys:V,trans:j}).then(function(z){return 0<z.numFailures?Promise.reject(z.failures[0]):V.length<N?{failures:[],numFailures:0,lastResult:void 0}:R(j,e(e({},P),{lower:V[V.length-1],lowerOpen:!0}),N)})})}(m.trans,m.range,1e4)},!0)}return f.mutate(m);function L(R){var j,P,N,F=Oe.trans,V=R.keys||Xh(p,R);if(!V)throw new Error("Keys missing");return(R=R.type==="add"||R.type==="put"?e(e({},R),{keys:V}):e({},R)).type!=="delete"&&(R.values=t([],R.values,!0)),R.keys&&(R.keys=t([],R.keys,!0)),j=f,N=V,((P=R).type==="add"?Promise.resolve([]):j.getMany({trans:P.trans,keys:N,cache:"immutable"})).then(function(z){var q=V.map(function(Q,ne){var de,me,ue,pe=z[ne],ye={onerror:null,onsuccess:null};return R.type==="delete"?x.fire.call(ye,Q,pe,F):R.type==="add"||pe===void 0?(de=O.fire.call(ye,Q,R.values[ne],F),Q==null&&de!=null&&(R.keys[ne]=Q=de,p.outbound||G(R.values[ne],p.keyPath,Q))):(de=Zh(pe,R.values[ne]),(me=A.fire.call(ye,de,Q,pe,F))&&(ue=R.values[ne],Object.keys(me).forEach(function(ge){d(ue,ge)?ue[ge]=me[ge]:G(ue,ge,me[ge])}))),ye});return f.mutate(R).then(function(Q){for(var ne=Q.failures,de=Q.results,me=Q.numFailures,Q=Q.lastResult,ue=0;ue<V.length;++ue){var pe=(de||V)[ue],ye=q[ue];pe==null?ye.onerror&&ye.onerror(ne[ue]):ye.onsuccess&&ye.onsuccess(R.type==="put"&&z[ue]?R.values[ue]:pe)}return{failures:ne,results:de,numFailures:me,lastResult:Q}}).catch(function(Q){return q.forEach(function(ne){return ne.onerror&&ne.onerror(Q)}),Promise.reject(Q)})})}}})}})}};function T_(l,u,f){try{if(!u||u.keys.length<l.length)return null;for(var p=[],m=0,y=0;m<u.keys.length&&y<l.length;++m)ut(u.keys[m],l[y])===0&&(p.push(f?we(u.values[m]):u.values[m]),++y);return p.length===l.length?p:null}catch{return null}}var Qx={stack:"dbcore",level:-1,create:function(l){return{table:function(u){var f=l.table(u);return e(e({},f),{getMany:function(p){if(!p.cache)return f.getMany(p);var m=T_(p.keys,p.trans._cache,p.cache==="clone");return m?De.resolve(m):f.getMany(p).then(function(y){return p.trans._cache={keys:p.keys,values:p.cache==="clone"?we(y):y},y})},mutate:function(p){return p.type!=="add"&&(p.trans._cache=null),f.mutate(p)}})}}}};function O_(l,u){return l.trans.mode==="readonly"&&!!l.subscr&&!l.trans.explicit&&l.trans.db._options.cache!=="disabled"&&!u.schema.primaryKey.outbound}function A_(l,u){switch(l){case"query":return u.values&&!u.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Zx={stack:"dbcore",level:0,name:"Observability",create:function(l){var u=l.schema.name,f=new wn(l.MIN_KEY,l.MAX_KEY);return e(e({},l),{transaction:function(p,m,y){if(Oe.subscr&&m!=="readonly")throw new ie.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Oe.querier));return l.transaction(p,m,y)},table:function(p){var m=l.table(p),y=m.schema,C=y.primaryKey,R=y.indexes,x=C.extractKey,O=C.outbound,A=C.autoIncrement&&R.filter(function(P){return P.compound&&P.keyPath.includes(C.keyPath)}),L=e(e({},m),{mutate:function(P){function N(ge){return ge="idb://".concat(u,"/").concat(p,"/").concat(ge),Q[ge]||(Q[ge]=new wn)}var F,V,z,q=P.trans,Q=P.mutatedParts||(P.mutatedParts={}),ne=N(""),de=N(":dels"),me=P.type,ye=P.type==="deleteRange"?[P.range]:P.type==="delete"?[P.keys]:P.values.length<50?[Xh(C,P).filter(function(ge){return ge}),P.values]:[],ue=ye[0],pe=ye[1],ye=P.trans._cache;return o(ue)?(ne.addKeys(ue),(ye=me==="delete"||ue.length===pe.length?T_(ue,ye):null)||de.addKeys(ue),(ye||pe)&&(F=N,V=ye,z=pe,y.indexes.forEach(function(ge){var xe=F(ge.name||"");function We(ot){return ot!=null?ge.extractKey(ot):null}function Xe(ot){return ge.multiEntry&&o(ot)?ot.forEach(function(nr){return xe.addKey(nr)}):xe.addKey(ot)}(V||z).forEach(function(ot,Cn){var Ue=V&&We(V[Cn]),Cn=z&&We(z[Cn]);ut(Ue,Cn)!==0&&(Ue!=null&&Xe(Ue),Cn!=null&&Xe(Cn))})}))):ue?(pe={from:(pe=ue.lower)!==null&&pe!==void 0?pe:l.MIN_KEY,to:(pe=ue.upper)!==null&&pe!==void 0?pe:l.MAX_KEY},de.add(pe),ne.add(pe)):(ne.add(f),de.add(f),y.indexes.forEach(function(ge){return N(ge.name).add(f)})),m.mutate(P).then(function(ge){return!ue||P.type!=="add"&&P.type!=="put"||(ne.addKeys(ge.results),A&&A.forEach(function(xe){for(var We=P.values.map(function(Ue){return xe.extractKey(Ue)}),Xe=xe.keyPath.findIndex(function(Ue){return Ue===C.keyPath}),ot=0,nr=ge.results.length;ot<nr;++ot)We[ot][Xe]=ge.results[ot];N(xe.name).addKeys(We)})),q.mutatedParts=kc(q.mutatedParts||{},Q),ge})}}),R=function(N){var F=N.query,N=F.index,F=F.range;return[N,new wn((N=F.lower)!==null&&N!==void 0?N:l.MIN_KEY,(F=F.upper)!==null&&F!==void 0?F:l.MAX_KEY)]},j={get:function(P){return[C,new wn(P.key)]},getMany:function(P){return[C,new wn().addKeys(P.keys)]},count:R,query:R,openCursor:R};return i(j).forEach(function(P){L[P]=function(N){var F=Oe.subscr,V=!!F,z=O_(Oe,m)&&A_(P,N)?N.obsSet={}:F;if(V){var q=function(pe){return pe="idb://".concat(u,"/").concat(p,"/").concat(pe),z[pe]||(z[pe]=new wn)},Q=q(""),ne=q(":dels"),F=j[P](N),V=F[0],F=F[1];if((P==="query"&&V.isPrimaryKey&&!N.values?ne:q(V.name||"")).add(F),!V.isPrimaryKey){if(P!=="count"){var de=P==="query"&&O&&N.values&&m.query(e(e({},N),{values:!1}));return m[P].apply(this,arguments).then(function(pe){if(P==="query"){if(O&&N.values)return de.then(function(We){return We=We.result,Q.addKeys(We),pe});var ye=N.values?pe.result.map(x):pe.result;(N.values?Q:ne).addKeys(ye)}else if(P==="openCursor"){var ge=pe,xe=N.values;return ge&&Object.create(ge,{key:{get:function(){return ne.addKey(ge.primaryKey),ge.key}},primaryKey:{get:function(){var We=ge.primaryKey;return ne.addKey(We),We}},value:{get:function(){return xe&&Q.addKey(ge.primaryKey),ge.value}}})}return pe})}ne.add(f)}}return m[P].apply(this,arguments)}}),L}})}};function P_(l,u,f){if(f.numFailures===0)return u;if(u.type==="deleteRange")return null;var p=u.keys?u.keys.length:"values"in u&&u.values?u.values.length:1;return f.numFailures===p?null:(u=e({},u),o(u.keys)&&(u.keys=u.keys.filter(function(m,y){return!(y in f.failures)})),"values"in u&&o(u.values)&&(u.values=u.values.filter(function(m,y){return!(y in f.failures)})),u)}function Jh(l,u){return f=l,((p=u).lower===void 0||(p.lowerOpen?0<ut(f,p.lower):0<=ut(f,p.lower)))&&(l=l,(u=u).upper===void 0||(u.upperOpen?ut(l,u.upper)<0:ut(l,u.upper)<=0));var f,p}function k_(l,u,j,p,m,y){if(!j||j.length===0)return l;var C=u.query.index,x=C.multiEntry,O=u.query.range,A=p.schema.primaryKey.extractKey,L=C.extractKey,R=(C.lowLevelIndex||C).extractKey,j=j.reduce(function(P,N){var F=P,V=[];if(N.type==="add"||N.type==="put")for(var z=new wn,q=N.values.length-1;0<=q;--q){var Q,ne=N.values[q],de=A(ne);z.hasKey(de)||(Q=L(ne),(x&&o(Q)?Q.some(function(ge){return Jh(ge,O)}):Jh(Q,O))&&(z.addKey(de),V.push(ne)))}switch(N.type){case"add":var me=new wn().addKeys(u.values?P.map(function(xe){return A(xe)}):P),F=P.concat(u.values?V.filter(function(xe){return xe=A(xe),!me.hasKey(xe)&&(me.addKey(xe),!0)}):V.map(function(xe){return A(xe)}).filter(function(xe){return!me.hasKey(xe)&&(me.addKey(xe),!0)}));break;case"put":var ue=new wn().addKeys(N.values.map(function(xe){return A(xe)}));F=P.filter(function(xe){return!ue.hasKey(u.values?A(xe):xe)}).concat(u.values?V:V.map(function(xe){return A(xe)}));break;case"delete":var pe=new wn().addKeys(N.keys);F=P.filter(function(xe){return!pe.hasKey(u.values?A(xe):xe)});break;case"deleteRange":var ye=N.range;F=P.filter(function(xe){return!Jh(A(xe),ye)})}return F},l);return j===l?l:(j.sort(function(P,N){return ut(R(P),R(N))||ut(A(P),A(N))}),u.limit&&u.limit<1/0&&(j.length>u.limit?j.length=u.limit:l.length===u.limit&&j.length<u.limit&&(m.dirty=!0)),y?Object.freeze(j):j)}function N_(l,u){return ut(l.lower,u.lower)===0&&ut(l.upper,u.upper)===0&&!!l.lowerOpen==!!u.lowerOpen&&!!l.upperOpen==!!u.upperOpen}function Xx(l,u){return function(f,p,m,y){if(f===void 0)return p!==void 0?-1:0;if(p===void 0)return 1;if((p=ut(f,p))===0){if(m&&y)return 0;if(m)return 1;if(y)return-1}return p}(l.lower,u.lower,l.lowerOpen,u.lowerOpen)<=0&&0<=function(f,p,m,y){if(f===void 0)return p!==void 0?1:0;if(p===void 0)return-1;if((p=ut(f,p))===0){if(m&&y)return 0;if(m)return-1;if(y)return 1}return p}(l.upper,u.upper,l.upperOpen,u.upperOpen)}function Jx(l,u,f,p){l.subscribers.add(f),p.addEventListener("abort",function(){var m,y;l.subscribers.delete(f),l.subscribers.size===0&&(m=l,y=u,setTimeout(function(){m.subscribers.size===0&&se(y,m)},3e3))})}var eI={stack:"dbcore",level:0,name:"Cache",create:function(l){var u=l.schema.name;return e(e({},l),{transaction:function(f,p,m){var y,C,x=l.transaction(f,p,m);return p==="readwrite"&&(C=(y=new AbortController).signal,m=function(O){return function(){if(y.abort(),p==="readwrite"){for(var A=new Set,L=0,R=f;L<R.length;L++){var j=R[L],P=lo["idb://".concat(u,"/").concat(j)];if(P){var N=l.table(j),F=P.optimisticOps.filter(function(xe){return xe.trans===x});if(x._explicit&&O&&x.mutatedParts)for(var V=0,z=Object.values(P.queries.query);V<z.length;V++)for(var q=0,Q=(me=z[V]).slice();q<Q.length;q++)Wh((ue=Q[q]).obsSet,x.mutatedParts)&&(se(me,ue),ue.subscribers.forEach(function(xe){return A.add(xe)}));else if(0<F.length){P.optimisticOps=P.optimisticOps.filter(function(xe){return xe.trans!==x});for(var ne=0,de=Object.values(P.queries.query);ne<de.length;ne++)for(var me,ue,pe,ye=0,ge=(me=de[ne]).slice();ye<ge.length;ye++)(ue=ge[ye]).res!=null&&x.mutatedParts&&(O&&!ue.dirty?(pe=Object.isFrozen(ue.res),pe=k_(ue.res,ue.req,F,N,ue,pe),ue.dirty?(se(me,ue),ue.subscribers.forEach(function(xe){return A.add(xe)})):pe!==ue.res&&(ue.res=pe,ue.promise=De.resolve({result:pe}))):(ue.dirty&&se(me,ue),ue.subscribers.forEach(function(xe){return A.add(xe)})))}}}A.forEach(function(xe){return xe()})}}},x.addEventListener("abort",m(!1),{signal:C}),x.addEventListener("error",m(!1),{signal:C}),x.addEventListener("complete",m(!0),{signal:C})),x},table:function(f){var p=l.table(f),m=p.schema.primaryKey;return e(e({},p),{mutate:function(y){var C=Oe.trans;if(m.outbound||C.db._options.cache==="disabled"||C.explicit||C.idbtrans.mode!=="readwrite")return p.mutate(y);var x=lo["idb://".concat(u,"/").concat(f)];return x?(C=p.mutate(y),y.type!=="add"&&y.type!=="put"||!(50<=y.values.length||Xh(m,y).some(function(O){return O==null}))?(x.optimisticOps.push(y),y.mutatedParts&&Nc(y.mutatedParts),C.then(function(O){0<O.numFailures&&(se(x.optimisticOps,y),(O=P_(0,y,O))&&x.optimisticOps.push(O),y.mutatedParts&&Nc(y.mutatedParts))}),C.catch(function(){se(x.optimisticOps,y),y.mutatedParts&&Nc(y.mutatedParts)})):C.then(function(O){var A=P_(0,e(e({},y),{values:y.values.map(function(L,R){var j;return O.failures[R]?L:(L=(j=m.keyPath)!==null&&j!==void 0&&j.includes(".")?we(L):e({},L),G(L,m.keyPath,O.results[R]),L)})}),O);x.optimisticOps.push(A),queueMicrotask(function(){return y.mutatedParts&&Nc(y.mutatedParts)})}),C):p.mutate(y)},query:function(y){if(!O_(Oe,p)||!A_("query",y))return p.query(y);var C=((A=Oe.trans)===null||A===void 0?void 0:A.db._options.cache)==="immutable",R=Oe,x=R.requery,O=R.signal,A=function(N,F,V,z){var q=lo["idb://".concat(N,"/").concat(F)];if(!q)return[];if(!(F=q.queries[V]))return[null,!1,q,null];var Q=F[(z.query?z.query.index.name:null)||""];if(!Q)return[null,!1,q,null];switch(V){case"query":var ne=Q.find(function(de){return de.req.limit===z.limit&&de.req.values===z.values&&N_(de.req.query.range,z.query.range)});return ne?[ne,!0,q,Q]:[Q.find(function(de){return("limit"in de.req?de.req.limit:1/0)>=z.limit&&(!z.values||de.req.values)&&Xx(de.req.query.range,z.query.range)}),!1,q,Q];case"count":return ne=Q.find(function(de){return N_(de.req.query.range,z.query.range)}),[ne,!!ne,q,Q]}}(u,f,"query",y),L=A[0],R=A[1],j=A[2],P=A[3];return L&&R?L.obsSet=y.obsSet:(R=p.query(y).then(function(N){var F=N.result;if(L&&(L.res=F),C){for(var V=0,z=F.length;V<z;++V)Object.freeze(F[V]);Object.freeze(F)}else N.result=we(F);return N}).catch(function(N){return P&&L&&se(P,L),Promise.reject(N)}),L={obsSet:y.obsSet,promise:R,subscribers:new Set,type:"query",req:y,dirty:!1},P?P.push(L):(P=[L],(j=j||(lo["idb://".concat(u,"/").concat(f)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[y.query.index.name||""]=P)),Jx(L,P,x,O),L.promise.then(function(N){return{result:k_(N.result,y,j?.optimisticOps,p,L,C)}})}})}})}};function Lc(l,u){return new Proxy(l,{get:function(f,p,m){return p==="db"?u:Reflect.get(f,p,m)}})}var fi=(Kt.prototype.version=function(l){if(isNaN(l)||l<.1)throw new ie.Type("Given version is not a positive number");if(l=Math.round(10*l)/10,this.idbdb||this._state.isBeingOpened)throw new ie.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,l);var u=this._versions,f=u.filter(function(p){return p._cfg.version===l})[0];return f||(f=new this.Version(l),u.push(f),u.sort(Ux),f.stores({}),this._state.autoSchema=!1,f)},Kt.prototype._whenReady=function(l){var u=this;return this.idbdb&&(this._state.openComplete||Oe.letThrough||this._vip)?l():new De(function(f,p){if(u._state.openComplete)return p(new ie.DatabaseClosed(u._state.dbOpenError));if(!u._state.isBeingOpened){if(!u._state.autoOpen)return void p(new ie.DatabaseClosed);u.open().catch(Te)}u._state.dbReadyPromise.then(f,p)}).then(l)},Kt.prototype.use=function(l){var u=l.stack,f=l.create,p=l.level,m=l.name;return m&&this.unuse({stack:u,name:m}),l=this._middlewares[u]||(this._middlewares[u]=[]),l.push({stack:u,create:f,level:p??10,name:m}),l.sort(function(y,C){return y.level-C.level}),this},Kt.prototype.unuse=function(l){var u=l.stack,f=l.name,p=l.create;return u&&this._middlewares[u]&&(this._middlewares[u]=this._middlewares[u].filter(function(m){return p?m.create!==p:!!f&&m.name!==f})),this},Kt.prototype.open=function(){var l=this;return oo(Ti,function(){return Gx(l)})},Kt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var l=this._state,u=cs.indexOf(this);if(0<=u&&cs.splice(u,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}l.isBeingOpened||(l.dbReadyPromise=new De(function(f){l.dbReadyResolve=f}),l.openCanceller=new De(function(f,p){l.cancelOpen=p}))},Kt.prototype.close=function(f){var u=(f===void 0?{disableAutoOpen:!0}:f).disableAutoOpen,f=this._state;u?(f.isBeingOpened&&f.cancelOpen(new ie.DatabaseClosed),this._close(),f.autoOpen=!1,f.dbOpenError=new ie.DatabaseClosed):(this._close(),f.autoOpen=this._options.autoOpen||f.isBeingOpened,f.openComplete=!1,f.dbOpenError=null)},Kt.prototype.delete=function(l){var u=this;l===void 0&&(l={disableAutoOpen:!0});var f=0<arguments.length&&typeof arguments[0]!="object",p=this._state;return new De(function(m,y){function C(){u.close(l);var x=u._deps.indexedDB.deleteDatabase(u.name);x.onsuccess=Lt(function(){var O,A,L;O=u._deps,A=u.name,L=O.indexedDB,O=O.IDBKeyRange,Uh(L)||A===wc||Hh(L,O).delete(A).catch(Te),m()}),x.onerror=$r(y),x.onblocked=u._fireOnBlocked}if(f)throw new ie.InvalidArgument("Invalid closeOptions argument to db.delete()");p.isBeingOpened?p.dbReadyPromise.then(C):C()})},Kt.prototype.backendDB=function(){return this.idbdb},Kt.prototype.isOpen=function(){return this.idbdb!==null},Kt.prototype.hasBeenClosed=function(){var l=this._state.dbOpenError;return l&&l.name==="DatabaseClosed"},Kt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Kt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Kt.prototype,"tables",{get:function(){var l=this;return i(this._allTables).map(function(u){return l._allTables[u]})},enumerable:!1,configurable:!0}),Kt.prototype.transaction=function(){var l=function(u,f,p){var m=arguments.length;if(m<2)throw new ie.InvalidArgument("Too few arguments");for(var y=new Array(m-1);--m;)y[m-1]=arguments[m];return p=y.pop(),[u,$(y),p]}.apply(this,arguments);return this._transaction.apply(this,l)},Kt.prototype._transaction=function(l,u,f){var p=this,m=Oe.trans;m&&m.db===this&&l.indexOf("!")===-1||(m=null);var y,C,x=l.indexOf("?")!==-1;l=l.replace("!","").replace("?","");try{if(C=u.map(function(A){if(A=A instanceof p.Table?A.name:A,typeof A!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return A}),l=="r"||l===Oh)y=Oh;else{if(l!="rw"&&l!=Ah)throw new ie.InvalidArgument("Invalid transaction mode: "+l);y=Ah}if(m){if(m.mode===Oh&&y===Ah){if(!x)throw new ie.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");m=null}m&&C.forEach(function(A){if(m&&m.storeNames.indexOf(A)===-1){if(!x)throw new ie.SubTransaction("Table "+A+" not included in parent transaction.");m=null}}),x&&m&&!m.active&&(m=null)}}catch(A){return m?m._promise(null,function(L,R){R(A)}):Gt(A)}var O=function A(L,R,j,P,N){return De.resolve().then(function(){var F=Oe.transless||Oe,V=L._createTransaction(R,j,L._dbSchema,P);if(V.explicit=!0,F={trans:V,transless:F},P)V.idbtrans=P.idbtrans;else try{V.create(),V.idbtrans._explicit=!0,L._state.PR1398_maxLoop=3}catch(Q){return Q.name===Wt.InvalidState&&L.isOpen()&&0<--L._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),L.close({disableAutoOpen:!1}),L.open().then(function(){return A(L,R,j,null,N)})):Gt(Q)}var z,q=fe(N);return q&&ls(),F=De.follow(function(){var Q;(z=N.call(V,V))&&(q?(Q=Ai.bind(null,null),z.then(Q,Q)):typeof z.next=="function"&&typeof z.throw=="function"&&(z=Qh(z)))},F),(z&&typeof z.then=="function"?De.resolve(z).then(function(Q){return V.active?Q:Gt(new ie.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):F.then(function(){return z})).then(function(Q){return P&&V._resolve(),V._completion.then(function(){return Q})}).catch(function(Q){return V._reject(Q),Gt(Q)})})}.bind(null,this,y,C,m,f);return m?m._promise(y,O,"lock"):Oe.trans?oo(Oe.transless,function(){return p._whenReady(O)}):this._whenReady(O)},Kt.prototype.table=function(l){if(!d(this._allTables,l))throw new ie.InvalidTable("Table ".concat(l," does not exist"));return this._allTables[l]},Kt);function Kt(l,u){var f=this;this._middlewares={},this.verno=0;var p=Kt.dependencies;this._options=u=e({addons:Kt.addons,autoOpen:!0,indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange,cache:"cloned"},u),this._deps={indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange},p=u.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var m,y,C,x,O,A={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Te,dbReadyPromise:null,cancelOpen:Te,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:u.autoOpen};A.dbReadyPromise=new De(function(R){A.dbReadyResolve=R}),A.openCanceller=new De(function(R,j){A.cancelOpen=j}),this._state=A,this.name=l,this.on=Ra(this,"populate","blocked","versionchange","close",{ready:[jt,Te]}),this.once=function(R,j){var P=function(){for(var N=[],F=0;F<arguments.length;F++)N[F]=arguments[F];f.on(R).unsubscribe(P),j.apply(f,N)};return f.on(R,P)},this.on.ready.subscribe=oe(this.on.ready.subscribe,function(R){return function(j,P){Kt.vip(function(){var N,F=f._state;F.openComplete?(F.dbOpenError||De.resolve().then(j),P&&R(j)):F.onReadyBeingFired?(F.onReadyBeingFired.push(j),P&&R(j)):(R(j),N=f,P||R(function V(){N.on.ready.unsubscribe(j),N.on.ready.unsubscribe(V)}))})}}),this.Collection=(m=this,Ta(Fx.prototype,function(z,V){this.db=m;var P=u_,N=null;if(V)try{P=V()}catch(q){N=q}var F=z._ctx,V=F.table,z=V.hook.reading.fire;this._ctx={table:V,index:F.index,isPrimKey:!F.index||V.schema.primKey.keyPath&&F.index===V.schema.primKey.name,range:P,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:N,or:F.or,valueMapper:z!==_t?z:null}})),this.Table=(y=this,Ta(m_.prototype,function(R,j,P){this.db=y,this._tx=P,this.name=R,this.schema=j,this.hook=y._allTables[R]?y._allTables[R].hook:Ra(null,{creating:[nt,Te],reading:[wt,_t],updating:[ht,Te],deleting:[un,Te]})})),this.Transaction=(C=this,Ta(jx.prototype,function(R,j,P,N,F){var V=this;R!=="readonly"&&j.forEach(function(z){z=(z=P[z])===null||z===void 0?void 0:z.yProps,z&&(j=j.concat(z.map(function(q){return q.updatesTable})))}),this.db=C,this.mode=R,this.storeNames=j,this.schema=P,this.chromeTransactionDurability=N,this.idbtrans=null,this.on=Ra(this,"complete","error","abort"),this.parent=F||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new De(function(z,q){V._resolve=z,V._reject=q}),this._completion.then(function(){V.active=!1,V.on.complete.fire()},function(z){var q=V.active;return V.active=!1,V.on.error.fire(z),V.parent?V.parent._reject(z):q&&V.idbtrans&&V.idbtrans.abort(),Gt(z)})})),this.Version=(x=this,Ta(Wx.prototype,function(R){this.db=x,this._cfg={version:R,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(O=this,Ta(b_.prototype,function(R,j,P){if(this.db=O,this._ctx={table:R,index:j===":id"?null:j,or:P},this._cmp=this._ascending=ut,this._descending=function(N,F){return ut(F,N)},this._max=function(N,F){return 0<ut(N,F)?N:F},this._min=function(N,F){return ut(N,F)<0?N:F},this._IDBKeyRange=O._deps.IDBKeyRange,!this._IDBKeyRange)throw new ie.MissingAPI})),this.on("versionchange",function(R){0<R.newVersion?console.warn("Another connection wants to upgrade database '".concat(f.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(f.name,"'. Closing db now to resume the delete request.")),f.close({disableAutoOpen:!1})}),this.on("blocked",function(R){!R.newVersion||R.newVersion<R.oldVersion?console.warn("Dexie.delete('".concat(f.name,"') was blocked")):console.warn("Upgrade '".concat(f.name,"' blocked by other connection holding version ").concat(R.oldVersion/10))}),this._maxKey=Pa(u.IDBKeyRange),this._createTransaction=function(R,j,P,N){return new f.Transaction(R,j,P,f._options.chromeTransactionDurability,N)},this._fireOnBlocked=function(R){f.on("blocked").fire(R),cs.filter(function(j){return j.name===f.name&&j!==f&&!j._state.vcFired}).map(function(j){return j.on("versionchange").fire(R)})},this.use(Qx),this.use(eI),this.use(Zx),this.use(Kx),this.use(Yx);var L=new Proxy(this,{get:function(R,j,P){if(j==="_vip")return!0;if(j==="table")return function(F){return Lc(f.table(F),L)};var N=Reflect.get(R,j,P);return N instanceof m_?Lc(N,L):j==="tables"?N.map(function(F){return Lc(F,L)}):j==="_createTransaction"?function(){return Lc(N.apply(this,arguments),L)}:N}});this.vip=L,p.forEach(function(R){return R(f)})}var Vc,fr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",tI=(ep.prototype.subscribe=function(l,u,f){return this._subscribe(l&&typeof l!="function"?l:{next:l,error:u,complete:f})},ep.prototype[fr]=function(){return this},ep);function ep(l){this._subscribe=l}try{Vc={indexedDB:r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB,IDBKeyRange:r.IDBKeyRange||r.webkitIDBKeyRange}}catch{Vc={indexedDB:null,IDBKeyRange:null}}function F_(l){var u,f=!1,p=new tI(function(m){var y=fe(l),C,x=!1,O={},A={},L={get closed(){return x},unsubscribe:function(){x||(x=!0,C&&C.abort(),R&&Ni.storagemutated.unsubscribe(P))}};m.start&&m.start(L);var R=!1,j=function(){return Th(N)},P=function(F){kc(O,F),Wh(A,O)&&j()},N=function(){var F,V,z;!x&&Vc.indexedDB&&(O={},F={},C&&C.abort(),C=new AbortController,z=function(q){var Q=ss();try{y&&ls();var ne=Oi(l,q);return ne=y?ne.finally(Ai):ne}finally{Q&&as()}}(V={subscr:F,signal:C.signal,requery:j,querier:l,trans:null}),Promise.resolve(z).then(function(q){f=!0,u=q,x||V.signal.aborted||(O={},function(Q){for(var ne in Q)if(d(Q,ne))return;return 1}(A=F)||R||(Ni(Aa,P),R=!0),Th(function(){return!x&&m.next&&m.next(q)}))},function(q){f=!1,["DatabaseClosedError","AbortError"].includes(q?.name)||x||Th(function(){x||m.error&&m.error(q)})}))};return setTimeout(j,0),L});return p.hasValue=function(){return f},p.getValue=function(){return u},p}var co=fi;function tp(l){var u=Fi;try{Fi=!0,Ni.storagemutated.fire(l),Yh(l,!0)}finally{Fi=u}}h(co,e(e({},Pe),{delete:function(l){return new co(l,{addons:[]}).delete()},exists:function(l){return new co(l,{addons:[]}).open().then(function(u){return u.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(l){try{return u=co.dependencies,f=u.indexedDB,u=u.IDBKeyRange,(Uh(f)?Promise.resolve(f.databases()).then(function(p){return p.map(function(m){return m.name}).filter(function(m){return m!==wc})}):Hh(f,u).toCollection().primaryKeys()).then(l)}catch{return Gt(new ie.MissingAPI)}var u,f},defineClass:function(){return function(l){s(this,l)}},ignoreTransaction:function(l){return Oe.trans?oo(Oe.transless,l):l()},vip:$h,async:function(l){return function(){try{var u=Qh(l.apply(this,arguments));return u&&typeof u.then=="function"?u:De.resolve(u)}catch(f){return Gt(f)}}},spawn:function(l,u,f){try{var p=Qh(l.apply(f,u||[]));return p&&typeof p.then=="function"?p:De.resolve(p)}catch(m){return Gt(m)}},currentTransaction:{get:function(){return Oe.trans||null}},waitFor:function(l,u){return u=De.resolve(typeof l=="function"?co.ignoreTransaction(l):l).timeout(u||6e4),Oe.trans?Oe.trans.waitFor(u):u},Promise:De,debug:{get:function(){return vn},set:function(l){Jn(l)}},derive:v,extend:s,props:h,override:oe,Events:Ra,on:Ni,liveQuery:F_,extendObservabilitySet:kc,getByKeyPath:K,setByKeyPath:G,delByKeyPath:function(l,u){typeof u=="string"?G(l,u,void 0):"length"in u&&[].map.call(u,function(f){G(l,f,void 0)})},shallowClone:I,deepClone:we,getObjectDiff:Zh,cmp:ut,asap:B,minKey:-1/0,addons:[],connections:cs,errnames:Wt,dependencies:Vc,cache:lo,semVer:"4.2.1",version:"4.2.1".split(".").map(function(l){return parseInt(l)}).reduce(function(l,u,f){return l+u/Math.pow(10,2*f)})})),co.maxKey=Pa(co.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ni(Aa,function(l){Fi||(l=new CustomEvent(Nh,{detail:l}),Fi=!0,dispatchEvent(l),Fi=!1)}),addEventListener(Nh,function(l){l=l.detail,Fi||tp(l)}));var hs,Fi=!1,L_=function(){};return typeof BroadcastChannel<"u"&&((L_=function(){(hs=new BroadcastChannel(Nh)).onmessage=function(l){return l.data&&tp(l.data)}})(),typeof hs.unref=="function"&&hs.unref(),Ni(Aa,function(l){Fi||hs.postMessage(l)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(l){if(!fi.disableBfCache&&l.persisted){vn&&console.debug("Dexie: handling persisted pagehide"),hs?.close();for(var u=0,f=cs;u<f.length;u++)f[u].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(l){!fi.disableBfCache&&l.persisted&&(vn&&console.debug("Dexie: handling persisted pageshow"),L_(),tp({all:new wn(-1/0,[[]])}))})),De.rejectionMapper=function(l,u){return!l||l instanceof ve||l instanceof TypeError||l instanceof SyntaxError||!l.name||!ct[l.name]?l:(u=new ct[l.name](u||l.message,l),"stack"in l&&b(u,"stack",{get:function(){return this.inner.stack}}),u)},Jn(vn),e(fi,Object.freeze({__proto__:null,Dexie:fi,liveQuery:F_,Entity:d_,cmp:ut,PropModification:Ma,replacePrefix:function(l,u){return new Ma({replacePrefix:[l,u]})},add:function(l){return new Ma({add:l})},remove:function(l){return new Ma({remove:l})},default:fi,RangeSet:wn,mergeRanges:Fa,rangesOverlap:x_}),{default:fi}),fi})});function cp(n,e){return Object.is(n,e)}var rn=null,zc=!1,up=1,hr=Symbol("SIGNAL");function Ge(n){let e=rn;return rn=n,e}function dp(){return rn}var ps={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Va(n){if(zc)throw new Error("");if(rn===null)return;rn.consumerOnSignalRead(n);let e=rn.nextProducerIndex++;if(Wc(rn),e<rn.producerNode.length&&rn.producerNode[e]!==n&&La(rn)){let t=rn.producerNode[e];qc(t,rn.producerIndexOfThis[e])}rn.producerNode[e]!==n&&(rn.producerNode[e]=n,rn.producerIndexOfThis[e]=La(rn)?U_(n,rn,e):0),rn.producerLastReadVersion[e]=n.version}function H_(){up++}function fp(n){if(!(La(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===up)){if(!n.producerMustRecompute(n)&&!$c(n)){lp(n);return}n.producerRecomputeValue(n),lp(n)}}function hp(n){if(n.liveConsumerNode===void 0)return;let e=zc;zc=!0;try{for(let t of n.liveConsumerNode)t.dirty||cI(t)}finally{zc=e}}function pp(){return rn?.consumerAllowSignalWrites!==!1}function cI(n){n.dirty=!0,hp(n),n.consumerMarkedDirty?.(n)}function lp(n){n.dirty=!1,n.lastCleanEpoch=up}function ja(n){return n&&(n.nextProducerIndex=0),Ge(n)}function Uc(n,e){if(Ge(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(La(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)qc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function $c(n){Wc(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(fp(t),r!==t.version))return!0}return!1}function Ba(n){if(Wc(n),La(n))for(let e=0;e<n.producerNode.length;e++)qc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function U_(n,e,t){if($_(n),n.liveConsumerNode.length===0&&q_(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=U_(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function qc(n,e){if($_(n),n.liveConsumerNode.length===1&&q_(n))for(let r=0;r<n.producerNode.length;r++)qc(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Wc(i),i.producerIndexOfThis[r]=e}}function La(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Wc(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function $_(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function q_(n){return n.producerNode!==void 0}function gp(n,e){let t=Object.create(uI);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(fp(t),Va(t),t.value===Hc)throw t.error;return t.value};return r[hr]=t,r}var sp=Symbol("UNSET"),ap=Symbol("COMPUTING"),Hc=Symbol("ERRORED"),uI=Ce(Z({},ps),{value:sp,dirty:!0,error:null,equal:cp,kind:"computed",producerMustRecompute(n){return n.value===sp||n.value===ap},producerRecomputeValue(n){if(n.value===ap)throw new Error("Detected cycle in computations.");let e=n.value;n.value=ap;let t=ja(n),r,i=!1;try{r=n.computation(),Ge(null),i=e!==sp&&e!==Hc&&r!==Hc&&n.equal(e,r)}catch(o){r=Hc,n.error=o}finally{Uc(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function dI(){throw new Error}var W_=dI;function G_(n){W_(n)}function mp(n){W_=n}var fI=null;function vp(n,e){let t=Object.create(Gc);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(Va(t),t.value);return r[hr]=t,r}function za(n,e){pp()||G_(n),n.equal(n.value,e)||(n.value=e,hI(n))}function yp(n,e){pp()||G_(n),za(n,e(n.value))}var Gc=Ce(Z({},ps),{equal:cp,value:void 0,kind:"signal"});function hI(n){n.version++,H_(),hp(n),fI?.()}function _p(n){let e=Ge(null);try{return n()}finally{Ge(e)}}var Dp;function Ha(){return Dp}function hi(n){let e=Dp;return Dp=n,e}var Kc=Symbol("NotFound");function $e(n){return typeof n=="function"}function gs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Yc=gs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function fo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var mt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if($e(r))try{r()}catch(o){e=o instanceof Yc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{K_(o)}catch(s){e=e??[],s instanceof Yc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Yc(e)}}add(e){var t;if(e&&e!==this)if(this.closed)K_(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&fo(t,e)}remove(e){let{_finalizers:t}=this;t&&fo(t,e),e instanceof n&&e._removeParent(this)}};mt.EMPTY=(()=>{let n=new mt;return n.closed=!0,n})();var bp=mt.EMPTY;function Qc(n){return n instanceof mt||n&&"closed"in n&&$e(n.remove)&&$e(n.add)&&$e(n.unsubscribe)}function K_(n){$e(n)?n():n.unsubscribe()}var xr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ms={setTimeout(n,e,...t){let{delegate:r}=ms;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ms;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Zc(n){ms.setTimeout(()=>{let{onUnhandledError:e}=xr;if(e)e(n);else throw n})}function ho(){}var Y_=wp("C",void 0,void 0);function Q_(n){return wp("E",void 0,n)}function Z_(n){return wp("N",n,void 0)}function wp(n,e,t){return{kind:n,value:e,error:t}}var po=null;function vs(n){if(xr.useDeprecatedSynchronousErrorHandling){let e=!po;if(e&&(po={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=po;if(po=null,t)throw r}}else n()}function X_(n){xr.useDeprecatedSynchronousErrorHandling&&po&&(po.errorThrown=!0,po.error=n)}var go=class extends mt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Qc(e)&&e.add(this)):this.destination=_I}static create(e,t,r){return new ys(e,t,r)}next(e){this.isStopped?Sp(Z_(e),this):this._next(e)}error(e){this.isStopped?Sp(Q_(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Sp(Y_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},vI=Function.prototype.bind;function Cp(n,e){return vI.call(n,e)}var Ep=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Xc(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Xc(r)}else Xc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Xc(t)}}},ys=class extends go{constructor(e,t,r){super();let i;if($e(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&xr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Cp(e.next,o),error:e.error&&Cp(e.error,o),complete:e.complete&&Cp(e.complete,o)}):i=e}this.destination=new Ep(i)}};function Xc(n){xr.useDeprecatedSynchronousErrorHandling?X_(n):Zc(n)}function yI(n){throw n}function Sp(n,e){let{onStoppedNotification:t}=xr;t&&ms.setTimeout(()=>t(n,e))}var _I={closed:!0,next:ho,error:yI,complete:ho};var _s=typeof Symbol=="function"&&Symbol.observable||"@@observable";function rr(n){return n}function xp(...n){return Ip(n)}function Ip(n){return n.length===0?rr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Be=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=bI(t)?t:new ys(t,r,i);return vs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=J_(r),new r((i,o)=>{let s=new ys({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[_s](){return this}pipe(...t){return Ip(t)(this)}toPromise(t){return t=J_(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function J_(n){var e;return(e=n??xr.Promise)!==null&&e!==void 0?e:Promise}function DI(n){return n&&$e(n.next)&&$e(n.error)&&$e(n.complete)}function bI(n){return n&&n instanceof go||DI(n)&&Qc(n)}function Mp(n){return $e(n?.lift)}function lt(n){return e=>{if(Mp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function rt(n,e,t,r,i){return new Rp(n,e,t,r,i)}var Rp=class extends go{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ds(){return lt((n,e)=>{let t=null;n._refCount++;let r=rt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var bs=class extends Be{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Mp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new mt;let t=this.getSubject();e.add(this.source.subscribe(rt(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=mt.EMPTY)}return e}refCount(){return Ds()(this)}};var ws={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame,{delegate:r}=ws;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);let i=e(o=>{t=void 0,n(o)});return new mt(()=>t?.(i))},requestAnimationFrame(...n){let{delegate:e}=ws;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){let{delegate:e}=ws;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var e0=gs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ke=(()=>{class n extends Be{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Jc(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new e0}next(t){vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?bp:(this.currentObservers=null,o.push(t),new mt(()=>{this.currentObservers=null,fo(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Be;return t.source=this,t}}return n.create=(e,t)=>new Jc(e,t),n})(),Jc=class extends ke{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:bp}};var Yt=class extends ke{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Tp={now(){return(Tp.delegate||Date).now()},delegate:void 0};var eu=class extends mt{constructor(e,t){super()}schedule(e,t=0){return this}};var Ua={setInterval(n,e,...t){let{delegate:r}=Ua;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ua;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Cs=class extends eu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ua.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ua.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,fo(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ss=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ss.now=Tp.now;var Es=class extends Ss{constructor(e,t=Ss.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var $a=new Es(Cs),t0=$a;var tu=class extends Cs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return r!==null&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=ws.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(r!=null?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);let{actions:o}=e;t!=null&&t===e._scheduled&&((i=o[o.length-1])===null||i===void 0?void 0:i.id)!==t&&(ws.cancelAnimationFrame(t),e._scheduled=void 0)}};var nu=class extends Es{flush(e){this._active=!0;let t;e?t=e.id:(t=this._scheduled,this._scheduled=void 0);let{actions:r}=this,i;e=e||r.shift();do if(i=e.execute(e.state,e.delay))break;while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}};var ru=new nu(tu);var En=new Be(n=>n.complete());function iu(n){return n&&$e(n.schedule)}function Op(n){return n[n.length-1]}function ou(n){return $e(Op(n))?n.pop():void 0}function Wr(n){return iu(Op(n))?n.pop():void 0}function n0(n,e){return typeof Op(n)=="number"?n.pop():e}function i0(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(r.next(h))}catch(g){s(g)}}function c(h){try{d(r.throw(h))}catch(g){s(g)}}function d(h){h.done?o(h.value):i(h.value).then(a,c)}d((r=r.apply(n,e||[])).next())})}function r0(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mo(n){return this instanceof mo?(this.v=n,this):new mo(n)}function o0(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(E){return Promise.resolve(E).then(v,g)}}function a(v,E){r[v]&&(i[v]=function(H){return new Promise(function(W,oe){o.push([v,H,W,oe])>1||c(v,H)})},E&&(i[v]=E(i[v])))}function c(v,E){try{d(r[v](E))}catch(H){b(o[0][3],H)}}function d(v){v.value instanceof mo?Promise.resolve(v.value.v).then(h,g):b(o[0][2],v)}function h(v){c("next",v)}function g(v){c("throw",v)}function b(v,E){v(E),o.shift(),o.length&&c(o[0][0],o[0][1])}}function s0(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof r0=="function"?r0(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(d){o({value:d,done:a})},s)}}var su=n=>n&&typeof n.length=="number"&&typeof n!="function";function au(n){return $e(n?.then)}function lu(n){return $e(n[_s])}function cu(n){return Symbol.asyncIterator&&$e(n?.[Symbol.asyncIterator])}function uu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function wI(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var du=wI();function fu(n){return $e(n?.[du])}function hu(n){return o0(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield mo(t.read());if(i)return yield mo(void 0);yield yield mo(r)}}finally{t.releaseLock()}})}function pu(n){return $e(n?.getReader)}function Vt(n){if(n instanceof Be)return n;if(n!=null){if(lu(n))return CI(n);if(su(n))return SI(n);if(au(n))return EI(n);if(cu(n))return a0(n);if(fu(n))return xI(n);if(pu(n))return II(n)}throw uu(n)}function CI(n){return new Be(e=>{let t=n[_s]();if($e(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function SI(n){return new Be(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function EI(n){return new Be(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Zc)})}function xI(n){return new Be(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function a0(n){return new Be(e=>{MI(n,e).catch(t=>e.error(t))})}function II(n){return a0(hu(n))}function MI(n,e){var t,r,i,o;return i0(this,void 0,void 0,function*(){try{for(t=s0(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function jn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function gu(n,e=0){return lt((t,r)=>{t.subscribe(rt(r,i=>jn(r,n,()=>r.next(i),e),()=>jn(r,n,()=>r.complete(),e),i=>jn(r,n,()=>r.error(i),e)))})}function mu(n,e=0){return lt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function l0(n,e){return Vt(n).pipe(mu(e),gu(e))}function c0(n,e){return Vt(n).pipe(mu(e),gu(e))}function u0(n,e){return new Be(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function d0(n,e){return new Be(t=>{let r;return jn(t,e,()=>{r=n[du](),jn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>$e(r?.return)&&r.return()})}function vu(n,e){if(!n)throw new Error("Iterable cannot be null");return new Be(t=>{jn(t,e,()=>{let r=n[Symbol.asyncIterator]();jn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function f0(n,e){return vu(hu(n),e)}function h0(n,e){if(n!=null){if(lu(n))return l0(n,e);if(su(n))return u0(n,e);if(au(n))return c0(n,e);if(cu(n))return vu(n,e);if(fu(n))return d0(n,e);if(pu(n))return f0(n,e)}throw uu(n)}function Nt(n,e){return e?h0(n,e):Vt(n)}function Le(...n){let e=Wr(n);return Nt(n,e)}function xs(n,e){let t=$e(n)?n:()=>n,r=i=>i.error(t());return new Be(e?i=>e.schedule(r,0,i):r)}function yu(n){return!!n&&(n instanceof Be||$e(n.lift)&&$e(n.subscribe))}var pi=gs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function p0(n){return n instanceof Date&&!isNaN(n)}function Ke(n,e){return lt((t,r)=>{let i=0;t.subscribe(rt(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:RI}=Array;function TI(n,e){return RI(e)?n(...e):n(e)}function _u(n){return Ke(e=>TI(n,e))}var{isArray:OI}=Array,{getPrototypeOf:AI,prototype:PI,keys:kI}=Object;function Du(n){if(n.length===1){let e=n[0];if(OI(e))return{args:e,keys:null};if(NI(e)){let t=kI(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function NI(n){return n&&typeof n=="object"&&AI(n)===PI}function bu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function wu(...n){let e=Wr(n),t=ou(n),{args:r,keys:i}=Du(n);if(r.length===0)return Nt([],e);let o=new Be(FI(r,e,i?s=>bu(i,s):rr));return t?o.pipe(_u(t)):o}function FI(n,e,t=rr){return r=>{g0(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)g0(e,()=>{let d=Nt(n[c],e),h=!1;d.subscribe(rt(r,g=>{o[c]=g,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function g0(n,e,t){n?jn(t,n,e):e()}function m0(n,e,t,r,i,o,s,a){let c=[],d=0,h=0,g=!1,b=()=>{g&&!c.length&&!d&&e.complete()},v=H=>d<r?E(H):c.push(H),E=H=>{o&&e.next(H),d++;let W=!1;Vt(t(H,h++)).subscribe(rt(e,oe=>{i?.(oe),o?v(oe):e.next(oe)},()=>{W=!0},void 0,()=>{if(W)try{for(d--;c.length&&d<r;){let oe=c.shift();s?jn(e,s,()=>E(oe)):E(oe)}b()}catch(oe){e.error(oe)}}))};return n.subscribe(rt(e,v,()=>{g=!0,b()})),()=>{a?.()}}function Xt(n,e,t=1/0){return $e(e)?Xt((r,i)=>Ke((o,s)=>e(r,o,i,s))(Vt(n(r,i))),t):(typeof e=="number"&&(t=e),lt((r,i)=>m0(r,i,n,t)))}function Li(n=1/0){return Xt(rr,n)}function v0(){return Li(1)}function Is(...n){return v0()(Nt(n,Wr(n)))}function Cu(n){return new Be(e=>{Vt(n()).subscribe(e)})}function Ap(...n){let e=ou(n),{args:t,keys:r}=Du(n),i=new Be(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,d=s;for(let h=0;h<s;h++){let g=!1;Vt(t[h]).subscribe(rt(o,b=>{g||(g=!0,d--),a[h]=b},()=>c--,void 0,()=>{(!c||!g)&&(d||o.next(r?bu(r,a):a),o.complete())}))}});return e?i.pipe(_u(e)):i}function Su(n=0,e,t=t0){let r=-1;return e!=null&&(iu(e)?t=e:r=e),new Be(i=>{let o=p0(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function Pp(n=0,e=$a){return n<0&&(n=0),Su(n,n,e)}function qa(...n){let e=Wr(n),t=n0(n,1/0),r=n;return r.length?r.length===1?Vt(r[0]):Li(t)(Nt(r,e)):En}var vo=new Be(ho);function Jt(n,e){return lt((t,r)=>{let i=0;t.subscribe(rt(r,o=>n.call(e,o,i++)&&r.next(o)))})}function y0(n){return lt((e,t)=>{let r=!1,i=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,r){r=!1;let d=i;i=null,t.next(d)}s&&t.complete()},c=()=>{o=null,s&&t.complete()};e.subscribe(rt(t,d=>{r=!0,i=d,o||Vt(n(d)).subscribe(o=rt(t,a,c))},()=>{s=!0,(!r||!o||o.closed)&&t.complete()}))})}function Eu(n,e=$a){return y0(()=>Su(n,e))}function gi(n){return lt((e,t)=>{let r=null,i=!1,o;r=e.subscribe(rt(t,void 0,void 0,s=>{o=Vt(n(s,gi(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function _0(n,e,t,r,i){return(o,s)=>{let a=t,c=e,d=0;o.subscribe(rt(s,h=>{let g=d++;c=a?n(c,h,g):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function yo(n,e){return $e(e)?Xt(n,e,1):Xt(n,1)}function Vi(n){return lt((e,t)=>{let r=!1;e.subscribe(rt(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function yn(n){return n<=0?()=>En:lt((e,t)=>{let r=0;e.subscribe(rt(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function xu(n=LI){return lt((e,t)=>{let r=!1;e.subscribe(rt(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function LI(){return new pi}function Wa(n){return lt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function mi(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Jt((i,o)=>n(i,o,r)):rr,yn(1),t?Vi(e):xu(()=>new pi))}function Ms(n){return n<=0?()=>En:lt((e,t)=>{let r=[];e.subscribe(rt(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function kp(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Jt((i,o)=>n(i,o,r)):rr,Ms(1),t?Vi(e):xu(()=>new pi))}function Np(n,e){return lt(_0(n,e,arguments.length>=2,!0))}function _o(...n){let e=Wr(n);return lt((t,r)=>{(e?Is(n,t,e):Is(n,t)).subscribe(r)})}function on(n,e){return lt((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(rt(r,c=>{i?.unsubscribe();let d=0,h=o++;Vt(n(c,h)).subscribe(i=rt(r,g=>r.next(e?e(c,g,h,d++):g),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function vi(n){return lt((e,t)=>{Vt(n).subscribe(rt(t,()=>t.complete(),ho)),!t.closed&&e.subscribe(t)})}function sn(n,e,t){let r=$e(n)||e||t?{next:n,error:e,complete:t}:n;return r?lt((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(rt(o,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),o.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):rr}var sD="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ae=class extends Error{code;constructor(e,t){super(ld(e,t)),this.code=e}};function VI(n){return`NG0${Math.abs(n)}`}function ld(n,e){return`${VI(n)}${e?": "+e:""}`}var aD=Symbol("InputSignalNode#UNSET"),jI=Ce(Z({},Gc),{transformFn:void 0,applyValueToInputSignal(n,e){za(n,e)}});function lD(n,e){let t=Object.create(jI);t.value=n,t.transformFn=e?.transform;function r(){if(Va(t),t.value===aD){let i=null;throw new ae(-950,i)}return t.value}return r[hr]=t,r}function cl(n){return{toString:n}.toString()}var Iu="__parameters__";function BI(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function cD(n,e,t){return cl(()=>{let r=BI(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,d,h){let g=c.hasOwnProperty(Iu)?c[Iu]:Object.defineProperty(c,Iu,{value:[]})[Iu];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var bo=globalThis;function It(n){for(let e in n)if(n[e]===It)return e;throw Error("Could not find renamed property on target object.")}function zI(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function zn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(zn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function D0(n,e){return n?e?`${n} ${e}`:n:e||""}var HI=It({__forward_ref__:It});function ir(n){return n.__forward_ref__=ir,n.toString=function(){return zn(this())},n}function Pn(n){return uD(n)?n():n}function uD(n){return typeof n=="function"&&n.hasOwnProperty(HI)&&n.__forward_ref__===ir}function _e(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Un(n){return{providers:n.providers||[],imports:n.imports||[]}}function cd(n){return b0(n,fD)||b0(n,hD)}function dD(n){return cd(n)!==null}function b0(n,e){return n.hasOwnProperty(e)?n[e]:null}function UI(n){let e=n&&(n[fD]||n[hD]);return e||null}function w0(n){return n&&(n.hasOwnProperty(C0)||n.hasOwnProperty($I))?n[C0]:null}var fD=It({\u0275prov:It}),C0=It({\u0275inj:It}),hD=It({ngInjectableDef:It}),$I=It({ngInjectorDef:It}),Se=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=_e({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function pD(n){return n&&!!n.\u0275providers}var qI=It({\u0275cmp:It}),WI=It({\u0275dir:It}),GI=It({\u0275pipe:It}),KI=It({\u0275mod:It}),Fu=It({\u0275fac:It}),Qa=It({__NG_ELEMENT_ID__:It}),S0=It({__NG_ENV_ID__:It});function yi(n){return typeof n=="string"?n:n==null?"":String(n)}function YI(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():yi(n)}function gD(n,e){throw new ae(-200,n)}function Jg(n,e){throw new ae(-201,!1)}var Ze=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ze||{}),Zp;function mD(){return Zp}function Bn(n){let e=Zp;return Zp=n,e}function vD(n,e,t){let r=cd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Ze.Optional)return null;if(e!==void 0)return e;Jg(n,"Injector")}var QI={},wo=QI,Xp="__NG_DI_FLAG__",Lu=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?Kc:wo,r)}},Vu="ngTempTokenPath",ZI="ngTokenPath",XI=/\n/gm,JI="\u0275",E0="__source";function eM(n,e=Ze.Default){if(Ha()===void 0)throw new ae(-203,!1);if(Ha()===null)return vD(n,void 0,e);{let t=Ha(),r;return t instanceof Lu?r=t.injector:r=t,r.get(n,e&Ze.Optional?null:void 0,e)}}function Ne(n,e=Ze.Default){return(mD()||eM)(Pn(n),e)}function U(n,e=Ze.Default){return Ne(n,ud(e))}function ud(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Jp(n){let e=[];for(let t=0;t<n.length;t++){let r=Pn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ae(900,!1);let i,o=Ze.Default;for(let s=0;s<r.length;s++){let a=r[s],c=tM(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(Ne(i,o))}else e.push(Ne(r))}return e}function yD(n,e){return n[Xp]=e,n.prototype[Xp]=e,n}function tM(n){return n[Xp]}function nM(n,e,t,r){let i=n[Vu];throw e[E0]&&i.unshift(e[E0]),n.message=rM(`
`+n.message,i,t,r),n[ZI]=i,n[Vu]=null,n}function rM(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==JI?n.slice(2):n;let i=zn(e);if(Array.isArray(e))i=e.map(zn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):zn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(XI,`
  `)}`}var _D=yD(cD("Optional"),8);var iM=yD(cD("SkipSelf"),4);function So(n,e){let t=n.hasOwnProperty(Fu);return t?n[Fu]:null}function oM(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function sM(n){return n.flat(Number.POSITIVE_INFINITY)}function em(n,e){n.forEach(t=>Array.isArray(t)?em(t,e):e(t))}function DD(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ju(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function aM(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function lM(n,e,t){let r=ul(n,e);return r>=0?n[r|1]=t:(r=~r,aM(n,r,e,t)),r}function Fp(n,e){let t=ul(n,e);if(t>=0)return n[t|1]}function ul(n,e){return cM(n,e,1)}function cM(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Eo={},pr=[],Za=new Se(""),bD=new Se("",-1),wD=new Se(""),Bu=class{get(e,t=wo){if(t===wo){let r=new Error(`NullInjectorError: No provider for ${zn(e)}!`);throw r.name="NullInjectorError",r}return t}};function CD(n,e){let t=n[KI]||null;if(!t&&e===!0)throw new Error(`Type ${zn(n)} does not have '\u0275mod' property.`);return t}function xo(n){return n[qI]||null}function uM(n){return n[WI]||null}function dM(n){return n[GI]||null}function Hs(n){return{\u0275providers:n}}function fM(...n){return{\u0275providers:SD(!0,n),\u0275fromNgModule:!0}}function SD(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return em(e,s=>{let a=s;eg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&ED(i,o),t}function ED(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];tm(i,o=>{e(o,r)})}}function eg(n,e,t,r){if(n=Pn(n),!n)return!1;let i=null,o=w0(n),s=!o&&xo(n);if(!o&&!s){let c=n.ngModule;if(o=w0(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of c)eg(d,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let d;try{em(o.imports,h=>{eg(h,e,t,r)&&(d||=[],d.push(h))})}finally{}d!==void 0&&ED(d,e)}if(!a){let d=So(i)||(()=>new i);e({provide:i,useFactory:d,deps:pr},i),e({provide:wD,useValue:i,multi:!0},i),e({provide:Za,useValue:()=>Ne(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let d=n;tm(c,h=>{e(h,d)})}}else return!1;return i!==n&&n.providers!==void 0}function tm(n,e){for(let t of n)pD(t)&&(t=t.\u0275providers),Array.isArray(t)?tm(t,e):e(t)}var hM=It({provide:String,useValue:It});function xD(n){return n!==null&&typeof n=="object"&&hM in n}function pM(n){return!!(n&&n.useExisting)}function gM(n){return!!(n&&n.useFactory)}function Ns(n){return typeof n=="function"}function mM(n){return!!n.useClass}var dd=new Se(""),Tu={},x0={},Lp;function fd(){return Lp===void 0&&(Lp=new Bu),Lp}var kn=class{},Xa=class extends kn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,ng(e,s=>this.processProvider(s)),this.records.set(bD,Rs(void 0,this)),i.has("environment")&&this.records.set(kn,Rs(void 0,this));let o=this.records.get(dd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(wD,pr,Ze.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?Kc:wo,r)}destroy(){Ka(this),this._destroyed=!0;let e=Ge(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ge(e)}}onDestroy(e){return Ka(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ka(this);let t=hi(this),r=Bn(void 0),i;try{return e()}finally{hi(t),Bn(r)}}get(e,t=wo,r=Ze.Default){if(Ka(this),e.hasOwnProperty(S0))return e[S0](this);r=ud(r);let i,o=hi(this),s=Bn(void 0);try{if(!(r&Ze.SkipSelf)){let c=this.records.get(e);if(c===void 0){let d=bM(e)&&cd(e);d&&this.injectableDefInScope(d)?c=Rs(tg(e),Tu):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,r)}let a=r&Ze.Self?fd():this.parent;return t=r&Ze.Optional&&t===wo?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Vu]=a[Vu]||[]).unshift(zn(e)),o)throw a;return nM(a,e,"R3InjectorError",this.source)}else throw a}finally{Bn(s),hi(o)}}resolveInjectorInitializers(){let e=Ge(null),t=hi(this),r=Bn(void 0),i;try{let o=this.get(Za,pr,Ze.Self);for(let s of o)s()}finally{hi(t),Bn(r),Ge(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(zn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Pn(e);let t=Ns(e)?e:Pn(e&&e.provide),r=yM(e);if(!Ns(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Rs(void 0,Tu,!0),i.factory=()=>Jp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Ge(null);try{return t.value===x0?gD(zn(e)):t.value===Tu&&(t.value=x0,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&DM(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ge(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Pn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function tg(n){let e=cd(n),t=e!==null?e.factory:So(n);if(t!==null)return t;if(n instanceof Se)throw new ae(204,!1);if(n instanceof Function)return vM(n);throw new ae(204,!1)}function vM(n){if(n.length>0)throw new ae(204,!1);let t=UI(n);return t!==null?()=>t.factory(n):()=>new n}function yM(n){if(xD(n))return Rs(void 0,n.useValue);{let e=ID(n);return Rs(e,Tu)}}function ID(n,e,t){let r;if(Ns(n)){let i=Pn(n);return So(i)||tg(i)}else if(xD(n))r=()=>Pn(n.useValue);else if(gM(n))r=()=>n.useFactory(...Jp(n.deps||[]));else if(pM(n))r=(i,o)=>Ne(Pn(n.useExisting),o!==void 0&&o&Ze.Optional?Ze.Optional:void 0);else{let i=Pn(n&&(n.useClass||n.provide));if(_M(n))r=()=>new i(...Jp(n.deps));else return So(i)||tg(i)}return r}function Ka(n){if(n.destroyed)throw new ae(205,!1)}function Rs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function _M(n){return!!n.deps}function DM(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function bM(n){return typeof n=="function"||typeof n=="object"&&n instanceof Se}function ng(n,e){for(let t of n)Array.isArray(t)?ng(t,e):t&&pD(t)?ng(t.\u0275providers,e):e(t)}function Ar(n,e){let t;n instanceof Xa?(Ka(n),t=n):t=new Lu(n);let r,i=hi(t),o=Bn(void 0);try{return e()}finally{hi(i),Bn(o)}}function MD(){return mD()!==void 0||Ha()!=null}function RD(n){if(!MD())throw new ae(-203,!1)}function wM(n){return typeof n=="function"}var wi=0,qe=1,je=2,In=3,Mr=4,Pr=5,Ja=6,zu=7,an=8,Fs=9,_i=10,en=11,el=12,I0=13,Us=14,Rr=15,Io=16,Ts=17,Di=18,hd=19,TD=20,ji=21,Vp=22,Mo=23,gr=24,Ps=25,pn=26,OD=1;var Ro=7,Hu=8,Ls=9,xn=10;function Bi(n){return Array.isArray(n)&&typeof n[OD]=="object"}function Ci(n){return Array.isArray(n)&&n[OD]===!0}function nm(n){return(n.flags&4)!==0}function $s(n){return n.componentOffset>-1}function pd(n){return(n.flags&1)===1}function Kr(n){return!!n.template}function Uu(n){return(n[je]&512)!==0}function qs(n){return(n[je]&256)===256}var rg=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function AD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Nn=(()=>{let n=()=>PD;return n.ngInherit=!0,n})();function PD(n){return n.type.prototype.ngOnChanges&&(n.setInput=SM),CM}function CM(){let n=ND(this),e=n?.current;if(e){let t=n.previous;if(t===Eo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function SM(n,e,t,r,i){let o=this.declaredInputs[r],s=ND(n)||EM(n,{previous:Eo,current:null}),a=s.current||(s.current={}),c=s.previous,d=c[o];a[o]=new rg(d&&d.currentValue,t,c===Eo),AD(n,e,i,t)}var kD="__ngSimpleChanges__";function ND(n){return n[kD]||null}function EM(n,e){return n[kD]=e}var M0=null;var Ct=function(n,e=null,t){M0?.(n,e,t)},xM="svg",IM="math";function Yr(n){for(;Array.isArray(n);)n=n[wi];return n}function FD(n,e){return Yr(e[n])}function Jr(n,e){return Yr(e[n.index])}function rm(n,e){return n.data[e]}function gd(n,e){return n[e]}function MM(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Qr(n,e){let t=e[n];return Bi(t)?t:t[wi]}function RM(n){return(n[je]&4)===4}function im(n){return(n[je]&128)===128}function TM(n){return Ci(n[In])}function zi(n,e){return e==null?null:n[e]}function LD(n){n[Ts]=0}function VD(n){n[je]&1024||(n[je]|=1024,im(n)&&Ws(n))}function OM(n,e){for(;n>0;)e=e[Us],n--;return e}function md(n){return!!(n[je]&9216||n[gr]?.dirty)}function ig(n){n[_i].changeDetectionScheduler?.notify(8),n[je]&64&&(n[je]|=1024),md(n)&&Ws(n)}function Ws(n){n[_i].changeDetectionScheduler?.notify(0);let e=To(n);for(;e!==null&&!(e[je]&8192||(e[je]|=8192,!im(e)));)e=To(e)}function jD(n,e){if(qs(n))throw new ae(911,!1);n[ji]===null&&(n[ji]=[]),n[ji].push(e)}function AM(n,e){if(n[ji]===null)return;let t=n[ji].indexOf(e);t!==-1&&n[ji].splice(t,1)}function To(n){let e=n[In];return Ci(e)?e[In]:e}function om(n){return n[zu]??=[]}function sm(n){return n.cleanup??=[]}function PM(n,e,t,r){let i=om(e);i.push(t),n.firstCreatePass&&sm(n).push(r,i.length-1)}var Je={lFrame:GD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var og=!1;function kM(){return Je.lFrame.elementDepthCount}function NM(){Je.lFrame.elementDepthCount++}function FM(){Je.lFrame.elementDepthCount--}function am(){return Je.bindingsEnabled}function LM(){return Je.skipHydrationRootTNode!==null}function VM(n){return Je.skipHydrationRootTNode===n}function jM(){Je.skipHydrationRootTNode=null}function et(){return Je.lFrame.lView}function ln(){return Je.lFrame.tView}function X(n){return Je.lFrame.contextLView=n,n[an]}function J(n){return Je.lFrame.contextLView=null,n}function Mn(){let n=BD();for(;n!==null&&n.type===64;)n=n.parent;return n}function BD(){return Je.lFrame.currentTNode}function BM(){let n=Je.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function No(n,e){let t=Je.lFrame;t.currentTNode=n,t.isParent=e}function lm(){return Je.lFrame.isParent}function zD(){Je.lFrame.isParent=!1}function zM(){return Je.lFrame.contextLView}function HD(){return og}function $u(n){let e=og;return og=n,e}function vd(){let n=Je.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function UD(){return Je.lFrame.bindingIndex}function HM(n){return Je.lFrame.bindingIndex=n}function Gs(){return Je.lFrame.bindingIndex++}function cm(n){let e=Je.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function UM(){return Je.lFrame.inI18n}function $M(n,e){let t=Je.lFrame;t.bindingIndex=t.bindingRootIndex=n,sg(e)}function qM(){return Je.lFrame.currentDirectiveIndex}function sg(n){Je.lFrame.currentDirectiveIndex=n}function WM(n){let e=Je.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function $D(){return Je.lFrame.currentQueryIndex}function um(n){Je.lFrame.currentQueryIndex=n}function GM(n){let e=n[qe];return e.type===2?e.declTNode:e.type===1?n[Pr]:null}function qD(n,e,t){if(t&Ze.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&Ze.Host);)if(i=GM(o),i===null||(o=o[Us],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Je.lFrame=WD();return r.currentTNode=e,r.lView=n,!0}function dm(n){let e=WD(),t=n[qe];Je.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function WD(){let n=Je.lFrame,e=n===null?null:n.child;return e===null?GD(n):e}function GD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function KD(){let n=Je.lFrame;return Je.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var YD=KD;function fm(){let n=KD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function KM(n){return(Je.lFrame.contextLView=OM(n,Je.lFrame.contextLView))[an]}function Si(){return Je.lFrame.selectedIndex}function Oo(n){Je.lFrame.selectedIndex=n}function hm(){let n=Je.lFrame;return rm(n.tView,n.selectedIndex)}function YM(){return Je.lFrame.currentNamespace}var QD=!0;function yd(){return QD}function _d(n){QD=n}function QM(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=PD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function pm(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Ou(n,e,t){ZD(n,e,3,t)}function Au(n,e,t,r){(n[je]&3)===t&&ZD(n,e,t,r)}function jp(n,e){let t=n[je];(t&3)===e&&(t&=16383,t+=1,n[je]=t)}function ZD(n,e,t,r){let i=r!==void 0?n[Ts]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Ts]+=65536),(a<o||o==-1)&&(ZM(n,t,e,c),n[Ts]=(n[Ts]&4294901760)+c+2),c++}function R0(n,e){Ct(4,n,e);let t=Ge(null);try{e.call(n)}finally{Ge(t),Ct(5,n,e)}}function ZM(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[je]>>14<n[Ts]>>16&&(n[je]&3)===e&&(n[je]+=16384,R0(a,o)):R0(a,o)}var ks=-1,Ao=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function XM(n){return(n.flags&8)!==0}function JM(n){return(n.flags&16)!==0}function eR(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];tR(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function XD(n){return n===3||n===4||n===6}function tR(n){return n.charCodeAt(0)===64}function Vs(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?T0(n,t,i,null,e[++r]):T0(n,t,i,null,null))}}return n}function T0(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function JD(n){return n!==ks}function qu(n){return n&32767}function nR(n){return n>>16}function Wu(n,e){let t=nR(n),r=e;for(;t>0;)r=r[Us],t--;return r}var ag=!0;function Gu(n){let e=ag;return ag=n,e}var rR=256,eb=rR-1,tb=5,iR=0,Gr={};function oR(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Qa)&&(r=t[Qa]),r==null&&(r=t[Qa]=iR++);let i=r&eb,o=1<<i;e.data[n+(i>>tb)]|=o}function Ku(n,e){let t=nb(n,e);if(t!==-1)return t;let r=e[qe];r.firstCreatePass&&(n.injectorIndex=e.length,Bp(r.data,n),Bp(e,null),Bp(r.blueprint,null));let i=gm(n,e),o=n.injectorIndex;if(JD(i)){let s=qu(i),a=Wu(i,e),c=a[qe].data;for(let d=0;d<8;d++)e[o+d]=a[s+d]|c[s+d]}return e[o+8]=i,o}function Bp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function nb(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function gm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=ab(i),r===null)return ks;if(t++,i=i[Us],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ks}function lg(n,e,t){oR(n,e,t)}function sR(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(XD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function rb(n,e,t){if(t&Ze.Optional||n!==void 0)return n;Jg(e,"NodeInjector")}function ib(n,e,t,r){if(t&Ze.Optional&&r===void 0&&(r=null),(t&(Ze.Self|Ze.Host))===0){let i=n[Fs],o=Bn(void 0);try{return i?i.get(e,r,t&Ze.Optional):vD(e,r,t&Ze.Optional)}finally{Bn(o)}}return rb(r,e,t)}function ob(n,e,t,r=Ze.Default,i){if(n!==null){if(e[je]&2048&&!(r&Ze.Self)){let s=uR(n,e,t,r,Gr);if(s!==Gr)return s}let o=sb(n,e,t,r,Gr);if(o!==Gr)return o}return ib(e,t,r,i)}function sb(n,e,t,r,i){let o=lR(t);if(typeof o=="function"){if(!qD(e,n,r))return r&Ze.Host?rb(i,t,r):ib(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&Ze.Optional))Jg(t);else return s}finally{YD()}}else if(typeof o=="number"){let s=null,a=nb(n,e),c=ks,d=r&Ze.Host?e[Rr][Pr]:null;for((a===-1||r&Ze.SkipSelf)&&(c=a===-1?gm(n,e):e[a+8],c===ks||!A0(r,!1)?a=-1:(s=e[qe],a=qu(c),e=Wu(c,e)));a!==-1;){let h=e[qe];if(O0(o,a,h.data)){let g=aR(a,e,t,s,r,d);if(g!==Gr)return g}c=e[a+8],c!==ks&&A0(r,e[qe].data[a+8]===d)&&O0(o,a,e)?(s=h,a=qu(c),e=Wu(c,e)):a=-1}}return i}function aR(n,e,t,r,i,o){let s=e[qe],a=s.data[n+8],c=r==null?$s(a)&&ag:r!=s&&(a.type&3)!==0,d=i&Ze.Host&&o===a,h=Pu(a,s,t,c,d);return h!==null?tl(e,s,h,a,i):Gr}function Pu(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,d=n.directiveEnd,h=o>>20,g=r?a:a+h,b=i?a+h:d;for(let v=g;v<b;v++){let E=s[v];if(v<c&&t===E||v>=c&&E.type===t)return v}if(i){let v=s[c];if(v&&Kr(v)&&v.type===t)return c}return null}function tl(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Ao){let a=o;a.resolving&&gD(YI(s[t]));let c=Gu(a.canSeeViewProviders);a.resolving=!0;let d,h=a.injectImpl?Bn(a.injectImpl):null,g=qD(n,r,Ze.Default);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&QM(t,s[t],e)}finally{h!==null&&Bn(h),Gu(c),a.resolving=!1,YD()}}return o}function lR(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Qa)?n[Qa]:void 0;return typeof e=="number"?e>=0?e&eb:cR:e}function O0(n,e,t){let r=1<<n;return!!(t[e+(n>>tb)]&r)}function A0(n,e){return!(n&Ze.Self)&&!(n&Ze.Host&&e)}var Co=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return ob(this._tNode,this._lView,e,ud(r),t)}};function cR(){return new Co(Mn(),et())}function kr(n){return cl(()=>{let e=n.prototype.constructor,t=e[Fu]||cg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Fu]||cg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function cg(n){return uD(n)?()=>{let e=cg(Pn(n));return e&&e()}:So(n)}function uR(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[je]&2048&&!Uu(s);){let a=sb(o,s,t,r|Ze.Self,Gr);if(a!==Gr)return a;let c=o.parent;if(!c){let d=s[TD];if(d){let h=d.get(t,Gr,r);if(h!==Gr)return h}c=ab(s),s=s[Us]}o=c}return i}function ab(n){let e=n[qe],t=e.type;return t===2?e.declTNode:t===1?n[Pr]:null}function mm(n){return sR(Mn(),n)}function P0(n,e=null,t=null,r){let i=lb(n,e,t,r);return i.resolveInjectorInitializers(),i}function lb(n,e=null,t=null,r,i=new Set){let o=[t||pr,fM(n)];return r=r||(typeof n=="object"?void 0:zn(n)),new Xa(o,e||fd(),r||null,i)}var gn=class n{static THROW_IF_NOT_FOUND=wo;static NULL=new Bu;static create(e,t){if(Array.isArray(e))return P0({name:""},t,e,"");{let r=e.name??"";return P0({name:r},e.parent,e.providers,r)}}static \u0275prov=_e({token:n,providedIn:"any",factory:()=>Ne(bD)});static __NG_ELEMENT_ID__=-1};var dR=new Se("");dR.__NG_ELEMENT_ID__=n=>{let e=Mn();if(e===null)throw new ae(204,!1);if(e.type&2)return e.value;if(n&Ze.Optional)return null;throw new ae(204,!1)};var cb=!1,Fo=(()=>{class n{static __NG_ELEMENT_ID__=fR;static __NG_ENV_ID__=t=>t}return n})(),Yu=class extends Fo{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return qs(t)?(e(),()=>{}):(jD(t,e),()=>AM(t,e))}};function fR(){return new Yu(et())}var Po=class{},vm=new Se("",{providedIn:"root",factory:()=>!1});var ub=new Se(""),db=new Se(""),Ks=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Yt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=_e({token:n,providedIn:"root",factory:()=>new n})}return n})();var ug=class extends ke{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,MD()&&(this.destroyRef=U(Fo,{optional:!0})??void 0,this.pendingTasks=U(Ks,{optional:!0})??void 0)}emit(e){let t=Ge(null);try{super.next(e)}finally{Ge(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof mt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},st=ug;function nl(...n){}function fb(n){let e,t;function r(){n=nl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function k0(n){return queueMicrotask(()=>n()),()=>{n=nl}}var ym="isAngularZone",Qu=ym+"_ID",hR=0,gt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new st(!1);onMicrotaskEmpty=new st(!1);onStable=new st(!1);onError=new st(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=cb}=e;if(typeof Zone>"u")throw new ae(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,mR(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ym)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ae(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ae(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,pR,nl,nl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},pR={};function _m(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function gR(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){fb(()=>{n.callbackScheduled=!1,dg(n),n.isCheckStableRunning=!0,_m(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),dg(n)}function mR(n){let e=()=>{gR(n)},t=hR++;n._inner=n._inner.fork({name:"angular",properties:{[ym]:!0,[Qu]:t,[Qu+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(vR(c))return r.invokeTask(o,s,a,c);try{return N0(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),F0(n)}},onInvoke:(r,i,o,s,a,c,d)=>{try{return N0(n),r.invoke(o,s,a,c,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!yR(c)&&e(),F0(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,dg(n),_m(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function dg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function N0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function F0(n){n._nesting--,_m(n)}var fg=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new st;onMicrotaskEmpty=new st;onStable=new st;onError=new st;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function vR(n){return hb(n,"__ignore_ng_zone__")}function yR(n){return hb(n,"__scheduler_tick__")}function hb(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Tr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},_R=new Se("",{providedIn:"root",factory:()=>{let n=U(gt),e=U(Tr);return t=>n.runOutsideAngular(()=>e.handleError(t))}}),hg=class{destroyed=!1;listeners=null;errorHandler=U(Tr,{optional:!0});destroyRef=U(Fo);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new ae(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let t=this.listeners?.indexOf(e);t!==void 0&&t!==-1&&this.listeners?.splice(t,1)}}}emit(e){if(this.destroyed){console.warn(ld(953,!1));return}if(this.listeners===null)return;let t=Ge(null);try{for(let r of this.listeners)try{r(e)}catch(i){this.errorHandler?.handleError(i)}}finally{Ge(t)}}};function ei(n){return new hg}function L0(n,e){return lD(n,e)}function DR(n){return lD(aD,n)}var _n=(L0.required=DR,L0);function bR(){return Ys(Mn(),et())}function Ys(n,e){return new Qt(Jr(n,e))}var Qt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=bR}return n})();function wR(n){return n instanceof Qt?n.nativeElement:n}function CR(n){return typeof n=="function"&&n[hr]!==void 0}function Nr(n,e){let t=vp(n,e?.equal),r=t[hr];return t.set=i=>za(r,i),t.update=i=>yp(r,i),t.asReadonly=SR.bind(t),t}function SR(){let n=this[hr];if(n.readonlyFn===void 0){let e=()=>this();e[hr]=n,n.readonlyFn=e}return n.readonlyFn}function pb(n){return CR(n)&&typeof n.set=="function"}function ER(){return this._results[Symbol.iterator]()}var pg=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ke}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=sM(e);(this._changesDetected=!oM(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=ER};function gb(n){return(n.flags&128)===128}var mb=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(mb||{}),vb=new Map,xR=0;function IR(){return xR++}function MR(n){vb.set(n[hd],n)}function gg(n){vb.delete(n[hd])}var V0="__ngContext__";function Qs(n,e){Bi(e)?(n[V0]=e[hd],MR(e)):n[V0]=e}function yb(n){return Db(n[el])}function _b(n){return Db(n[Mr])}function Db(n){for(;n!==null&&!Ci(n);)n=n[Mr];return n}var mg;function bb(n){mg=n}function RR(){if(mg!==void 0)return mg;if(typeof document<"u")return document;throw new ae(210,!1)}var dl=new Se("",{providedIn:"root",factory:()=>TR}),TR="ng",Dm=new Se(""),Lo=new Se("",{providedIn:"platform",factory:()=>"unknown"});var bm=new Se(""),wm=new Se("",{providedIn:"root",factory:()=>RR().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var OR="h",AR="b";var wb=!1,PR=new Se("",{providedIn:"root",factory:()=>wb});var Cm=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Cm||{}),Zs=new Se(""),j0=new Set;function Hi(n){j0.has(n)||(j0.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Sm=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=kR}return n})();function kR(){return new Sm(et(),Mn())}var Os=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Os||{}),Cb=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=_e({token:n,providedIn:"root",factory:()=>new n})}return n})(),NR=[Os.EarlyRead,Os.Write,Os.MixedReadWrite,Os.Read],FR=(()=>{class n{ngZone=U(gt);scheduler=U(Po);errorHandler=U(Tr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){U(Zs,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Ct(16),this.executing=!0;for(let r of NR)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Ct(17)}register(t){let{view:r}=t;r!==void 0?((r[Ps]??=[]).push(t),Ws(r),r[je]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Cm.AFTER_NEXT_RENDER,t):t()}static \u0275prov=_e({token:n,providedIn:"root",factory:()=>new n})}return n})(),vg=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ps];e&&(this.view[Ps]=e.filter(t=>t!==this))}};function fl(n,e){!e?.injector&&RD(fl);let t=e?.injector??U(gn);return Hi("NgAfterNextRender"),VR(n,t,e,!0)}function LR(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function VR(n,e,t,r){let i=e.get(Cb);i.impl??=e.get(FR);let o=e.get(Zs,null,{optional:!0}),s=t?.phase??Os.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(Fo):null,c=e.get(Sm,null,{optional:!0}),d=new vg(i.impl,LR(n,s),c?.view,r,a,o?.snapshot(null));return i.impl.register(d),d}var jR=(n,e,t,r)=>{};function BR(n,e,t,r){jR(n,e,t,r)}var zR=()=>null;function Sb(n,e,t=!1){return zR(n,e,t)}function Eb(n,e){let t=n.contentQueries;if(t!==null){let r=Ge(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];um(o),a.contentQueries(2,e[s],s)}}}finally{Ge(r)}}}function yg(n,e,t){um(0);let r=Ge(null);try{e(n,t)}finally{Ge(r)}}function Em(n,e,t){if(nm(e)){let r=Ge(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Ge(r)}}}var Zr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Zr||{});var Mu;function HR(){if(Mu===void 0&&(Mu=null,bo.trustedTypes))try{Mu=bo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Mu}function B0(n){return HR()?.createScriptURL(n)||n}var Zu=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${sD})`}};function xm(n){return n instanceof Zu?n.changingThisBreaksApplicationSecurity:n}function xb(n,e){let t=UR(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${sD})`)}return t===e}function UR(n){return n instanceof Zu&&n.getTypeName()||null}var $R=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function qR(n){return n=String(n),n.match($R)?n:"unsafe:"+n}var Im=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Im||{});function WR(n){let e=Mb();return e?e.sanitize(Im.URL,n)||"":xb(n,"URL")?xm(n):qR(yi(n))}function GR(n){let e=Mb();if(e)return B0(e.sanitize(Im.RESOURCE_URL,n)||"");if(xb(n,"ResourceURL"))return B0(xm(n));throw new ae(904,!1)}function KR(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?GR:WR}function Ib(n,e,t){return KR(e,t)(n)}function Mb(){let n=et();return n&&n[_i].sanitizer}var YR=/^>|^->|<!--|-->|--!>|<!-$/g,QR=/(<|>)/g,ZR="\u200B$1\u200B";function XR(n){return n.replace(YR,e=>e.replace(QR,ZR))}function Rb(n){return n instanceof Function?n():n}function JR(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var Tb="ng-template";function eT(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&JR(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Mm(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Mm(n){return n.type===4&&n.value!==Tb}function tT(n,e,t){let r=n.type===4&&!t?Tb:n.value;return e===r}function nT(n,e,t){let r=4,i=n.attrs,o=i!==null?oT(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Ir(r)&&!Ir(c))return!1;if(s&&Ir(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!tT(n,c,t)||c===""&&e.length===1){if(Ir(r))return!1;s=!0}}else if(r&8){if(i===null||!eT(n,i,c,t)){if(Ir(r))return!1;s=!0}}else{let d=e[++a],h=rT(c,i,Mm(n),t);if(h===-1){if(Ir(r))return!1;s=!0;continue}if(d!==""){let g;if(h>o?g="":g=i[h+1].toLowerCase(),r&2&&d!==g){if(Ir(r))return!1;s=!0}}}}return Ir(r)||s}function Ir(n){return(n&1)===0}function rT(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return sT(e,n)}function iT(n,e,t=!1){for(let r=0;r<e.length;r++)if(nT(n,e[r],t))return!0;return!1}function oT(n){for(let e=0;e<n.length;e++){let t=n[e];if(XD(t))return e}return n.length}function sT(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function z0(n,e){return n?":not("+e.trim()+")":e}function aT(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Ir(s)&&(e+=z0(o,i),i=""),r=s,o=o||!Ir(r);t++}return i!==""&&(e+=z0(o,i)),e}function lT(n){return n.map(aT).join(",")}function cT(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Ir(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var or={};function uT(n,e){return n.createText(e)}function dT(n,e,t){n.setValue(e,t)}function fT(n,e){return n.createComment(XR(e))}function Ob(n,e,t){return n.createElement(e,t)}function Xu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Ab(n,e,t){n.appendChild(e,t)}function H0(n,e,t,r,i){r!==null?Xu(n,e,t,r,i):Ab(n,e,t)}function hT(n,e,t){n.removeChild(null,e,t)}function pT(n,e,t){n.setAttribute(e,"style",t)}function gT(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Pb(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&eR(n,e,r),i!==null&&gT(n,e,i),o!==null&&pT(n,e,o)}function Rm(n,e,t,r,i,o,s,a,c,d,h){let g=pn+r,b=g+i,v=mT(g,b),E=typeof d=="function"?d():d;return v[qe]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:b,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1,ssrId:h}}function mT(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:or);return t}function vT(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Rm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Tm(n,e,t,r,i,o,s,a,c,d,h){let g=e.blueprint.slice();return g[wi]=i,g[je]=r|4|128|8|64|1024,(d!==null||n&&n[je]&2048)&&(g[je]|=2048),LD(g),g[In]=g[Us]=n,g[an]=t,g[_i]=s||n&&n[_i],g[en]=a||n&&n[en],g[Fs]=c||n&&n[Fs]||null,g[Pr]=o,g[hd]=IR(),g[Ja]=h,g[TD]=d,g[Rr]=e.type==2?n[Rr]:g,g}function yT(n,e,t){let r=Jr(e,n),i=vT(t),o=n[_i].rendererFactory,s=Om(n,Tm(n,i,null,kb(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function kb(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function Nb(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Om(n,e){return n[el]?n[I0][Mr]=e:n[el]=e,n[I0]=e,e}function S(n=1){Fb(ln(),et(),Si()+n,!1)}function Fb(n,e,t,r){if(!r)if((e[je]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Ou(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Au(e,o,0,t)}Oo(t)}var Dd=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Dd||{});function _g(n,e,t,r){let i=Ge(null);try{let[o,s,a]=n.inputs[t],c=null;(s&Dd.SignalBased)!==0&&(c=e[o][hr]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):AD(e,c,o,r)}finally{Ge(i)}}function Lb(n,e,t,r,i){let o=Si(),s=r&2;try{Oo(-1),s&&e.length>pn&&Fb(n,e,pn,!1),Ct(s?2:0,i),t(r,i)}finally{Oo(o),Ct(s?3:1,i)}}function bd(n,e,t){ST(n,e,t),(t.flags&64)===64&&ET(n,e,t)}function Am(n,e,t=Jr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function _T(n,e,t,r){let o=r.get(PR,wb)||t===Zr.ShadowDom,s=n.selectRootElement(e,o);return DT(s),s}function DT(n){bT(n)}var bT=()=>null;function wT(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Vb(n,e,t,r,i,o,s,a){if(!a&&km(e,n,t,r,i)){$s(e)&&CT(t,e.index);return}if(e.type&3){let c=Jr(e,t);r=wT(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)}else e.type&12}function CT(n,e){let t=Qr(e,n);t[je]&16||(t[je]|=64)}function ST(n,e,t){let r=t.directiveStart,i=t.directiveEnd;$s(t)&&yT(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Ku(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=tl(e,n,s,t);if(Qs(c,e),o!==null&&RT(e,s-r,c,a,t,o),Kr(a)){let d=Qr(t.index,e);d[an]=tl(e,n,s,t)}}}function ET(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=qM();try{Oo(o);for(let a=r;a<i;a++){let c=n.data[a],d=e[a];sg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&xT(c,d)}}finally{Oo(-1),sg(s)}}function xT(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Pm(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];iT(e,o.selectors,!1)&&(r??=[],Kr(o)?r.unshift(o):r.push(o))}return r}function IT(n,e,t,r,i,o){let s=Jr(n,e);MT(e[en],s,o,n.value,t,r,i)}function MT(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?yi(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function RT(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],d=s[a+1];_g(r,t,c,d)}}function TT(n,e){let t=n[Fs],r=t?t.get(Tr,null):null;r&&r.handleError(e)}function km(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let d=s[c],h=s[c+1],g=e.data[d];_g(g,t[d],h,i),a=!0}if(o)for(let c of o){let d=t[c],h=e.data[c];_g(h,d,r,i),a=!0}return a}function OT(n,e){let t=Qr(e,n),r=t[qe];AT(r,t);let i=t[wi];i!==null&&t[Ja]===null&&(t[Ja]=Sb(i,t[Fs])),Ct(18),Nm(r,t,t[an]),Ct(19,t[an])}function AT(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Nm(n,e,t){dm(e);try{let r=n.viewQuery;r!==null&&yg(1,r,t);let i=n.template;i!==null&&Lb(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Di]?.finishViewCreation(n),n.staticContentQueries&&Eb(n,e),n.staticViewQueries&&yg(2,n.viewQuery,t);let o=n.components;o!==null&&PT(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[je]&=-5,fm()}}function PT(n,e){for(let t=0;t<e.length;t++)OT(n,e[t])}function wd(n,e,t,r){let i=Ge(null);try{let o=e.tView,a=n[je]&4096?4096:16,c=Tm(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];c[Io]=d;let h=n[Di];return h!==null&&(c[Di]=h.createEmbeddedView(o)),Nm(o,c,t),c}finally{Ge(i)}}function rl(n,e){return!e||e.firstChild===null||gb(n)}var kT;function Fm(n,e){return kT(n,e)}var bi=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(bi||{});function jb(n){return(n.flags&32)===32}function As(n,e,t,r,i){if(r!=null){let o,s=!1;Ci(r)?o=r:Bi(r)&&(s=!0,r=r[wi]);let a=Yr(r);n===0&&t!==null?i==null?Ab(e,t,a):Xu(e,t,a,i||null,!0):n===1&&t!==null?Xu(e,t,a,i||null,!0):n===2?hT(e,a,s):n===3&&e.destroyNode(a),o!=null&&WT(e,n,o,t,i)}}function NT(n,e){Bb(n,e),e[wi]=null,e[Pr]=null}function FT(n,e,t,r,i,o){r[wi]=i,r[Pr]=e,Ed(n,r,t,1,i,o)}function Bb(n,e){e[_i].changeDetectionScheduler?.notify(9),Ed(n,e,e[en],2,null,null)}function LT(n){let e=n[el];if(!e)return zp(n[qe],n);for(;e;){let t=null;if(Bi(e))t=e[el];else{let r=e[xn];r&&(t=r)}if(!t){for(;e&&!e[Mr]&&e!==n;)Bi(e)&&zp(e[qe],e),e=e[In];e===null&&(e=n),Bi(e)&&zp(e[qe],e),t=e&&e[Mr]}e=t}}function Lm(n,e){let t=n[Ls],r=t.indexOf(e);t.splice(r,1)}function Cd(n,e){if(qs(e))return;let t=e[en];t.destroyNode&&Ed(n,e,t,3,null,null),LT(e)}function zp(n,e){if(qs(e))return;let t=Ge(null);try{e[je]&=-129,e[je]|=256,e[gr]&&Ba(e[gr]),jT(n,e),VT(n,e),e[qe].type===1&&e[en].destroy();let r=e[Io];if(r!==null&&Ci(e[In])){r!==e[In]&&Lm(r,e);let i=e[Di];i!==null&&i.detachView(n)}gg(e)}finally{Ge(t)}}function VT(n,e){let t=n.cleanup,r=e[zu];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[zu]=null);let i=e[ji];if(i!==null){e[ji]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Mo];if(o!==null){e[Mo]=null;for(let s of o)s.destroy()}}function jT(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ao)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Ct(4,a,c);try{c.call(a)}finally{Ct(5,a,c)}}else{Ct(4,i,o);try{o.call(i)}finally{Ct(5,i,o)}}}}}function BT(n,e,t){return zT(n,e.parent,t)}function zT(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[wi];if($s(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Zr.None||i===Zr.Emulated)return null}return Jr(r,t)}function HT(n,e,t){return $T(n,e,t)}function UT(n,e,t){return n.type&40?Jr(n,t):null}var $T=UT,U0;function Sd(n,e,t,r){let i=BT(n,r,e),o=e[en],s=r.parent||e[Pr],a=HT(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)H0(o,i,t[c],a,!1);else H0(o,i,t,a,!1);U0!==void 0&&U0(o,r,e,t,i)}function Ya(n,e){if(e!==null){let t=e.type;if(t&3)return Jr(e,n);if(t&4)return Dg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ya(n,r);{let i=n[e.index];return Ci(i)?Dg(-1,i):Yr(i)}}else{if(t&128)return Ya(n,e.next);if(t&32)return Fm(e,n)()||Yr(n[e.index]);{let r=zb(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=To(n[Rr]);return Ya(i,r)}else return Ya(n,e.next)}}}return null}function zb(n,e){if(e!==null){let r=n[Rr][Pr],i=e.projection;return r.projection[i]}return null}function Dg(n,e){let t=xn+n+1;if(t<e.length){let r=e[t],i=r[qe].firstChild;if(i!==null)return Ya(r,i)}return e[Ro]}function Vm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&Qs(Yr(a),r),t.flags|=2),!jb(t))if(c&8)Vm(n,e,t.child,r,i,o,!1),As(e,n,i,a,o);else if(c&32){let d=Fm(t,r),h;for(;h=d();)As(e,n,i,h,o);As(e,n,i,a,o)}else c&16?qT(n,e,r,t,i,o):As(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Ed(n,e,t,r,i,o){Vm(t,r,n.firstChild,e,i,o,!1)}function qT(n,e,t,r,i,o){let s=t[Rr],c=s[Pr].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let h=c[d];As(e,n,i,h,o)}else{let d=c,h=s[In];gb(r)&&(d.flags|=128),Vm(n,e,d,h,i,o,!0)}}function WT(n,e,t,r,i){let o=t[Ro],s=Yr(t);o!==s&&As(e,n,r,o,i);for(let a=xn;a<t.length;a++){let c=t[a];Ed(c[qe],c,n,e,r,o)}}function GT(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:bi.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=bi.Important),n.setStyle(t,r,i,o))}}function Ju(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Yr(o)),Ci(o)&&KT(o,r);let s=t.type;if(s&8)Ju(n,e,t.child,r);else if(s&32){let a=Fm(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=zb(e,t);if(Array.isArray(a))r.push(...a);else{let c=To(e[Rr]);Ju(c[qe],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function KT(n,e){for(let t=xn;t<n.length;t++){let r=n[t],i=r[qe].firstChild;i!==null&&Ju(r[qe],r,i,e)}n[Ro]!==n[wi]&&e.push(n[Ro])}function Hb(n){if(n[Ps]!==null){for(let e of n[Ps])e.impl.addSequence(e);n[Ps].length=0}}var Ub=[];function YT(n){return n[gr]??QT(n)}function QT(n){let e=Ub.pop()??Object.create(XT);return e.lView=n,e}function ZT(n){n.lView[gr]!==n&&(n.lView=null,Ub.push(n))}var XT=Ce(Z({},ps),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Ws(n.lView)},consumerOnSignalRead(){this.lView[gr]=this}});function JT(n){let e=n[gr]??Object.create(eO);return e.lView=n,e}var eO=Ce(Z({},ps),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=To(n.lView);for(;e&&!$b(e[qe]);)e=To(e);e&&VD(e)},consumerOnSignalRead(){this.lView[gr]=this}});function $b(n){return n.type!==2}function qb(n){if(n[Mo]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Mo])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[je]&8192)}}var tO=100;function Wb(n,e=!0,t=0){let i=n[_i].rendererFactory,o=!1;o||i.begin?.();try{nO(n,t)}catch(s){throw e&&TT(n,s),s}finally{o||i.end?.()}}function nO(n,e){let t=HD();try{$u(!0),bg(n,e);let r=0;for(;md(n);){if(r===tO)throw new ae(103,!1);r++,bg(n,1)}}finally{$u(t)}}function rO(n,e,t,r){if(qs(e))return;let i=e[je],o=!1,s=!1;dm(e);let a=!0,c=null,d=null;o||($b(n)?(d=YT(e),c=ja(d)):dp()===null?(a=!1,d=JT(e),c=ja(d)):e[gr]&&(Ba(e[gr]),e[gr]=null));try{LD(e),HM(n.bindingStartIndex),t!==null&&Lb(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let v=n.preOrderCheckHooks;v!==null&&Ou(e,v,null)}else{let v=n.preOrderHooks;v!==null&&Au(e,v,0,null),jp(e,0)}if(s||iO(e),qb(e),Gb(e,0),n.contentQueries!==null&&Eb(n,e),!o)if(h){let v=n.contentCheckHooks;v!==null&&Ou(e,v)}else{let v=n.contentHooks;v!==null&&Au(e,v,1),jp(e,1)}sO(n,e);let g=n.components;g!==null&&Yb(e,g,0);let b=n.viewQuery;if(b!==null&&yg(2,b,r),!o)if(h){let v=n.viewCheckHooks;v!==null&&Ou(e,v)}else{let v=n.viewHooks;v!==null&&Au(e,v,2),jp(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Vp]){for(let v of e[Vp])v();e[Vp]=null}o||(Hb(e),e[je]&=-73)}catch(h){throw o||Ws(e),h}finally{d!==null&&(Uc(d,c),a&&ZT(d)),fm()}}function Gb(n,e){for(let t=yb(n);t!==null;t=_b(t))for(let r=xn;r<t.length;r++){let i=t[r];Kb(i,e)}}function iO(n){for(let e=yb(n);e!==null;e=_b(e)){if(!(e[je]&2))continue;let t=e[Ls];for(let r=0;r<t.length;r++){let i=t[r];VD(i)}}}function oO(n,e,t){Ct(18);let r=Qr(e,n);Kb(r,t),Ct(19,r[an])}function Kb(n,e){im(n)&&bg(n,e)}function bg(n,e){let r=n[qe],i=n[je],o=n[gr],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&$c(o)),s||=!1,o&&(o.dirty=!1),n[je]&=-9217,s)rO(r,n,r.template,n[an]);else if(i&8192){qb(n),Gb(n,1);let a=r.components;a!==null&&Yb(n,a,1),Hb(n)}}function Yb(n,e,t){for(let r=0;r<e.length;r++)oO(n,e[r],t)}function sO(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Oo(~i);else{let o=i,s=t[++r],a=t[++r];$M(s,o);let c=e[o];Ct(24,c),a(2,c),Ct(25,c)}}}finally{Oo(-1)}}function jm(n,e){let t=HD()?64:1088;for(n[_i].changeDetectionScheduler?.notify(e);n;){n[je]|=t;let r=To(n);if(Uu(n)&&!r)return n;n=r}return null}function Qb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Zb(n,e){let t=xn+e;if(t<n.length)return n[t]}function xd(n,e,t,r=!0){let i=e[qe];if(aO(i,e,n,t),r){let s=Dg(t,n),a=e[en],c=a.parentNode(n[Ro]);c!==null&&FT(i,n[Pr],a,e,c,s)}let o=e[Ja];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Xb(n,e){let t=il(n,e);return t!==void 0&&Cd(t[qe],t),t}function il(n,e){if(n.length<=xn)return;let t=xn+e,r=n[t];if(r){let i=r[Io];i!==null&&i!==n&&Lm(i,r),e>0&&(n[t-1][Mr]=r[Mr]);let o=ju(n,xn+e);NT(r[qe],r);let s=o[Di];s!==null&&s.detachView(o[qe]),r[In]=null,r[Mr]=null,r[je]&=-129}return r}function aO(n,e,t,r){let i=xn+r,o=t.length;r>0&&(t[i-1][Mr]=e),r<o-xn?(e[Mr]=t[i],DD(t,xn+r,e)):(t.push(e),e[Mr]=null),e[In]=t;let s=e[Io];s!==null&&t!==s&&Jb(s,e);let a=e[Di];a!==null&&a.insertView(n),ig(e),e[je]|=128}function Jb(n,e){let t=n[Ls],r=e[In];if(Bi(r))n[je]|=2;else{let i=r[In][Rr];e[Rr]!==i&&(n[je]|=2)}t===null?n[Ls]=[e]:t.push(e)}var ol=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[qe];return Ju(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[an]}set context(e){this._lView[an]=e}get destroyed(){return qs(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[In];if(Ci(e)){let t=e[Hu],r=t?t.indexOf(this):-1;r>-1&&(il(e,r),ju(t,r))}this._attachedToViewContainer=!1}Cd(this._lView[qe],this._lView)}onDestroy(e){jD(this._lView,e)}markForCheck(){jm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[je]&=-129}reattach(){ig(this._lView),this._lView[je]|=128}detectChanges(){this._lView[je]|=1024,Wb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ae(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Uu(this._lView),t=this._lView[Io];t!==null&&!e&&Lm(t,this._lView),Bb(this._lView[qe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ae(902,!1);this._appRef=e;let t=Uu(this._lView),r=this._lView[Io];r!==null&&!t&&Jb(r,this._lView),ig(this._lView)}};var Xr=(()=>{class n{static __NG_ELEMENT_ID__=uO}return n})(),lO=Xr,cO=class extends lO{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=wd(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new ol(i)}};function uO(){return Id(Mn(),et())}function Id(n,e){return n.type&4?new cO(e,n,Ys(n,e)):null}function Md(n,e,t,r,i){let o=n.data[e];if(o===null)o=dO(n,e,t,r,i),UM()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=BM();o.injectorIndex=s===null?-1:s.injectorIndex}return No(o,!0),o}function dO(n,e,t,r,i){let o=BD(),s=lm(),a=s?o:o&&o.parent,c=n.data[e]=hO(n,a,t,e,r,i);return fO(n,c,o,s),c}function fO(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function hO(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return LM()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var _$=new RegExp(`^(\\d+)*(${AR}|${OR})*(.*)`);var pO=()=>null;function sl(n,e){return pO(n,e)}var gO=class{},ew=class{},wg=class{resolveComponentFactory(e){throw Error(`No component factory found for ${zn(e)}.`)}},Rd=class{static NULL=new wg},Hn=class{},Fr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>mO()}return n})();function mO(){let n=et(),e=Mn(),t=Qr(e.index,n);return(Bi(t)?t:n)[en]}var vO=(()=>{class n{static \u0275prov=_e({token:n,providedIn:"root",factory:()=>null})}return n})();var Hp={},Cg=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=ud(r);let i=this.injector.get(e,Hp,r);return i!==Hp||t===Hp?i:this.parentInjector.get(e,t,r)}};function Sg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=D0(i,a);else if(o==2){let c=a,d=e[++s];r=D0(r,c+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Re(n,e=Ze.Default){let t=et();if(t===null)return Ne(n,e);let r=Mn();return ob(r,t,Pn(n),e)}function Bm(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,c=null,d=null,h=_O(s);h===null?a=s:[a,c,d]=h,wO(n,e,t,a,o,c,d)}o!==null&&r!==null&&yO(t,r,o)}function yO(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new ae(-301,!1);r.push(e[i],o)}}function _O(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&Kr(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,DO(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function DO(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function bO(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function wO(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let b=0;b<a;b++){let v=r[b];!c&&Kr(v)&&(c=!0,bO(n,t,b)),lg(Ku(t,e),n,v.type)}MO(t,n.data.length,a);for(let b=0;b<a;b++){let v=r[b];v.providersResolver&&v.providersResolver(v)}let d=!1,h=!1,g=Nb(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let b=0;b<a;b++){let v=r[b];if(t.mergedAttrs=Vs(t.mergedAttrs,v.hostAttrs),SO(n,t,e,g,v),IO(g,v,i),s!==null&&s.has(v)){let[H,W]=s.get(v);t.directiveToIndex.set(v.type,[g,H+t.directiveStart,W+t.directiveStart])}else(o===null||!o.has(v))&&t.directiveToIndex.set(v.type,g);v.contentQueries!==null&&(t.flags|=4),(v.hostBindings!==null||v.hostAttrs!==null||v.hostVars!==0)&&(t.flags|=64);let E=v.type.prototype;!d&&(E.ngOnChanges||E.ngOnInit||E.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!h&&(E.ngOnChanges||E.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),g++}CO(n,t,o)}function CO(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))$0(0,e,i,r),$0(1,e,i,r),W0(e,r,!1);else{let o=t.get(i);q0(0,e,o,r),q0(1,e,o,r),W0(e,r,!0)}}}function $0(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),tw(e,o)}}function q0(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),tw(e,s)}}function tw(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function W0(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Mm(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let d=i[c];for(let h of d)if(h===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let d=o[c];for(let h=0;h<d.length;h+=2)if(d[h]===e){s??=[],s.push(d[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function SO(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=So(i.type,!0)),s=new Ao(o,Kr(i),Re);n.blueprint[r]=s,t[r]=s,EO(n,e,r,Nb(n,t,i.hostVars,or),i)}function EO(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;xO(s)!=a&&s.push(a),s.push(t,r,o)}}function xO(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function IO(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Kr(e)&&(t[""]=n)}}function MO(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function nw(n,e,t,r,i,o,s,a){let c=e.consts,d=zi(c,s),h=Md(e,n,2,r,d);return o&&Bm(e,t,h,zi(c,a),i),h.mergedAttrs=Vs(h.mergedAttrs,h.attrs),h.attrs!==null&&Sg(h,h.attrs,!1),h.mergedAttrs!==null&&Sg(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function rw(n,e){pm(n,e),nm(e)&&n.queries.elementEnd(e)}var ed=class extends Rd{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=xo(e);return new js(t,this.ngModule)}};function RO(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Dd.SignalBased)!==0};return i&&(o.transform=i),o})}function TO(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function OO(n,e,t){let r=e instanceof kn?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Cg(t,r):t}function AO(n){let e=n.get(Hn,null);if(e===null)throw new ae(407,!1);let t=n.get(vO,null),r=n.get(Po,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function PO(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return Ob(e,t,t==="svg"?xM:t==="math"?IM:null)}var js=class extends ew{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=RO(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=TO(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=lT(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){Ct(22);let o=Ge(null);try{let s=this.componentDef,a=r?["ng-version","19.2.15"]:cT(this.componentDef.selectors[0]),c=Rm(0,null,null,1,0,null,null,null,null,[a],null),d=OO(s,i||this.ngModule,e),h=AO(d),g=h.rendererFactory.createRenderer(null,s),b=r?_T(g,r,s.encapsulation,d):PO(s,g),v=Tm(null,c,null,512|kb(s),null,null,h,g,d,null,Sb(b,d,!0));v[pn]=b,dm(v);let E=null;try{let H=nw(pn,c,v,"#host",()=>[this.componentDef],!0,0);b&&(Pb(g,b,H),Qs(b,v)),bd(c,v,H),Em(c,H,v),rw(c,H),t!==void 0&&kO(H,this.ngContentSelectors,t),E=Qr(H.index,v),v[an]=E[an],Nm(c,v,null)}catch(H){throw E!==null&&gg(E),gg(v),H}finally{Ct(23),fm()}return new Eg(this.componentType,v)}finally{Ge(o)}}},Eg=class extends gO{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=rm(t[qe],pn),this.location=Ys(this._tNode,t),this.instance=Qr(this._tNode.index,t)[an],this.hostView=this.changeDetectorRef=new ol(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=km(r,i[qe],i,e,t);this.previousInputValues.set(e,t);let s=Qr(r.index,i);jm(s,1)}get injector(){return new Co(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function kO(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var sr=(()=>{class n{static __NG_ELEMENT_ID__=NO}return n})();function NO(){let n=Mn();return ow(n,et())}var FO=sr,iw=class extends FO{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ys(this._hostTNode,this._hostLView)}get injector(){return new Co(this._hostTNode,this._hostLView)}get parentInjector(){let e=gm(this._hostTNode,this._hostLView);if(JD(e)){let t=Wu(e,this._hostLView),r=qu(e),i=t[qe].data[r+8];return new Co(i,t)}else return new Co(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=G0(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-xn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=sl(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,rl(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!wM(e),a;if(s)a=t;else{let E=t||{};a=E.index,r=E.injector,i=E.projectableNodes,o=E.environmentInjector||E.ngModuleRef}let c=s?e:new js(xo(e)),d=r||this.parentInjector;if(!o&&c.ngModule==null){let H=(s?d:this.parentInjector).get(kn,null);H&&(o=H)}let h=xo(c.componentType??{}),g=sl(this._lContainer,h?.id??null),b=g?.firstChild??null,v=c.create(d,i,b,o);return this.insertImpl(v.hostView,a,rl(this._hostTNode,g)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(TM(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[In],d=new iw(c,c[Pr],c[In]);d.detach(d.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return xd(s,i,o,r),e.attachToViewContainerRef(),DD(Up(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=G0(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=il(this._lContainer,t);r&&(ju(Up(this._lContainer),t),Cd(r[qe],r))}detach(e){let t=this._adjustIndex(e,-1),r=il(this._lContainer,t);return r&&ju(Up(this._lContainer),t)!=null?new ol(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function G0(n){return n[Hu]}function Up(n){return n[Hu]||(n[Hu]=[])}function ow(n,e){let t,r=e[n.index];return Ci(r)?t=r:(t=Qb(r,e,null,n),e[n.index]=t,Om(e,t)),VO(t,e,n,r),new iw(t,n,e)}function LO(n,e){let t=n[en],r=t.createComment(""),i=Jr(e,n),o=t.parentNode(i);return Xu(t,o,r,t.nextSibling(i),!1),r}var VO=zO,jO=()=>!1;function BO(n,e,t){return jO(n,e,t)}function zO(n,e,t,r){if(n[Ro])return;let i;t.type&8?i=Yr(r):i=LO(e,t),n[Ro]=i}var xg=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Ig=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)zm(e,t).matches!==null&&this.queries[t].setDirty()}},Mg=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=YO(e):this.predicate=e}},Rg=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Tg=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,HO(t,o)),this.matchTNodeWithReadOption(e,t,Pu(t,e,o,!1,!1))}else r===Xr?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Pu(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Qt||i===sr||i===Xr&&t.type&4)this.addMatch(t.index,-2);else{let o=Pu(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function HO(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function UO(n,e){return n.type&11?Ys(n,e):n.type&4?Id(n,e):null}function $O(n,e,t,r){return t===-1?UO(e,n):t===-2?qO(n,e,r):tl(n,n[qe],t,e)}function qO(n,e,t){if(t===Qt)return Ys(e,n);if(t===Xr)return Id(e,n);if(t===sr)return ow(e,n)}function sw(n,e,t,r){let i=e[Di].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let d=s[c];if(d<0)a.push(null);else{let h=o[d];a.push($O(e,h,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function Og(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=sw(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let d=o[a+1],h=e[-c];for(let g=xn;g<h.length;g++){let b=h[g];b[Io]===b[In]&&Og(b[qe],b,d,r)}if(h[Ls]!==null){let g=h[Ls];for(let b=0;b<g.length;b++){let v=g[b];Og(v[qe],v,d,r)}}}}}return r}function WO(n,e){return n[Di].queries[e].queryList}function GO(n,e,t){let r=new pg((t&4)===4);return PM(n,e,r,r.destroy),(e[Di]??=new Ig).queries.push(new xg(r))-1}function KO(n,e,t,r){let i=ln();if(i.firstCreatePass){let o=Mn();QO(i,new Mg(e,t,r),o.index),ZO(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return GO(i,et(),t)}function YO(n){return n.split(",").map(e=>e.trim())}function QO(n,e,t){n.queries===null&&(n.queries=new Rg),n.queries.track(new Tg(e,t))}function ZO(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function zm(n,e){return n.queries.getByIndex(e)}function XO(n,e){let t=n[qe],r=zm(t,e);return r.crossesNgTemplate?Og(t,n,e,[]):sw(t,n,r,e)}var Bs=class{},Hm=class{};var Ag=class extends Bs{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ed(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=CD(e);this._bootstrapComponents=Rb(o.bootstrap),this._r3Injector=lb(e,t,[{provide:Bs,useValue:this},{provide:Rd,useValue:this.componentFactoryResolver},...r],zn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Pg=class extends Hm{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Ag(this.moduleType,e,[])}};var td=class extends Bs{injector;componentFactoryResolver=new ed(this);instance=null;constructor(e){super();let t=new Xa([...e.providers,{provide:Bs,useValue:this},{provide:Rd,useValue:this.componentFactoryResolver}],e.parent||fd(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Td(n,e,t=null){return new td({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var JO=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=SD(!1,t.type),i=r.length>0?Td([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=_e({token:n,providedIn:"environment",factory:()=>new n(Ne(kn))})}return n})();function Bt(n){return cl(()=>{let e=aw(n),t=Ce(Z({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===mb.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(JO).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Zr.Emulated,styles:n.styles||pr,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Hi("NgStandalone"),lw(t);let r=n.dependencies;return t.directiveDefs=K0(r,!1),t.pipeDefs=K0(r,!0),t.id=i1(t),t})}function e1(n){return xo(n)||uM(n)}function t1(n){return n!==null}function $n(n){return cl(()=>({type:n.type,bootstrap:n.bootstrap||pr,declarations:n.declarations||pr,imports:n.imports||pr,exports:n.exports||pr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function n1(n,e){if(n==null)return Eo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Dd.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function r1(n){if(n==null)return Eo;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function dt(n){return cl(()=>{let e=aw(n);return lw(e),e})}function hl(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function aw(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Eo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||pr,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:n1(n.inputs,e),outputs:r1(n.outputs),debugInfo:null}}function lw(n){n.features?.forEach(e=>e(n))}function K0(n,e){if(!n)return null;let t=e?dM:e1;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(t1)}function i1(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function o1(n){return Object.getPrototypeOf(n.prototype).constructor}function Fn(n){let e=o1(n.type),t=!0,r=[n];for(;e;){let i;if(Kr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ae(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=$p(n.inputs),s.declaredInputs=$p(n.declaredInputs),s.outputs=$p(n.outputs);let a=i.hostBindings;a&&u1(n,a);let c=i.viewQuery,d=i.contentQueries;if(c&&l1(n,c),d&&c1(n,d),s1(n,i),zI(n.outputs,i.outputs),Kr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Fn&&(t=!1)}}e=Object.getPrototypeOf(e)}a1(r)}function s1(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function a1(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Vs(i.hostAttrs,t=Vs(t,i.hostAttrs))}}function $p(n){return n===Eo?{}:n===pr?[]:n}function l1(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function c1(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function u1(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function cw(n){return f1(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function d1(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function f1(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Od(n,e,t){return n[e]=t}function h1(n,e){return n[e]}function Or(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function al(n,e,t,r){let i=Or(n,e,t);return Or(n,e+1,r)||i}function p1(n,e,t,r,i){let o=al(n,e,t,r);return Or(n,e+2,i)||o}function g1(n,e,t,r,i,o){let s=al(n,e,t,r);return al(n,e+2,i,o)||s}function m1(n,e,t,r,i,o,s,a,c){let d=e.consts,h=Md(e,n,4,s||null,a||null);am()&&Bm(e,t,h,zi(d,c),Pm),h.mergedAttrs=Vs(h.mergedAttrs,h.attrs),pm(e,h);let g=h.tView=Rm(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return e.queries!==null&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}function kg(n,e,t,r,i,o,s,a,c,d){let h=t+pn,g=e.firstCreatePass?m1(h,e,n,r,i,o,s,a,c):e.data[h];No(g,!1);let b=v1(e,n,g,t);yd()&&Sd(e,n,b,g),Qs(b,n);let v=Qb(b,n,b,g);return n[h]=v,Om(n,v),BO(v,g,n),pd(g)&&bd(e,n,g),c!=null&&Am(n,g,d),g}function be(n,e,t,r,i,o,s,a){let c=et(),d=ln(),h=zi(d.consts,o);return kg(c,d,n,e,t,r,i,h,s,a),be}var v1=y1;function y1(n,e,t,r){return _d(!0),e[en].createComment("")}var uw=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var dw=new Se("");var fw=(()=>{class n{static \u0275prov=_e({token:n,providedIn:"root",factory:()=>new Ng})}return n})(),Ng=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Vo(n){return!!n&&typeof n.then=="function"}function hw(n){return!!n&&typeof n.subscribe=="function"}var pw=new Se("");function Um(n){return Hs([{provide:pw,multi:!0,useValue:n}])}var gw=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=U(pw,{optional:!0})??[];injector=U(gn);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Ar(this.injector,i);if(Vo(o))t.push(o);else if(hw(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$m=new Se("");function _1(){mp(()=>{throw new ae(600,!1)})}function D1(n){return n.isBoundToModule}var b1=10;var mr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=U(_R);afterRenderManager=U(Cb);zonelessEnabled=U(vm);rootEffectScheduler=U(fw);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new ke;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=U(Ks).hasPendingTasks.pipe(Ke(t=>!t));constructor(){U(Zs,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=U(kn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=gn.NULL){Ct(10);let o=t instanceof ew;if(!this._injector.get(gw).done){let v="";throw new ae(405,v)}let a;o?a=t:a=this._injector.get(Rd).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let c=D1(a)?void 0:this._injector.get(Bs),d=r||a.selector,h=a.create(i,[],d,c),g=h.location.nativeElement,b=h.injector.get(dw,null);return b?.registerApplication(g),h.onDestroy(()=>{this.detachView(h.hostView),ku(this.components,h),b?.unregisterApplication(g)}),this._loadComponent(h),Ct(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ct(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Cm.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new ae(101,!1);let t=Ge(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Ge(t),this.afterTick.next(),Ct(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Hn,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<b1;)Ct(14),this.synchronizeOnce(),Ct(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)w1(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>md(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;ku(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get($m,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ku(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ae(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ku(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function w1(n,e,t,r){if(!t&&!md(n))return;Wb(n,e,t&&!r?0:1)}function Ut(n,e,t,r){let i=et(),o=Gs();if(Or(i,o,e)){let s=ln(),a=hm();IT(a,i,n,e,t,r)}return Ut}function C1(n,e,t,r){return Or(n,Gs(),t)?e+yi(t)+r:or}function S1(n,e,t,r,i,o){let s=UD(),a=al(n,s,t,i);return cm(2),a?e+yi(t)+r+yi(i)+o:or}function E1(n,e,t,r,i,o,s,a){let c=UD(),d=p1(n,c,t,i,s);return cm(3),d?e+yi(t)+r+yi(i)+o+yi(s)+a:or}function Ru(n,e){return n<<17|e<<2}function ko(n){return n>>17&32767}function x1(n){return(n&2)==2}function I1(n,e){return n&131071|e<<17}function Fg(n){return n|2}function zs(n){return(n&131068)>>2}function qp(n,e){return n&-131069|e<<2}function M1(n){return(n&1)===1}function Lg(n){return n|1}function R1(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ko(s),c=zs(s);n[r]=t;let d=!1,h;if(Array.isArray(t)){let g=t;h=g[1],(h===null||ul(g,h)>0)&&(d=!0)}else h=t;if(i)if(c!==0){let b=ko(n[a+1]);n[r+1]=Ru(b,a),b!==0&&(n[b+1]=qp(n[b+1],r)),n[a+1]=I1(n[a+1],r)}else n[r+1]=Ru(a,0),a!==0&&(n[a+1]=qp(n[a+1],r)),a=r;else n[r+1]=Ru(c,0),a===0?a=r:n[c+1]=qp(n[c+1],r),c=r;d&&(n[r+1]=Fg(n[r+1])),Y0(n,h,r,!0),Y0(n,h,r,!1),T1(e,h,n,r,o),s=Ru(a,c),o?e.classBindings=s:e.styleBindings=s}function T1(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ul(o,e)>=0&&(t[r+1]=Lg(t[r+1]))}function Y0(n,e,t,r){let i=n[t+1],o=e===null,s=r?ko(i):zs(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],d=n[s+1];O1(c,e)&&(a=!0,n[s+1]=r?Lg(d):Fg(d)),s=r?ko(d):zs(d)}a&&(n[t+1]=r?Fg(i):Lg(i))}function O1(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ul(n,e)>=0:!1}function Y(n,e,t){let r=et(),i=Gs();if(Or(r,i,e)){let o=ln(),s=hm();Vb(o,s,r,n,e,r[en],t,!1)}return Y}function Q0(n,e,t,r,i){km(e,n,t,i?"class":"style",r)}function Xs(n,e,t){return mw(n,e,t,!1),Xs}function Mt(n,e){return mw(n,e,null,!0),Mt}function mw(n,e,t,r){let i=et(),o=ln(),s=cm(2);if(o.firstUpdatePass&&P1(o,n,s,r),e!==or&&Or(i,s,e)){let a=o.data[Si()];V1(o,a,i,i[en],n,i[s+1]=j1(e,t),r,s)}}function A1(n,e){return e>=n.expandoStartIndex}function P1(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Si()],s=A1(n,t);B1(o,r)&&e===null&&!s&&(e=!1),e=k1(i,o,e,r),R1(i,o,e,t,s,r)}}function k1(n,e,t,r){let i=WM(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Wp(null,n,e,t,r),t=ll(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Wp(i,n,e,t,r),o===null){let c=N1(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Wp(null,n,e,c[1],r),c=ll(c,e.attrs,r),F1(n,e,r,c))}else o=L1(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function N1(n,e,t){let r=t?e.classBindings:e.styleBindings;if(zs(r)!==0)return n[ko(r)]}function F1(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ko(i)]=r}function L1(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=ll(r,s,t)}return ll(r,e.attrs,t)}function Wp(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=ll(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function ll(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),lM(n,s,t?!0:e[++o]))}return n===void 0?null:n}function V1(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,d=c[a+1],h=M1(d)?Z0(c,e,t,i,zs(d),s):void 0;if(!nd(h)){nd(o)||x1(d)&&(o=Z0(c,null,t,i,a,s));let g=FD(Si(),t);GT(r,s,g,i,o)}}function Z0(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],d=Array.isArray(c),h=d?c[1]:c,g=h===null,b=t[i+1];b===or&&(b=g?pr:void 0);let v=g?Fp(b,r):h===r?b:void 0;if(d&&!nd(v)&&(v=Fp(c,r)),nd(v)&&(a=v,s))return a;let E=n[i+1];i=s?ko(E):zs(E)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Fp(c,r))}return a}function nd(n){return n!==void 0}function j1(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=zn(xm(n)))),n}function B1(n,e){return(n.flags&(e?8:16))!==0}var Vg=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function Gp(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function z1(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let d=n.at(o),h=e[o],g=Gp(o,d,o,h,t);if(g!==0){g<0&&n.updateValue(o,h),o++;continue}let b=n.at(s),v=e[c],E=Gp(s,b,c,v,t);if(E!==0){E<0&&n.updateValue(s,v),s--,c--;continue}let H=t(o,d),W=t(s,b),oe=t(o,h);if(Object.is(oe,W)){let T=t(c,v);Object.is(T,H)?(n.swap(o,s),n.updateValue(s,v),c--,s--):n.move(s,o),n.updateValue(o,h),o++;continue}if(r??=new rd,i??=J0(n,o,s,t),jg(n,r,o,oe))n.updateValue(o,h),o++,s++;else if(i.has(oe))r.set(H,n.detach(o)),s--;else{let T=n.create(o,e[o]);n.attach(o,T),o++,s++}}for(;o<=c;)X0(n,r,t,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),d=c.next();for(;!d.done&&o<=s;){let h=n.at(o),g=d.value,b=Gp(o,h,o,g,t);if(b!==0)b<0&&n.updateValue(o,g),o++,d=c.next();else{r??=new rd,i??=J0(n,o,s,t);let v=t(o,g);if(jg(n,r,o,v))n.updateValue(o,g),o++,s++,d=c.next();else if(!i.has(v))n.attach(o,n.create(o,g)),o++,s++,d=c.next();else{let E=t(o,h);r.set(E,n.detach(o)),s--}}}for(;!d.done;)X0(n,r,t,n.length,d.value),d=c.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(c=>{n.destroy(c)})}function jg(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function X0(n,e,t,r,i){if(jg(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function J0(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var rd=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function Dt(n,e){Hi("NgControlFlow");let t=et(),r=Gs(),i=t[r]!==or?t[r]:-1,o=i!==-1?id(t,pn+i):void 0,s=0;if(Or(t,r,n)){let a=Ge(null);try{if(o!==void 0&&Xb(o,s),n!==-1){let c=pn+n,d=id(t,c),h=Ug(t[qe],c),g=sl(d,h.tView.ssrId),b=wd(t,h,e,{dehydratedView:g});xd(d,b,s,rl(h,g))}}finally{Ge(a)}}else if(o!==void 0){let a=Zb(o,s);a!==void 0&&(a[an]=e)}}var Bg=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-xn}};function vw(n){return n}function yw(n,e){return e}var zg=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Ad(n,e,t,r,i,o,s,a,c,d,h,g,b){Hi("NgControlFlow");let v=et(),E=ln(),H=c!==void 0,W=et(),oe=a?s.bind(W[Rr][an]):s,T=new zg(H,oe);W[pn+n]=T,kg(v,E,n+1,e,t,r,i,zi(E.consts,o)),H&&kg(v,E,n+2,c,d,h,g,zi(E.consts,b))}var Hg=class extends Vg{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-xn}at(e){return this.getLView(e)[an].$implicit}attach(e,t){let r=t[Ja];this.needsIndexUpdate||=e!==this.length,xd(this.lContainer,t,e,rl(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,H1(this.lContainer,e)}create(e,t){let r=sl(this.lContainer,this.templateTNode.tView.ssrId),i=wd(this.hostLView,this.templateTNode,new Bg(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Cd(e[qe],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[an].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[an].$index=e}getLView(e){return U1(this.lContainer,e)}};function Pd(n){let e=Ge(null),t=Si();try{let r=et(),i=r[qe],o=r[t],s=t+1,a=id(r,s);if(o.liveCollection===void 0){let d=Ug(i,s);o.liveCollection=new Hg(a,r,d)}else o.liveCollection.reset();let c=o.liveCollection;if(z1(c,n,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let d=Gs(),h=c.length===0;if(Or(r,d,h)){let g=t+2,b=id(r,g);if(h){let v=Ug(i,g),E=sl(b,v.tView.ssrId),H=wd(r,v,void 0,{dehydratedView:E});xd(b,H,0,rl(v,E))}else Xb(b,0)}}}finally{Ge(e)}}function id(n,e){return n[e]}function H1(n,e){return il(n,e)}function U1(n,e){return Zb(n,e)}function Ug(n,e){return rm(n,e)}function _(n,e,t,r){let i=et(),o=ln(),s=pn+n,a=i[en],c=o.firstCreatePass?nw(s,o,i,e,Pm,am(),t,r):o.data[s],d=$1(o,i,c,a,e,n);i[s]=d;let h=pd(c);return No(c,!0),Pb(a,d,c),!jb(c)&&yd()&&Sd(o,i,d,c),(kM()===0||h)&&Qs(d,i),NM(),h&&(bd(o,i,c),Em(o,c,i)),r!==null&&Am(i,c),_}function D(){let n=Mn();lm()?zD():(n=n.parent,No(n,!1));let e=n;VM(e)&&jM(),FM();let t=ln();return t.firstCreatePass&&rw(t,e),e.classesWithoutHost!=null&&XM(e)&&Q0(t,e,et(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&JM(e)&&Q0(t,e,et(),e.stylesWithoutHost,!1),D}function $t(n,e,t,r){return _(n,e,t,r),D(),$t}var $1=(n,e,t,r,i,o)=>(_d(!0),Ob(r,i,YM()));function q1(n,e,t,r,i){let o=e.consts,s=zi(o,r),a=Md(e,n,8,"ng-container",s);s!==null&&Sg(a,s,!0);let c=zi(o,i);return am()&&Bm(e,t,a,c,Pm),a.mergedAttrs=Vs(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function Ui(n,e,t){let r=et(),i=ln(),o=n+pn,s=i.firstCreatePass?q1(o,i,r,e,t):i.data[o];No(s,!0);let a=W1(i,r,s,n);return r[o]=a,yd()&&Sd(i,r,a,s),Qs(a,r),pd(s)&&(bd(i,r,s),Em(i,s,r)),t!=null&&Am(r,s),Ui}function jo(){let n=Mn(),e=ln();return lm()?zD():(n=n.parent,No(n,!1)),e.firstCreatePass&&(pm(e,n),nm(n)&&e.queries.elementEnd(n)),jo}function kd(n,e,t){return Ui(n,e,t),jo(),kd}var W1=(n,e,t,r)=>(_d(!0),fT(e[en],""));function tt(){return et()}var Do=void 0;function G1(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var K1=["en",[["a","p"],["AM","PM"],Do],[["AM","PM"],Do,Do],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Do,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Do,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Do,"{1} 'at' {0}",Do],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",G1],Kp={};function qn(n){let e=Y1(n),t=eD(e);if(t)return t;let r=e.split("-")[0];if(t=eD(r),t)return t;if(r==="en")return K1;throw new ae(701,!1)}function eD(n){return n in Kp||(Kp[n]=bo.ng&&bo.ng.common&&bo.ng.common.locales&&bo.ng.common.locales[n]),Kp[n]}var zt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(zt||{});function Y1(n){return n.toLowerCase().replace(/_/g,"-")}var od="en-US",Q1="USD";var Z1=od;function X1(n){typeof n=="string"&&(Z1=n.toLowerCase().replace(/_/g,"-"))}function tD(n,e,t){return function r(i){if(i===Function)return t;let o=$s(n)?Qr(n.index,e):e;jm(o,5);let s=e[an],a=nD(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=nD(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function nD(n,e,t,r){let i=Ge(null);try{return Ct(6,e,t),t(r)!==!1}catch(o){return J1(n,o),!1}finally{Ct(7,e,t),Ge(i)}}function J1(n,e){let t=n[Fs],r=t?t.get(Tr,null):null;r&&r.handleError(e)}function rD(n,e,t,r,i,o){let s=e[t],a=e[qe],d=a.data[t].outputs[r],h=s[d],g=a.firstCreatePass?sm(a):null,b=om(e),v=h.subscribe(o),E=b.length;b.push(o,v),g&&g.push(i,n.index,E,-(E+1))}function le(n,e,t,r){let i=et(),o=ln(),s=Mn();return _w(o,i,i[en],s,n,e,r),le}function eA(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[zu],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function _w(n,e,t,r,i,o,s){let a=pd(r),d=n.firstCreatePass?sm(n):null,h=om(e),g=!0;if(r.type&3||s){let b=Jr(r,e),v=s?s(b):b,E=h.length,H=s?oe=>s(Yr(oe[r.index])):r.index,W=null;if(!s&&a&&(W=eA(n,e,i,r.index)),W!==null){let oe=W.__ngLastListenerFn__||W;oe.__ngNextListenerFn__=o,W.__ngLastListenerFn__=o,g=!1}else{o=tD(r,e,o),BR(e,v,i,o);let oe=t.listen(v,i,o);h.push(o,oe),d&&d.push(i,H,E,E+1)}}else o=tD(r,e,o);if(g){let b=r.outputs?.[i],v=r.hostDirectiveOutputs?.[i];if(v&&v.length)for(let E=0;E<v.length;E+=2){let H=v[E],W=v[E+1];rD(r,e,H,W,i,o)}if(b&&b.length)for(let E of b)rD(r,e,E,i,i,o)}}function k(n=1){return KM(n)}function Dw(n,e,t,r){KO(n,e,t,r)}function qm(n){let e=et(),t=ln(),r=$D();um(r+1);let i=zm(t,r);if(n.dirty&&RM(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=XO(e,r);n.reset(o,wR),n.notifyOnChanges()}return!0}return!1}function Wm(){return WO(et(),$D())}function ti(n){let e=zM();return gd(e,pn+n)}function w(n,e=""){let t=et(),r=ln(),i=n+pn,o=r.firstCreatePass?Md(r,i,1,e,null):r.data[i],s=tA(r,t,o,e,n);t[i]=s,yd()&&Sd(r,t,s,o),No(o,!1)}var tA=(n,e,t,r,i)=>(_d(!0),uT(e[en],r));function Pt(n){return Ie("",n,""),Pt}function Ie(n,e,t){let r=et(),i=C1(r,n,e,t);return i!==or&&Gm(r,Si(),i),Ie}function Rn(n,e,t,r,i){let o=et(),s=S1(o,n,e,t,r,i);return s!==or&&Gm(o,Si(),s),Rn}function Js(n,e,t,r,i,o,s){let a=et(),c=E1(a,n,e,t,r,i,o,s);return c!==or&&Gm(a,Si(),c),Js}function Gm(n,e,t){let r=FD(e,n);dT(n[en],r,t)}function St(n,e,t){pb(e)&&(e=e());let r=et(),i=Gs();if(Or(r,i,e)){let o=ln(),s=hm();Vb(o,s,r,n,e,r[en],t,!1)}return St}function Rt(n,e){let t=pb(n);return t&&n.set(e),t}function Et(n,e){let t=et(),r=ln(),i=Mn();return _w(r,t,t[en],i,n,e),Et}function nA(n,e,t){let r=ln();if(r.firstCreatePass){let i=Kr(n);$g(t,r.data,r.blueprint,i,!0),$g(e,r.data,r.blueprint,i,!1)}}function $g(n,e,t,r,i){if(n=Pn(n),Array.isArray(n))for(let o=0;o<n.length;o++)$g(n[o],e,t,r,i);else{let o=ln(),s=et(),a=Mn(),c=Ns(n)?n:Pn(n.provide),d=ID(n),h=a.providerIndexes&1048575,g=a.directiveStart,b=a.providerIndexes>>20;if(Ns(n)||!n.multi){let v=new Ao(d,i,Re),E=Qp(c,e,i?h:h+b,g);E===-1?(lg(Ku(a,s),o,c),Yp(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(v),s.push(v)):(t[E]=v,s[E]=v)}else{let v=Qp(c,e,h+b,g),E=Qp(c,e,h,h+b),H=v>=0&&t[v],W=E>=0&&t[E];if(i&&!W||!i&&!H){lg(Ku(a,s),o,c);let oe=oA(i?iA:rA,t.length,i,r,d);!i&&W&&(t[E].providerFactory=oe),Yp(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(oe),s.push(oe)}else{let oe=bw(t[i?E:v],d,!i&&r);Yp(o,n,v>-1?v:E,oe)}!i&&r&&W&&t[E].componentProviders++}}}function Yp(n,e,t,r){let i=Ns(e),o=mM(e);if(i||o){let c=(o?Pn(e.useClass):e).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=d.indexOf(t);h===-1?d.push(t,[r,c]):d[h+1].push(r,c)}else d.push(t,c)}}}function bw(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Qp(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function rA(n,e,t,r,i){return qg(this.multi,[])}function iA(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=tl(r,r[qe],this.providerFactory.index,i);s=c.slice(0,a),qg(o,s);for(let d=a;d<c.length;d++)s.push(c[d])}else s=[],qg(o,s);return s}function qg(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function oA(n,e,t,r,i){let o=new Ao(n,t,Re);return o.multi=[],o.index=e,o.componentProviders=0,bw(o,i,r&&!t),o}function Ln(n,e=[]){return t=>{t.providersResolver=(r,i)=>nA(r,i?i(n):n,e)}}function ww(n,e,t){let r=vd()+n,i=et();return i[r]===or?Od(i,r,t?e.call(t):e()):h1(i,r)}function Km(n,e){let t=n[e];return t===or?void 0:t}function sA(n,e,t,r,i,o){let s=e+t;return Or(n,s,i)?Od(n,s+1,o?r.call(o,i):r(i)):Km(n,s+1)}function aA(n,e,t,r,i,o,s){let a=e+t;return al(n,a,i,o)?Od(n,a+2,s?r.call(s,i,o):r(i,o)):Km(n,a+2)}function lA(n,e,t,r,i,o,s,a,c){let d=e+t;return g1(n,d,i,o,s,a)?Od(n,d+4,c?r.call(c,i,o,s,a):r(i,o,s,a)):Km(n,d+4)}function ft(n,e){let t=ln(),r,i=n+pn;t.firstCreatePass?(r=cA(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=So(r.type,!0)),s,a=Bn(Re);try{let c=Gu(!1),d=o();return Gu(c),MM(t,et(),i,d),d}finally{Bn(a)}}function cA(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Bo(n,e,t){let r=n+pn,i=et(),o=gd(i,r);return Ym(i,r)?sA(i,vd(),e,o.transform,t,o):o.transform(t)}function qt(n,e,t,r){let i=n+pn,o=et(),s=gd(o,i);return Ym(o,i)?aA(o,vd(),e,s.transform,t,r,s):s.transform(t,r)}function $i(n,e,t,r,i,o){let s=n+pn,a=et(),c=gd(a,s);return Ym(a,s)?lA(a,vd(),e,c.transform,t,r,i,o,c):c.transform(t,r,i,o)}function Ym(n,e){return n[qe].data[e].pure}function zo(n,e){return Id(n,e)}var sd=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Qm=new sd("19.2.15"),Wg=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Cw=(()=>{class n{compileModuleSync(t){return new Pg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=CD(t),o=Rb(i.declarations).reduce((s,a)=>{let c=xo(a);return c&&s.push(new js(c)),s},[]);return new Wg(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var uA=(()=>{class n{zone=U(gt);changeDetectionScheduler=U(Po);applicationRef=U(mr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dA=new Se("",{factory:()=>!1});function Sw({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new gt(Ce(Z({},xw()),{scheduleInRootZone:t})),[{provide:gt,useFactory:n},{provide:Za,multi:!0,useFactory:()=>{let r=U(uA,{optional:!0});return()=>r.initialize()}},{provide:Za,multi:!0,useFactory:()=>{let r=U(fA);return()=>{r.initialize()}}},e===!0?{provide:ub,useValue:!0}:[],{provide:db,useValue:t??cb}]}function Ew(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=Sw({ngZoneFactory:()=>{let i=xw(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Hi("NgZone_CoalesceEvent"),new gt(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Hs([{provide:dA,useValue:!0},{provide:vm,useValue:!1},r])}function xw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var fA=(()=>{class n{subscription=new mt;initialized=!1;zone=U(gt);pendingTasks=U(Ks);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{gt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{gt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var hA=(()=>{class n{appRef=U(mr);taskService=U(Ks);ngZone=U(gt);zonelessEnabled=U(vm);tracing=U(Zs,{optional:!0});disableScheduling=U(ub,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new mt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Qu):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(U(db,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof fg||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?k0:fb;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Qu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,k0(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pA(){return typeof $localize<"u"&&$localize.locale||od}var ea=new Se("",{providedIn:"root",factory:()=>U(ea,Ze.Optional|Ze.SkipSelf)||pA()}),Iw=new Se("",{providedIn:"root",factory:()=>Q1});var Gg=new Se(""),gA=new Se("");function Ga(n){return!n.moduleRef}function mA(n){let e=Ga(n)?n.r3Injector:n.moduleRef.injector,t=e.get(gt);return t.run(()=>{Ga(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Tr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Ga(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Gg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Gg);s.add(o),n.moduleRef.onDestroy(()=>{ku(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return yA(r,t,()=>{let o=e.get(gw);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(ea,od);if(X1(s||od),!e.get(gA,!0))return Ga(n)?e.get(mr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Ga(n)){let c=e.get(mr);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return vA(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function vA(n,e){let t=n.injector.get(mr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ae(-403,!1);e.push(n)}function yA(n,e,t){try{let r=t();return Vo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Nu=null;function _A(n=[],e){return gn.create({name:e,providers:[{provide:dd,useValue:"platform"},{provide:Gg,useValue:new Set([()=>Nu=null])},...n]})}function DA(n=[]){if(Nu)return Nu;let e=_A(n);return Nu=e,_1(),bA(e),e}function bA(n){let e=n.get(Dm,null);Ar(n,()=>{e?.forEach(t=>t())})}function Mw(){return!1}var Lr=(()=>{class n{static __NG_ELEMENT_ID__=wA}return n})();function wA(n){return CA(Mn(),et(),(n&16)===16)}function CA(n,e,t){if($s(n)&&!t){let r=Qr(n.index,e);return new ol(r,r)}else if(n.type&175){let r=e[Rr];return new ol(r,e)}return null}var Kg=class{constructor(){}supports(e){return cw(e)}create(e){return new Yg(e)}},SA=(n,e)=>e,Yg=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||SA}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<iD(r,i,o)?t:r,a=iD(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let d=a-i,h=c-i;if(d!=h){for(let b=0;b<d;b++){let v=b<o.length?o[b]:o[b]=0,E=v+b;h<=E&&E<d&&(o[b]=v+1)}let g=s.previousIndex;o[g]=h-d}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!cw(e))throw new ae(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,d1(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Qg(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new ad),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ad),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Qg=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Zg=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},ad=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Zg,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function iD(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function oD(){return new Nd([new Kg])}var Nd=(()=>{class n{factories;static \u0275prov=_e({token:n,providedIn:"root",factory:oD});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||oD()),deps:[[n,new iM,new _D]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ae(901,!1)}}return n})();function Rw(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Ct(8);try{let o=i?.injector??DA(r),s=[Sw({}),{provide:Po,useExisting:hA},...t||[]],a=new td({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return mA({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Ct(9)}}function Wn(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Tw(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function Ei(n){return _p(n)}function Ho(n,e){return gp(n,e?.equal)}var Xg=class{[hr];constructor(e){this[hr]=e}destroy(){this[hr].destroy()}};function pl(n,e){!e?.injector&&RD(pl);let t=e?.injector??U(gn),r=e?.manualCleanup!==!0?t.get(Fo):null,i,o=t.get(Sm,null,{optional:!0}),s=t.get(Po);return o!==null&&!e?.forceRoot?(i=IA(o.view,s,n),r instanceof Yu&&r._lView===o.view&&(r=null)):i=MA(n,t.get(fw),s),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new Xg(i)}var Ow=Ce(Z({},ps),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:nl,run(){if(this.dirty=!1,this.hasRun&&!$c(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),e=ja(this),t=$u(!1);try{this.maybeCleanup(),this.fn(n)}finally{$u(t),Uc(this,e)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),EA=Ce(Z({},Ow),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Ba(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),xA=Ce(Z({},Ow),{consumerMarkedDirty(){this.view[je]|=8192,Ws(this.view),this.notifier.notify(13)},destroy(){Ba(this),this.onDestroyFn(),this.maybeCleanup(),this.view[Mo]?.delete(this)}});function IA(n,e,t){let r=Object.create(xA);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=t,n[Mo]??=new Set,n[Mo].add(r),r.consumerMarkedDirty(r),r}function MA(n,e,t){let r=Object.create(EA);return r.fn=n,r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(12),r}function Aw(n,e){let t=xo(n),r=e.elementInjector||fd();return new js(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}var Ft=new Se("");var Nw=null;function vr(){return Nw}function Zm(n){Nw??=n}var gl=class{},Xm=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:()=>U(Fw),providedIn:"platform"})}return n})();var Fw=(()=>{class n extends Xm{_location;_history;_doc=U(Ft);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return vr().getBaseHref(this._doc)}onPopState(t){let r=vr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=vr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Lw(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function Pw(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function qi(n){return n&&n[0]!=="?"?`?${n}`:n}var ta=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:()=>U(jw),providedIn:"root"})}return n})(),Vw=new Se(""),jw=(()=>{class n extends ta{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??U(Ft).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Lw(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+qi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+qi(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+qi(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Ne(Xm),Ne(Vw,8))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),na=(()=>{class n{_subject=new ke;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=OA(Pw(kw(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+qi(r))}normalize(t){return n.stripTrailingSlash(TA(this._basePath,kw(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=qi;static joinWithSlash=Lw;static stripTrailingSlash=Pw;static \u0275fac=function(r){return new(r||n)(Ne(ta))};static \u0275prov=_e({token:n,factory:()=>RA(),providedIn:"root"})}return n})();function RA(){return new na(Ne(ta))}function TA(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function kw(n){return n.replace(/\/index.html$/,"")}function OA(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Ww={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},qd=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(qd||{});var Tn=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Tn||{}),xt=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(xt||{}),Gn=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Gn||{}),Dn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Gw(n){return qn(n)[zt.LocaleId]}function Kw(n,e,t){let r=qn(n),i=[r[zt.DayPeriodsFormat],r[zt.DayPeriodsStandalone]],o=yr(i,e);return yr(o,t)}function Yw(n,e,t){let r=qn(n),i=[r[zt.DaysFormat],r[zt.DaysStandalone]],o=yr(i,e);return yr(o,t)}function Qw(n,e,t){let r=qn(n),i=[r[zt.MonthsFormat],r[zt.MonthsStandalone]],o=yr(i,e);return yr(o,t)}function Zw(n,e){let r=qn(n)[zt.Eras];return yr(r,e)}function ml(n,e){let t=qn(n);return yr(t[zt.DateFormat],e)}function vl(n,e){let t=qn(n);return yr(t[zt.TimeFormat],e)}function yl(n,e){let r=qn(n)[zt.DateTimeFormat];return yr(r,e)}function jr(n,e){let t=qn(n),r=t[zt.NumberSymbols][e];if(typeof r>"u"){if(e===Dn.CurrencyDecimal)return t[zt.NumberSymbols][Dn.Decimal];if(e===Dn.CurrencyGroup)return t[zt.NumberSymbols][Dn.Group]}return r}function sv(n,e){return qn(n)[zt.NumberFormats][e]}function AA(n){return qn(n)[zt.Currencies]}function Xw(n){if(!n[zt.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[zt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Jw(n){let e=qn(n);return Xw(e),(e[zt.ExtraData][2]||[]).map(r=>typeof r=="string"?Jm(r):[Jm(r[0]),Jm(r[1])])}function eC(n,e,t){let r=qn(n);Xw(r);let i=[r[zt.ExtraData][0],r[zt.ExtraData][1]],o=yr(i,e)||[];return yr(o,t)||[]}function yr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Jm(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}function tC(n,e,t="en"){let r=AA(t)[n]||Ww[n]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||n}var PA=2;function nC(n){let e,t=Ww[n];return t&&(e=t[2]),typeof e=="number"?e:PA}var kA=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Fd={},NA=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function rC(n,e,t,r){let i=$A(n);e=xi(t,e)||e;let s=[],a;for(;e;)if(a=NA.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=oC(r,c),i=UA(i,r));let d="";return s.forEach(h=>{let g=zA(h);d+=g?g(i,t,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function zd(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function xi(n,e){let t=Gw(n);if(Fd[t]??={},Fd[t][e])return Fd[t][e];let r="";switch(e){case"shortDate":r=ml(n,Gn.Short);break;case"mediumDate":r=ml(n,Gn.Medium);break;case"longDate":r=ml(n,Gn.Long);break;case"fullDate":r=ml(n,Gn.Full);break;case"shortTime":r=vl(n,Gn.Short);break;case"mediumTime":r=vl(n,Gn.Medium);break;case"longTime":r=vl(n,Gn.Long);break;case"fullTime":r=vl(n,Gn.Full);break;case"short":let i=xi(n,"shortTime"),o=xi(n,"shortDate");r=Ld(yl(n,Gn.Short),[i,o]);break;case"medium":let s=xi(n,"mediumTime"),a=xi(n,"mediumDate");r=Ld(yl(n,Gn.Medium),[s,a]);break;case"long":let c=xi(n,"longTime"),d=xi(n,"longDate");r=Ld(yl(n,Gn.Long),[c,d]);break;case"full":let h=xi(n,"fullTime"),g=xi(n,"fullDate");r=Ld(yl(n,Gn.Full),[h,g]);break}return r&&(Fd[t][e]=r),r}function Ld(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Vr(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function FA(n,e){return Vr(n,3).substring(0,e)}function tn(n,e,t=0,r=!1,i=!1){return function(o,s){let a=LA(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return FA(a,e);let c=jr(s,Dn.MinusSign);return Vr(a,e,c,r,i)}}function LA(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function kt(n,e,t=Tn.Format,r=!1){return function(i,o){return VA(i,o,n,e,t,r)}}function VA(n,e,t,r,i,o){switch(t){case 2:return Qw(e,i,r)[n.getMonth()];case 1:return Yw(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let d=Jw(e),h=eC(e,i,r),g=d.findIndex(b=>{if(Array.isArray(b)){let[v,E]=b,H=s>=v.hours&&a>=v.minutes,W=s<E.hours||s===E.hours&&a<E.minutes;if(v.hours<E.hours){if(H&&W)return!0}else if(H||W)return!0}else if(b.hours===s&&b.minutes===a)return!0;return!1});if(g!==-1)return h[g]}return Kw(e,i,r)[s<12?0:1];case 3:return Zw(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function Vd(n){return function(e,t,r){let i=-1*r,o=jr(t,Dn.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Vr(s,2,o)+Vr(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Vr(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Vr(s,2,o)+":"+Vr(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Vr(s,2,o)+":"+Vr(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var jA=0,Bd=4;function BA(n){let e=zd(n,jA,1).getDay();return zd(n,0,1+(e<=Bd?Bd:Bd+7)-e)}function iC(n){let e=n.getDay(),t=e===0?-3:Bd-e;return zd(n.getFullYear(),n.getMonth(),n.getDate()+t)}function ev(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=iC(t),s=BA(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Vr(i,n,jr(r,Dn.MinusSign))}}function jd(n,e=!1){return function(t,r){let o=iC(t).getFullYear();return Vr(o,n,jr(r,Dn.MinusSign),e)}}var tv={};function zA(n){if(tv[n])return tv[n];let e;switch(n){case"G":case"GG":case"GGG":e=kt(3,xt.Abbreviated);break;case"GGGG":e=kt(3,xt.Wide);break;case"GGGGG":e=kt(3,xt.Narrow);break;case"y":e=tn(0,1,0,!1,!0);break;case"yy":e=tn(0,2,0,!0,!0);break;case"yyy":e=tn(0,3,0,!1,!0);break;case"yyyy":e=tn(0,4,0,!1,!0);break;case"Y":e=jd(1);break;case"YY":e=jd(2,!0);break;case"YYY":e=jd(3);break;case"YYYY":e=jd(4);break;case"M":case"L":e=tn(1,1,1);break;case"MM":case"LL":e=tn(1,2,1);break;case"MMM":e=kt(2,xt.Abbreviated);break;case"MMMM":e=kt(2,xt.Wide);break;case"MMMMM":e=kt(2,xt.Narrow);break;case"LLL":e=kt(2,xt.Abbreviated,Tn.Standalone);break;case"LLLL":e=kt(2,xt.Wide,Tn.Standalone);break;case"LLLLL":e=kt(2,xt.Narrow,Tn.Standalone);break;case"w":e=ev(1);break;case"ww":e=ev(2);break;case"W":e=ev(1,!0);break;case"d":e=tn(2,1);break;case"dd":e=tn(2,2);break;case"c":case"cc":e=tn(7,1);break;case"ccc":e=kt(1,xt.Abbreviated,Tn.Standalone);break;case"cccc":e=kt(1,xt.Wide,Tn.Standalone);break;case"ccccc":e=kt(1,xt.Narrow,Tn.Standalone);break;case"cccccc":e=kt(1,xt.Short,Tn.Standalone);break;case"E":case"EE":case"EEE":e=kt(1,xt.Abbreviated);break;case"EEEE":e=kt(1,xt.Wide);break;case"EEEEE":e=kt(1,xt.Narrow);break;case"EEEEEE":e=kt(1,xt.Short);break;case"a":case"aa":case"aaa":e=kt(0,xt.Abbreviated);break;case"aaaa":e=kt(0,xt.Wide);break;case"aaaaa":e=kt(0,xt.Narrow);break;case"b":case"bb":case"bbb":e=kt(0,xt.Abbreviated,Tn.Standalone,!0);break;case"bbbb":e=kt(0,xt.Wide,Tn.Standalone,!0);break;case"bbbbb":e=kt(0,xt.Narrow,Tn.Standalone,!0);break;case"B":case"BB":case"BBB":e=kt(0,xt.Abbreviated,Tn.Format,!0);break;case"BBBB":e=kt(0,xt.Wide,Tn.Format,!0);break;case"BBBBB":e=kt(0,xt.Narrow,Tn.Format,!0);break;case"h":e=tn(3,1,-12);break;case"hh":e=tn(3,2,-12);break;case"H":e=tn(3,1);break;case"HH":e=tn(3,2);break;case"m":e=tn(4,1);break;case"mm":e=tn(4,2);break;case"s":e=tn(5,1);break;case"ss":e=tn(5,2);break;case"S":e=tn(6,1);break;case"SS":e=tn(6,2);break;case"SSS":e=tn(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Vd(0);break;case"ZZZZZ":e=Vd(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Vd(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Vd(2);break;default:return null}return tv[n]=e,e}function oC(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function HA(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function UA(n,e,t){let i=n.getTimezoneOffset(),o=oC(e,i);return HA(n,-1*(o-i))}function $A(n){if(Bw(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return zd(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(kA))return qA(r)}let e=new Date(n);if(!Bw(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function qA(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),d=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,d),e}function Bw(n){return n instanceof Date&&!isNaN(n.valueOf())}var WA=/^(\d+)?\.((\d+)(-(\d+))?)?$/,zw=22,Hd=".",_l="0",GA=";",KA=",",nv="#",Hw="\xA4";function sC(n,e,t,r,i,o,s=!1){let a="",c=!1;if(!isFinite(n))a=jr(t,Dn.Infinity);else{let d=QA(n);s&&(d=YA(d));let h=e.minInt,g=e.minFrac,b=e.maxFrac;if(o){let T=o.match(WA);if(T===null)throw new Error(`${o} is not a valid digit info`);let B=T[1],K=T[3],G=T[5];B!=null&&(h=rv(B)),K!=null&&(g=rv(K)),G!=null?b=rv(G):K!=null&&g>b&&(b=g)}ZA(d,g,b);let v=d.digits,E=d.integerLen,H=d.exponent,W=[];for(c=v.every(T=>!T);E<h;E++)v.unshift(0);for(;E<0;E++)v.unshift(0);E>0?W=v.splice(E,v.length):(W=v,v=[0]);let oe=[];for(v.length>=e.lgSize&&oe.unshift(v.splice(-e.lgSize,v.length).join(""));v.length>e.gSize;)oe.unshift(v.splice(-e.gSize,v.length).join(""));v.length&&oe.unshift(v.join("")),a=oe.join(jr(t,r)),W.length&&(a+=jr(t,i)+W.join("")),H&&(a+=jr(t,Dn.Exponential)+"+"+H)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function aC(n,e,t,r,i){let o=sv(e,qd.Currency),s=cC(o,jr(e,Dn.MinusSign));return s.minFrac=nC(r),s.maxFrac=s.minFrac,sC(n,s,e,Dn.CurrencyGroup,Dn.CurrencyDecimal,i).replace(Hw,t).replace(Hw,"").trim()}function lC(n,e,t){let r=sv(e,qd.Decimal),i=cC(r,jr(e,Dn.MinusSign));return sC(n,i,e,Dn.Group,Dn.Decimal,t)}function cC(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(GA),i=r[0],o=r[1],s=i.indexOf(Hd)!==-1?i.split(Hd):[i.substring(0,i.lastIndexOf(_l)+1),i.substring(i.lastIndexOf(_l)+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf(nv));for(let h=0;h<c.length;h++){let g=c.charAt(h);g===_l?t.minFrac=t.maxFrac=h+1:g===nv?t.maxFrac=h+1:t.posSuf+=g}let d=a.split(KA);if(t.gSize=d[1]?d[1].length:0,t.lgSize=d[2]||d[1]?(d[2]||d[1]).length:0,o){let h=i.length-t.posPre.length-t.posSuf.length,g=o.indexOf(nv);t.negPre=o.substring(0,g).replace(/'/g,""),t.negSuf=o.slice(g+h).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function YA(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function QA(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(Hd))>-1&&(e=e.replace(Hd,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===_l;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===_l;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>zw&&(r=r.splice(0,zw-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function ZA(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let g=s;g<r.length;g++)r[g]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let g=1;g<s;g++)r[g]=0}if(a>=5)if(s-1<0){for(let g=0;g>s;g--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,d=e+n.integerLen,h=r.reduceRight(function(g,b,v,E){return b=b+g,E[v]=b<10?b:b-10,c&&(E[v]===0&&v>=d?E.pop():c=!1),b>=10?1:0},0);h&&(r.unshift(h),n.integerLen++)}function rv(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}var iv=/\s+/,Uw=[],av=(()=>{class n{_ngEl;_renderer;initialClasses=Uw;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(iv):Uw}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(iv):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(iv).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(Re(Qt),Re(Fr))};static \u0275dir=dt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Ud=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Wd=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Ud(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),$w(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);$w(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Re(sr),Re(Xr),Re(Nd))};static \u0275dir=dt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function $w(n,e){n.context.$implicit=e.item}var ar=(()=>{class n{_viewContainer;_context=new $d;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){qw(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){qw(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Re(sr),Re(Xr))};static \u0275dir=dt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),$d=class{$implicit=null;ngIf=null};function qw(n,e){if(n&&!n.createEmbeddedView)throw new ae(2020,!1)}var ov=class{_viewContainerRef;_templateRef;_created=!1;constructor(e,t){this._viewContainerRef=e,this._templateRef=t}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}},Gd=(()=>{class n{_defaultViews=[];_defaultUsed=!1;_caseCount=0;_lastCaseCheckIndex=0;_lastCasesMatched=!1;_ngSwitch;set ngSwitch(t){this._ngSwitch=t,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){let r=t===this._ngSwitch;return this._lastCasesMatched||=r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(let r of this._defaultViews)r.enforceState(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275dir=dt({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}})}return n})(),lv=(()=>{class n{ngSwitch;_view;ngSwitchCase;constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new ov(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static \u0275fac=function(r){return new(r||n)(Re(sr),Re(Xr),Re(Gd,9))};static \u0275dir=dt({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}})}return n})();var cv=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(t){this._viewContainerRef=t}ngOnChanges(t){if(this._shouldRecreateView(t)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let i=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,r,i)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,i):!1,get:(t,r,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,i)}})}static \u0275fac=function(r){return new(r||n)(Re(sr))};static \u0275dir=dt({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[Nn]})}return n})();function Kd(n,e){return new ae(2100,!1)}var XA=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,Dl=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw Kd(n,t);return t.replace(XA,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=hl({name:"titlecase",type:n,pure:!0})}return n})();var JA="mediumDate",uC=new Se(""),dC=new Se(""),Uo=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??JA,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return rC(t,s,o||this.locale,a)}catch(s){throw Kd(n,s.message)}}static \u0275fac=function(r){return new(r||n)(Re(ea,16),Re(uC,24),Re(dC,24))};static \u0275pipe=hl({name:"date",type:n,pure:!0})}return n})();var $o=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!fC(t))return null;i||=this._locale;try{let o=hC(t);return lC(o,i,r)}catch(o){throw Kd(n,o.message)}}static \u0275fac=function(r){return new(r||n)(Re(ea,16))};static \u0275pipe=hl({name:"number",type:n,pure:!0})}return n})();var uv=(()=>{class n{_locale;_defaultCurrencyCode;constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",o,s){if(!fC(t))return null;s||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?a=tC(a,i==="symbol"?"wide":"narrow",s):a=i);try{let c=hC(t);return aC(c,s,a,r,o)}catch(c){throw Kd(n,c.message)}}static \u0275fac=function(r){return new(r||n)(Re(ea,16),Re(Iw,16))};static \u0275pipe=hl({name:"currency",type:n,pure:!0})}return n})();function fC(n){return!(n==null||n===""||n!==n)}function hC(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var On=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$n({type:n});static \u0275inj=Un({})}return n})();function dv(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Yd="browser",pC="server";function fv(n){return n===Yd}function Qd(n){return n===pC}var bl=class{};var Jd=new Se(""),mv=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new ae(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Ne(Jd),Ne(gt))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})(),wl=class{_doc;constructor(e){this._doc=e}manager},Zd="ng-app-id";function gC(n){for(let e of n)e.remove()}function mC(n,e){let t=e.createElement("style");return t.textContent=n,t}function eP(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Zd}="${e}"],link[${Zd}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Zd),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function pv(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var vv=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Qd(o),eP(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,mC);r?.forEach(i=>this.addUsage(i,this.external,pv))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(gC(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])gC(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,mC(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,pv(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Zd,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Ne(Ft),Ne(dl),Ne(wm,8),Ne(Lo))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})(),hv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},yv=/%COMP%/g;var yC="%COMP%",tP=`_nghost-${yC}`,nP=`_ngcontent-${yC}`,rP=!0,iP=new Se("",{providedIn:"root",factory:()=>rP});function oP(n){return nP.replace(yv,n)}function sP(n){return tP.replace(yv,n)}function _C(n,e){return e.map(t=>t.replace(yv,n))}var El=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,d=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=d,this.tracingService=h,this.platformIsServer=Qd(a),this.defaultRenderer=new Cl(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Zr.ShadowDom&&(r=Ce(Z({},r),{encapsulation:Zr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Xd?i.applyToHost(t):i instanceof Sl&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer,b=this.tracingService;switch(r.encapsulation){case Zr.Emulated:o=new Xd(c,d,r,this.appId,h,s,a,g,b);break;case Zr.ShadowDom:return new gv(c,d,t,r,s,a,this.nonce,g,b);default:o=new Sl(c,d,r,h,s,a,g,b);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Ne(mv),Ne(vv),Ne(dl),Ne(iP),Ne(Ft),Ne(Lo),Ne(gt),Ne(wm),Ne(Zs,8))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})(),Cl=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(hv[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(vC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(vC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ae(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=hv[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=hv[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(bi.DashCase|bi.Important)?e.style.setProperty(t,r,i&bi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&bi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=vr().getGlobalEventTarget(this.doc,e),!e))throw new ae(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function vC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var gv=class extends Cl{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,d){super(e,o,s,c,d),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=_C(i.id,h);for(let b of h){let v=document.createElement("style");a&&v.setAttribute("nonce",a),v.textContent=b,this.shadowRoot.appendChild(v)}let g=i.getExternalStyles?.();if(g)for(let b of g){let v=pv(b,o);a&&v.setAttribute("nonce",a),this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Sl=class extends Cl{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,d){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=d?_C(d,h):h,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Xd=class extends Sl{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,d){let h=i+"-"+r.id;super(e,t,r,o,s,a,c,d,h),this.contentAttr=oP(h),this.hostAttr=sP(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var ef=class n extends gl{supportsDOMEvents=!0;static makeCurrent(){Zm(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=aP();return t==null?null:lP(t)}resetBaseElement(){xl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return dv(document.cookie,e)}},xl=null;function aP(){return xl=xl||document.head.querySelector("base"),xl?xl.getAttribute("href"):null}function lP(n){return new URL(n,document.baseURI).pathname}var cP=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})(),bC=(()=>{class n extends wl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(Ne(Ft))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})(),DC=["alt","control","meta","shift"],uP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dP={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},wC=(()=>{class n extends wl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vr().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),DC.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),s+=d+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=uP[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),DC.forEach(s=>{if(s!==i){let a=dP[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Ne(Ft))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})();function _v(n,e,t){return Rw(Z({rootComponent:n,platformRef:t?.platformRef},fP(e)))}function fP(n){return{appProviders:[...vP,...n?.providers??[]],platformProviders:mP}}function hP(){ef.makeCurrent()}function pP(){return new Tr}function gP(){return bb(document),document}var mP=[{provide:Lo,useValue:Yd},{provide:Dm,useValue:hP,multi:!0},{provide:Ft,useFactory:gP}];var vP=[{provide:dd,useValue:"root"},{provide:Tr,useFactory:pP},{provide:Jd,useClass:bC,multi:!0,deps:[Ft]},{provide:Jd,useClass:wC,multi:!0,deps:[Ft]},El,vv,mv,{provide:Hn,useExisting:El},{provide:bl,useClass:cP},[]];var CC=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Ne(Ft))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ze=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(ze||{}),_r="*";function Dv(n,e){return{type:ze.Trigger,name:n,definitions:e,options:{}}}function tf(n,e=null){return{type:ze.Animate,styles:e,timings:n}}function SC(n,e=null){return{type:ze.Sequence,steps:n,options:e}}function Gi(n){return{type:ze.Style,styles:n,offset:null}}function bv(n,e,t){return{type:ze.State,name:n,styles:e,options:t}}function nf(n,e,t=null){return{type:ze.Transition,expr:n,animation:e,options:t}}var ni=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},qo=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,r=0,i=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},ra="!";function EC(n){return new ae(3e3,!1)}function _P(){return new ae(3100,!1)}function DP(){return new ae(3101,!1)}function bP(n){return new ae(3001,!1)}function wP(n){return new ae(3003,!1)}function CP(n){return new ae(3004,!1)}function IC(n,e){return new ae(3005,!1)}function MC(){return new ae(3006,!1)}function RC(){return new ae(3007,!1)}function TC(n,e){return new ae(3008,!1)}function OC(n){return new ae(3002,!1)}function AC(n,e,t,r,i){return new ae(3010,!1)}function PC(){return new ae(3011,!1)}function kC(){return new ae(3012,!1)}function NC(){return new ae(3200,!1)}function FC(){return new ae(3202,!1)}function LC(){return new ae(3013,!1)}function VC(n){return new ae(3014,!1)}function jC(n){return new ae(3015,!1)}function BC(n){return new ae(3016,!1)}function zC(n,e){return new ae(3404,!1)}function SP(n){return new ae(3502,!1)}function HC(n){return new ae(3503,!1)}function UC(){return new ae(3300,!1)}function $C(n){return new ae(3504,!1)}function qC(n){return new ae(3301,!1)}function WC(n,e){return new ae(3302,!1)}function GC(n){return new ae(3303,!1)}function KC(n,e){return new ae(3400,!1)}function YC(n){return new ae(3401,!1)}function QC(n){return new ae(3402,!1)}function ZC(n,e){return new ae(3505,!1)}function Ii(n){switch(n.length){case 0:return new ni;case 1:return n[0];default:return new qo(n)}}function Ev(n,e,t=new Map,r=new Map){let i=[],o=[],s=-1,a=null;if(e.forEach(c=>{let d=c.get("offset"),h=d==s,g=h&&a||new Map;c.forEach((b,v)=>{let E=v,H=b;if(v!=="offset")switch(E=n.normalizePropertyName(E,i),H){case ra:H=t.get(v);break;case _r:H=r.get(v);break;default:H=n.normalizeStyleValue(v,E,H,i);break}g.set(E,H)}),h||o.push(g),a=g,s=d}),i.length)throw SP(i);return o}function rf(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&wv(t,"start",n)));break;case"done":n.onDone(()=>r(t&&wv(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&wv(t,"destroy",n)));break}}function wv(n,e,t){let r=t.totalTime,i=!!t.disabled,o=of(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),s=n._data;return s!=null&&(o._data=s),o}function of(n,e,t,r,i="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function Kn(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function xv(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var EP=typeof document>"u"?null:document.documentElement;function sf(n){let e=n.parentNode||n.host||null;return e===EP?null:e}function xP(n){return n.substring(1,6)=="ebkit"}var Wo=null,xC=!1;function XC(n){Wo||(Wo=IP()||{},xC=Wo.style?"WebkitAppearance"in Wo.style:!1);let e=!0;return Wo.style&&!xP(n)&&(e=n in Wo.style,!e&&xC&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Wo.style)),e}function IP(){return typeof document<"u"?document.body:null}function Iv(n,e){for(;e;){if(e===n)return!0;e=sf(e)}return!1}function Mv(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var MP=1e3,Rv="{{",RP="}}",Tv="ng-enter",af="ng-leave",Il="ng-trigger",Ml=".ng-trigger",Ov="ng-animating",lf=".ng-animating";function ri(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Cv(parseFloat(e[1]),e[2])}function Cv(n,e){switch(e){case"s":return n*MP;default:return n}}function Rl(n,e,t){return n.hasOwnProperty("duration")?n:TP(n,e,t)}function TP(n,e,t){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,o=0,s="";if(typeof n=="string"){let a=n.match(r);if(a===null)return e.push(EC(n)),{duration:0,delay:0,easing:""};i=Cv(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(o=Cv(parseFloat(c),a[4]));let d=a[5];d&&(s=d)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(_P()),a=!0),o<0&&(e.push(DP()),a=!0),a&&e.splice(c,0,EC(n))}return{duration:i,delay:o,easing:s}}function JC(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Br(n,e,t){e.forEach((r,i)=>{let o=cf(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r})}function Ki(n,e){e.forEach((t,r)=>{let i=cf(r);n.style[i]=""})}function ia(n){return Array.isArray(n)?n.length==1?n[0]:SC(n):n}function eS(n,e,t){let r=e.params||{},i=Av(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(bP(o))})}var Sv=new RegExp(`${Rv}\\s*(.+?)\\s*${RP}`,"g");function Av(n){let e=[];if(typeof n=="string"){let t;for(;t=Sv.exec(n);)e.push(t[1]);Sv.lastIndex=0}return e}function oa(n,e,t){let r=`${n}`,i=r.replace(Sv,(o,s)=>{let a=e[s];return a==null&&(t.push(wP(s)),a=""),a.toString()});return i==r?n:i}var OP=/-+([a-z0-9])/g;function cf(n){return n.replace(OP,(...e)=>e[1].toUpperCase())}function tS(n,e){return n===0||e===0}function nS(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<e.length;o++){let s=e[o];i.forEach(a=>s.set(a,uf(n,a)))}}return e}function Yn(n,e,t){switch(e.type){case ze.Trigger:return n.visitTrigger(e,t);case ze.State:return n.visitState(e,t);case ze.Transition:return n.visitTransition(e,t);case ze.Sequence:return n.visitSequence(e,t);case ze.Group:return n.visitGroup(e,t);case ze.Animate:return n.visitAnimate(e,t);case ze.Keyframes:return n.visitKeyframes(e,t);case ze.Style:return n.visitStyle(e,t);case ze.Reference:return n.visitReference(e,t);case ze.AnimateChild:return n.visitAnimateChild(e,t);case ze.AnimateRef:return n.visitAnimateRef(e,t);case ze.Query:return n.visitQuery(e,t);case ze.Stagger:return n.visitStagger(e,t);default:throw CP(e.type)}}function uf(n,e){return window.getComputedStyle(n)[e]}var Yv=(()=>{class n{validateStyleProperty(t){return XC(t)}containsElement(t,r){return Iv(t,r)}getParentElement(t){return sf(t)}query(t,r,i){return Mv(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,s,a=[],c){return new ni(i,o)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})(),Ko=class{static NOOP=new Yv},Yo=class{};var AP=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),gf=class extends Yo{normalizePropertyName(e,t){return cf(e)}normalizeStyleValue(e,t,r,i){let o="",s=r.toString().trim();if(AP.has(t)&&r!==0&&r!=="0")if(typeof r=="number")o="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(IC(e,r))}return s+o}};var mf="*";function PP(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>kP(r,t,e)):t.push(n),t}function kP(n,e,t){if(n[0]==":"){let c=NP(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(jC(n)),e;let i=r[1],o=r[2],s=r[3];e.push(rS(i,s));let a=i==mf&&s==mf;o[0]=="<"&&!a&&e.push(rS(s,i))}function NP(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(BC(n)),"* => *"}}var df=new Set(["true","1"]),ff=new Set(["false","0"]);function rS(n,e){let t=df.has(n)||ff.has(n),r=df.has(e)||ff.has(e);return(i,o)=>{let s=n==mf||n==i,a=e==mf||e==o;return!s&&t&&typeof i=="boolean"&&(s=i?df.has(n):ff.has(n)),!a&&r&&typeof o=="boolean"&&(a=o?df.has(e):ff.has(e)),s&&a}}var hS=":self",FP=new RegExp(`s*${hS}s*,?`,"g");function pS(n,e,t,r){return new Vv(n).build(e,t,r)}var iS="",Vv=class{_driver;constructor(e){this._driver=e}build(e,t,r){let i=new jv(t);return this._resetContextStyleTimingState(i),Yn(this,ia(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=iS,e.collectedStyles=new Map,e.collectedStyles.set(iS,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(MC()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==ze.State){let c=a,d=c.name;d.toString().split(/\s*,\s*/).forEach(h=>{c.name=h,o.push(this.visitState(c,t))}),c.name=d}else if(a.type==ze.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,s.push(c)}else t.errors.push(RC())}),{type:ze.Trigger,name:e.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{Av(c).forEach(d=>{s.hasOwnProperty(d)||o.add(d)})})}),o.size&&t.errors.push(TC(e.name,[...o.values()]))}return{type:ze.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=Yn(this,ia(e.animation),t),i=PP(e.expr,t.errors);return{type:ze.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Go(e.options)}}visitSequence(e,t){return{type:ze.Sequence,steps:e.steps.map(r=>Yn(this,r,t)),options:Go(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,o=e.steps.map(s=>{t.currentTime=r;let a=Yn(this,s,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:ze.Group,steps:o,options:Go(e.options)}}visitAnimate(e,t){let r=BP(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:Gi({});if(o.type==ze.Keyframes)i=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let d={};r.easing&&(d.easing=r.easing),s=Gi(d)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(s,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:ze.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===_r?r.push(a):t.errors.push(OC(a)):r.push(new Map(Object.entries(a)));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let c of a.values())if(c.toString().indexOf(Rv)>=0){o=!0;break}}}),{type:ze.Style,styles:r,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,c)=>{let d=t.collectedStyles.get(t.currentQuerySelector),h=d.get(c),g=!0;h&&(o!=i&&o>=h.startTime&&i<=h.endTime&&(t.errors.push(AC(c,h.startTime,h.endTime,o,i)),g=!1),o=h.startTime),g&&d.set(c,{startTime:o,endTime:i}),t.options&&eS(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:ze.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(PC()),r;let i=1,o=0,s=[],a=!1,c=!1,d=0,h=e.steps.map(oe=>{let T=this._makeStyleAst(oe,t),B=T.offset!=null?T.offset:jP(T.styles),K=0;return B!=null&&(o++,K=T.offset=B),c=c||K<0||K>1,a=a||K<d,d=K,s.push(K),T});c&&t.errors.push(kC()),a&&t.errors.push(NC());let g=e.steps.length,b=0;o>0&&o<g?t.errors.push(FC()):o==0&&(b=i/(g-1));let v=g-1,E=t.currentTime,H=t.currentAnimateTimings,W=H.duration;return h.forEach((oe,T)=>{let B=b>0?T==v?1:b*T:s[T],K=B*W;t.currentTime=E+H.delay+K,H.duration=K,this._validateStyleAst(oe,t),oe.offset=B,r.styles.push(oe)}),r}visitReference(e,t){return{type:ze.Reference,animation:Yn(this,ia(e.animation),t),options:Go(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:ze.AnimateChild,options:Go(e.options)}}visitAnimateRef(e,t){return{type:ze.AnimateRef,animation:this.visitReference(e.animation,t),options:Go(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=LP(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,Kn(t.collectedStyles,t.currentQuerySelector,new Map);let a=Yn(this,ia(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:ze.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:Go(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(LC());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Rl(e.timings,t.errors,!0);return{type:ze.Stagger,animation:Yn(this,ia(e.animation),t),timings:r,options:null}}};function LP(n){let e=!!n.split(/\s*,\s*/).find(t=>t==hS);return e&&(n=n.replace(FP,"")),n=n.replace(/@\*/g,Ml).replace(/@\w+/g,t=>Ml+"-"+t.slice(1)).replace(/:animating/g,lf),[n,e]}function VP(n){return n?Z({},n):null}var jv=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function jP(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function BP(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=Rl(n,e).duration;return Pv(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=Pv(0,0,"");return o.dynamic=!0,o.strValue=t,o}let i=Rl(t,e);return Pv(i.duration,i.delay,i.easing)}function Go(n){return n?(n=Z({},n),n.params&&(n.params=VP(n.params))):n={},n}function Pv(n,e,t){return{duration:n,delay:e,easing:t}}function Qv(n,e,t,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}var Ol=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},zP=1,HP=":enter",UP=new RegExp(HP,"g"),$P=":leave",qP=new RegExp($P,"g");function gS(n,e,t,r,i,o=new Map,s=new Map,a,c,d=[]){return new Bv().buildKeyframes(n,e,t,r,i,o,s,a,c,d)}var Bv=class{buildKeyframes(e,t,r,i,o,s,a,c,d,h=[]){d=d||new Ol;let g=new zv(e,t,d,i,o,h,[]);g.options=c;let b=c.delay?ri(c.delay):0;g.currentTimeline.delayNextStep(b),g.currentTimeline.setStyles([s],null,g.errors,c),Yn(this,r,g);let v=g.timelines.filter(E=>E.containsAnimation());if(v.length&&a.size){let E;for(let H=v.length-1;H>=0;H--){let W=v[H];if(W.element===t){E=W;break}}E&&!E.allowOnlyTimelineStyles()&&E.setStyles([a],null,g.errors,c)}return v.length?v.map(E=>E.buildKeyframes()):[Qv(t,[],[],[],0,b,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let o=i?.delay;if(o){let s=typeof o=="number"?o:ri(oa(o,i?.params??{},t.errors));r.delayNextStep(s)}}}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime,s=r.duration!=null?ri(r.duration):null,a=r.delay!=null?ri(r.delay):null;return s!==0&&e.forEach(c=>{let d=t.appendInstructionToTimeline(c,s,a);o=Math.max(o,d.duration+d.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Yn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),o.delay!=null)){i.previousNode.type==ze.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=vf);let s=ri(o.delay);i.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>Yn(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,o=e.options&&e.options.delay?ri(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),Yn(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?oa(r,t.params,t.errors):r;return Rl(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let o=e.style;o.type==ze.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let d=c.offset||0;a.forwardTime(d*o),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?ri(i.delay):0;o&&(t.previousNode.type===ze.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=vf);let s=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((d,h)=>{t.currentQueryIndex=h;let g=t.createSubContext(e.options,d);o&&g.delayNextStep(o),d===t.element&&(c=g.currentTimeline),Yn(this,e.animation,g),g.currentTimeline.applyStylesToKeyframe();let b=g.currentTimeline.currentTime;s=Math.max(s,b)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),c=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let h=t.currentTimeline;c&&h.delayNextStep(c);let g=h.currentTime;Yn(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-g+(i.startTime-r.currentTimeline.startTime)}},vf={},zv=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=vf;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,r,i,o,s,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=c||new yf(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=ri(r.duration)),r.delay!=null&&(i.delay=ri(r.delay));let o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=oa(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,o=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=vf,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new Hv(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,s){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(UP,"."+this._enterClassName),e=e.replace(qP,"."+this._leaveClassName);let c=r!=1,d=this._driver.query(this.element,e,c);r!==0&&(d=r<0?d.slice(d.length+r,d.length):d.slice(0,r)),a.push(...d)}return!o&&a.length==0&&s.push(VC(t)),a}},yf=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=zP,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||_r),this._currentKeyframe.set(t,_r);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let o=i&&i.params||{},s=WP(e,this._globalTimelineStyles);for(let[a,c]of s){let d=oa(c,o,r);this._pendingStyles.set(a,d),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??_r),this._updateStyle(a,d)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let d=new Map([...this._backFill,...a]);d.forEach((h,g)=>{h===ra?e.add(g):h===_r&&t.add(g)}),r||d.set("offset",c/this.duration),i.push(d)});let o=[...e.values()],s=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return Qv(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}},Hv=class extends yf{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,r,i,o,s,a=!1){super(e,t,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=r+t,a=t/s,c=new Map(e[0]);c.set("offset",0),o.push(c);let d=new Map(e[0]);d.set("offset",oS(a)),o.push(d);let h=e.length-1;for(let g=1;g<=h;g++){let b=new Map(e[g]),v=b.get("offset"),E=t+v*r;b.set("offset",oS(E/s)),o.push(b)}r=s,t=0,i="",e=o}return Qv(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function oS(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function WP(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let o of r)t.set(o,_r)}else for(let[o,s]of i)t.set(o,s)}),t}function sS(n,e,t,r,i,o,s,a,c,d,h,g,b){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:c,preStyleProps:d,postStyleProps:h,totalTime:g,errors:b}}var kv={},_f=class{_triggerName;ast;_stateStyles;constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return GP(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,s,a,c,d,h){let g=[],b=this.ast.options&&this.ast.options.params||kv,v=a&&a.params||kv,E=this.buildStyles(r,v,g),H=c&&c.params||kv,W=this.buildStyles(i,H,g),oe=new Set,T=new Map,B=new Map,K=i==="void",G={params:mS(H,b),delay:this.ast.options?.delay},I=h?[]:gS(e,t,this.ast.animation,o,s,E,W,G,d,g),M=0;return I.forEach($=>{M=Math.max($.duration+$.delay,M)}),g.length?sS(t,this._triggerName,r,i,K,E,W,[],[],T,B,M,g):(I.forEach($=>{let re=$.element,ce=Kn(T,re,new Set);$.preStyleProps.forEach(Ve=>ce.add(Ve));let we=Kn(B,re,new Set);$.postStyleProps.forEach(Ve=>we.add(Ve)),re!==t&&oe.add(re)}),sS(t,this._triggerName,r,i,K,E,W,I,[...oe.values()],T,B,M))}};function GP(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}function mS(n,e){let t=Z({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var Uv=class{styles;defaultParams;normalizer;constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=mS(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=oa(s,i,t));let c=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,c,s,t),r.set(a,s)})}),r}};function KP(n,e,t){return new $v(n,e,t)}var $v=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,t.states.forEach(i=>{let o=i.options&&i.options.params||{};this.states.set(i.name,new Uv(i.style,o,r))}),aS(this.states,"true","1"),aS(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new _f(e,i,this.states))}),this.fallbackTransition=YP(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(s=>s.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function YP(n,e,t){let r=[(s,a)=>!0],i={type:ze.Sequence,steps:[],options:null},o={type:ze.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new _f(n,o,e)}function aS(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var QP=new Ol,qv=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r}register(e,t){let r=[],i=[],o=pS(this._driver,t,r,i);if(r.length)throw HC(r);this._animations.set(e,o)}_buildPlayer(e,t,r){let i=e.element,o=Ev(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],o=this._animations.get(e),s,a=new Map;if(o?(s=gS(this._driver,t,o,Tv,af,new Map,new Map,r,QP,i),s.forEach(h=>{let g=Kn(a,h.element,new Map);h.postStyleProps.forEach(b=>g.set(b,null))})):(i.push(UC()),s=[]),i.length)throw $C(i);a.forEach((h,g)=>{h.forEach((b,v)=>{h.set(v,this._driver.computeStyle(g,v,_r))})});let c=s.map(h=>{let g=a.get(h.element);return this._buildPlayer(h,new Map,g)}),d=Ii(c);return this._playersById.set(e,d),d.onDestroy(()=>this.destroy(e)),this.players.push(d),d}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw qC(e);return t}listen(e,t,r,i){let o=of(t,"","","");return rf(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let s=i[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},lS="ng-animate-queued",ZP=".ng-animate-queued",Nv="ng-animate-disabled",XP=".ng-animate-disabled",JP="ng-star-inserted",ek=".ng-star-inserted",tk=[],vS={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},nk={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},zr="__ng_removed",Al=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=ik(i),r){let o=e,{value:s}=o,a=B_(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},Tl="void",Fv=new Al(Tl),Wv=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+e,Dr(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw WC(r,t);if(r==null||r.length==0)throw GC(t);if(!ok(r))throw KC(r,t);let o=Kn(this._elementListeners,e,[]),s={name:t,phase:r,callback:i};o.push(s);let a=Kn(this._engine.statesByElement,e,new Map);return a.has(t)||(Dr(e,Il),Dr(e,Il+"-"+t),a.set(t,Fv)),()=>{this._engine.afterFlush(()=>{let c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw YC(e);return t}trigger(e,t,r,i=!0){let o=this._getTrigger(t),s=new Pl(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Dr(e,Il),Dr(e,Il+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),d=new Al(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&d.absorbOptions(c.options),a.set(t,d),c||(c=Fv),!(d.value===Tl)&&c.value===d.value){if(!lk(c.params,d.params)){let H=[],W=o.matchStyles(c.value,c.params,H),oe=o.matchStyles(d.value,d.params,H);H.length?this._engine.reportError(H):this._engine.afterFlush(()=>{Ki(e,W),Br(e,oe)})}return}let b=Kn(this._engine.playersByElement,e,[]);b.forEach(H=>{H.namespaceId==this.id&&H.triggerName==t&&H.queued&&H.destroy()});let v=o.matchTransition(c.value,d.value,e,d.params),E=!1;if(!v){if(!i)return;v=o.fallbackTransition,E=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:v,fromState:c,toState:d,player:s,isFallbackTransition:E}),E||(Dr(e,lS),s.onStart(()=>{sa(e,lS)})),s.onDone(()=>{let H=this.players.indexOf(s);H>=0&&this.players.splice(H,1);let W=this._engine.playersByElement.get(e);if(W){let oe=W.indexOf(s);oe>=0&&W.splice(oe,1)}}),this.players.push(s),b.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,Ml,!0);r.forEach(i=>{if(i[zr])return;let o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((c,d)=>{if(s.set(d,c.value),this._triggers.has(d)){let h=this.trigger(e,d,Tl,i);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),r&&Ii(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(o=>{let s=o.name;if(i.has(s))return;i.add(s);let c=this._triggers.get(s).fallbackTransition,d=r.get(s)||Fv,h=new Al(Tl),g=new Pl(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:c,fromState:d,toState:h,player:g,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let s=e;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let o=e[zr];(!o||o===vS)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Dr(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){let c=of(o,r.triggerName,r.fromState.value,r.toState.value);c._data=e,rf(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let o=r.transition.ast.depCount,s=i.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},Gv=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new Wv(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let d=r.indexOf(c);r.splice(d+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}}return t}trigger(e,t,r,i){if(hf(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!hf(t))return;let o=t[zr];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Dr(e,Nv)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),sa(e,Nv))}removeNode(e,t,r){if(hf(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[zr]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return hf(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,Ml,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,lf,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ii(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[zr];if(t&&t.setForRemoval){if(e[zr]=vS,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Nv)&&this.markElementAsDisabled(e,!1),this.driver.query(e,XP,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Dr(i,JP)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?Ii(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw QC(e)}_flushAnimations(e,t){let r=new Ol,i=[],o=new Map,s=[],a=new Map,c=new Map,d=new Map,h=new Set;this.disabledNodes.forEach(se=>{h.add(se);let te=this.driver.query(se,ZP,!0);for(let he=0;he<te.length;he++)h.add(te[he])});let g=this.bodyNode,b=Array.from(this.statesByElement.keys()),v=dS(b,this.collectedEnterElements),E=new Map,H=0;v.forEach((se,te)=>{let he=Tv+H++;E.set(te,he),se.forEach(fe=>Dr(fe,he))});let W=[],oe=new Set,T=new Set;for(let se=0;se<this.collectedLeaveElements.length;se++){let te=this.collectedLeaveElements[se],he=te[zr];he&&he.setForRemoval&&(W.push(te),oe.add(te),he.hasAnimation?this.driver.query(te,ek,!0).forEach(fe=>oe.add(fe)):T.add(te))}let B=new Map,K=dS(b,Array.from(oe));K.forEach((se,te)=>{let he=af+H++;B.set(te,he),se.forEach(fe=>Dr(fe,he))}),e.push(()=>{v.forEach((se,te)=>{let he=E.get(te);se.forEach(fe=>sa(fe,he))}),K.forEach((se,te)=>{let he=B.get(te);se.forEach(fe=>sa(fe,he))}),W.forEach(se=>{this.processLeaveNode(se)})});let G=[],I=[];for(let se=this._namespaceList.length-1;se>=0;se--)this._namespaceList[se].drainQueuedTransitions(t).forEach(he=>{let fe=he.player,Me=he.element;if(G.push(fe),this.collectedEnterElements.length){let ie=Me[zr];if(ie&&ie.setForMove){if(ie.previousTriggersValues&&ie.previousTriggersValues.has(he.triggerName)){let ct=ie.previousTriggersValues.get(he.triggerName),Pe=this.statesByElement.get(he.element);if(Pe&&Pe.has(he.triggerName)){let Te=Pe.get(he.triggerName);Te.value=ct,Pe.set(he.triggerName,Te)}}fe.destroy();return}}let ve=!g||!this.driver.containsElement(g,Me),Qe=B.get(Me),it=E.get(Me),Ae=this._buildInstruction(he,r,it,Qe,ve);if(Ae.errors&&Ae.errors.length){I.push(Ae);return}if(ve){fe.onStart(()=>Ki(Me,Ae.fromStyles)),fe.onDestroy(()=>Br(Me,Ae.toStyles)),i.push(fe);return}if(he.isFallbackTransition){fe.onStart(()=>Ki(Me,Ae.fromStyles)),fe.onDestroy(()=>Br(Me,Ae.toStyles)),i.push(fe);return}let Wt=[];Ae.timelines.forEach(ie=>{ie.stretchStartingKeyframe=!0,this.disabledNodes.has(ie.element)||Wt.push(ie)}),Ae.timelines=Wt,r.append(Me,Ae.timelines);let He={instruction:Ae,player:fe,element:Me};s.push(He),Ae.queriedElements.forEach(ie=>Kn(a,ie,[]).push(fe)),Ae.preStyleProps.forEach((ie,ct)=>{if(ie.size){let Pe=c.get(ct);Pe||c.set(ct,Pe=new Set),ie.forEach((Te,_t)=>Pe.add(_t))}}),Ae.postStyleProps.forEach((ie,ct)=>{let Pe=d.get(ct);Pe||d.set(ct,Pe=new Set),ie.forEach((Te,_t)=>Pe.add(_t))})});if(I.length){let se=[];I.forEach(te=>{se.push(ZC(te.triggerName,te.errors))}),G.forEach(te=>te.destroy()),this.reportError(se)}let M=new Map,$=new Map;s.forEach(se=>{let te=se.element;r.has(te)&&($.set(te,te),this._beforeAnimationBuild(se.player.namespaceId,se.instruction,M))}),i.forEach(se=>{let te=se.element;this._getPreviousPlayers(te,!1,se.namespaceId,se.triggerName,null).forEach(fe=>{Kn(M,te,[]).push(fe),fe.destroy()})});let re=W.filter(se=>fS(se,c,d)),ce=new Map;uS(ce,this.driver,T,d,_r).forEach(se=>{fS(se,c,d)&&re.push(se)});let Ve=new Map;v.forEach((se,te)=>{uS(Ve,this.driver,new Set(se),c,ra)}),re.forEach(se=>{let te=ce.get(se),he=Ve.get(se);ce.set(se,new Map([...te?.entries()??[],...he?.entries()??[]]))});let Fe=[],yt=[],Ee={};s.forEach(se=>{let{element:te,player:he,instruction:fe}=se;if(r.has(te)){if(h.has(te)){he.onDestroy(()=>Br(te,fe.toStyles)),he.disabled=!0,he.overrideTotalTime(fe.totalTime),i.push(he);return}let Me=Ee;if($.size>1){let Qe=te,it=[];for(;Qe=Qe.parentNode;){let Ae=$.get(Qe);if(Ae){Me=Ae;break}it.push(Qe)}it.forEach(Ae=>$.set(Ae,Me))}let ve=this._buildAnimation(he.namespaceId,fe,M,o,Ve,ce);if(he.setRealPlayer(ve),Me===Ee)Fe.push(he);else{let Qe=this.playersByElement.get(Me);Qe&&Qe.length&&(he.parentPlayer=Ii(Qe)),i.push(he)}}else Ki(te,fe.fromStyles),he.onDestroy(()=>Br(te,fe.toStyles)),yt.push(he),h.has(te)&&i.push(he)}),yt.forEach(se=>{let te=o.get(se.element);if(te&&te.length){let he=Ii(te);se.setRealPlayer(he)}}),i.forEach(se=>{se.parentPlayer?se.syncPlayerEvents(se.parentPlayer):se.destroy()});for(let se=0;se<W.length;se++){let te=W[se],he=te[zr];if(sa(te,af),he&&he.hasAnimation)continue;let fe=[];if(a.size){let ve=a.get(te);ve&&ve.length&&fe.push(...ve);let Qe=this.driver.query(te,lf,!0);for(let it=0;it<Qe.length;it++){let Ae=a.get(Qe[it]);Ae&&Ae.length&&fe.push(...Ae)}}let Me=fe.filter(ve=>!ve.destroyed);Me.length?sk(this,te,Me):this.processLeaveNode(te)}return W.length=0,Fe.forEach(se=>{this.players.push(se),se.onDone(()=>{se.destroy();let te=this.players.indexOf(se);this.players.splice(te,1)}),se.play()}),Fe}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let c=!o||o==Tl;a.forEach(d=>{d.queued||!c&&d.triggerName!=i||s.push(d)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(e,t,r){let i=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let d=c.element,h=d!==o,g=Kn(r,d,[]);this._getPreviousPlayers(d,h,s,a,t.toState).forEach(v=>{let E=v.getRealPlayer();E.beforeDestroy&&E.beforeDestroy(),v.destroy(),g.push(v)})}Ki(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,s){let a=t.triggerName,c=t.element,d=[],h=new Set,g=new Set,b=t.timelines.map(E=>{let H=E.element;h.add(H);let W=H[zr];if(W&&W.removedBeforeQueried)return new ni(E.duration,E.delay);let oe=H!==c,T=ak((r.get(H)||tk).map(M=>M.getRealPlayer())).filter(M=>{let $=M;return $.element?$.element===H:!1}),B=o.get(H),K=s.get(H),G=Ev(this._normalizer,E.keyframes,B,K),I=this._buildPlayer(E,G,T);if(E.subTimeline&&i&&g.add(H),oe){let M=new Pl(e,a,H);M.setRealPlayer(I),d.push(M)}return I});d.forEach(E=>{Kn(this.playersByQueriedElement,E.element,[]).push(E),E.onDone(()=>rk(this.playersByQueriedElement,E.element,E))}),h.forEach(E=>Dr(E,Ov));let v=Ii(b);return v.onDestroy(()=>{h.forEach(E=>sa(E,Ov)),Br(c,t.toStyles)}),g.forEach(E=>{Kn(i,E,[]).push(v)}),v}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new ni(e.duration,e.delay)}},Pl=class{namespaceId;triggerName;element;_player=new ni;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>rf(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Kn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function rk(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function ik(n){return n??null}function hf(n){return n&&n.nodeType===1}function ok(n){return n=="start"||n=="done"}function cS(n,e){let t=n.style.display;return n.style.display=e??"none",t}function uS(n,e,t,r,i){let o=[];t.forEach(c=>o.push(cS(c)));let s=[];r.forEach((c,d)=>{let h=new Map;c.forEach(g=>{let b=e.computeStyle(d,g,i);h.set(g,b),(!b||b.length==0)&&(d[zr]=nk,s.push(d))}),n.set(d,h)});let a=0;return t.forEach(c=>cS(c,o[a++])),s}function dS(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),o=new Map;function s(a){if(!a)return r;let c=o.get(a);if(c)return c;let d=a.parentNode;return t.has(d)?c=d:i.has(d)?c=r:c=s(d),o.set(a,c),c}return e.forEach(a=>{let c=s(a);c!==r&&t.get(c).push(a)}),t}function Dr(n,e){n.classList?.add(e)}function sa(n,e){n.classList?.remove(e)}function sk(n,e,t){Ii(t).onDone(()=>n.processLeaveNode(e))}function ak(n){let e=[];return yS(n,e),e}function yS(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof qo?yS(r.players,e):e.push(r)}}function lk(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function fS(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}var aa=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new Gv(e.body,t,r),this._timelineEngine=new qv(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){let s=e+"-"+i,a=this._triggerCache[s];if(!a){let c=[],d=[],h=pS(this._driver,o,c,d);if(c.length)throw zC(i,c);a=KP(i,h,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[o,s]=xv(r),a=i;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if(r.charAt(0)=="@"){let[s,a]=xv(r);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function ck(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Lv(e[0]),e.length>1&&(r=Lv(e[e.length-1]))):e instanceof Map&&(t=Lv(e)),t||r?new uk(n,t,r):null}var uk=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Br(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Br(this._element,this._initialStyles),this._endStyles&&(Br(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Ki(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ki(this._element,this._endStyles),this._endStyles=null),Br(this._element,this._initialStyles),this._state=3)}}return n})();function Lv(n){let e=null;return n.forEach((t,r)=>{dk(r)&&(e=e||new Map,e.set(r,t))}),e}function dk(n){return n==="display"||n==="position"}var Df=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:uf(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},bf=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return Iv(e,t)}getParentElement(e){return sf(e)}query(e,t,r){return Mv(e,t,r)}computeStyle(e,t,r){return uf(e,t)}animate(e,t,r,i,o,s=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};o&&(c.easing=o);let d=new Map,h=s.filter(v=>v instanceof Df);tS(r,i)&&h.forEach(v=>{v.currentSnapshot.forEach((E,H)=>d.set(H,E))});let g=JC(t).map(v=>new Map(v));g=nS(e,g,d);let b=ck(e,g);return new Df(e,g,c,b)}};var pf="@",_S="@.disabled",wf=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==pf&&t==_S?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r,i){return this.delegate.listen(e,t,r,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},Kv=class extends wf{factory;constructor(e,t,r,i,o){super(t,r,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==pf?t.charAt(1)=="."&&t==_S?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r,i){if(t.charAt(0)==pf){let o=fk(e),s=t.slice(1),a="";return s.charAt(0)!=pf&&([s,a]=hk(s)),this.engine.listen(this.namespaceId,o,s,a,c=>{let d=c._data||-1;this.factory.scheduleListenerCallback(d,r,c)})}return this.delegate.listen(e,t,r,i)}};function fk(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function hk(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var Cf=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,t.onRemovalComplete=(i,o)=>{o?.removeChild(null,i)}}createRenderer(e,t){let r="",i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let d=this._rendererCache,h=d.get(i);if(!h){let g=()=>d.delete(i);h=new wf(r,i,this.engine,g),d.set(i,h)}return h}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=d=>{Array.isArray(d)?d.forEach(a):this.engine.registerTrigger(o,s,e,d.name,d)};return t.data.animation.forEach(a),new Kv(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var gk=(()=>{class n extends aa{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(Ne(Ft),Ne(Ko),Ne(Yo))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})();function mk(){return new gf}function vk(n,e,t){return new Cf(n,e,t)}var DS=[{provide:Yo,useFactory:mk},{provide:aa,useClass:gk},{provide:Hn,useFactory:vk,deps:[El,aa,gt]}],Iq=[{provide:Ko,useClass:Yv},{provide:bm,useValue:"NoopAnimations"},...DS],yk=[{provide:Ko,useFactory:()=>new bf},{provide:bm,useFactory:()=>"BrowserAnimations"},...DS];function bS(){return Hi("NgEagerAnimations"),[...yk]}var Zv="Service workers are disabled or not supported by this browser",la=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new Be(r=>r.error(new ae(5601,!1)));else{let r=null,i=new ke;this.worker=new Be(d=>(r!==null&&d.next(r),i.subscribe(h=>d.next(h))));let o=()=>{let{controller:d}=e;d!==null&&(r=d,i.next(r))};e.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(on(()=>e.getRegistration()));let s=new ke;this.events=s.asObservable();let a=d=>{let{data:h}=d;h?.type&&s.next(h)};e.addEventListener("message",a),t?.get(mr,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",o),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(r=>{this.worker.pipe(yn(1)).subscribe(i=>{i.postMessage(Z({action:e},t)),r()})})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,t);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(Jt(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(yn(1))}waitForOperationCompleted(e){return new Promise((t,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(Jt(i=>i.nonce===e),yn(1),Ke(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:t,error:r})})}get isEnabled(){return!!this.serviceWorker}},_k=(()=>{class n{sw;messages;notificationClicks;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new ke;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=vo,this.notificationClicks=vo,this.subscription=vo;return}this.messages=this.sw.eventsOfType("PUSH").pipe(Ke(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Ke(i=>i.data)),this.pushManager=this.sw.registration.pipe(Ke(i=>i.pushManager));let r=this.pushManager.pipe(on(i=>i.getSubscription()));this.subscription=new Be(i=>{let o=r.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Zv));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,a)=>{this.pushManager.pipe(on(c=>c.subscribe(r)),yn(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),s(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Zv));let t=r=>{if(r===null)throw new ae(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new ae(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(yn(1),on(t)).subscribe({next:r,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||n)(Ne(la))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})(),Dk=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=vo,this.unrecoverable=vo;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Zv));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new ae(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||n)(Ne(la))};static \u0275prov=_e({token:n,factory:n.\u0275fac})}return n})();var CS=new Se("");function bk(){let n=U(kl);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=U(CS),t=U(gt),r=U(mr);t.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),t.runOutsideAngular(()=>{let i,{registrationStrategy:o}=n;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...a]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=wS(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),wS(+a[0])]);break;default:throw new ae(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:n.scope}).catch(s=>console.error(ld(5604,!1)))})})}function wS(n){return new Promise(e=>setTimeout(e,n))}function wk(n,e){return new la(n.enabled!==!1?navigator.serviceWorker:void 0,e)}var kl=class{enabled;scope;registrationStrategy};function SS(n,e={}){return Hs([_k,Dk,{provide:CS,useValue:n},{provide:kl,useValue:e},{provide:la,useFactory:wk,deps:[kl,gn]},Um(bk)])}var Ye="primary",Kl=Symbol("RouteTitle"),ny=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Xo(n){return new ny(n)}function AS(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ck(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ii(n[t],e[t]))return!1;return!0}function ii(n,e){let t=n?ry(n):void 0,r=e?ry(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!PS(n[i],e[i]))return!1;return!0}function ry(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function PS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function kS(n){return n.length>0?n[n.length-1]:null}function Zi(n){return yu(n)?n:Vo(n)?Nt(Promise.resolve(n)):Le(n)}var Sk={exact:FS,subset:LS},NS={exact:Ek,subset:xk,ignored:()=>!0};function ES(n,e,t){return Sk[t.paths](n.root,e.root,t.matrixParams)&&NS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Ek(n,e){return ii(n,e)}function FS(n,e,t){if(!Qo(n.segments,e.segments)||!xf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!FS(n.children[r],e.children[r],t))return!1;return!0}function xk(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>PS(n[t],e[t]))}function LS(n,e,t){return VS(n,e,e.segments,t)}function VS(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Qo(i,t)||e.hasChildren()||!xf(i,t,r))}else if(n.segments.length===t.length){if(!Qo(n.segments,t)||!xf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!LS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Qo(n.segments,i)||!xf(n.segments,i,r)||!n.children[Ye]?!1:VS(n.children[Ye],e,o,r)}}function xf(n,e,t){return e.every((r,i)=>NS[t](n[i].parameters,r.parameters))}var si=class{root;queryParams;fragment;_queryParamMap;constructor(e=new vt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Xo(this.queryParams),this._queryParamMap}toString(){return Rk.serialize(this)}},vt=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return If(this)}},Yi=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Xo(this.parameters),this._parameterMap}toString(){return BS(this)}};function Ik(n,e){return Qo(n,e)&&n.every((t,r)=>ii(t.parameters,e[r].parameters))}function Qo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function Mk(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ye&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ye&&(t=t.concat(e(i,r)))}),t}var Yl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:()=>new Jo,providedIn:"root"})}return n})(),Jo=class{parse(e){let t=new oy(e);return new si(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Nl(e.root,!0)}`,r=Ak(e.queryParams),i=typeof e.fragment=="string"?`#${Tk(e.fragment)}`:"";return`${t}${r}${i}`}},Rk=new Jo;function If(n){return n.segments.map(e=>BS(e)).join("/")}function Nl(n,e){if(!n.hasChildren())return If(n);if(e){let t=n.children[Ye]?Nl(n.children[Ye],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Ye&&r.push(`${i}:${Nl(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=Mk(n,(r,i)=>i===Ye?[Nl(n.children[Ye],!1)]:[`${i}:${Nl(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ye]!=null?`${If(n)}/${t[0]}`:`${If(n)}/(${t.join("//")})`}}function jS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sf(n){return jS(n).replace(/%3B/gi,";")}function Tk(n){return encodeURI(n)}function iy(n){return jS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Mf(n){return decodeURIComponent(n)}function xS(n){return Mf(n.replace(/\+/g,"%20"))}function BS(n){return`${iy(n.path)}${Ok(n.parameters)}`}function Ok(n){return Object.entries(n).map(([e,t])=>`;${iy(e)}=${iy(t)}`).join("")}function Ak(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Sf(t)}=${Sf(i)}`).join("&"):`${Sf(t)}=${Sf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Pk=/^[^\/()?;#]+/;function Xv(n){let e=n.match(Pk);return e?e[0]:""}var kk=/^[^\/()?;=#]+/;function Nk(n){let e=n.match(kk);return e?e[0]:""}var Fk=/^[^=?&#]+/;function Lk(n){let e=n.match(Fk);return e?e[0]:""}var Vk=/^[^&#]+/;function jk(n){let e=n.match(Vk);return e?e[0]:""}var oy=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new vt([],{}):new vt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ye]=new vt(e,t)),r}parseSegment(){let e=Xv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ae(4009,!1);return this.capture(e),new Yi(Mf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Nk(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Xv(this.remaining);i&&(r=i,this.capture(r))}e[Mf(t)]=Mf(r)}parseQueryParam(e){let t=Lk(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=jk(this.remaining);s&&(r=s,this.capture(r))}let i=xS(t),o=xS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Xv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ae(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ye);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[Ye]:new vt([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ae(4011,!1)}};function zS(n){return n.segments.length>0?new vt([],{[Ye]:n}):n}function HS(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=HS(i);if(r===Ye&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new vt(n.segments,e);return Bk(t)}function Bk(n){if(n.numberOfChildren===1&&n.children[Ye]){let e=n.children[Ye];return new vt(n.segments.concat(e.segments),e.children)}return n}function Qi(n){return n instanceof si}function US(n,e,t=null,r=null){let i=$S(n);return qS(i,e,t,r)}function $S(n){let e;function t(o){let s={};for(let c of o.children){let d=t(c);s[c.outlet]=d}let a=new vt(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=zS(r);return e??i}function qS(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Jv(i,i,i,t,r);let o=zk(e);if(o.toRoot())return Jv(i,i,new vt([],{}),t,r);let s=Hk(o,i,n),a=s.processChildren?Ll(s.segmentGroup,s.index,o.commands):GS(s.segmentGroup,s.index,o.commands);return Jv(i,s.segmentGroup,a,t,r)}function Tf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function jl(n){return typeof n=="object"&&n!=null&&n.outlets}function Jv(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,d])=>{o[c]=Array.isArray(d)?d.map(h=>`${h}`):`${d}`});let s;n===e?s=t:s=WS(n,e,t);let a=zS(HS(s));return new si(a,o,i)}function WS(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=WS(o,e,t)}),new vt(n.segments,r)}var Of=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Tf(r[0]))throw new ae(4003,!1);let i=r.find(jl);if(i&&i!==kS(r))throw new ae(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function zk(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Of(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Of(t,e,r)}var da=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Hk(n,e,t){if(n.isAbsolute)return new da(e,!0,0);if(!t)return new da(e,!1,NaN);if(t.parent===null)return new da(t,!0,0);let r=Tf(n.commands[0])?0:1,i=t.segments.length-1+r;return Uk(t,i,n.numberOfDoubleDots)}function Uk(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ae(4005,!1);i=r.segments.length}return new da(r,!1,i-o)}function $k(n){return jl(n[0])?n[0].outlets:{[Ye]:n}}function GS(n,e,t){if(n??=new vt([],{}),n.segments.length===0&&n.hasChildren())return Ll(n,e,t);let r=qk(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new vt(n.segments.slice(0,r.pathIndex),{});return o.children[Ye]=new vt(n.segments.slice(r.pathIndex),n.children),Ll(o,0,i)}else return r.match&&i.length===0?new vt(n.segments,{}):r.match&&!n.hasChildren()?sy(n,e,t):r.match?Ll(n,0,i):sy(n,e,t)}function Ll(n,e,t){if(t.length===0)return new vt(n.segments,{});{let r=$k(t),i={};if(Object.keys(r).some(o=>o!==Ye)&&n.children[Ye]&&n.numberOfChildren===1&&n.children[Ye].segments.length===0){let o=Ll(n.children[Ye],e,t);return new vt(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=GS(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new vt(n.segments,i)}}function qk(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(jl(a))break;let c=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!MS(c,d,s))return o;r+=2}else{if(!MS(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function sy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(jl(o)){let c=Wk(o.outlets);return new vt(r,c)}if(i===0&&Tf(t[0])){let c=n.segments[e];r.push(new Yi(c.path,IS(t[0]))),i++;continue}let s=jl(o)?o.outlets[Ye]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Tf(a)?(r.push(new Yi(s,IS(a))),i+=2):(r.push(new Yi(s,{})),i++)}return new vt(r,{})}function Wk(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=sy(new vt([],{}),0,r))}),e}function IS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function MS(n,e,t){return n==t.path&&ii(e,t.parameters)}var Rf="imperative",mn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(mn||{}),cr=class{id;url;constructor(e,t){this.id=e,this.url=t}},es=class extends cr{type=mn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ur=class extends cr{urlAfterRedirects;type=mn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Qn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Qn||{}),Bl=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Bl||{}),oi=class extends cr{reason;code;type=mn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Mi=class extends cr{reason;code;type=mn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},ha=class extends cr{error;target;type=mn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},zl=class extends cr{urlAfterRedirects;state;type=mn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Af=class extends cr{urlAfterRedirects;state;type=mn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pf=class extends cr{urlAfterRedirects;state;shouldActivate;type=mn.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},kf=class extends cr{urlAfterRedirects;state;type=mn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nf=class extends cr{urlAfterRedirects;state;type=mn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ff=class{route;type=mn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Lf=class{route;type=mn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Vf=class{snapshot;type=mn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jf=class{snapshot;type=mn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bf=class{snapshot;type=mn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zf=class{snapshot;type=mn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Hl=class{},pa=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Gk(n,e){return n.providers&&!n._injector&&(n._injector=Td(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Hr(n){return n.outlet||Ye}function Kk(n,e){let t=n.filter(r=>Hr(r)===e);return t.push(...n.filter(r=>Hr(r)!==e)),t}function Ql(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Hf=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ql(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new va(this.rootInjector)}},va=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Hf(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Ne(kn))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Uf=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=ay(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=ay(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=ly(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ly(e,this._root).map(t=>t.value)}};function ay(n,e){if(n===e.value)return e;for(let t of e.children){let r=ay(n,t);if(r)return r}return null}function ly(n,e){if(n===e.value)return[e];for(let t of e.children){let r=ly(n,t);if(r.length)return r.unshift(e),r}return[]}var lr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ua(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ul=class extends Uf{snapshot;constructor(e,t){super(e),this.snapshot=t,my(this,e)}toString(){return this.snapshot.toString()}};function KS(n){let e=Yk(n),t=new Yt([new Yi("",{})]),r=new Yt({}),i=new Yt({}),o=new Yt({}),s=new Yt(""),a=new dr(t,r,o,s,i,Ye,n,e.root);return a.snapshot=e.root,new Ul(new lr(a,[]),e)}function Yk(n){let e={},t={},r={},i="",o=new Zo([],e,r,i,t,Ye,n,null,{});return new $l("",new lr(o,[]))}var dr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ke(d=>d[Kl]))??Le(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ke(e=>Xo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ke(e=>Xo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function $f(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:Z(Z({},e.params),n.params),data:Z(Z({},e.data),n.data),resolve:Z(Z(Z(Z({},n.data),e.data),i?.data),n._resolvedData)}:r={params:Z({},n.params),data:Z({},n.data),resolve:Z(Z({},n.data),n._resolvedData??{})},i&&QS(i)&&(r.resolve[Kl]=i.title),r}var Zo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Kl]}constructor(e,t,r,i,o,s,a,c,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Xo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Xo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},$l=class extends Uf{url;constructor(e,t){super(t),this.url=e,my(this,t)}toString(){return YS(this._root)}};function my(n,e){e.value._routerState=n,e.children.forEach(t=>my(n,t))}function YS(n){let e=n.children.length>0?` { ${n.children.map(YS).join(", ")} } `:"";return`${n.value}${e}`}function ey(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ii(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ii(e.params,t.params)||n.paramsSubject.next(t.params),Ck(e.url,t.url)||n.urlSubject.next(t.url),ii(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function cy(n,e){let t=ii(n.params,e.params)&&Ik(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||cy(n.parent,e.parent))}function QS(n){return typeof n.title=="string"||n.title===null}var ZS=new Se(""),Zl=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ye;activateEvents=new st;deactivateEvents=new st;attachEvents=new st;detachEvents=new st;routerOutletData=_n(void 0);parentContexts=U(va);location=U(sr);changeDetector=U(Lr);inputBinder=U(Kf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ae(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ae(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ae(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ae(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new uy(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=dt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Nn]})}return n})(),uy=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===dr?this.route:e===va?this.childContexts:e===ZS?this.outletData:this.parent.get(e,t)}},Kf=new Se("");var vy=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Bt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&$t(0,"router-outlet")},dependencies:[Zl],encapsulation:2})}return n})();function yy(n){let e=n.children&&n.children.map(yy),t=e?Ce(Z({},n),{children:e}):Z({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ye&&(t.component=vy),t}function Qk(n,e,t){let r=ql(n,e._root,t?t._root:void 0);return new Ul(r,e)}function ql(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Zk(n,e,t);return new lr(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ql(n,a)),s}}let r=Xk(e.value),i=e.children.map(o=>ql(n,o));return new lr(r,i)}}function Zk(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ql(n,r,i);return ql(n,r)})}function Xk(n){return new dr(new Yt(n.url),new Yt(n.params),new Yt(n.queryParams),new Yt(n.fragment),new Yt(n.data),n.outlet,n.component,n)}var ga=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},XS="ngNavigationCancelingError";function qf(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Qi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=JS(!1,Qn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function JS(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[XS]=!0,t.cancellationCode=e,t}function Jk(n){return eE(n)&&Qi(n.url)}function eE(n){return!!n&&n[XS]}var eN=(n,e,t,r)=>Ke(i=>(new dy(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),dy=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ey(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ua(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ua(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ua(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ua(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new zf(o.value.snapshot))}),e.children.length&&this.forwardEvent(new jf(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(ey(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ey(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Wf=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},fa=class{component;route;constructor(e,t){this.component=e,this.route=t}};function tN(n,e,t){let r=n._root,i=e?e._root:null;return Fl(r,i,t,[r.value])}function nN(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ya(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!dD(n)?n:e.get(n):r}function Fl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ua(e);return n.children.forEach(s=>{rN(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Vl(a,t.getContext(s),i)),i}function rN(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=iN(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Wf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Fl(n,e,a?a.children:null,r,i):Fl(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new fa(a.outlet.component,s))}else s&&Vl(e,a,i),i.canActivateChecks.push(new Wf(r)),o.component?Fl(n,null,a?a.children:null,r,i):Fl(n,null,t,r,i);return i}function iN(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Qo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Qo(n.url,e.url)||!ii(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!cy(n,e)||!ii(n.queryParams,e.queryParams);case"paramsChange":default:return!cy(n,e)}}function Vl(n,e,t){let r=ua(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Vl(s,e.children.getContext(o),t):Vl(s,null,t):Vl(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new fa(e.outlet.component,i)):t.canDeactivateChecks.push(new fa(null,i)):t.canDeactivateChecks.push(new fa(null,i))}function Xl(n){return typeof n=="function"}function oN(n){return typeof n=="boolean"}function sN(n){return n&&Xl(n.canLoad)}function aN(n){return n&&Xl(n.canActivate)}function lN(n){return n&&Xl(n.canActivateChild)}function cN(n){return n&&Xl(n.canDeactivate)}function uN(n){return n&&Xl(n.canMatch)}function tE(n){return n instanceof pi||n?.name==="EmptyError"}var Ef=Symbol("INITIAL_VALUE");function ma(){return on(n=>wu(n.map(e=>e.pipe(yn(1),_o(Ef)))).pipe(Ke(e=>{for(let t of e)if(t!==!0){if(t===Ef)return Ef;if(t===!1||dN(t))return t}return!0}),Jt(e=>e!==Ef),yn(1)))}function dN(n){return Qi(n)||n instanceof ga}function fN(n,e){return Xt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Le(Ce(Z({},t),{guardsResult:!0})):hN(s,r,i,n).pipe(Xt(a=>a&&oN(a)?pN(r,o,n,e):Le(a)),Ke(a=>Ce(Z({},t),{guardsResult:a})))})}function hN(n,e,t,r){return Nt(n).pipe(Xt(i=>_N(i.component,i.route,t,e,r)),mi(i=>i!==!0,!0))}function pN(n,e,t,r){return Nt(e).pipe(yo(i=>Is(mN(i.route.parent,r),gN(i.route,r),yN(n,i.path,t),vN(n,i.route,t))),mi(i=>i!==!0,!0))}function gN(n,e){return n!==null&&e&&e(new Bf(n)),Le(!0)}function mN(n,e){return n!==null&&e&&e(new Vf(n)),Le(!0)}function vN(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Le(!0);let i=r.map(o=>Cu(()=>{let s=Ql(e)??t,a=ya(o,s),c=aN(a)?a.canActivate(e,n):Ar(s,()=>a(e,n));return Zi(c).pipe(mi())}));return Le(i).pipe(ma())}function yN(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>nN(s)).filter(s=>s!==null).map(s=>Cu(()=>{let a=s.guards.map(c=>{let d=Ql(s.node)??t,h=ya(c,d),g=lN(h)?h.canActivateChild(r,n):Ar(d,()=>h(r,n));return Zi(g).pipe(mi())});return Le(a).pipe(ma())}));return Le(o).pipe(ma())}function _N(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Le(!0);let s=o.map(a=>{let c=Ql(e)??i,d=ya(a,c),h=cN(d)?d.canDeactivate(n,e,t,r):Ar(c,()=>d(n,e,t,r));return Zi(h).pipe(mi())});return Le(s).pipe(ma())}function DN(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Le(!0);let o=i.map(s=>{let a=ya(s,n),c=sN(a)?a.canLoad(e,t):Ar(n,()=>a(e,t));return Zi(c)});return Le(o).pipe(ma(),nE(r))}function nE(n){return xp(sn(e=>{if(typeof e!="boolean")throw qf(n,e)}),Ke(e=>e===!0))}function bN(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Le(!0);let o=i.map(s=>{let a=ya(s,n),c=uN(a)?a.canMatch(e,t):Ar(n,()=>a(e,t));return Zi(c)});return Le(o).pipe(ma(),nE(r))}var Wl=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Gl=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ca(n){return xs(new Wl(n))}function wN(n){return xs(new ae(4e3,!1))}function CN(n){return xs(JS(!1,Qn.GuardRejected))}var fy=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Le(r);if(i.numberOfChildren>1||!i.children[Ye])return wN(`${e.redirectTo}`);i=i.children[Ye]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:d,routeConfig:h,url:g,outlet:b,params:v,data:E,title:H}=i,W=Ar(o,()=>a({params:v,data:E,queryParams:c,fragment:d,routeConfig:h,url:g,outlet:b,title:H}));if(W instanceof si)throw new Gl(W);t=W}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Gl(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new si(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new vt(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ae(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},hy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function SN(n,e,t,r,i){let o=rE(n,e,t);return o.matched?(r=Gk(e,r),bN(r,e,t,i).pipe(Ke(s=>s===!0?o:Z({},hy)))):Le(o)}function rE(n,e,t){if(e.path==="**")return EN(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Z({},hy):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||AS)(t,n,e);if(!i)return Z({},hy);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?Z(Z({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function EN(n){return{matched:!0,parameters:n.length>0?kS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function RS(n,e,t,r){return t.length>0&&MN(n,t,r)?{segmentGroup:new vt(e,IN(r,new vt(t,n.children))),slicedSegments:[]}:t.length===0&&RN(n,t,r)?{segmentGroup:new vt(n.segments,xN(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new vt(n.segments,n.children),slicedSegments:t}}function xN(n,e,t,r){let i={};for(let o of t)if(Yf(n,e,o)&&!r[Hr(o)]){let s=new vt([],{});i[Hr(o)]=s}return Z(Z({},r),i)}function IN(n,e){let t={};t[Ye]=e;for(let r of n)if(r.path===""&&Hr(r)!==Ye){let i=new vt([],{});t[Hr(r)]=i}return t}function MN(n,e,t){return t.some(r=>Yf(n,e,r)&&Hr(r)!==Ye)}function RN(n,e,t){return t.some(r=>Yf(n,e,r))}function Yf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function TN(n,e,t){return e.length===0&&!n.children[t]}var py=class{};function ON(n,e,t,r,i,o,s="emptyOnly"){return new gy(n,e,t,r,i,s,o).recognize()}var AN=31,gy=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new fy(this.urlSerializer,this.urlTree)}noMatchError(e){return new ae(4002,`'${e.segmentGroup}'`)}recognize(){let e=RS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ke(({children:t,rootSnapshot:r})=>{let i=new lr(r,t),o=new $l("",i),s=US(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Zo([],Object.freeze({}),Object.freeze(Z({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ye,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ye,t).pipe(Ke(r=>({children:r,rootSnapshot:t})),gi(r=>{if(r instanceof Gl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Wl?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Ke(s=>s instanceof lr?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Nt(o).pipe(yo(s=>{let a=r.children[s],c=Kk(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Np((s,a)=>(s.push(...a),s)),Vi(null),kp(),Xt(s=>{if(s===null)return ca(r);let a=iE(s);return PN(a),Le(a)}))}processSegment(e,t,r,i,o,s,a){return Nt(t).pipe(yo(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(gi(d=>{if(d instanceof Wl)return Le(null);throw d}))),mi(c=>!!c),gi(c=>{if(tE(c))return TN(r,i,o)?Le(new py):ca(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Hr(r)!==s&&(s===Ye||!Yf(i,o,r))?ca(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):ca(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:d,consumedSegments:h,positionalParamSegments:g,remainingSegments:b}=rE(t,i,o);if(!c)return ca(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>AN&&(this.allowRedirects=!1));let v=new Zo(o,d,Object.freeze(Z({},this.urlTree.queryParams)),this.urlTree.fragment,TS(i),Hr(i),i.component??i._loadedComponent??null,i,OS(i)),E=$f(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(E.params),v.data=Object.freeze(E.data);let H=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,g,v,e);return this.applyRedirects.lineralizeSegments(i,H).pipe(Xt(W=>this.processSegment(e,r,t,W.concat(b),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=SN(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(on(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(on(({routes:d})=>{let h=r._loadedInjector??e,{parameters:g,consumedSegments:b,remainingSegments:v}=c,E=new Zo(b,g,Object.freeze(Z({},this.urlTree.queryParams)),this.urlTree.fragment,TS(r),Hr(r),r.component??r._loadedComponent??null,r,OS(r)),H=$f(E,s,this.paramsInheritanceStrategy);E.params=Object.freeze(H.params),E.data=Object.freeze(H.data);let{segmentGroup:W,slicedSegments:oe}=RS(t,b,v,d);if(oe.length===0&&W.hasChildren())return this.processChildren(h,d,W,E).pipe(Ke(B=>new lr(E,B)));if(d.length===0&&oe.length===0)return Le(new lr(E,[]));let T=Hr(r)===o;return this.processSegment(h,d,W,oe,T?Ye:o,!0,E).pipe(Ke(B=>new lr(E,B instanceof lr?[B]:[])))}))):ca(t)))}getChildConfig(e,t,r){return t.children?Le({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Le({routes:t._loadedRoutes,injector:t._loadedInjector}):DN(e,t,r,this.urlSerializer).pipe(Xt(i=>i?this.configLoader.loadChildren(e,t).pipe(sn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):CN(t))):Le({routes:[],injector:e})}};function PN(n){n.sort((e,t)=>e.value.outlet===Ye?-1:t.value.outlet===Ye?1:e.value.outlet.localeCompare(t.value.outlet))}function kN(n){let e=n.value.routeConfig;return e&&e.path===""}function iE(n){let e=[],t=new Set;for(let r of n){if(!kN(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=iE(r.children);e.push(new lr(r.value,i))}return e.filter(r=>!t.has(r))}function TS(n){return n.data||{}}function OS(n){return n.resolve||{}}function NN(n,e,t,r,i,o){return Xt(s=>ON(n,e,t,r,s.extractedUrl,i,o).pipe(Ke(({state:a,tree:c})=>Ce(Z({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function FN(n,e){return Xt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Le(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let d of oE(c))s.add(d);let a=0;return Nt(s).pipe(yo(c=>o.has(c)?LN(c,r,n,e):(c.data=$f(c,c.parent,n).resolve,Le(void 0))),sn(()=>a++),Ms(1),Xt(c=>a===s.size?Le(t):En))})}function oE(n){let e=n.children.map(t=>oE(t)).flat();return[n,...e]}function LN(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!QS(i)&&(o[Kl]=i.title),VN(o,n,e,r).pipe(Ke(s=>(n._resolvedData=s,n.data=$f(n,n.parent,t).resolve,null)))}function VN(n,e,t,r){let i=ry(n);if(i.length===0)return Le({});let o={};return Nt(i).pipe(Xt(s=>jN(n[s],e,t,r).pipe(mi(),sn(a=>{if(a instanceof ga)throw qf(new Jo,a);o[s]=a}))),Ms(1),Ke(()=>o),gi(s=>tE(s)?En:xs(s)))}function jN(n,e,t,r){let i=Ql(e)??r,o=ya(n,i),s=o.resolve?o.resolve(e,t):Ar(i,()=>o(e,t));return Zi(s)}function ty(n){return on(e=>{let t=n(e);return t?Nt(t).pipe(Ke(()=>e)):Le(e)})}var _y=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Ye);return r}getResolvedTitleForRoute(t){return t.data[Kl]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:()=>U(sE),providedIn:"root"})}return n})(),sE=(()=>{class n extends _y{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Ne(CC))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jl=new Se("",{providedIn:"root",factory:()=>({})}),ec=new Se(""),aE=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=U(Cw);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Le(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Zi(t.loadComponent()).pipe(Ke(cE),sn(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Wa(()=>{this.componentLoaders.delete(t)})),i=new bs(r,()=>new ke).pipe(Ds());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Le({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=lE(r,this.compiler,t,this.onLoadEndListener).pipe(Wa(()=>{this.childrenLoaders.delete(r)})),s=new bs(o,()=>new ke).pipe(Ds());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lE(n,e,t,r){return Zi(n.loadChildren()).pipe(Ke(cE),Xt(i=>i instanceof Hm||Array.isArray(i)?Le(i):Nt(e.compileModuleAsync(i))),Ke(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(ec,[],{optional:!0,self:!0}).flat()),{routes:s.map(yy),injector:o}}))}function BN(n){return n&&typeof n=="object"&&"default"in n}function cE(n){return BN(n)?n.default:n}var Qf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:()=>U(zN),providedIn:"root"})}return n})(),zN=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uE=new Se("");var dE=new Se(""),fE=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ke;transitionAbortSubject=new ke;configLoader=U(aE);environmentInjector=U(kn);destroyRef=U(Fo);urlSerializer=U(Yl);rootContexts=U(va);location=U(na);inputBindingEnabled=U(Kf,{optional:!0})!==null;titleStrategy=U(_y);options=U(Jl,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=U(Qf);createViewTransition=U(uE,{optional:!0});navigationErrorHandler=U(dE,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Le(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Ff(i)),r=i=>this.events.next(new Lf(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Ce(Z({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new Yt(null),this.transitions.pipe(Jt(r=>r!==null),on(r=>{let i=!1,o=!1;return Le(r).pipe(on(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Qn.SupersededByNewNavigation),En;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?Ce(Z({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&c!=="reload"){let d="";return this.events.next(new Mi(s.id,this.urlSerializer.serialize(s.rawUrl),d,Bl.IgnoredSameUrlNavigation)),s.resolve(!1),En}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Le(s).pipe(on(d=>(this.events.next(new es(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?En:Promise.resolve(d))),NN(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),sn(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=Ce(Z({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let h=new zl(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:d,extractedUrl:h,source:g,restoredState:b,extras:v}=s,E=new es(d,this.urlSerializer.serialize(h),g,b);this.events.next(E);let H=KS(this.rootComponentType).snapshot;return this.currentTransition=r=Ce(Z({},s),{targetSnapshot:H,urlAfterRedirects:h,extras:Ce(Z({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,Le(r)}else{let d="";return this.events.next(new Mi(s.id,this.urlSerializer.serialize(s.extractedUrl),d,Bl.IgnoredByUrlHandlingStrategy)),s.resolve(!1),En}}),sn(s=>{let a=new Af(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Ke(s=>(this.currentTransition=r=Ce(Z({},s),{guards:tN(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),fN(this.environmentInjector,s=>this.events.next(s)),sn(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw qf(this.urlSerializer,s.guardsResult);let a=new Pf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Jt(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Qn.GuardRejected),!1)),ty(s=>{if(s.guards.canActivateChecks.length!==0)return Le(s).pipe(sn(a=>{let c=new kf(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),on(a=>{let c=!1;return Le(a).pipe(FN(this.paramsInheritanceStrategy,this.environmentInjector),sn({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Qn.NoDataFromResolver)}}))}),sn(a=>{let c=new Nf(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),ty(s=>{let a=c=>{let d=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(c.routeConfig).pipe(sn(h=>{c.component=h}),Ke(()=>{})));for(let h of c.children)d.push(...a(h));return d};return wu(a(s.targetSnapshot.root)).pipe(Vi(null),yn(1))}),ty(()=>this.afterPreactivation()),on(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?Nt(c).pipe(Ke(()=>r)):Le(r)}),Ke(s=>{let a=Qk(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=Ce(Z({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),sn(()=>{this.events.next(new Hl)}),eN(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),yn(1),sn({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ur(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),vi(this.transitionAbortSubject.pipe(sn(s=>{throw s}))),Wa(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",Qn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),gi(s=>{if(this.destroyed)return r.resolve(!1),En;if(o=!0,eE(s))this.events.next(new oi(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),Jk(s)?this.events.next(new pa(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new ha(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=Ar(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof ga){let{message:d,cancellationCode:h}=qf(this.urlSerializer,c);this.events.next(new oi(r.id,this.urlSerializer.serialize(r.extractedUrl),d,h)),this.events.next(new pa(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return En}))}))}cancelNavigationTransition(t,r,i){let o=new oi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function HN(n){return n!==Rf}var hE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:()=>U(UN),providedIn:"root"})}return n})(),Gf=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},UN=(()=>{class n extends Gf{static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(n)))(i||n)}})();static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pE=(()=>{class n{urlSerializer=U(Yl);options=U(Jl,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=U(na);urlHandlingStrategy=U(Qf);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new si;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof si?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=KS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:()=>U($N),providedIn:"root"})}return n})(),$N=(()=>{class n extends pE{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof es?this.updateStateMemento():t instanceof Mi?this.commitTransition(r):t instanceof zl?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Hl?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof oi&&(t.code===Qn.GuardRejected||t.code===Qn.NoDataFromResolver)?this.restoreHistory(r):t instanceof ha?this.restoreHistory(r,!0):t instanceof ur&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=Z(Z({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=Z(Z({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(n)))(i||n)}})();static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Dy(n,e){n.events.pipe(Jt(t=>t instanceof ur||t instanceof oi||t instanceof ha||t instanceof Mi),Ke(t=>t instanceof ur||t instanceof Mi?0:(t instanceof oi?t.code===Qn.Redirect||t.code===Qn.SupersededByNewNavigation:!1)?2:1),Jt(t=>t!==2),yn(1)).subscribe(()=>{e()})}var qN={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},WN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Zn=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=U(uw);stateManager=U(pE);options=U(Jl,{optional:!0})||{};pendingTasks=U(Ks);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=U(fE);urlSerializer=U(Yl);location=U(na);urlHandlingStrategy=U(Qf);_events=new ke;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=U(hE);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=U(ec,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!U(Kf,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new mt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof oi&&r.code!==Qn.Redirect&&r.code!==Qn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ur)this.navigated=!0;else if(r instanceof pa){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=Z({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||HN(i.source)},s);this.scheduleNavigation(a,Rf,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}KN(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Rf,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=Z({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(yy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,d=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=Z(Z({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let g;try{let b=i?i.snapshot:this.routerState.snapshot.root;g=$S(b)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return qS(g,t,h,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Qi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Rf,null,r)}navigate(t,r={skipLocationChange:!1}){return GN(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=Z({},qN):r===!1?i=Z({},WN):i=r,Qi(t))return ES(this.currentUrlTree,t,i);let o=this.parseUrl(t);return ES(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,d;s?(a=s.resolve,c=s.reject,d=s.promise):d=new Promise((g,b)=>{a=g,c=b});let h=this.pendingTasks.add();return Dy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function GN(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ae(4008,!1)}function KN(n){return!(n instanceof Hl)&&!(n instanceof pa)}var _a=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ke;constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof ur&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Qi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:Ib(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Qi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Re(Zn),Re(dr),mm("tabindex"),Re(Fr),Re(Qt),Re(ta))};static \u0275dir=dt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&le("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Ut("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Wn],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Wn],replaceUrl:[2,"replaceUrl","replaceUrl",Wn],routerLink:"routerLink"},features:[Nn]})}return n})(),by=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new st;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof ur&&this.update()})}ngAfterContentInit(){Le(this.links.changes,Le(null)).pipe(Li()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Nt(t).pipe(Li()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=QN(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(Re(Zn),Re(Qt),Re(Fr),Re(Lr),Re(_a,8))};static \u0275dir=dt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Dw(o,_a,5),r&2){let s;qm(s=Wm())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Nn]})}return n})();function QN(n){return!!n.paths}var ZN=new Se("");function wy(n,...e){return Hs([{provide:ec,multi:!0,useValue:n},[],{provide:dr,useFactory:XN,deps:[Zn]},{provide:$m,multi:!0,useFactory:JN},e.map(t=>t.\u0275providers)])}function XN(n){return n.routerState.root}function JN(){let n=U(gn);return e=>{let t=n.get(mr);if(e!==t.components[0])return;let r=n.get(Zn),i=n.get(eF);n.get(tF)===1&&r.initialNavigation(),n.get(nF,null,Ze.Optional)?.setUpPreloading(),n.get(ZN,null,Ze.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var eF=new Se("",{factory:()=>new ke}),tF=new Se("",{providedIn:"root",factory:()=>1});var nF=new Se("");var SE=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Re(Fr),Re(Qt))};static \u0275dir=dt({type:n})}return n})(),ih=(()=>{class n extends SE{static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(n)))(i||n)}})();static \u0275dir=dt({type:n,features:[Fn]})}return n})(),ac=new Se("");var iF={provide:ac,useExisting:ir(()=>ai),multi:!0};function oF(){let n=vr()?vr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var sF=new Se(""),ai=(()=>{class n extends SE{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!oF())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Re(Fr),Re(Qt),Re(sF,8))};static \u0275dir=dt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&le("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Ln([iF]),Fn]})}return n})();function aF(n){return n==null||lF(n)===0}function lF(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var lc=new Se(""),EE=new Se("");function cF(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function uF(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function dF(n){return aF(n.value)?{required:!0}:null}function gE(n){return null}function xE(n){return n!=null}function IE(n){return Vo(n)?Nt(n):n}function ME(n){let e={};return n.forEach(t=>{e=t!=null?Z(Z({},e),t):e}),Object.keys(e).length===0?null:e}function RE(n,e){return e.map(t=>t(n))}function fF(n){return!n.validate}function TE(n){return n.map(e=>fF(e)?e:t=>e.validate(t))}function hF(n){if(!n)return null;let e=n.filter(xE);return e.length==0?null:function(t){return ME(RE(t,e))}}function xy(n){return n!=null?hF(TE(n)):null}function pF(n){if(!n)return null;let e=n.filter(xE);return e.length==0?null:function(t){let r=RE(t,e).map(IE);return Ap(r).pipe(Ke(ME))}}function Iy(n){return n!=null?pF(TE(n)):null}function mE(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function gF(n){return n._rawValidators}function mF(n){return n._rawAsyncValidators}function Cy(n){return n?Array.isArray(n)?n:[n]:[]}function Xf(n,e){return Array.isArray(n)?n.includes(e):n===e}function vE(n,e){let t=Cy(e);return Cy(n).forEach(i=>{Xf(t,i)||t.push(i)}),t}function yE(n,e){return Cy(e).filter(t=>!Xf(n,t))}var Jf=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=xy(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Iy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},wa=class extends Jf{name;get formDirective(){return null}get path(){return null}},sc=class extends Jf{_parent=null;name=null;valueAccessor=null},eh=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},vF={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},J8=Ce(Z({},vF),{"[class.ng-submitted]":"isSubmitted"}),Ji=(()=>{class n extends eh{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Re(sc,2))};static \u0275dir=dt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Mt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Fn]})}return n})(),OE=(()=>{class n extends eh{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Re(wa,10))};static \u0275dir=dt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Mt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Fn]})}return n})();var tc="VALID",Zf="INVALID",Da="PENDING",nc="DISABLED",Xi=class{},th=class extends Xi{value;source;constructor(e,t){super(),this.value=e,this.source=t}},ic=class extends Xi{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},oc=class extends Xi{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},ba=class extends Xi{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Sy=class extends Xi{source;constructor(e){super(),this.source=e}},Ey=class extends Xi{source;constructor(e){super(),this.source=e}};function AE(n){return(oh(n)?n.validators:n)||null}function yF(n){return Array.isArray(n)?xy(n):n||null}function PE(n,e){return(oh(e)?e.asyncValidators:n)||null}function _F(n){return Array.isArray(n)?Iy(n):n||null}function oh(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function DF(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ae(1e3,"");if(!r[t])throw new ae(1001,"")}function bF(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ae(1002,"")})}var nh=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ei(this.statusReactive)}set status(e){Ei(()=>this.statusReactive.set(e))}_status=Ho(()=>this.statusReactive());statusReactive=Nr(void 0);get valid(){return this.status===tc}get invalid(){return this.status===Zf}get pending(){return this.status==Da}get disabled(){return this.status===nc}get enabled(){return this.status!==nc}errors;get pristine(){return Ei(this.pristineReactive)}set pristine(e){Ei(()=>this.pristineReactive.set(e))}_pristine=Ho(()=>this.pristineReactive());pristineReactive=Nr(!0);get dirty(){return!this.pristine}get touched(){return Ei(this.touchedReactive)}set touched(e){Ei(()=>this.touchedReactive.set(e))}_touched=Ho(()=>this.touchedReactive());touchedReactive=Nr(!1);get untouched(){return!this.touched}_events=new ke;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(vE(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(vE(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(yE(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(yE(e,this._rawAsyncValidators))}hasValidator(e){return Xf(this._rawValidators,e)}hasAsyncValidator(e){return Xf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ce(Z({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new oc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new oc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ce(Z({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ic(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new ic(!0,r))}markAsPending(e={}){this.status=Da;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ba(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ce(Z({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=nc,this.errors=null,this._forEachChild(i=>{i.disable(Ce(Z({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new th(this.value,r)),this._events.next(new ba(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ce(Z({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=tc,this._forEachChild(r=>{r.enable(Ce(Z({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ce(Z({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===tc||this.status===Da)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new th(this.value,t)),this._events.next(new ba(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ce(Z({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?nc:tc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Da,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=IE(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ba(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new st,this.statusChanges=new st}_calculateStatus(){return this._allControlsDisabled()?nc:this.errors?Zf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Da)?Da:this._anyControlsHaveStatus(Zf)?Zf:tc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new ic(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new oc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){oh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=yF(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=_F(this._rawAsyncValidators)}},rh=class extends nh{constructor(e,t,r){super(AE(t),PE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){bF(this,!0,e),Object.keys(e).forEach(r=>{DF(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var My=new Se("",{providedIn:"root",factory:()=>Ry}),Ry="always";function wF(n,e){return[...e.path,n]}function kE(n,e,t=Ry){NE(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),SF(n,e),xF(n,e),EF(n,e),CF(n,e)}function _E(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function CF(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function NE(n,e){let t=gF(n);e.validator!==null?n.setValidators(mE(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=mF(n);e.asyncValidator!==null?n.setAsyncValidators(mE(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();_E(e._rawValidators,i),_E(e._rawAsyncValidators,i)}function SF(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&FE(n,e)})}function EF(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&FE(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function FE(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function xF(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function IF(n,e){n==null,NE(n,e)}function MF(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function RF(n){return Object.getPrototypeOf(n.constructor)===ih}function TF(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function OF(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===ai?t=o:RF(o)?r=o:i=o}),i||r||t||null}var AF={provide:wa,useExisting:ir(()=>Ty)},rc=Promise.resolve(),Ty=(()=>{class n extends wa{callSetDisabledState;get submitted(){return Ei(this.submittedReactive)}_submitted=Ho(()=>this.submittedReactive());submittedReactive=Nr(!1);_directives=new Set;form;ngSubmit=new st;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new rh({},xy(t),Iy(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){rc.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),kE(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){rc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){rc.then(()=>{let r=this._findContainer(t.path),i=new rh({});IF(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){rc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){rc.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),TF(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new Sy(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new Ey(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(Re(lc,10),Re(EE,10),Re(My,8))};static \u0275dir=dt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&le("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ln([AF]),Fn]})}return n})();function DE(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function bE(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var PF=class extends nh{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(AE(t),PE(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),oh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(bE(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){DE(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){DE(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){bE(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var kF={provide:sc,useExisting:ir(()=>Ri)},wE=Promise.resolve(),Ri=(()=>{class n extends sc{_changeDetectorRef;callSetDisabledState;control=new PF;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new st;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=OF(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),MF(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){kE(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){wE.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Wn(r);wE.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?wF(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(Re(wa,9),Re(lc,10),Re(EE,10),Re(ac,10),Re(Lr,8),Re(My,8))};static \u0275dir=dt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ln([kF]),Fn,Nn]})}return n})();var LE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=dt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),NF={provide:ac,useExisting:ir(()=>ts),multi:!0},ts=(()=>{class n extends ih{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(n)))(i||n)}})();static \u0275dir=dt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&le("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Ln([NF]),Fn]})}return n})();var FF={provide:ac,useExisting:ir(()=>sh),multi:!0};function VE(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function LF(n){return n.split(":")[0]}var sh=(()=>{class n extends ih{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=VE(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=LF(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(n)))(i||n)}})();static \u0275dir=dt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&le("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ln([FF]),Fn]})}return n})(),ah=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(VE(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Re(Qt),Re(Fr),Re(sh,9))};static \u0275dir=dt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),VF={provide:ac,useExisting:ir(()=>jE),multi:!0};function CE(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function jF(n){return n.split(":")[0]}var jE=(()=>{class n extends ih{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],d=this._getOptionValue(c.value);i.push(d)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let d=this._getOptionValue(c.value);i.push(d)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=jF(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(n)))(i||n)}})();static \u0275dir=dt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&le("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ln([VF]),Fn]})}return n})(),lh=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(CE(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(CE(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Re(Qt),Re(Fr),Re(jE,9))};static \u0275dir=dt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function BE(n){return typeof n=="number"?n:parseFloat(n)}var Oy=(()=>{class n{_validator=gE;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):gE,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=dt({type:n,features:[Nn]})}return n})(),BF={provide:lc,useExisting:ir(()=>ns),multi:!0},ns=(()=>{class n extends Oy{max;inputName="max";normalizeInput=t=>BE(t);createValidator=t=>uF(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(n)))(i||n)}})();static \u0275dir=dt({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ut("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[Ln([BF]),Fn]})}return n})(),zF={provide:lc,useExisting:ir(()=>rs),multi:!0},rs=(()=>{class n extends Oy{min;inputName="min";normalizeInput=t=>BE(t);createValidator=t=>cF(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(n)))(i||n)}})();static \u0275dir=dt({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ut("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[Ln([zF]),Fn]})}return n})(),HF={provide:lc,useExisting:ir(()=>Ay),multi:!0};var Ay=(()=>{class n extends Oy{required;inputName="required";normalizeInput=Wn;createValidator=t=>dF;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(n)))(i||n)}})();static \u0275dir=dt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ut("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Ln([HF]),Fn]})}return n})();var UF=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$n({type:n});static \u0275inj=Un({})}return n})();var br=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:My,useValue:t.callSetDisabledState??Ry}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=$n({type:n});static \u0275inj=Un({imports:[UF]})}return n})();function $F(n,e){if(n&1&&(_(0,"p",4),w(1),D()),n&2){let t=k();S(),Ie(" ",t.amountError()," ")}}var Ca=class n{currentAmount=_n(void 0);suggestedAmount=_n(void 0);cancel=ei();save=ei();amountInput=Nr("");amountError=Nr("");donationAmountMax=9999;constructor(){pl(()=>{let e=this.computeDefaultAmount();this.amountInput.set(e!=null?String(e):""),this.amountError.set(this.validateAmount(e))})}onCancel(){this.cancel.emit()}onSave(){let e=this.parseAmountInput(this.amountInput()),t=this.validateAmount(e,this.amountInput());if(t){this.amountError.set(t);return}this.save.emit(e??0)}onAmountInputChange(e){let t=e??"";this.amountInput.set(t===null?"":String(t));let r=this.parseAmountInput(t);this.amountError.set(this.validateAmount(r,this.amountInput()))}computeDefaultAmount(){let e=this.currentAmount();if(e!=null&&!Number.isNaN(e))return e;let r=this.suggestedAmount();return r!=null&&!Number.isNaN(r)?r:0}parseAmountInput(e){if(e===""||e===null||e===void 0)return null;let t=Number(e);return Number.isFinite(t)?t:null}validateAmount(e,t){return t!==void 0&&t!==""&&e==null?"Enter a valid donation amount.":e==null?"":e<0||e>this.donationAmountMax?`Donation amount must be between $0 and $${this.donationAmountMax}.`:""}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Bt({type:n,selectors:[["app-donation-amount-picker"]],inputs:{currentAmount:[1,"currentAmount"],suggestedAmount:[1,"suggestedAmount"]},outputs:{cancel:"cancel",save:"save"},decls:16,vars:13,consts:[[1,"amount-dialog","card"],["id","donation-amount-hint",1,"amount-hint","text-muted"],["for","donation-amount-input",1,"amount-label"],["id","donation-amount-input","type","number","inputmode","decimal","min","0","max","9999","step","0.01",1,"amount-input",3,"ngModelChange","ngModel"],["id","donation-amount-error",1,"error-text"],[1,"amount-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"]],template:function(t,r){if(t&1&&(_(0,"div",0)(1,"h3"),w(2,"Donation"),D(),_(3,"p",1),w(4),ft(5,"number"),ft(6,"number"),D(),_(7,"label",2),w(8,"Donation amount"),D(),_(9,"input",3),le("ngModelChange",function(o){return r.onAmountInputChange(o)}),D(),be(10,$F,2,1,"p",4),_(11,"div",5)(12,"button",6),le("click",function(){return r.onCancel()}),w(13,"Cancel"),D(),_(14,"button",7),le("click",function(){return r.onSave()}),w(15," Save "),D()()()),t&2){let i;S(4),Rn(" Current: $",qt(5,7,(i=(i=r.currentAmount())!==null&&i!==void 0?i:r.suggestedAmount())!==null&&i!==void 0?i:0,"1.2-2")," \xB7 Suggested: $",qt(6,10,(i=r.suggestedAmount())!==null&&i!==void 0?i:0,"1.2-2")," "),S(5),Y("ngModel",r.amountInput()),Ut("aria-invalid",r.amountError()?"true":null)("aria-describedby",r.amountError()?"donation-amount-hint donation-amount-error":"donation-amount-hint"),S(),Dt(r.amountError()?10:-1),S(4),Y("disabled",!!r.amountError())}},dependencies:[On,$o,br,ai,ts,Ji,rs,ns,Ri],styles:[".amount-dialog[_ngcontent-%COMP%]{width:100%;max-width:360px;display:grid;gap:var(--spacing-3)}.amount-input[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid var(--color-border);border-radius:var(--radius-md);font-size:var(--font-size-base);background:#fff;color:var(--color-text)}.amount-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-2);justify-content:flex-end}.amount-hint[_ngcontent-%COMP%]{font-size:var(--font-size-sm);margin:var(--spacing-1) 0}.amount-label[_ngcontent-%COMP%]{font-size:var(--font-size-sm);color:var(--color-text)}.error-text[_ngcontent-%COMP%]{color:var(--color-danger);font-size:var(--font-size-sm);margin:0}"]})};function qF(n,e){if(n&1){let t=tt();_(0,"div",9)(1,"div",10),w(2),D(),_(3,"div",11)(4,"button",12),le("click",function(){X(t);let i=k();return J(i.changeQty(-1))}),w(5," \u2212 "),D(),_(6,"span",13),w(7),D(),_(8,"button",12),le("click",function(){X(t);let i=k();return J(i.changeQty(1))}),w(9," + "),D()()()}if(n&2){let t=k();S(2),Pt(t.qtyLabel),S(5),Ie(" ",t.qtyLocal," ")}}function WF(n,e){if(n&1){let t=tt();_(0,"button",4),le("click",function(){X(t);let i=k();return J(i.onDonationStatus("NoDonation"))}),w(1," None "),D()}if(n&2){let t=k();Mt("active",(t.donation==null?null:t.donation.status)==="NoDonation")}}var Sa=class n{donationValue=null;lastDonationRef=null;set donation(e){if(this.lastDonationRef!==e&&(this.amountTouched=!1),this.donationValue=e,this.lastDonationRef=e,this.normalizeLegacyDonation(),this.donation?.status==="NoDonation"){this.amountTouched=!1,this.amountValue=0;return}this.amountTouched||(this.amountValue=this.computeBaseAmount())}get donation(){return this.donationValue}suggestedAmount=0;showNoDonation=!0;allowReselect=!1;showQty=!1;qtyLabel="Quantity (dozen)";qtyValue=0;donationStatusChange=new st;donationMethodChange=new st;amountChange=new st;qtyChange=new st;amountValue=0;qtyLocal=0;amountTouched=!1;donationAmountMax=9999;ngOnInit(){this.normalizeLegacyDonation();let e=this.computeBaseAmount();this.amountValue=e,this.qtyLocal=this.qtyValue}ngOnChanges(e){if("suggestedAmount"in e){let t=Number(this.suggestedAmount??0)||0;!this.amountTouched&&this.donation?.status!=="NoDonation"&&(this.amountValue=t)}"qtyValue"in e&&(this.qtyLocal=this.qtyValue),this.donation?.status===void 0&&this.donation?.method&&(this.donation.status="Donated")}computeBaseAmount(){return this.donation?.status==="NoDonation"||this.donation?.status==="NotRecorded"?0:this.donation?.amount??this.donation?.suggestedAmount??this.suggestedAmount??0??0}onDonationStatus(e){this.donation?.status!==e&&(this.donationStatusChange.emit(e),e==="NoDonation"&&(this.amountValue=0,this.amountTouched=!1,this.amountChange.emit(0)))}changeQty(e){let t=Math.max(0,(this.qtyLocal||0)+e);this.qtyLocal=t,this.qtyChange.emit(t)}onDonationMethod(e){let t=Number(this.suggestedAmount??0)||0;if(this.donation?.status==="Donated"&&this.donation?.method===e){this.allowReselect&&(this.donationStatusChange.emit("NoDonation"),this.amountValue=0,this.amountTouched=!1,this.amountChange.emit(0));return}this.donationMethodChange.emit(e),(!this.amountTouched||this.amountValue===0)&&(this.amountValue=t,this.amountTouched=!1,this.amountChange.emit(t))}onAmountChangeSelect(e){let t=Number(e),r=this.clampAmount(Number.isFinite(t)?t:0);this.amountValue=r,this.amountTouched=!0,this.amountChange.emit(r)}clampAmount(e){return Math.min(this.donationAmountMax,Math.max(0,e))}normalizeLegacyDonation(){this.donation?.status==="NotRecorded"&&(this.donation.status="NoDonation",this.donation.method=void 0,this.donation.amount=0,this.amountTouched||(this.amountValue=0))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Bt({type:n,selectors:[["app-donation-controls"]],inputs:{donation:"donation",suggestedAmount:"suggestedAmount",showNoDonation:"showNoDonation",allowReselect:"allowReselect",showQty:"showQty",qtyLabel:"qtyLabel",qtyValue:"qtyValue"},outputs:{donationStatusChange:"donationStatusChange",donationMethodChange:"donationMethodChange",amountChange:"amountChange",qtyChange:"qtyChange"},features:[Nn],decls:22,vars:17,consts:[[1,"donation-inline"],["class","donation-qty",4,"ngIf"],[1,"donation-choices","rows"],["type","button","class","btn-chip",3,"active","click",4,"ngIf"],["type","button",1,"btn-chip",3,"click"],[1,"donation-suggested","text-muted"],[1,"donation-picker"],[1,"amount-prefix"],["type","number","inputmode","decimal","min","0","max","9999","step","0.01",1,"amount-select",3,"ngModelChange","ngModel"],[1,"donation-qty"],[1,"qty-label","text-muted"],[1,"qty-input"],["type","button",1,"qty-btn",3,"click"],[1,"qty-display"]],template:function(t,r){t&1&&(_(0,"div",0),be(1,qF,10,2,"div",1),_(2,"div",2),be(3,WF,2,2,"button",3),_(4,"button",4),le("click",function(){return r.onDonationMethod("cash")}),w(5," Cash "),D(),_(6,"button",4),le("click",function(){return r.onDonationMethod("ach")}),w(7," ACH "),D()(),_(8,"div",2)(9,"button",4),le("click",function(){return r.onDonationMethod("venmo")}),w(10," Venmo "),D(),_(11,"button",4),le("click",function(){return r.onDonationMethod("paypal")}),w(12," PayPal "),D(),_(13,"button",4),le("click",function(){return r.onDonationMethod("other")}),w(14," Other "),D()(),_(15,"div",5),w(16),ft(17,"number"),D(),_(18,"div",6)(19,"span",7),w(20,"$"),D(),_(21,"input",8),le("ngModelChange",function(o){return r.onAmountChangeSelect(o)}),D()()()),t&2&&(S(),Y("ngIf",r.showQty),S(2),Y("ngIf",r.showNoDonation),S(),Mt("active",(r.donation==null?null:r.donation.status)==="Donated"&&(r.donation==null?null:r.donation.method)==="cash"),S(2),Mt("active",(r.donation==null?null:r.donation.status)==="Donated"&&(r.donation==null?null:r.donation.method)==="ach"),S(3),Mt("active",(r.donation==null?null:r.donation.status)==="Donated"&&(r.donation==null?null:r.donation.method)==="venmo"),S(2),Mt("active",(r.donation==null?null:r.donation.status)==="Donated"&&(r.donation==null?null:r.donation.method)==="paypal"),S(2),Mt("active",(r.donation==null?null:r.donation.status)==="Donated"&&(r.donation==null?null:r.donation.method)==="other"),S(3),Ie(" Suggested: $",qt(17,14,r.suggestedAmount,"1.2-2")," "),S(5),Y("ngModel",r.amountValue))},dependencies:[On,ar,$o,br,ai,ts,Ji,rs,ns,Ri],styles:[".donation-inline[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-1);justify-items:center}.donation-qty[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;gap:2px}.donation-qty[_ngcontent-%COMP%]   .qty-label[_ngcontent-%COMP%]{font-size:var(--font-size-sm)}.donation-qty[_ngcontent-%COMP%]   .qty-input[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-md);padding:2px 4px}.donation-qty[_ngcontent-%COMP%]   .qty-btn[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:var(--radius-md);border:1px solid var(--color-border);background:var(--color-bg);font-size:18px;display:inline-flex;align-items:center;justify-content:center}.donation-qty[_ngcontent-%COMP%]   .qty-display[_ngcontent-%COMP%]{min-width:25px;padding:2px 0;text-align:center;font-weight:var(--font-weight-semibold)}[data-theme=dark][_nghost-%COMP%]   .donation-qty[_ngcontent-%COMP%]   .qty-btn[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .donation-qty[_ngcontent-%COMP%]   .qty-btn[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark);color:#fff;border-color:var(--color-primary-dark)}.donation-choices.rows[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,minmax(80px,1fr));gap:var(--spacing-1);width:100%}.donation-inline[_ngcontent-%COMP%], .donation-choices[_ngcontent-%COMP%], .donation-suggested[_ngcontent-%COMP%]{justify-content:center;text-align:center}.donation-suggested[_ngcontent-%COMP%]{margin-top:var(--spacing-1);margin-bottom:0;font-size:var(--font-size-sm)}.btn-chip[_ngcontent-%COMP%]{border:1px solid var(--color-border);background:var(--color-surface);color:var(--color-text);padding:6px 10px;border-radius:var(--radius-pill);font-weight:var(--font-weight-medium);font-size:var(--font-size-sm);-webkit-tap-highlight-color:transparent}.btn-chip.active[_ngcontent-%COMP%]{border-color:var(--color-primary);color:var(--color-primary)}@media (hover: none){.btn-chip[_ngcontent-%COMP%]:hover, .btn-chip[_ngcontent-%COMP%]:active{background:inherit;color:inherit;border-color:inherit}}.btn-chip[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--color-primary) 12%,var(--color-surface) 88%);color:var(--color-primary);border-color:var(--color-primary)}[data-theme=dark][_nghost-%COMP%]   .btn-chip[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .btn-chip[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark);color:#fff;border-color:var(--color-primary-dark)}.donation-picker[_ngcontent-%COMP%]   .amount-select[_ngcontent-%COMP%]{width:auto;min-width:80px;max-width:100px;padding:6px 8px;border-radius:var(--radius-md);border:1px solid var(--color-border);background:var(--color-surface);color:var(--color-text);text-align:center;appearance:textfield;-moz-appearance:textfield;font-size:16px;line-height:1.2}.donation-picker[_ngcontent-%COMP%]   .amount-select[_ngcontent-%COMP%]::-webkit-outer-spin-button, .donation-picker[_ngcontent-%COMP%]   .amount-select[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.donation-picker[_ngcontent-%COMP%]   .amount-prefix[_ngcontent-%COMP%]{align-self:center;margin-right:4px;font-size:var(--font-size-base)}.donation-picker[_ngcontent-%COMP%]   .amount-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{text-align:center;color:var(--color-text)}.donation-picker[_ngcontent-%COMP%]{margin-top:2px;margin-bottom:0;display:flex;justify-content:center}"]})};function GF(n,e){if(n&1&&(_(0,"div",11),w(1),D()),n&2){let t=k(2);S(),Pt(t.name)}}function KF(n,e){n&1&&w(0," Unsubscribed ")}function YF(n,e){if(n&1&&(w(0),ft(1,"titlecase")),n&2){let t=k(3);Ie(" ",t.status?Bo(1,1,t.status):"Pending"," ")}}function QF(n,e){if(n&1&&(_(0,"span",13),be(1,KF,1,0)(2,YF,2,3),D()),n&2){let t=k(2),r=k();Mt("pending",!t.status)("delivered",t.status==="delivered")("skipped",t.status==="skipped")("changed",t.status==="changed")("unsubscribed",r.isUnsubscribed()),S(),Dt(r.isUnsubscribed()?1:2)}}function ZF(n,e){if(n&1&&(_(0,"div",2),be(1,GF,2,1,"div",11)(2,QF,3,11,"span",12),D()),n&2){let t=k(2);S(),Dt(t.showHeaderInfo()?1:-1),S(),Dt(t.showStatusPill()?2:-1)}}function XF(n,e){if(n&1&&(_(0,"div",15),w(1),$t(2,"br"),w(3),D()),n&2){let t=k(2);S(),Ie(" ",t.address,""),S(2),Js(" ",t.city,", ",t.state," ",t.zip," ")}}function JF(n,e){if(n&1){let t=tt();_(0,"div",16)(1,"button",17),le("click",function(){X(t);let i=k(3);return J(i.onCopyAddress())}),w(2," Copy "),D(),_(3,"button",18),le("click",function(){X(t);let i=k(3);return J(i.onOpenMap())}),w(4," Open Map "),D()()}}function eL(n,e){if(n&1&&(_(0,"div",14),be(1,XF,4,4,"div",15)(2,JF,5,0,"div",16),D()),n&2){let t=k(2);Mt("compact",!t.showAddressText()),S(),Dt(t.showAddressText()?1:-1),S(),Dt(t.showAddressActions()?2:-1)}}function tL(n,e){if(n&1&&(_(0,"div",4),w(1),D()),n&2){let t=k();S(),Ie("Note: ",t.notes,"")}}function nL(n,e){if(n&1){let t=tt();_(0,"div",0)(1,"div",1),be(2,ZF,3,2,"div",2)(3,eL,3,4,"div",3),D(),be(4,tL,2,1,"div",4),_(5,"div",5)(6,"div",6),w(7,"Quantity (dozen)"),D(),_(8,"div",7)(9,"button",8),le("click",function(){X(t);let i=k();return J(i.onAdjustQty(-1))}),w(10,"\u2212"),D(),_(11,"span",9),w(12),D(),_(13,"button",8),le("click",function(){X(t);let i=k();return J(i.onAdjustQty(1))}),w(14,"+"),D()()(),_(15,"app-donation-controls",10),le("donationStatusChange",function(i){X(t);let o=k();return J(o.onDonationStatus(i))})("donationMethodChange",function(i){X(t);let o=k();return J(o.onDonationMethod(i))})("amountChange",function(i){X(t);let o=k();return J(o.onAmountPicked(i))}),D()()}if(n&2){let t=k();S(2),Dt(t.showHeaderInfo()||t.showStatusPill()?2:-1),S(),Dt(t.showAddressText()||t.showAddressActions()?3:-1),S(),Dt(t.showNotes()&&e.notes?4:-1),S(8),Pt(t.deliveredQty()),S(3),Y("donation",t.donation())("suggestedAmount",t.suggestedAmount())("showNoDonation",t.showNoDonation())("allowReselect",t.allowDonationReselect())}}var Ea=class n{stop=_n(null);deliveredQty=_n(0);donation=_n(null);suggestedAmount=_n(0);showNoDonation=_n(!0);showNotes=_n(!0);allowDonationReselect=_n(!1);showHeaderInfo=_n(!0);showStatusPill=_n(!0);showAddressText=_n(!0);showAddressActions=_n(!0);adjustQty=ei();donationStatusChange=ei();donationMethodChange=ei();amountChange=ei();copyAddress=ei();openMap=ei();isUnsubscribed=Ho(()=>{let e=this.stop();return!!e&&e.status==="skipped"&&(e.skippedReason?.toLowerCase?.()??"").includes("unsubscribed")});syncDonationStatus=pl(()=>{let e=this.donation();this.suggestedAmount(),e?.method&&!e.status&&(e.status="Donated")});onAdjustQty(e){this.adjustQty.emit(e)}onDonationStatus(e){this.donationStatusChange.emit(e)}onDonationMethod(e){this.donationMethodChange.emit(e)}onAmountPicked(e){this.amountChange.emit(e)}onCopyAddress(){this.copyAddress.emit()}onOpenMap(){this.openMap.emit()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Bt({type:n,selectors:[["app-stop-delivery-card"]],inputs:{stop:[1,"stop"],deliveredQty:[1,"deliveredQty"],donation:[1,"donation"],suggestedAmount:[1,"suggestedAmount"],showNoDonation:[1,"showNoDonation"],showNotes:[1,"showNotes"],allowDonationReselect:[1,"allowDonationReselect"],showHeaderInfo:[1,"showHeaderInfo"],showStatusPill:[1,"showStatusPill"],showAddressText:[1,"showAddressText"],showAddressActions:[1,"showAddressActions"]},outputs:{adjustQty:"adjustQty",donationStatusChange:"donationStatusChange",donationMethodChange:"donationMethodChange",amountChange:"amountChange",copyAddress:"copyAddress",openMap:"openMap"},decls:1,vars:1,consts:[[1,"stop-card"],[1,"card-top"],[1,"name-row"],[1,"address-row",3,"compact"],[1,"stop-note","text-muted"],[1,"stop-qty"],[1,"qty-label","text-muted"],[1,"qty-input"],["type","button",1,"qty-btn",3,"click"],["aria-label","Delivered dozen",1,"qty-display"],[3,"donationStatusChange","donationMethodChange","amountChange","donation","suggestedAmount","showNoDonation","allowReselect"],[1,"stop-name"],[1,"status-pill",3,"pending","delivered","skipped","changed","unsubscribed"],[1,"status-pill"],[1,"address-row"],[1,"stop-address","text-muted"],[1,"address-actions"],["type","button",1,"btn","btn-text",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,r){if(t&1&&be(0,nL,16,8,"div",0),t&2){let i;Dt((i=r.stop())?0:-1,i)}},dependencies:[On,Dl,br,Sa],styles:[".stop-card[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-3)}.card-top[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-2)}.name-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:var(--spacing-2)}.stop-name[_ngcontent-%COMP%]{font-weight:var(--font-weight-semibold);font-size:var(--font-size-lg)}.address-row[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-2);grid-template-columns:1fr auto;align-items:center;justify-items:start}.address-row.compact[_ngcontent-%COMP%]{grid-template-columns:auto;justify-items:end}.address-row.compact[_ngcontent-%COMP%]   .address-actions[_ngcontent-%COMP%]{justify-content:flex-end}.address-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-1)}.status-pill[_ngcontent-%COMP%]{padding:4px 10px;border-radius:var(--radius-pill);background:#e0f2fe;color:#0369a1;font-size:var(--font-size-sm);font-weight:var(--font-weight-medium)}.status-pill.pending[_ngcontent-%COMP%]{background:#f5f5f5;color:var(--color-text-muted)}.status-pill.delivered[_ngcontent-%COMP%]{background:#ecfdf3;color:#15803d}.status-pill.skipped[_ngcontent-%COMP%]{background:#e0f2fe;color:#0369a1}.status-pill.donation[_ngcontent-%COMP%]{background:#fef3c7;color:#c05621}.status-pill.changed[_ngcontent-%COMP%]{background:#fffbeb;color:#b45309}.status-pill.unsubscribed[_ngcontent-%COMP%]{background:#fef2f2;color:#b91c1c}[data-theme=dark][_nghost-%COMP%]   .status-pill[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .status-pill[_ngcontent-%COMP%]{background:#0f172a;color:#cbd5e1}[data-theme=dark][_nghost-%COMP%]   .status-pill.pending[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .status-pill.pending[_ngcontent-%COMP%]{background:#111827;color:#94a3b8}[data-theme=dark][_nghost-%COMP%]   .status-pill.delivered[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .status-pill.delivered[_ngcontent-%COMP%]{background:#0f2f1c;color:#4ade80}[data-theme=dark][_nghost-%COMP%]   .status-pill.skipped[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .status-pill.skipped[_ngcontent-%COMP%]{background:#0b2536;color:#7dd3fc}[data-theme=dark][_nghost-%COMP%]   .status-pill.donation[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .status-pill.donation[_ngcontent-%COMP%]{background:#3b2500;color:#fdba74}[data-theme=dark][_nghost-%COMP%]   .status-pill.changed[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .status-pill.changed[_ngcontent-%COMP%]{background:#2b1c00;color:#fbbf24}[data-theme=dark][_nghost-%COMP%]   .status-pill.unsubscribed[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .status-pill.unsubscribed[_ngcontent-%COMP%]{background:#3b0f0f;color:#fecdd3}.stop-qty[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-1);justify-content:center;justify-items:center}.qty-label[_ngcontent-%COMP%]{font-size:var(--font-size-sm);text-align:center}.qty-input[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--spacing-1)}.qty-btn[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:var(--radius-md);border:1px solid var(--color-border);background:var(--color-surface);font-size:18px;display:inline-flex;align-items:center;justify-content:center}.qty-btn[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--color-primary) 12%,var(--color-surface) 88%);color:var(--color-primary);border-color:var(--color-primary)}[data-theme=dark][_nghost-%COMP%]   .qty-btn[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .qty-btn[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark);color:#fff;border-color:var(--color-primary-dark)}[data-theme=dark][_nghost-%COMP%]   .qty-btn[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .qty-btn[_ngcontent-%COMP%]{background:var(--color-bg)}.qty-display[_ngcontent-%COMP%]{min-width:32px;text-align:center;font-weight:var(--font-weight-semibold)}.donation-inline[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-1);justify-items:center}.donation-choices.rows[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,minmax(80px,1fr));gap:var(--spacing-1);width:100%}.donation-inline[_ngcontent-%COMP%], .donation-choices[_ngcontent-%COMP%], .donation-suggested[_ngcontent-%COMP%]{justify-content:center;text-align:center}.donation-suggested[_ngcontent-%COMP%]{margin-top:var(--spacing-2);margin-bottom:0}.btn-chip[_ngcontent-%COMP%]{border:1px solid var(--color-border);background:#f9fafb;color:var(--color-text);padding:6px 10px;border-radius:var(--radius-pill);font-weight:var(--font-weight-medium);font-size:var(--font-size-sm)}.btn-chip.active[_ngcontent-%COMP%]{border-color:var(--color-primary);color:var(--color-primary)}.btn-link[_ngcontent-%COMP%]{background:none;border:none;color:var(--color-primary);padding:0;font-weight:var(--font-weight-medium);cursor:pointer}.donation-picker[_ngcontent-%COMP%]   .amount-select[_ngcontent-%COMP%]{width:140px;padding:8px 10px;border-radius:var(--radius-md);border:1px solid var(--color-border);background:var(--color-surface);text-align:center}.donation-picker[_ngcontent-%COMP%]{margin-top:2px;margin-bottom:0}.btn-chip.wide[_ngcontent-%COMP%]{justify-content:center}.donation-suggested[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-1);flex-wrap:wrap;font-size:var(--font-size-sm)}.stop-note[_ngcontent-%COMP%]{font-size:var(--font-size-sm)}"],changeDetection:0})};var dh=op(Ny());var rL=/^\d{4}-\d{2}-\d{2}$/,iL=/^\d+(\.\d+)?$/;var oL=Date.UTC(1899,11,31);function sL(n){if(!Number.isFinite(n))return;let e=Math.floor(n),t=n-e,r=e>59?e-1:e,i=oL+r*864e5+Math.round(t*864e5),o=new Date(i);if(Number.isNaN(o.getTime()))return;if(!(Math.abs(t)>1e-6)){let a=o.getUTCFullYear(),c=o.getUTCMonth(),d=o.getUTCDate(),h=new Date(a,c,d,12,0,0,0);return Number.isNaN(h.getTime())?o.toISOString():h.toISOString()}return o.toISOString()}function Zt(n){if(n==null)return;let e=n.toString().trim();if(!e)return;if(rL.test(e)){let[r,i,o]=e.split("-").map(a=>Number(a)),s=new Date(r,i-1,o,12,0,0,0);return Number.isNaN(s.getTime())?e:s.toISOString()}if(iL.test(e)){let r=sL(Number(e));if(r)return r}let t=new Date(e);return Number.isNaN(t.getTime())?e:t.toISOString()}function cn(n,e=new Date){let t=Zt(n);if(!t)return e.getFullYear();let r=new Date(t);return Number.isNaN(r.getTime())?e.getFullYear():r.getFullYear()}function uc(n){let e=Zt(n);if(!e)return 0;let t=new Date(e);return Number.isNaN(t.getTime())?0:t.getTime()}var ch=op(zE(),1),HE=Symbol.for("Dexie"),uh=globalThis[HE]||(globalThis[HE]=ch.default);if(ch.default.semVer!==uh.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ch.default.semVer} and ${uh.semVer}`);var{liveQuery:E5,mergeRanges:x5,rangesOverlap:I5,RangeSet:M5,cmp:R5,Entity:T5,PropModification:O5,replacePrefix:A5,add:P5,remove:k5,DexieYProvider:N5}=uh;var UE=uh;var $E="suggestedDonationRate";function jy(){if(typeof localStorage>"u")return 4;let n=localStorage.getItem($E),e=n!=null?Number(n):NaN;return Number.isFinite(e)&&e>0?e:4}function Xn(n){return{status:"NoDonation",amount:0,suggestedAmount:(n?.dozens??0)*jy(),taxableAmount:0}}function to(n){let e=Number(n.suggestedAmount??0),r=Number(n.amount??e)-e;return r>0?r:0}function Vy(n){if(n.status!=="Donated")return 0;let e=Number(n.amount??n.suggestedAmount??0);return e>0?e:0}var By=class extends UE{deliveries;routes;runs;baseStops;importStates;runEntries;constructor(){super("BiruksEggDeliveriesDB"),this.version(1).stores({deliveries:"id, routeDate, status, sortIndex",routes:"routeDate"}),this.version(2).stores({deliveries:"id, routeDate, status, sortIndex",routes:"routeDate"}).upgrade(e=>ee(this,null,function*(){let t=yield e.table("deliveries").toArray();for(let r of t)r.donation||(r.donation=Xn(r));yield e.table("deliveries").bulkPut(t)})),this.version(3).stores({deliveries:"id, runId, baseRowId, routeDate, status, sortIndex",routes:"routeDate",runs:"id",baseStops:"baseRowId",importStates:"id"}).upgrade(e=>ee(this,null,function*(){let t=yield e.table("deliveries").toArray();for(let r of t)r.runId||(r.runId=r.routeDate||"default-run"),r.baseRowId||(r.baseRowId=r.id);yield e.table("deliveries").bulkPut(t)})),this.version(4).stores({deliveries:"id, runId, baseRowId, routeDate, status, sortIndex",routes:"routeDate",runs:"id, weekType, routeDate",baseStops:"baseRowId",importStates:"id",runEntries:"id, runId, baseRowId"})}},wr=class n{db;constructor(){this.db=new By,this.requestPersistence()}getSuggestedRate(){return jy()}setSuggestedRate(e){if(typeof localStorage>"u")return;let t=Number.isFinite(e)&&e>0?e:4;localStorage.setItem($E,t.toString())}importDeliveries(e){return ee(this,null,function*(){let t=new Date().toISOString(),r=this.getSuggestedRate(),i=e.map(o=>{let s=o.donation??Xn(Ce(Z({},o),{dozens:o.dozens,donation:void 0}));s.taxableAmount==null&&(s.taxableAmount=to(s));let a=o.originalDonation??o.donation??{status:"NoDonation",amount:0,suggestedAmount:(o.dozens??0)*r,taxableAmount:0};return a.taxableAmount==null&&(a.taxableAmount=to(a)),Ce(Z({},o),{runId:o.runId??o.routeDate??"default-run",baseRowId:o.baseRowId??o.id,originalDozens:o.originalDozens??o.dozens,donation:Z({},s),originalDonation:Z({},a),subscribed:o.subscribed??!0})});yield this.db.transaction("rw",this.db.deliveries,this.db.routes,()=>ee(this,null,function*(){yield this.db.deliveries.clear(),yield this.db.routes.clear(),yield this.db.deliveries.bulkAdd(i);let o=Array.from(new Set(i.map(s=>s.routeDate)));for(let s of o){let a=i.filter(g=>g.routeDate===s),c=a.length,d=a.filter(g=>g.status==="delivered").length,h=a.filter(g=>g.status==="skipped").length;yield this.db.routes.put({routeDate:s,totalStops:c,deliveredCount:d,skippedCount:h,createdAt:t,lastUpdatedAt:t,completed:d+h===c})}}))})}getRoutes(){return this.db.routes.toArray().then(e=>e.sort((t,r)=>t.routeDate.localeCompare(r.routeDate)))}getAllDeliveries(){return this.db.deliveries.toArray()}getDeliveryById(e){return this.db.deliveries.get(e)}getDeliveriesByRoute(e){return this.db.deliveries.where("routeDate").equals(e).sortBy("sortIndex")}getDeliveriesByRun(e){return this.db.deliveries.where("runId").equals(e).sortBy("sortIndex")}getRunsForSchedule(e){return ee(this,null,function*(){return this.db.runs.where("weekType").equals(e).toArray().then(t=>t.sort((r,i)=>r.date.localeCompare(i.date)))})}getAllRuns(){return ee(this,null,function*(){return(yield this.db.runs.toArray()).sort((t,r)=>t.date.localeCompare(r.date))})}getRunEntries(e){return this.db.runEntries.where("runId").equals(e).toArray()}getAllRunEntries(){return this.db.runEntries.toArray()}getReceiptHistoryByBaseRowId(e,t){return ee(this,null,function*(){if(!e)return[];let[r,i]=yield Promise.all([this.db.runEntries.where("baseRowId").equals(e).toArray(),this.db.deliveries.where("baseRowId").equals(e).toArray()]);if(!r.length&&!i.length)return[];let o=Array.from(new Set(r.map(v=>v.runId))),s=o.length?yield this.db.runs.where("id").anyOf(o).toArray():[],a=new Map;s.forEach(v=>{v.id&&v.date&&a.set(v.id,v.date)});let c=[];r.forEach(v=>{let E=Zt(v.eventDate??a.get(v.runId))??"";c.push({kind:"run",date:E,status:v.status,dozens:v.dozens,donationStatus:v.donationStatus,donationMethod:v.donationMethod,donationAmount:v.donationAmount,taxableAmount:v.taxableAmount,runEntryId:v.id,runId:v.runId})}),i.forEach(v=>{(v.oneOffDonations??[]).forEach((E,H)=>{let W=Zt(E.date)??"",oe=E.status==="Donated"?Number(E.amount??E.suggestedAmount??0):0,T=E.taxableAmount??Vy(E);c.push({kind:"oneOffDonation",date:W,status:"donation",dozens:0,donationStatus:E.status,donationMethod:E.method,donationAmount:oe,taxableAmount:T,deliveryId:v.id,oneOffKind:"donation",oneOffIndex:H})}),(v.oneOffDeliveries??[]).forEach((E,H)=>{let W=Zt(E.date)??"",oe=Number(E.deliveredDozens??0),T=E.donation,B=T?.status==="Donated"?Number(T.amount??T.suggestedAmount??0):0,K=T?.taxableAmount??(T?to(T):0);c.push({kind:"oneOffDelivery",date:W,status:"delivered",dozens:oe,donationStatus:T?.status??"NoDonation",donationMethod:T?.method,donationAmount:B,taxableAmount:K,deliveryId:v.id,oneOffKind:"delivery",oneOffIndex:H})})});let d=new Date,h=Number.isFinite(t)?Math.trunc(t):void 0;return(h==null?c:c.filter(v=>cn(v.date,d)===h)).map((v,E)=>({receipt:v,sortKey:uc(v.date),order:E})).sort((v,E)=>{let H=E.sortKey-v.sortKey;return H!==0?H:v.order-E.order}).map(v=>v.receipt)})}updateRunEntry(e,t){return ee(this,null,function*(){yield this.db.runEntries.update(e,t)})}saveRunEntryOrdering(e,t){return ee(this,null,function*(){let r=t.slice().sort((i,o)=>(i.deliveryOrder??0)-(o.deliveryOrder??0));yield this.db.runEntries.bulkPut(r)})}deleteRunEntry(e){return ee(this,null,function*(){if(!e)return;let t=yield this.db.runEntries.get(e);t&&(yield this.db.runEntries.delete(e),t.runId&&(yield this.reindexRunEntries(t.runId)))})}deleteOneOffDonationByIndex(e,t){return ee(this,null,function*(){let r=new Date().toISOString(),i=yield this.db.deliveries.get(e);if(!i||!Array.isArray(i.oneOffDonations))return;let o=[...i.oneOffDonations??[]];t<0||t>=o.length||(o.splice(t,1),yield this.db.deliveries.update(e,{oneOffDonations:o,updatedAt:r,synced:!1}))})}deleteOneOffDeliveryByIndex(e,t){return ee(this,null,function*(){let r=new Date().toISOString(),i=yield this.db.deliveries.get(e);if(!i||!Array.isArray(i.oneOffDeliveries))return;let o=[...i.oneOffDeliveries??[]];t<0||t>=o.length||(o.splice(t,1),yield this.db.deliveries.update(e,{oneOffDeliveries:o,updatedAt:r,synced:!1}))})}reindexRunEntries(e){return ee(this,null,function*(){let t=yield this.db.runEntries.where("runId").equals(e).toArray();if(!t.length)return;let r=t.slice().sort((i,o)=>(i.deliveryOrder??0)-(o.deliveryOrder??0));r.forEach((i,o)=>{i.deliveryOrder=o}),yield this.db.runEntries.bulkPut(r)})}updateOneOffDonationByIndex(e,t,r){return ee(this,null,function*(){let i=new Date().toISOString(),o=yield this.db.deliveries.get(e);if(!o||!Array.isArray(o.oneOffDonations))return;let s=[...o.oneOffDonations??[]];if(t<0||t>=s.length)return;let a=Z({},s[t]),c=Ce(Z({},a),{status:r.donationStatus,method:r.donationStatus==="Donated"?r.donationMethod:void 0,amount:r.donationStatus==="Donated"?r.donationAmount:r.donationStatus==="NoDonation"?0:void 0,taxableAmount:void 0});r.suggestedAmount!=null&&(c.suggestedAmount=r.suggestedAmount),r.date!=null&&(c.date=Zt(r.date)??a.date??i),c.taxableAmount=Vy(c),s[t]=c,yield this.db.deliveries.update(e,{oneOffDonations:s,updatedAt:i,synced:!1})})}updateOneOffDeliveryByIndex(e,t,r){return ee(this,null,function*(){let i=new Date().toISOString(),o=yield this.db.deliveries.get(e);if(!o||!Array.isArray(o.oneOffDeliveries))return;let s=[...o.oneOffDeliveries??[]];if(t<0||t>=s.length)return;let a=Z({},s[t]),c=Math.max(0,Number(r.dozens)||0),d=this.getSuggestedRate(),h=a.donation?Z({},a.donation):void 0;r.donationStatus==="NotRecorded"?h=void 0:(h||(h={status:"Donated",suggestedAmount:c*d}),h.status=r.donationStatus,h.method=r.donationStatus==="Donated"?r.donationMethod:void 0,h.amount=r.donationStatus==="Donated"?r.donationAmount:r.donationStatus==="NoDonation"?0:void 0,h.suggestedAmount=r.suggestedAmount!=null?r.suggestedAmount:c*d,h.taxableAmount=to(h));let g=r.date!=null?Zt(r.date)??a.date??i:a.date??i;h&&(h.date=g),s[t]=Ce(Z({},a),{deliveredDozens:c,donation:h,date:g}),yield this.db.deliveries.update(e,{oneOffDeliveries:s,updatedAt:i,synced:!1})})}markDelivered(e,t){return ee(this,null,function*(){let r=new Date().toISOString();yield this.db.transaction("rw",this.db.deliveries,this.db.routes,()=>ee(this,null,function*(){let i=yield this.db.deliveries.get(e);if(!i)return;let o=i.donation??Xn(i);o.date=r,yield this.db.deliveries.update(e,{status:"delivered",deliveredDozens:t??i.deliveredDozens??i.dozens,deliveredAt:r,skippedAt:void 0,skippedReason:void 0,donation:o,updatedAt:r,synced:!1}),yield this.refreshRouteStats(i.routeDate,r)}))})}markSkipped(e,t){return ee(this,null,function*(){let r=new Date().toISOString();yield this.db.transaction("rw",this.db.deliveries,this.db.routes,()=>ee(this,null,function*(){let i=yield this.db.deliveries.get(e);i&&(yield this.db.deliveries.update(e,{status:"skipped",skippedAt:r,skippedReason:t,deliveredAt:void 0,donation:i.donation??Xn(i),updatedAt:r,synced:!1}),yield this.refreshRouteStats(i.routeDate,r))}))})}saveSortOrder(e){return ee(this,null,function*(){let t=new Date().toISOString(),r=e.map((i,o)=>Ce(Z({},i),{sortIndex:o,deliveryOrder:o,donation:i.donation??Xn(i),updatedAt:t}));yield this.db.deliveries.bulkPut(r)})}completeRun(e,t){return ee(this,null,function*(){let r=new Date().toISOString();yield this.db.transaction("rw",this.db.deliveries,this.db.routes,this.db.runs,this.db.runEntries,()=>ee(this,null,function*(){let i=yield this.db.deliveries.where("routeDate").equals(e).toArray();if(!i.length)return;if(i.filter(g=>g.status===""||g.status==="changed").length)throw new Error("Cannot complete run: some stops are still pending.");let s=i[0],a=s.week||s.routeDate.replace(/\s+/g,"")||"Schedule",c=`${e}_${r}`,d={id:c,date:r,weekType:a,label:`${e} \u2013 ${r.slice(0,10)}`,status:t?"endedEarly":"completed",routeDate:e};yield this.db.runs.put(d);let h=[];for(let g of i){let b=g;if(b.status!=="delivered"&&b.status!=="skipped")continue;let v=Number(b.deliveredDozens??b.dozens??0),E=b.status==="delivered"?v:0,H=Number(b.deliveryOrder??b.sortIndex??0),W=b.donation??Xn(b),oe=W.suggestedAmount??E*jy(),T=W.status==="Donated"?Number(W.amount??W.suggestedAmount??oe):0,B=W.status==="Donated"?to(Ce(Z({},W),{amount:T,suggestedAmount:oe})):0;h.push({id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${c}_${b.baseRowId}`,runId:c,baseRowId:b.baseRowId,name:b.name,address:b.address,city:b.city,state:b.state,zip:b.zip,status:b.status,dozens:E,deliveryOrder:H,donationStatus:W.status,donationMethod:W.method,donationAmount:T,taxableAmount:B})}h.length&&(yield this.db.runEntries.bulkAdd(h))})),yield this.resetRoute(e)})}resetDelivery(e){return ee(this,null,function*(){let t=new Date().toISOString();yield this.db.transaction("rw",this.db.deliveries,this.db.routes,()=>ee(this,null,function*(){let r=yield this.db.deliveries.get(e);if(!r)return;let i=r.originalDozens??r.dozens,o=Xn(Ce(Z({},r),{dozens:i}));yield this.db.deliveries.update(e,{status:r.subscribed===!1||(r.skippedReason?.toLowerCase?.().includes("unsubscribed")??!1)?"skipped":"",dozens:i,deliveredAt:void 0,skippedAt:r.subscribed===!1||(r.skippedReason?.toLowerCase?.().includes("unsubscribed")??!1)?r.skippedAt??t:void 0,skippedReason:r.subscribed===!1||(r.skippedReason?.toLowerCase?.().includes("unsubscribed")??!1)?r.skippedReason??"Unsubscribed":void 0,deliveredDozens:void 0,donation:o,originalDonation:o,updatedAt:t,synced:!1,subscribed:r.subscribed??!0}),yield this.refreshRouteStats(r.routeDate,t)}))})}resetRoute(e){return ee(this,null,function*(){let t=new Date().toISOString();yield this.db.transaction("rw",this.db.deliveries,this.db.routes,()=>ee(this,null,function*(){let i=(yield this.db.deliveries.where("routeDate").equals(e).toArray()).map(o=>Ce(Z({},o),{status:o.subscribed===!1||(o.skippedReason?.toLowerCase?.().includes("unsubscribed")??!1)?"skipped":"",dozens:o.originalDozens??o.dozens,deliveredDozens:void 0,deliveredAt:void 0,skippedAt:o.subscribed===!1||(o.skippedReason?.toLowerCase?.().includes("unsubscribed")??!1)?o.skippedAt??t:void 0,skippedReason:o.subscribed===!1||(o.skippedReason?.toLowerCase?.().includes("unsubscribed")??!1)?o.skippedReason??"Unsubscribed":void 0,donation:Xn(Ce(Z({},o),{dozens:o.originalDozens??o.dozens})),originalDonation:Xn(Ce(Z({},o),{dozens:o.originalDozens??o.dozens})),updatedAt:t,synced:!1}));yield this.db.deliveries.bulkPut(i),yield this.refreshRouteStats(e,t)}))})}addDelivery(e,t){return ee(this,null,function*(){let r=new Date().toISOString(),i=yield this.db.deliveries.where("routeDate").equals(e).sortBy("sortIndex"),o=i.slice(0,1),s=(t.week??o[0]?.routeDate??e??"Schedule").toString().replace(/\s+/g,"")||"Schedule",a=t.baseRowId??`NEW_${crypto.randomUUID?.()??Date.now()}`,c=t.id??crypto.randomUUID?.()??`${Date.now()}_${Math.random()}`,d=t.dozens??0,h=Z({},t.donation??Xn(Ce(Z({},t),{dozens:d}))),g={id:c,runId:t.runId??e,baseRowId:a,routeDate:e,week:s,name:t.name??"",address:t.address??"",city:t.city??"",state:t.state??"",zip:t.zip,dozens:d,originalDozens:t.originalDozens??d,deliveryOrder:0,sortIndex:0,notes:t.notes,status:t.status??"",donation:Z({},h),originalDonation:Z({},h),subscribed:t.subscribed??!0,createdAt:r,updatedAt:r,synced:!1},v=Math.min(Math.max(1,t.deliveryOrder??i.length+1),i.length+1)-1;return i.splice(v,0,g),i.forEach((E,H)=>{E.sortIndex=H,E.deliveryOrder=H,E.updatedAt=r}),yield this.db.transaction("rw",this.db.deliveries,this.db.routes,()=>ee(this,null,function*(){yield this.db.deliveries.bulkPut(i),yield this.refreshRouteStats(e,r)})),g})}updatePlannedDozens(e,t){return ee(this,null,function*(){let r=new Date().toISOString(),i=yield this.db.deliveries.get(e),o=i?.originalDozens??i?.dozens??t,s=i?.donation??Xn(i);s.suggestedAmount=t*this.getSuggestedRate();let a=i?this.computeChangeStatus(i,{dozens:t},s):"changed";yield this.db.deliveries.update(e,{dozens:t,originalDozens:o,status:a,deliveredDozens:void 0,donation:s,updatedAt:r,synced:!1})})}updateDeliveredDozens(e,t){return ee(this,null,function*(){let r=new Date().toISOString();yield this.db.deliveries.update(e,{deliveredDozens:t,updatedAt:r,synced:!1})})}updateDraftDelivered(e,t){return ee(this,null,function*(){let r=new Date().toISOString(),i=yield this.db.deliveries.get(e),o=i?.donation??Xn(i);o.suggestedAmount=t*this.getSuggestedRate();let s=i?this.computeChangeStatus(i,{dozens:t,deliveredDozens:t},o):"changed";yield this.db.deliveries.update(e,{deliveredDozens:t,dozens:t,status:s,donation:o,updatedAt:r,synced:!1})})}updateDonation(e,t){return ee(this,null,function*(){let r=new Date().toISOString(),i=yield this.db.deliveries.get(e),o=i?this.computeChangeStatus(i,void 0,t):"changed";t.taxableAmount=to(t),yield this.db.deliveries.update(e,{donation:t,status:o,updatedAt:r,synced:!1})})}updateDonationPreserveStatus(e,t){return ee(this,null,function*(){let r=new Date().toISOString(),i=yield this.db.deliveries.get(e);i&&(t.taxableAmount=to(t),yield this.db.deliveries.update(e,{donation:t,status:i.status,updatedAt:r,synced:!1}))})}appendOneOffDonation(e,t){return ee(this,null,function*(){let r=new Date().toISOString(),i=yield this.db.deliveries.get(e);if(!i)return;let o=Array.isArray(i.oneOffDonations)?[...i.oneOffDonations]:[],s=Zt(t.date)??r,a=Ce(Z({},t),{taxableAmount:Vy(t),date:s});o.push(a),yield this.db.deliveries.update(e,{oneOffDonations:o,updatedAt:r,synced:!1})})}appendOneOffDelivery(e,t,r){return ee(this,null,function*(){let i=new Date().toISOString(),o=yield this.db.deliveries.get(e);if(!o)return;let s=Array.isArray(o.oneOffDeliveries)?[...o.oneOffDeliveries]:[],a=Zt(r?.date)??i,c=r?Ce(Z({},r),{taxableAmount:to(r),date:a}):void 0;s.push({deliveredDozens:t,donation:c,date:a}),yield this.db.deliveries.update(e,{oneOffDeliveries:s,updatedAt:i,synced:!1})})}updateDeliveryFields(e,t){return ee(this,null,function*(){let r=new Date().toISOString(),i=yield this.db.deliveries.get(e);if(!i)return;let o=t.donation??i.donation??Xn(i);t.dozens!=null&&(o.suggestedAmount=t.dozens*this.getSuggestedRate());let s=t.status??this.computeChangeStatus(i,t,o),a=Ce(Z({},t),{donation:o,status:s,updatedAt:r,synced:!1});yield this.db.deliveries.update(e,a),yield this.refreshRouteStats(i.routeDate,r)})}saveRun(e){return ee(this,null,function*(){yield this.db.runs.put(e)})}getRun(e){return ee(this,null,function*(){return this.db.runs.get(e)})}getAllReceiptsSummary(){return ee(this,null,function*(){let[e,t]=yield Promise.all([this.getAllRunEntries(),this.getAllDeliveries()]);if(!e.length&&!t.length)return null;let r=e.filter(d=>d.status==="delivered"),i=e.filter(d=>d.status==="skipped"),o=e.reduce((d,h)=>d+(h.dozens??0),0),s=r.reduce((d,h)=>d+(h.dozens??0),0),a=t.reduce((d,h)=>{let g=(h.oneOffDeliveries??[]).reduce((b,v)=>b+Number(v.deliveredDozens??0),0);return d+g},0),c=t.reduce((d,h)=>d+(h.oneOffDeliveries?.length??0),0);return{delivered:r.length+c,skipped:i.length,total:e.length+c,dozensDelivered:s+a,dozensTotal:o+a}})}saveBaseStops(e){return ee(this,null,function*(){yield this.db.baseStops.clear(),yield this.db.baseStops.bulkPut(e)})}getBaseStops(){return ee(this,null,function*(){return this.db.baseStops.toArray()})}saveImportState(e){return ee(this,null,function*(){yield this.db.importStates.put(e)})}getImportState(e="default"){return ee(this,null,function*(){return this.db.importStates.get(e)})}clearAll(){return ee(this,null,function*(){yield this.db.transaction("rw",[this.db.deliveries,this.db.routes,this.db.runs,this.db.runEntries,this.db.baseStops,this.db.importStates],()=>ee(this,null,function*(){yield this.db.deliveries.clear(),yield this.db.routes.clear(),yield this.db.runs.clear(),yield this.db.runEntries.clear(),yield this.db.baseStops.clear(),yield this.db.importStates.clear()}))})}restoreAllFromBackup(e,t,r,i){return ee(this,null,function*(){let o=new Date().toISOString();yield this.db.transaction("rw",[this.db.deliveries,this.db.routes,this.db.runs,this.db.runEntries,this.db.baseStops,this.db.importStates],()=>ee(this,null,function*(){if(yield this.db.deliveries.clear(),yield this.db.routes.clear(),yield this.db.runs.clear(),yield this.db.runEntries.clear(),yield this.db.baseStops.clear(),yield this.db.importStates.clear(),e.length){yield this.db.deliveries.bulkAdd(e);let s=Array.from(new Set(e.map(a=>a.routeDate)));for(let a of s){let c=e.filter(b=>b.routeDate===a),d=c.length,h=c.filter(b=>b.status==="delivered").length,g=c.filter(b=>b.status==="skipped").length;yield this.db.routes.put({routeDate:a,totalStops:d,deliveredCount:h,skippedCount:g,createdAt:o,lastUpdatedAt:o,completed:h+g===d})}}r.length&&(yield this.db.runs.bulkPut(r)),i.length&&(yield this.db.runEntries.bulkAdd(i)),yield this.db.importStates.put(t)}))})}refreshRouteStats(e,t){return ee(this,null,function*(){let r=yield this.db.routes.get(e),[i,o,s]=yield Promise.all([this.db.deliveries.where({routeDate:e,status:"delivered"}).count(),this.db.deliveries.where({routeDate:e,status:"skipped"}).count(),this.db.deliveries.where("routeDate").equals(e).count()]);yield this.db.routes.put({routeDate:e,totalStops:s,deliveredCount:i,skippedCount:o,createdAt:r?.createdAt??t,lastUpdatedAt:t,name:r?.name,currentIndex:r?.currentIndex,completed:i+o===s})})}requestPersistence(){return ee(this,null,function*(){if(!(typeof navigator>"u"||!navigator.storage?.persist))try{(yield navigator.storage.persist())||console.warn("Storage persistence not granted")}catch(e){console.warn("Storage persistence request failed",e)}})}deriveWeekFromRoute(e){return"WeekA"}baseDonation(e){return{status:"NoDonation",amount:0,suggestedAmount:(e.originalDozens??e.dozens??0)*4}}isUnsubscribed(e){let t=e.skippedReason?.toLowerCase?.().trim()??"";return e.subscribed===!1||t.includes("unsubscribed")}computeChangeStatus(e,t,r){if(e.status==="delivered")return"delivered";if(this.isUnsubscribed(e)||e.status==="skipped")return"skipped";let i=e.originalDozens??e.dozens??0,o=t?.dozens??e.dozens??0,s=Z({},e.originalDonation??this.baseDonation(e)),a=Z({},r??t?.donation??e.donation??Xn(e)),c=H=>H==="NotRecorded"?"NoDonation":H??"NoDonation",d=c(s.status),h=c(a.status),g=(t?.dozens??e.dozens??0)*4,b=Number(a.amount??a.suggestedAmount??g),v=d!==h;h==="Donated"&&((s.method??null)!==(a.method??null)&&(v=!0),b!==g?v=!0:!v&&d==="Donated"&&(v=!1));let E=Number(i)!==Number(o);return v||E?"changed":""}static \u0275fac=function(t){return new(t||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})};var no=class n{constructor(e){this.storage=e}exportAll(e){return ee(this,null,function*(){let t=yield this.storage.getAllDeliveries(),r=yield this.storage.getImportState("default"),i=yield this.storage.getAllRunEntries(),o=this.resolveExportTaxYear(e),s=this.computeTotalsByBase(t,i,r??void 0,o),a=yield this.storage.getAllRuns(),c=r?this.toCsvWithImportStateAndHistory(t,r,s,a,i):this.toCsv(t,s),d=this.buildExportFilename(o),h=new File([c],d,{type:"text/csv"});if(navigator.share&&typeof navigator.share=="function"&&navigator.canShare?.({files:[h]}))yield navigator.share({files:[h],title:"Biruk's Egg Deliveries",text:"Backup CSV"});else{let b=URL.createObjectURL(h),v=document.createElement("a");v.href=b,v.download=d,v.click(),URL.revokeObjectURL(b)}let g=new Date().toISOString();localStorage.setItem("lastBackupAt",g)})}toCsv(e,t){let r=e.map(i=>{let o=t.get(i.baseRowId??""),s=o?.donation??0,a=o?.dozens??0,c=o?.taxable??0;return{Date:i.routeDate,"Delivery Order":i.deliveryOrder,Name:i.name,Address:i.address,City:i.city,State:i.state,ZIP:i.zip??"",Dozens:i.dozens,Notes:i.notes??"",Status:i.status,DeliveredAt:i.deliveredAt??"",SkippedAt:i.skippedAt??"",SkippedReason:i.skippedReason??"",DonationStatus:i.donation?.status??"NotRecorded",DonationMethod:i.donation?.method??"",DonationAmount:i.donation?.amount??"",TotalDonation:s.toFixed(2),TotalDozens:a,TotalTaxableDonation:c.toFixed(2)}});return dh.default.unparse(r)}toCsvWithImportState(e,t,r){let i=[...t.headers],o=i.findIndex(g=>g.toLowerCase()==="baserowid"),s=[...i],a=Array.from(new Set(e.map(g=>g.runId))),c=a.map(g=>{let[b]=g.split("_");return`Run_${b}`});c.forEach(g=>{[`${g}_Status`,`${g}_DonationStatus`,`${g}_DonationMethod`,`${g}_DonationAmount`].forEach(v=>{s.includes(v)||s.push(v)})}),["TotalDonation","TotalDozens","TotalDeductibleContribution"].forEach(g=>{s.includes(g)||s.push(g)});let d=new Map;e.forEach(g=>d.set(`${g.baseRowId}||${g.runId}`,g));let h=[];return Object.entries(t.rowsByBaseRowId).forEach(([g,b])=>{let v=new Array(s.length).fill(""),E=[...b];for(;E.length<i.length;)E.push("");for(let W=0;W<i.length;W++)v[W]=E[W];a.forEach((W,oe)=>{let T=c[oe],B=d.get(`${g}||${W}`),K=B?.status??"",G=B?.donation?.status??"NotRecorded",I=B?.donation?.method??"",M=B?.donation?.amount,$=M!=null&&!isNaN(Number(M))?Number(M).toFixed(2):"",re=[`${T}_Status`,`${T}_DonationStatus`,`${T}_DonationMethod`,`${T}_DonationAmount`],ce=[K,G,I,$];re.forEach((we,Ve)=>{let Fe=s.indexOf(we);Fe>=0&&(v[Fe]=ce[Ve])})});let H=r.get(g);if(H){let W=s.indexOf("TotalDonation"),oe=s.indexOf("TotalDozens"),T=s.indexOf("TotalDeductibleContribution");W>=0&&(v[W]=H.donation.toFixed(2)),oe>=0&&(v[oe]=H.dozens.toString()),T>=0&&(v[T]=H.taxable.toFixed(2))}h.push(v)}),dh.default.unparse({fields:s,data:h})}toCsvWithImportStateAndHistory(e,t,r,i,o){let s=[...t.headers],a=["RowType",...s];["RunId","RouteDate","ScheduleId","RunStatus","RunBaseRowId","RunDeliveryOrder","RunEntryStatus","RunDozens","RunDonationStatus","RunDonationMethod","RunDonationAmount","RunTaxableAmount","RunCompletedAt","EventDate"].forEach(g=>{a.includes(g)||a.push(g)}),a.includes("SuggestedAmount")||a.push("SuggestedAmount"),["TotalDonation","TotalDozens","TotalDeductibleContribution"].forEach(g=>{a.includes(g)||a.push(g)});let d=[];Object.entries(t.rowsByBaseRowId).forEach(([g,b])=>{let v=new Array(a.length).fill("");v[0]="Delivery";let E=[...b];for(;E.length<s.length;)E.push("");for(let W=0;W<s.length;W++){let oe=1+W;v[oe]=E[W]}let H=r.get(g);if(H){let W=a.indexOf("TotalDonation"),oe=a.indexOf("TotalDozens"),T=a.indexOf("TotalDeductibleContribution");W>=0&&(v[W]=H.donation.toFixed(2)),oe>=0&&(v[oe]=H.dozens.toString()),T>=0&&(v[T]=H.taxable.toFixed(2))}d.push(v)});let h=(g,b,v)=>{let E=a.indexOf(b);E>=0&&(g[E]=v!=null?String(v):"")};return o.forEach(g=>{let b=new Array(a.length).fill("");b[0]="RunEntry";let v=s.findIndex(G=>G.toLowerCase()==="name");v>=0&&(b[1+v]=g.name);let E=s.findIndex(G=>G.toLowerCase()==="address");E>=0&&(b[1+E]=g.address);let H=s.findIndex(G=>G.toLowerCase()==="city");H>=0&&(b[1+H]=g.city);let W=s.findIndex(G=>G.toLowerCase()==="state");W>=0&&(b[1+W]=g.state);let oe=s.findIndex(G=>G.toLowerCase()==="zip"||G.toLowerCase()==="zipcode");oe>=0&&(b[1+oe]=g.zip??"");let T=i.find(G=>G.id===g.runId);h(b,"RunId",g.runId),h(b,"RouteDate",T?.routeDate??""),h(b,"ScheduleId",T?.weekType??""),h(b,"RunStatus",T?.status??""),h(b,"RunBaseRowId",g.baseRowId),h(b,"RunDeliveryOrder",g.deliveryOrder),h(b,"RunEntryStatus",g.status),h(b,"RunDozens",g.dozens),h(b,"RunDonationStatus",g.donationStatus),h(b,"RunDonationMethod",g.donationMethod??""),h(b,"RunDonationAmount",g.donationAmount),h(b,"RunTaxableAmount",g.taxableAmount);let B=T?.date??"",K=Zt(g.eventDate??B??T?.routeDate)??"";h(b,"RunCompletedAt",B),h(b,"EventDate",K),d.push(b)}),e.forEach(g=>{let b=g.baseRowId,v=g.name,E=g.address,H=g.city,W=g.state,oe=g.zip??"";(g.oneOffDonations??[]).forEach(T=>{let B=new Array(a.length).fill("");B[0]="OneOffDonation";let K=s.findIndex(Fe=>Fe.toLowerCase()==="name");K>=0&&(B[1+K]=v);let G=s.findIndex(Fe=>Fe.toLowerCase()==="address");G>=0&&(B[1+G]=E);let I=s.findIndex(Fe=>Fe.toLowerCase()==="city");I>=0&&(B[1+I]=H);let M=s.findIndex(Fe=>Fe.toLowerCase()==="state");M>=0&&(B[1+M]=W);let $=s.findIndex(Fe=>Fe.toLowerCase()==="zip"||Fe.toLowerCase()==="zipcode");$>=0&&(B[1+$]=oe);let re=(Fe,yt)=>{let Ee=a.indexOf(Fe);Ee>=0&&(B[Ee]=yt!=null?String(yt):"")},ce=Number(T.suggestedAmount??0),we=Number(T.amount??ce),Ve=we>0?we:0;re("RunBaseRowId",b),re("RunDozens",0),re("RunDonationStatus",T.status),re("RunDonationMethod",T.method??""),re("RunDonationAmount",we.toFixed(2)),re("RunTaxableAmount",Ve.toFixed(2)),re("SuggestedAmount",ce?ce.toFixed(2):""),re("EventDate",Zt(T.date)??""),d.push(B)}),(g.oneOffDeliveries??[]).forEach(T=>{let B=new Array(a.length).fill("");B[0]="OneOffDelivery";let K=s.findIndex(Ee=>Ee.toLowerCase()==="name");K>=0&&(B[1+K]=v);let G=s.findIndex(Ee=>Ee.toLowerCase()==="address");G>=0&&(B[1+G]=E);let I=s.findIndex(Ee=>Ee.toLowerCase()==="city");I>=0&&(B[1+I]=H);let M=s.findIndex(Ee=>Ee.toLowerCase()==="state");M>=0&&(B[1+M]=W);let $=s.findIndex(Ee=>Ee.toLowerCase()==="zip"||Ee.toLowerCase()==="zipcode");$>=0&&(B[1+$]=oe);let re=(Ee,se)=>{let te=a.indexOf(Ee);te>=0&&(B[te]=se!=null?String(se):"")},ce=Number(T.deliveredDozens??0),we=T.donation,Ve=Number(we?.suggestedAmount??0),Fe=Number(we?.amount??Ve),yt=we?.taxableAmount??Math.max(0,Fe-Ve);re("RunBaseRowId",b),re("RunDozens",ce),re("RunDonationStatus",we?.status??"NotRecorded"),re("RunDonationMethod",we?.method??""),re("RunDonationAmount",Fe.toFixed(2)),re("RunTaxableAmount",yt.toFixed(2)),re("SuggestedAmount",Ve?Ve.toFixed(2):""),re("EventDate",Zt(T.date)??""),d.push(B)})}),dh.default.unparse({fields:a,data:d})}computeTotalsByBase(e,t=[],r,i){let o=new Date,s=o.getFullYear(),a=typeof i=="number"?i:void 0,c=T=>a==null?!0:cn(T,o)===a,d=T=>{if(a==null)return!0;let B=T.runId?.split("_").pop(),K=T.eventDate??B;return cn(K,o)===a},h=new Map,g=(T,B,K,G)=>{let I=h.get(T)??{donation:0,dozens:0,baseline:0};I.donation+=B,I.dozens+=K,I.baseline+=G,h.set(T,I)},b=this.storage.getSuggestedRate();t.forEach(T=>{let B=T.baseRowId;if(!B||!d(T))return;if(T.status==="donation"){let M=T.donationStatus==="Donated"?Number(T.donationAmount??0):0;M&&g(B,M,0,0);return}let K=T.status==="delivered"?Number(T.dozens??0):0,G=T.donationStatus==="Donated"?Number(T.donationAmount??0):0,I=0;if(G>0&&Number.isFinite(T.taxableAmount)){let M=G-Number(T.taxableAmount??0);I=M>0?M:0}else K>0&&(I=K*b);(G||K||I)&&g(B,G,K,I)}),e.forEach(T=>{let B=T.baseRowId;if(B){if(T.status==="delivered"){if(!c(T.deliveredAt))return;let K=Number(T.deliveredDozens??T.dozens??0),G=T.donation,I=G?.status==="Donated"?Number(G.amount??G.suggestedAmount??K*b):0,M=K>0?Number(G?.suggestedAmount??K*b):0;(I||K||M)&&g(B,I,K,M)}(T.oneOffDonations??[]).forEach(K=>{if(!c(K.date))return;let G=Number(K.amount??K.suggestedAmount??0);G&&g(B,G,0,0)}),(T.oneOffDeliveries??[]).forEach(K=>{if(!c(K.date))return;let G=Number(K.deliveredDozens??0),I=K.donation,M=I?.status==="Donated"?Number(I.amount??I.suggestedAmount??G*b):0,$=G>0?Number(I?.suggestedAmount??G*b):0;(M||G||$)&&g(B,M,G,$)})}});let v=new Map,E=new Map,H=a==null||a===this.resolveBaselineYear(s);if(r&&r.mode!=="restored"&&H){let{headers:T,rowsByBaseRowId:B}=r,K=T.findIndex(M=>M.toLowerCase()==="totaldonation"),G=T.findIndex(M=>M.toLowerCase()==="totaldozens"),I=T.findIndex(M=>{let $=M.toLowerCase();return $==="totaltaxabledonation"||$==="totaldeductibledonation"||$==="totaldeductiblecontribution"});Object.entries(B).forEach(([M,$])=>{let re=0,ce=0,we=0;K>=0&&K<$.length&&(re=Number($[K])||0),G>=0&&G<$.length&&(ce=Number($[G])||0),I>=0&&I<$.length&&(we=Number($[I])||0),(re||ce||we)&&E.set(M,{donation:re,dozens:ce,taxable:we})})}let W=e.map(T=>T.baseRowId).filter(T=>!!T);return new Set([...E.keys(),...h.keys(),...W]).forEach(T=>{let B=E.get(T)??{donation:0,dozens:0,taxable:0},K=h.get(T)??{donation:0,dozens:0,baseline:0},G=B.donation+K.donation,I=B.dozens+K.dozens,$=(B.donation>0?Math.max(0,B.donation-B.taxable):0)+K.baseline,re=Math.max(0,K.donation-K.baseline),ce=B.taxable+re;v.set(T,{donation:G,dozens:I,taxable:ce,baseline:$})}),v}resolveBaselineYear(e){if(typeof localStorage>"u")return e;let t=localStorage.getItem("lastImportAt");if(!t)return e;let r=new Date(t);return Number.isNaN(r.getTime())?e:r.getFullYear()}resolveExportTaxYear(e){if(Number.isFinite(e))return Math.trunc(e);if(typeof localStorage>"u")return;let t=localStorage.getItem("selectedTaxYear");if(!t)return;let r=Number(t);return Number.isFinite(r)?Math.trunc(r):void 0}buildExportFilename(e){let t=new Date().toISOString().slice(0,10),r=typeof e=="number"?`-tax-year-${e}`:"";return`BiruksEggDeliveries-${t}${r}.csv`}static \u0275fac=function(t){return new(t||n)(Ne(wr))};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})};var li=class n{messagesSubject=new Yt(null);messages$=this.messagesSubject.asObservable();counter=0;show(e,t="success",r=2200){let i={id:++this.counter,message:e,type:t};this.messagesSubject.next(i),r>0&&setTimeout(()=>{this.messagesSubject.value?.id===i.id&&this.messagesSubject.next(null)},r)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})};var WE=Dv("cardChange",[bv("in",Gi({opacity:1,transform:"translateY(0)"})),nf("void => in",[Gi({opacity:0,transform:"translateY(12px)"}),tf("200ms cubic-bezier(0, 0, 0.2, 1)")]),nf("in => void",[tf("180ms cubic-bezier(0, 0, 0.2, 1)",Gi({opacity:0,transform:"translateY(-8px)"}))])]);function lL(n,e){n&1&&(_(0,"div",10),w(1,"Loading\u2026"),D())}function cL(n,e){if(n&1&&(_(0,"div",11),w(1),D()),n&2){let t=k();S(),Pt(t.errorMessage)}}function uL(n,e){if(n&1){let t=tt();_(0,"div",15)(1,"app-stop-delivery-card",16),le("adjustQty",function(i){X(t);let o=k(2);return J(o.adjustDelivered(i))})("donationStatusChange",function(i){X(t);let o=k(2);return J(o.setDonationStatus(i))})("donationMethodChange",function(i){X(t);let o=k(2);return J(o.setDonationDonated(i))})("amountChange",function(i){X(t);let o=k(2);return J(o.onInlineAmountChange(i))})("copyAddress",function(){X(t);let i=k(2);return J(i.copyAddress())})("openMap",function(){X(t);let i=k(2);return J(i.openMaps())}),D()()}if(n&2){let t=k(2);Y("@cardChange",t.currentStop.id?"in":"void"),S(),Y("stop",t.currentStop)("deliveredQty",t.deliveredQty)("donation",t.currentDonation)("suggestedAmount",t.suggestedDonationAmount)("showNoDonation",!0)("allowDonationReselect",!0)}}function dL(n,e){if(n&1&&(_(0,"div",17)(1,"div",18),w(2,"Next up"),D(),_(3,"div",19),w(4),D(),_(5,"div",20),w(6),$t(7,"br"),w(8),D(),_(9,"div",21),w(10),D()()),n&2){let t=k(2);S(4),Pt(t.nextStop.name),S(2),Ie(" ",t.nextStop.address,""),S(2),Js(" ",t.nextStop.city,", ",t.nextStop.state," ",t.nextStop.zip," "),S(2),Rn(" ",t.nextStop.dozens," dozen",t.nextStop.dozens===1?"":"s"," ")}}function fL(n,e){if(n&1&&(_(0,"main",12),be(1,uL,2,7,"div",13)(2,dL,11,7,"div",14),D()),n&2){let t=k();S(),Y("ngIf",!t.finished&&t.currentStop),S(),Y("ngIf",t.nextStop)}}function hL(n,e){if(n&1){let t=tt();_(0,"div",22)(1,"div",23)(2,"button",24),le("click",function(){X(t);let i=k();return J(i.markDelivered())}),w(3," Deliver "),D(),_(4,"button",25),le("click",function(){X(t);let i=k();return J(i.openSkipDialog())}),w(5," Skip "),D()(),_(6,"button",26),le("click",function(){X(t);let i=k();return J(i.openEndRunDialog())}),w(7," End Run "),D()()}}function pL(n,e){n&1&&(_(0,"span",41),w(1," Ended early "),D())}function gL(n,e){if(n&1&&(_(0,"div",31)(1,"div",32)(2,"div")(3,"div",33),w(4,"Run summary"),D(),_(5,"div",34),w(6),D()(),be(7,pL,2,0,"span",35),D(),_(8,"div",36)(9,"div",37)(10,"div",38),w(11,"Completed at"),D(),_(12,"div",39),w(13),ft(14,"date"),D()(),_(15,"div",37)(16,"div",38),w(17,"Total stops"),D(),_(18,"div",39),w(19),D()(),_(20,"div",37)(21,"div",38),w(22,"Delivered"),D(),_(23,"div",39),w(24),D()(),_(25,"div",37)(26,"div",38),w(27,"Skipped"),D(),_(28,"div",39),w(29),D()(),_(30,"div",37)(31,"div",38),w(32,"Dozens delivered"),D(),_(33,"div",39),w(34),D()(),_(35,"div",37)(36,"div",38),w(37,"Total donations"),D(),_(38,"div",39),w(39),ft(40,"currency"),D()(),_(41,"div",37)(42,"div",38),w(43,"Taxable total"),D(),_(44,"div",39),w(45),ft(46,"currency"),D()(),_(47,"div",40)(48,"div",38),w(49,"Donation status"),D(),_(50,"div",39),w(51),D()(),_(52,"div",40)(53,"div",38),w(54,"Donation methods"),D(),_(55,"div",39),w(56),D()()()()),n&2){let t=k(2);S(6),Pt(t.runSummary.routeLabel),S(),Y("ngIf",t.runSummary.endedEarly),S(6),Ie(" ",qt(14,14,t.runSummary.completedAt,"short")," "),S(6),Pt(t.runSummary.totalStops),S(5),Pt(t.runSummary.delivered),S(5),Pt(t.runSummary.skipped),S(5),Pt(t.runSummary.dozensDelivered),S(5),Ie(" ",$i(40,17,t.runSummary.donationTotal,"USD","symbol","1.2-2")," "),S(6),Ie(" ",$i(46,22,t.runSummary.taxableTotal,"USD","symbol","1.2-2")," "),S(6),Rn(" Donated ",t.runSummary.statusBreakdown.donated," / No donation ",t.runSummary.statusBreakdown.noDonation," "),S(5),Js(" Cash ",t.runSummary.methodBreakdown.cash," / Online ",t.runSummary.methodBreakdown.online," / Other ",t.runSummary.methodBreakdown.other," ")}}function mL(n,e){if(n&1){let t=tt();_(0,"div",27),be(1,gL,57,27,"div",28),_(2,"div",29)(3,"button",24),le("click",function(){X(t);let i=k();return J(i.backupNow())}),w(4," Backup now "),D(),_(5,"button",30),le("click",function(){X(t);let i=k();return J(i.completeRun())}),w(6),D()()()}if(n&2){let t=k();S(),Y("ngIf",t.runSummary),S(4),Y("disabled",t.isCompleting),S(),Ie(" ",t.isCompleting?"Completing\u2026":"Complete run"," ")}}function vL(n,e){if(n&1){let t=tt();_(0,"div",42)(1,"app-donation-amount-picker",43),le("cancel",function(){X(t);let i=k();return J(i.closeAmountPicker())})("save",function(i){X(t);let o=k();return J(o.confirmAmountFromPicker(i))}),D()()}if(n&2){let t=k();S(),Y("currentAmount",t.currentDonation.amount)("suggestedAmount",t.suggestedDonationAmount)}}function yL(n,e){if(n&1){let t=tt();_(0,"div",44)(1,"div",45)(2,"h3"),w(3,"Skip reason"),D(),_(4,"div",46)(5,"button",25),le("click",function(){X(t);let i=k();return J(i.confirmSkip("Not home"))}),w(6," Not home "),D(),_(7,"button",25),le("click",function(){X(t);let i=k();return J(i.confirmSkip("Canceled"))}),w(8," Canceled "),D(),_(9,"button",25),le("click",function(){X(t);let i=k();return J(i.confirmSkip("No cooler"))}),w(10," No cooler "),D()(),_(11,"div",47)(12,"input",48),Et("ngModelChange",function(i){X(t);let o=k();return Rt(o.otherReason,i)||(o.otherReason=i),J(i)}),D(),_(13,"button",24),le("click",function(){X(t);let i=k();return J(i.confirmSkip(i.otherReason))}),w(14," Save "),D()(),_(15,"button",49),le("click",function(){X(t);let i=k();return J(i.cancelSkip())}),w(16," Cancel "),D()()()}if(n&2){let t=k();S(12),St("ngModel",t.otherReason)}}function _L(n,e){if(n&1){let t=tt();_(0,"div",50)(1,"div",51)(2,"h3"),w(3,"End run early?"),D(),_(4,"p",20),w(5," This will mark all remaining stops in this route as "),_(6,"strong"),w(7,"Skipped"),D(),w(8,". You can still edit them later on the Planner page if needed. "),D(),_(9,"div",52)(10,"button",53),le("click",function(){X(t);let i=k();return J(i.cancelEndRun())}),w(11," Cancel "),D(),_(12,"button",54),le("click",function(){X(t);let i=k();return J(i.confirmEndRunEarly())}),w(13," Proceed "),D()()()()}}var fh=class n{route=U(dr);storage=U(wr);router=U(Zn);backup=U(no);toast=U(li);routeDate;stops=[];currentStop;currentIndex=0;total=0;doneCount=0;finished=!1;loading=!0;errorMessage="";runFinishedAt;runSummary;deliveredQty=0;showAmountPicker=!1;selectedAmount=0;showSkipDialog=!1;otherReason="";endedEarly=!1;isCompleting=!1;showEndRunDialog=!1;ngOnInit(){return ee(this,null,function*(){if(this.routeDate=this.route.snapshot.paramMap.get("routeDate")||void 0,!this.routeDate){this.errorMessage="No route selected.",this.loading=!1;return}yield this.loadStops(),this.setCurrent()})}loadStops(){return ee(this,null,function*(){this.loading=!0,this.errorMessage="";try{this.stops=(yield this.storage.getDeliveriesByRoute(this.routeDate)).map(e=>this.normalizeStop(Z({},e))),this.total=this.stops.length,this.doneCount=this.stops.filter(e=>e.status!=="").length}catch(e){console.error(e),this.errorMessage="Failed to load route."}finally{this.loading=!1}})}setCurrent(){let e=this.stops.findIndex(t=>t.status===""||t.status==="changed");e===-1?(this.finished=!0,this.currentStop=void 0,this.endedEarly=!1,this.captureRunFinishedAt(),this.runSummary=this.buildRunSummary()):(this.finished=!1,this.currentIndex=e,this.currentStop=this.normalizeStop(Z({},this.stops[this.currentIndex])),this.deliveredQty=this.currentStop.deliveredDozens??this.currentStop.dozens,this.syncDonationDefaults(),this.runFinishedAt=void 0,this.runSummary=void 0)}adjustDelivered(e){let t=Math.max(0,(this.deliveredQty||0)+e);this.deliveredQty=t,this.currentStop&&(this.storage.updateDraftDelivered(this.currentStop.id,t),this.currentStop.dozens=t,this.currentStop.deliveredDozens=t,this.currentStop.updatedAt=new Date().toISOString(),this.syncDonationDefaults(),this.refreshCurrentStatus())}markDelivered(){return ee(this,null,function*(){if(!this.currentStop)return;let e=new Date().toISOString();yield this.persistCurrentStopDonation(),yield this.storage.markDelivered(this.currentStop.id,this.deliveredQty),this.stops[this.currentIndex]=Ce(Z({},this.currentStop),{status:"delivered",deliveredDozens:this.deliveredQty,dozens:this.deliveredQty,deliveredAt:e,updatedAt:e}),this.doneCount=this.stops.filter(t=>t.status==="delivered"||t.status==="skipped").length,this.toast.show("Delivered!"),this.setCurrent()})}openSkipDialog(){this.showSkipDialog=!0,this.otherReason=""}confirmSkip(e){return ee(this,null,function*(){if(!this.currentStop)return;let t=(e||this.otherReason||"Skipped").trim();yield this.storage.markSkipped(this.currentStop.id,t);let r=new Date().toISOString();this.stops[this.currentIndex]=Ce(Z({},this.currentStop),{status:"skipped",skippedAt:r,skippedReason:t,updatedAt:r}),this.doneCount=this.stops.filter(i=>i.status==="delivered"||i.status==="skipped").length,this.showSkipDialog=!1,this.toast.show("Skipped!","info"),this.setCurrent()})}cancelSkip(){this.showSkipDialog=!1}openEndRunDialog(){this.showEndRunDialog=!0}cancelEndRun(){this.showEndRunDialog=!1}confirmEndRunEarly(){return ee(this,null,function*(){if(!this.stops.length){this.showEndRunDialog=!1;return}let e=new Date().toISOString(),t=this.stops.filter(r=>r.status===""||r.status==="changed");try{for(let r of t)yield this.storage.markSkipped(r.id,"Ended run early"),r.status="skipped",r.skippedAt=e,r.skippedReason="Ended run early",r.updatedAt=e;this.doneCount=this.stops.filter(r=>r.status==="delivered"||r.status==="skipped").length,this.finished=!0,this.currentStop=void 0,this.endedEarly=!0,this.captureRunFinishedAt(e),this.runSummary=this.buildRunSummary(),this.showEndRunDialog=!1,this.toast.show("Run ended early; remaining stops skipped","info")}catch(r){console.error("End run early failed",r),this.toast.show("Failed to end run early","error"),this.showEndRunDialog=!1}})}captureRunFinishedAt(e){this.runFinishedAt||(this.runFinishedAt=e??new Date().toISOString())}buildRunSummary(){let e=this.stops.length,t=this.stops.filter(b=>b.status==="delivered"),r=this.stops.filter(b=>b.status==="skipped"),i=t.length,o=r.length,s=t.reduce((b,v)=>b+Number(v.deliveredDozens??v.dozens??0),0),a={donated:0,noDonation:0},c={cash:0,online:0,other:0},d=0,h=0,g=this.storage.getSuggestedRate();for(let b of this.stops){if(b.status!=="delivered"&&b.status!=="skipped")continue;let v=b.donation??{status:"NoDonation",amount:0,suggestedAmount:0},E=v.status??"NoDonation";if(E==="Donated"?a.donated+=1:a.noDonation+=1,E!=="Donated")continue;let H=b.status==="delivered"?Number(b.deliveredDozens??b.dozens??0):0,W=v.suggestedAmount??H*g,oe=Number(v.amount??v.suggestedAmount??W);d+=oe;let T=oe-W;T>0&&(h+=T);let B=v.method??"other";B==="cash"?c.cash+=1:B==="venmo"||B==="ach"||B==="paypal"?c.online+=1:c.other+=1}return{routeLabel:this.routeDate??"Route",completedAt:this.runFinishedAt??new Date().toISOString(),totalStops:e,delivered:i,skipped:o,dozensDelivered:s,donationTotal:d,taxableTotal:h,statusBreakdown:a,methodBreakdown:c,endedEarly:this.endedEarly}}backupNow(){return ee(this,null,function*(){if(yield this.finalizeRunInternal(!0)){try{yield this.backup.exportAll(),this.toast.show("Backup ready")}catch(t){console.error(t),this.toast.show("Backup failed","error");return}this.finishRoute()}})}completeRun(){return ee(this,null,function*(){(yield this.finalizeRunInternal(!0))&&this.finishRoute()})}finishRoute(){this.routeDate&&localStorage.removeItem("currentRoute"),this.router.navigate(["/"])}finalizeRunInternal(e){return ee(this,null,function*(){if(!this.routeDate||this.isCompleting)return!1;if(this.stops.some(t=>t.status===""||t.status==="changed"))return e&&this.toast.show("There are still pending stops. Deliver/skip or end run early first.","error"),!1;this.isCompleting=!0;try{return yield this.storage.completeRun(this.routeDate,this.endedEarly),e&&this.toast.show("Run archived and route reset for next time"),this.routeDate&&localStorage.removeItem("currentRoute"),!0}catch(t){return console.error("Complete run failed",t),e&&this.toast.show("Failed to complete run","error"),!1}finally{this.isCompleting=!1}})}openMaps(){if(!this.currentStop)return;let e=`${this.currentStop.address}, ${this.currentStop.city}, ${this.currentStop.state} ${this.currentStop.zip??""}`.trim(),t=encodeURIComponent(e);if(typeof navigator<"u"){let r=navigator.userAgent||"";if(/iPad|iPhone|iPod/.test(r)){this.navigateToUrl(`maps://?q=${t}`);return}if(/Android/i.test(r)){this.navigateToUrl(`geo:0,0?q=${t}`);return}}this.navigateToUrl(`https://www.google.com/maps/search/?api=1&query=${t}`)}navigateToUrl(e){window.location.assign(e)}copyAddress(){return ee(this,null,function*(){if(!this.currentStop)return;let e=`${this.currentStop.address}, ${this.currentStop.city}, ${this.currentStop.state} ${this.currentStop.zip??""}`.trim();try{if(navigator.clipboard?.writeText)yield navigator.clipboard.writeText(e);else{let t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}this.toast.show("Address copied")}catch(t){console.error("Copy failed",t),this.toast.show("Copy failed","error")}})}get suggestedDonationAmount(){return this.currentStop?(this.currentStop.dozens??0)*this.storage.getSuggestedRate():0}get progressPercent(){return this.total?Math.min(100,this.doneCount/this.total*100):0}get nextStop(){if(!(!this.stops.length||this.finished))return this.stops.slice(this.currentIndex+1).find(e=>e.status===""||e.status==="changed")}get currentDonation(){return this.currentStop?(this.currentStop.donation?(this.currentStop.donation.suggestedAmount=this.suggestedDonationAmount,(this.currentStop.donation.amount===void 0||this.currentStop.donation.amount===null||Number.isNaN(this.currentStop.donation.amount))&&(this.currentStop.donation.status==="Donated"?this.currentStop.donation.amount=this.suggestedDonationAmount:this.currentStop.donation.amount=0)):this.currentStop.donation={status:"NoDonation",amount:0,suggestedAmount:this.suggestedDonationAmount},this.currentStop.donation):{status:"NoDonation",amount:0}}setDonationStatus(e){return ee(this,null,function*(){let t=this.currentDonation;t.status=e,t.method=void 0,e==="NoDonation"?t.amount=0:e==="NotRecorded"&&(t.amount=void 0),t.suggestedAmount=this.suggestedDonationAmount,t.date=new Date().toISOString(),yield this.persistCurrentStopDonation()})}setDonationDonated(e){return ee(this,null,function*(){let t=this.currentDonation;t.status="Donated",t.method=e,t.suggestedAmount=this.suggestedDonationAmount,(t.amount==null||t.amount===0)&&(t.amount=this.suggestedDonationAmount),t.date=new Date().toISOString(),yield this.persistCurrentStopDonation()})}openDonationAmountPicker(){let e=Number(this.currentDonation.amount);this.selectedAmount=Number.isNaN(e)?this.suggestedDonationAmount:e,this.showAmountPicker=!0}closeAmountPicker(){this.showAmountPicker=!1}confirmAmountFromPicker(e){return ee(this,null,function*(){let t=this.currentDonation;t.status="Donated",t.amount=e,t.date=new Date().toISOString(),yield this.persistCurrentStopDonation(),this.selectedAmount=e,this.showAmountPicker=!1})}onInlineAmountChange(e){return ee(this,null,function*(){let t=this.currentDonation,r=new Date().toISOString();if(this.selectedAmount=e,t.status==="NoDonation"){if(e===0){t.amount=0,t.method=void 0,t.date=r,yield this.persistCurrentStopDonation();return}t.status="Donated"}else if(t.status==="NotRecorded"){if(e===0){t.amount=0,t.date=r,yield this.persistCurrentStopDonation();return}t.status="Donated"}t.amount=e,t.date=r,yield this.persistCurrentStopDonation()})}persistCurrentStopDonation(){return ee(this,null,function*(){this.currentStop&&(this.refreshCurrentStatus(),yield this.storage.updateDonation(this.currentStop.id,this.currentDonation))})}syncDonationDefaults(){if(!this.currentStop)return;let e=this.currentDonation,t=e.suggestedAmount??this.suggestedDonationAmount,r=this.suggestedDonationAmount;e.suggestedAmount=r,e.status==="Donated"&&(e.amount==null||e.amount===t)&&(e.amount=r),this.persistCurrentStopDonation()}refreshCurrentStatus(){if(!this.currentStop)return;let e=this.storage.computeChangeStatus(this.currentStop,{dozens:this.deliveredQty,deliveredDozens:this.deliveredQty},this.currentDonation),t=this.currentStop.donation?Z({},this.currentStop.donation):void 0;this.currentStop=Ce(Z({},this.currentStop),{status:e,donation:t}),this.stops[this.currentIndex]=Z({},this.currentStop)}normalizeStop(e){return e.originalDozens==null&&(e.originalDozens=e.dozens??0),e.originalDonation?e.originalDonation.status==="NotRecorded"&&(e.originalDonation.status="NoDonation",e.originalDonation.amount=0,e.originalDonation.method=void 0):e.originalDonation={status:"NoDonation",amount:0,suggestedAmount:(e.originalDozens??e.dozens??0)*4},e.donation?e.donation.status==="NotRecorded"&&(e.donation.status="NoDonation",e.donation.amount=0,e.donation.method=void 0):e.donation={status:"NoDonation",amount:0,suggestedAmount:(e.dozens??0)*4},e.status=this.storage.computeChangeStatus(e,void 0,e.donation),e}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Bt({type:n,selectors:[["app-delivery-run"]],decls:10,vars:8,consts:[[1,"run-screen"],[1,"header"],["class","status text-muted",4,"ngIf"],["class","status error",4,"ngIf"],["class","content",4,"ngIf"],["class","bottom-bar safe-bottom",4,"ngIf"],["class","actions-complete",4,"ngIf"],["class","amount-overlay",4,"ngIf"],["class","skip-overlay",4,"ngIf"],["class","end-run-overlay",4,"ngIf"],[1,"status","text-muted"],[1,"status","error"],[1,"content"],["class","delivery-card card",4,"ngIf"],["class","next-up card",4,"ngIf"],[1,"delivery-card","card"],[3,"adjustQty","donationStatusChange","donationMethodChange","amountChange","copyAddress","openMap","stop","deliveredQty","donation","suggestedAmount","showNoDonation","allowDonationReselect"],[1,"next-up","card"],[1,"section-title"],[1,"next-name"],[1,"text-muted"],[1,"next-meta","text-muted"],[1,"bottom-bar","safe-bottom"],[1,"primary-actions"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-secondary","btn-end-run",3,"click"],[1,"actions-complete"],["class","run-summary card",4,"ngIf"],[1,"completion-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"run-summary","card"],[1,"summary-header"],[1,"summary-title"],[1,"summary-sub","text-muted"],["class","summary-pill",4,"ngIf"],[1,"summary-grid"],[1,"summary-item"],[1,"summary-label"],[1,"summary-value"],[1,"summary-item","span-2"],[1,"summary-pill"],[1,"amount-overlay"],[3,"cancel","save","currentAmount","suggestedAmount"],[1,"skip-overlay"],[1,"skip-dialog","card"],[1,"reason-buttons"],[1,"custom-reason"],["placeholder","Other reason",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-text",3,"click"],[1,"end-run-overlay"],[1,"end-run-dialog","card"],[1,"end-run-actions"],["type","button",1,"btn","btn-secondary","btn-cancel-large",3,"click"],["type","button",1,"btn","btn-secondary","btn-proceed-small",3,"click"]],template:function(t,r){t&1&&(_(0,"div",0),$t(1,"div",1),be(2,lL,2,0,"div",2)(3,cL,2,1,"div",3)(4,fL,3,2,"main",4)(5,hL,8,0,"div",5)(6,mL,7,3,"div",6),D(),be(7,vL,2,2,"div",7)(8,yL,17,1,"div",8)(9,_L,14,0,"div",9)),t&2&&(S(2),Y("ngIf",r.loading),S(),Y("ngIf",r.errorMessage),S(),Y("ngIf",!r.loading&&!r.errorMessage),S(),Y("ngIf",!r.loading&&!r.errorMessage&&!r.finished),S(),Y("ngIf",r.finished&&!r.loading&&!r.errorMessage),S(),Y("ngIf",r.showAmountPicker),S(),Y("ngIf",r.showSkipDialog),S(),Y("ngIf",r.showEndRunDialog))},dependencies:[On,ar,uv,Uo,br,ai,Ji,Ri,Ca,Ea],styles:[".run-screen[_ngcontent-%COMP%]{display:grid;gap:0px}.header[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:0}.bar[_ngcontent-%COMP%]{height:6px;background:var(--color-border);border-radius:var(--radius-pill);overflow:hidden}.fill[_ngcontent-%COMP%]{height:100%;background:var(--color-primary);transition:width var(--duration-base) var(--easing-ease-out)}.status[_ngcontent-%COMP%]{margin-top:var(--spacing-2)}.status.error[_ngcontent-%COMP%]{color:var(--color-danger)}.content[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-1)}.delivery-card[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-3)}.delivery-card[_ngcontent-%COMP%]   .stop-qty[_ngcontent-%COMP%], .delivery-card[_ngcontent-%COMP%]   .donation-inline[_ngcontent-%COMP%], .delivery-card[_ngcontent-%COMP%]   .donation-choices[_ngcontent-%COMP%], .delivery-card[_ngcontent-%COMP%]   .donation-suggested[_ngcontent-%COMP%]{justify-content:center;text-align:center}[_nghost-%COMP%]     main.app-content>.card{margin-bottom:0;border-bottom:0}.card-top[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-2)}.stop-name[_ngcontent-%COMP%]{font-size:var(--font-size-md);font-weight:var(--font-weight-bold)}.stop-address[_ngcontent-%COMP%]{line-height:1.5}.maps[_ngcontent-%COMP%]{width:fit-content}.stop-qty[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-1);justify-content:start}.qty-label[_ngcontent-%COMP%]{font-weight:var(--font-weight-medium)}.qty-input[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--spacing-1);background:#f9fafb;border:1px solid var(--color-border);border-radius:var(--radius-md);padding:2px 6px}.qty-btn[_ngcontent-%COMP%]{border:1px solid var(--color-border);background:#fff;color:var(--color-text);border-radius:var(--radius-sm);padding:8px 12px;min-width:38px;font-weight:var(--font-weight-semibold);cursor:pointer}.qty-display[_ngcontent-%COMP%]{min-width:40px;text-align:center;font-weight:var(--font-weight-semibold)}.qty-unit[_ngcontent-%COMP%]{font-size:var(--font-size-sm)}.status-pill[_ngcontent-%COMP%]{padding:4px 10px;border-radius:var(--radius-pill);background:#ecfeff;color:#0ea5e9;font-size:var(--font-size-sm);font-weight:var(--font-weight-medium)}.status-pill.pending[_ngcontent-%COMP%]{background:#f5f5f5;color:var(--color-text-muted)}.status-pill.donation[_ngcontent-%COMP%]{background:#fef3c7;color:#c05621}[data-theme=dark][_nghost-%COMP%]   .status-pill[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .status-pill[_ngcontent-%COMP%]{background:#0f172a;color:#e2e8f0}[data-theme=dark][_nghost-%COMP%]   .status-pill.pending[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .status-pill.pending[_ngcontent-%COMP%]{background:#111827;color:#cbd5e1}[data-theme=dark][_nghost-%COMP%]   .status-pill.donation[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .status-pill.donation[_ngcontent-%COMP%]{background:#3b2500;color:#fdba74}.name-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:var(--spacing-2)}.address-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;align-items:center;gap:var(--spacing-2)}.address-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-1);flex-wrap:nowrap;align-items:center}.address-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:6px 10px;min-height:32px}.stop-meta[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-2);align-items:center;margin-top:0}.stop-note[_ngcontent-%COMP%]{font-style:italic}.donation[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-2)}.donation-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--spacing-2);flex-wrap:wrap}.donation-title[_ngcontent-%COMP%]{font-weight:var(--font-weight-semibold)}.donation-choices[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-2);flex-wrap:wrap}.btn-chip[_ngcontent-%COMP%]{border:1px solid var(--color-border);background:#f9fafb;color:var(--color-text);padding:8px 12px;border-radius:var(--radius-pill);font-weight:var(--font-weight-medium)}.btn-chip.active[_ngcontent-%COMP%]{border-color:var(--color-primary);color:var(--color-primary)}.btn-link[_ngcontent-%COMP%]{background:none;border:none;color:var(--color-primary);padding:0;font-weight:var(--font-weight-medium);cursor:pointer}.donation-amount-row[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-2);align-items:center}.bottom-bar[_ngcontent-%COMP%]{position:sticky;bottom:0;width:100%;display:flex;gap:var(--spacing-2);background:var(--color-muted);backdrop-filter:blur(12px);padding:var(--spacing-2) var(--spacing-2) env(safe-area-inset-bottom,var(--spacing-2));border-radius:var(--radius-lg);box-shadow:0 10px 30px #0000000d}[data-theme=dark][_nghost-%COMP%]   .bottom-bar[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .bottom-bar[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--color-bg) 92%,transparent)}.bottom-bar[_ngcontent-%COMP%]   .primary-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-2)}.bottom-bar[_ngcontent-%COMP%]   .btn-end-run[_ngcontent-%COMP%]{margin-left:auto;padding:6px 10px;min-height:32px;font-size:var(--font-size-sm);border-color:var(--color-danger);color:var(--color-danger);background:color-mix(in srgb,#fef2f2 80%,var(--color-surface) 20%)}[data-theme=dark][_nghost-%COMP%]   .bottom-bar[_ngcontent-%COMP%]   .btn-end-run[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .bottom-bar[_ngcontent-%COMP%]   .btn-end-run[_ngcontent-%COMP%]{background:color-mix(in srgb,#3b0f0f 80%,var(--color-bg) 20%);color:#fecaca;border-color:#fca5a5}.actions-complete[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-2)}.completion-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-2);flex-wrap:wrap;justify-content:flex-end}.run-summary[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-2)}.summary-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--spacing-2)}.summary-title[_ngcontent-%COMP%]{font-weight:var(--font-weight-semibold)}.summary-sub[_ngcontent-%COMP%]{font-size:var(--font-size-sm)}.summary-pill[_ngcontent-%COMP%]{padding:4px 10px;border-radius:var(--radius-pill);background:#fef2f2;color:var(--color-danger);border:1px solid #fecaca;font-size:var(--font-size-xs);font-weight:var(--font-weight-medium);white-space:nowrap}[data-theme=dark][_nghost-%COMP%]   .summary-pill[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .summary-pill[_ngcontent-%COMP%]{background:#3b0f0f;color:#fecaca;border-color:#fca5a5}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:var(--spacing-2) var(--spacing-3)}.summary-item[_ngcontent-%COMP%]{display:grid;gap:2px}.summary-item.span-2[_ngcontent-%COMP%]{grid-column:1/-1}.summary-label[_ngcontent-%COMP%]{font-size:var(--font-size-xs);color:var(--color-text-muted)}.summary-value[_ngcontent-%COMP%]{font-size:var(--font-size-sm);font-weight:var(--font-weight-medium);word-break:break-word}.amount-overlay[_ngcontent-%COMP%], .skip-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000059;display:flex;align-items:center;justify-content:center;padding:var(--spacing-4)}.skip-dialog[_ngcontent-%COMP%]{width:100%;max-width:420px;display:grid;gap:var(--spacing-3);box-shadow:var(--shadow-modal)}.reason-buttons[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-2);flex-wrap:wrap}.custom-reason[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-2);padding-top:var(--spacing-4)}.custom-reason[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:12px;border:1px solid var(--color-border);border-radius:var(--radius-md);font-size:var(--font-size-base)}.end-run-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000059;display:flex;align-items:center;justify-content:center;padding:var(--spacing-4);z-index:2100}.end-run-dialog[_ngcontent-%COMP%]{width:100%;max-width:400px;display:grid;gap:var(--spacing-3);box-shadow:var(--shadow-modal)}.end-run-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-2);justify-content:space-between;align-items:center}.btn-cancel-large[_ngcontent-%COMP%]{flex:1 1 auto;padding:10px 14px}.btn-proceed-small[_ngcontent-%COMP%]{flex:0 0 auto;padding:6px 10px;border-color:var(--color-danger);color:var(--color-danger);background:color-mix(in srgb,#fef2f2 80%,var(--color-surface) 20%)}[data-theme=dark][_nghost-%COMP%]   .btn-proceed-small[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .btn-proceed-small[_ngcontent-%COMP%]{background:color-mix(in srgb,#3b0f0f 80%,var(--color-bg) 20%);color:#fecaca;border-color:#fca5a5}"],data:{animation:[WE]}})};var zy=op(Ny());var hh=class n{cache;load(){return ee(this,null,function*(){if(this.cache)return this.cache;try{let e=yield fetch("build-info.json",{cache:"no-store"});if(!e.ok)return null;let t=yield e.json();return this.cache=t,t}catch(e){return console.warn("build-info fetch failed",e),null}})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})};function DL(n,e){if(n&1&&(_(0,"div",29),w(1),ft(2,"date"),D()),n&2){let t=k();S(),Ie(" Restored: ",qt(2,1,t.lastRestoreAt,"short")," ")}}function bL(n,e){n&1&&(_(0,"span"),w(1," \u2014 tap \u201CRestore CSV\u201D again to choose a file. "),D())}function wL(n,e){if(n&1&&(_(0,"div",29),w(1),ft(2,"date"),be(3,bL,2,0,"span",31),D()),n&2){let t=k(2);S(),Ie(" Last backup: ",qt(2,2,t.lastBackupAt,"short")," "),S(2),Y("ngIf",t.showRestoreHint)}}function CL(n,e){if(n&1&&(_(0,"div",29),w(1),ft(2,"date"),D()),n&2){let t=k(2);S(),Ie(" Imported: ",qt(2,1,t.lastImportAt,"short")," ")}}function SL(n,e){if(n&1&&be(0,wL,4,5,"div",30)(1,CL,3,4,"div",30),n&2){let t=k();Y("ngIf",t.lastBackupAt),S(),Y("ngIf",t.lastImportAt)}}function EL(n,e){if(n&1&&(_(0,"div",32),w(1),D()),n&2){let t=k();S(),Pt(t.errorMessage)}}function xL(n,e){if(n&1&&(_(0,"option",15),w(1),D()),n&2){let t=e.$implicit;Y("value",t),S(),Pt(t)}}function IL(n,e){n&1&&(_(0,"div",16),w(1," Multiple years detected. Export and start a new file for the new year to avoid tax mix-ups. "),D())}function ML(n,e){n&1&&(_(0,"div",33),w(1," Screen wake lock is not supported on this device/browser. "),D())}function RL(n,e){if(n&1&&(_(0,"span"),w(1),D()),n&2){let t=k().ngIf;S(),Ie(" (commit ",t.commit.slice(0,7),")")}}function TL(n,e){if(n&1&&(_(0,"section",34)(1,"div",35),w(2),ft(3,"date"),be(4,RL,2,1,"span",31),D()()),n&2){let t=e.ngIf;S(2),Ie(" Application updated ",$i(3,2,t.builtAt,"yyyy-MM-dd HH:mm:ss",void 0,"en-US")," "),S(2),Y("ngIf",t.commit)}}function OL(n,e){n&1&&(_(0,"div",36)(1,"div",37)(2,"h3"),w(3,"Biruk\u2019s Egg Deliveries \u2013 Help"),D(),_(4,"div",38)(5,"p"),w(6," This app helps you import your delivery CSV, plan routes, run deliveries, record donations (including the deductible charitable contribution), and export a single CSV that you can use for records and taxes. "),D(),_(7,"h4"),w(8,"Daily / Weekly workflow"),D(),_(9,"ul")(10,"li"),w(11," Import your route CSV on the Home page using "),_(12,"strong"),w(13,"Import CSV"),D(),w(14,". "),D(),_(15,"li"),w(16," Use "),_(17,"strong"),w(18,"Planner"),D(),w(19," to review stops, adjust dozens, add/edit people, and manage subscriptions. "),D(),_(20,"li"),w(21," Use "),_(22,"strong"),w(23,"Run"),D(),w(24," to deliver or skip each stop and record donations. "),D(),_(25,"li"),w(26," When finished, optionally "),_(27,"strong"),w(28,"Backup CSV"),D(),w(29,", then tap "),_(30,"strong"),w(31,"Complete run"),D(),w(32," on the Run page. "),D()(),_(33,"h4"),w(34,"Planner"),D(),_(35,"ul")(36,"li"),w(37,"Choose a schedule (e.g., Week A) from the dropdown."),D(),_(38,"li"),w(39," Use the run selector (when present) to switch between "),_(40,"em"),w(41,"Current (live)"),D(),w(42," and past runs. "),D(),_(43,"li"),w(44," Swipe a card to open the hidden menu: Reset, Edit, Skip/Unskip, Unsubscribe/Resubscribe, one\u2011off Donation, one\u2011off Delivery. "),D(),_(45,"li"),w(46," Use the Reorder toggle + drag handle to change the order, or turn it off to avoid accidental moves. "),D()(),_(47,"h4"),w(48,"Run page"),D(),_(49,"ul")(50,"li"),w(51,"Deliver or Skip each stop; changes are saved immediately."),D(),_(52,"li"),w(53," Use the donation buttons to record how much and how people paid. "),D(),_(54,"li")(55,"strong"),w(56,"End Run"),D(),w(57," marks all remaining stops as skipped."),D(),_(58,"li")(59,"strong"),w(60,"Complete run"),D(),w(61," archives the run and resets the route so you can run it again later. "),D()(),_(62,"h4"),w(63,"Exports, restore & totals"),D(),_(64,"ul")(65,"li")(66,"strong"),w(67,"Backup CSV"),D(),w(68," always contains:"),D(),_(69,"li"),w(70,"All original columns from your import."),D(),_(71,"li"),w(72,"All completed runs recorded in the app."),D(),_(73,"li"),w(74,"All one\u2011off deliveries and donations."),D(),_(75,"li"),w(76," Running totals per person for dozens, donations, and the deductible charitable contribution (amount above the suggested donation). "),D(),_(77,"li")(78,"strong"),w(79,"Restore CSV"),D(),w(80," fully replaces the current in\u2011app data (deliveries, routes, and run history) with the contents of a backup CSV. "),D(),_(81,"li"),w(82," Use "),_(83,"strong"),w(84,"Import CSV"),D(),w(85," for loading a new baseline file while keeping history, and "),_(86,"strong"),w(87,"Restore CSV"),D(),w(88," only when you want to roll back to, or start from, a specific backup. "),D()(),_(89,"p",33),w(90," You can run many times during the year and export whenever you need. For tax time, export a fresh CSV and use its totals to build donor statements. "),D()(),$t(91,"div",39),D()())}var ph=class n{wakeLock=null;visibilityHandler;storage=U(wr);router=U(Zn);backupService=U(no);toast=U(li);buildInfoService=U(hh);routes=[];lastBackupAt;lastImportAt;lastRestoreAt;isImporting=!1;isExporting=!1;pendingRestoreAfterBackup=!1;showRestoreHint=!1;showHelp=!1;errorMessage="";selectedRouteDate=null;selectedRouteSummary;currentRoute;wakeLockSupported=typeof navigator<"u"&&"wakeLock"in navigator;wakeLockActive=!1;wakeLockKey="keepScreenAwake";suggestedRate=4;suggestedKey="suggestedDonationRate";darkModeEnabled=!1;buildInfo;plannerReorderDefaultEnabled=!1;taxYearOptions=[];selectedTaxYear=new Date().getFullYear();hasMultiYearData=!1;ngOnInit(){return ee(this,null,function*(){yield this.refreshRoutes(),yield this.refreshTaxYearOptions(),this.lastBackupAt=localStorage.getItem("lastBackupAt")||void 0,this.lastImportAt=localStorage.getItem("lastImportAt")||void 0,this.lastRestoreAt=localStorage.getItem("lastRestoreAt")||void 0,this.currentRoute=localStorage.getItem("currentRoute")||void 0,this.suggestedRate=this.storage.getSuggestedRate();let e=localStorage.getItem("darkModeEnabled");this.darkModeEnabled=e===null?!0:e==="true",e===null&&localStorage.setItem("darkModeEnabled","true"),this.wakeLockActive=localStorage.getItem(this.wakeLockKey)==="true";let t=localStorage.getItem("plannerReorderEnabled");this.plannerReorderDefaultEnabled=t==="true",this.applyTheme(this.darkModeEnabled),this.autoselectRoute(),yield this.resumeIfNeeded(),this.buildInfo=yield this.buildInfoService.load(),this.wakeLockSupported&&(this.visibilityHandler=()=>{document.visibilityState==="visible"&&this.wakeLockActive&&!this.wakeLock&&this.requestWakeLock()},document.addEventListener("visibilitychange",this.visibilityHandler)),this.routes.length||(yield this.importSampleDataIfAvailable())})}ngOnDestroy(){this.visibilityHandler&&document.removeEventListener("visibilitychange",this.visibilityHandler)}onFileSelected(e){return ee(this,null,function*(){let t=e.target,r=t.files?.[0];if(r){this.isImporting=!0,this.errorMessage="";try{let i=yield this.parseCsv(r);yield this.storage.importDeliveries(i),localStorage.setItem("lastImportSource","user"),localStorage.removeItem("lastBackupAt"),this.lastBackupAt=void 0;let o=new Date().toISOString();localStorage.setItem("lastImportAt",o),this.lastImportAt=o,yield this.refreshRoutes(),this.autoselectRoute(),yield this.refreshTaxYearOptions(),this.toast.show("Import complete")}catch(i){console.error(i);let o=i instanceof Error?i.message:"Please check CSV format and try again.";this.errorMessage=`Import failed: ${o}`,this.toast.show(this.errorMessage,"error")}finally{this.isImporting=!1,t.value=""}}})}onImportClick(e){return ee(this,null,function*(){this.routes.length||(yield this.refreshRoutes()),e.click()})}exportCsv(){return ee(this,null,function*(){this.isExporting=!0,this.errorMessage="";try{yield this.backupService.exportAll(this.selectedTaxYear),this.lastBackupAt=localStorage.getItem("lastBackupAt")||void 0,this.showRestoreHint=!1,this.toast.show("Backup ready")}catch(e){console.error(e),this.errorMessage="Export failed. Please try again.",this.toast.show("Backup failed","error")}finally{this.isExporting=!1}})}onTaxYearChange(e){let t=e.target;if(!t)return;let r=Number(t.value);if(!Number.isFinite(r))return;let i=Math.trunc(r);this.selectedTaxYear=i,this.persistSelectedTaxYear(i)}goTo(e){this.router.navigate([e])}toggleWakeLock(){return ee(this,null,function*(){if(!this.wakeLockSupported){this.wakeLockActive=!1,localStorage.setItem(this.wakeLockKey,"false"),this.toast.show("Screen wake lock is not supported on this device/browser.","error");return}if(this.wakeLockActive)this.releaseWakeLock(),this.wakeLockActive=!1,localStorage.setItem(this.wakeLockKey,"false"),this.toast.show("Screen will sleep normally");else{let e=yield this.requestWakeLock();this.wakeLockActive=e,localStorage.setItem(this.wakeLockKey,e?"true":"false"),e?this.toast.show("Screen will stay awake"):this.toast.show("Unable to keep screen awake","error")}})}requestWakeLock(){return ee(this,null,function*(){try{return this.wakeLock=yield navigator.wakeLock.request("screen"),this.wakeLock.addEventListener?.("release",()=>{this.wakeLock=null,this.wakeLockActive=!1}),this.wakeLockActive=!0,!0}catch(e){return console.warn("Wake lock failed",e),this.wakeLock=null,this.wakeLockActive=!1,this.wakeLockSupported=!1,localStorage.setItem(this.wakeLockKey,"false"),this.toast.show("Screen wake lock is not supported on this device/browser.","error"),!1}})}releaseWakeLock(){this.wakeLock?.release&&this.wakeLock.release().catch(()=>null),this.wakeLock=null}startRoute(){return ee(this,null,function*(){this.selectedRouteDate&&(localStorage.setItem("currentRoute",this.selectedRouteDate),localStorage.setItem("lastSelectedRoute",this.selectedRouteDate),this.currentRoute=this.selectedRouteDate,yield this.router.navigate(["/plan",this.selectedRouteDate]))})}onSelectRoute(e){if(!e){this.selectedRouteDate=null,this.selectedRouteSummary=void 0;return}this.selectedRouteDate=e,this.selectedRouteSummary=this.routes.find(t=>t.routeDate===e),localStorage.setItem("lastSelectedRoute",e)}refreshRoutes(){return ee(this,null,function*(){this.routes=yield this.storage.getRoutes(),this.selectedRouteDate&&(this.selectedRouteSummary=this.routes.find(e=>e.routeDate===this.selectedRouteDate))})}refreshTaxYearOptions(){return ee(this,null,function*(){let e=new Date,t=e.getFullYear(),r=new Set,i=this.resolveBaselineYear(t);r.add(i);let[o,s,a]=yield Promise.all([this.storage.getAllDeliveries(),this.storage.getAllRunEntries(),this.storage.getAllRuns()]),c=new Map;a.forEach(v=>{let E=v.date??v.routeDate;E&&(c.set(v.id,E),r.add(cn(E,e)))}),s.forEach(v=>{let E=v.eventDate??c.get(v.runId);E&&r.add(cn(E,e))}),o.forEach(v=>{v.status==="delivered"&&r.add(cn(v.deliveredAt,e)),(v.oneOffDonations??[]).forEach(E=>{r.add(cn(E.date,e))}),(v.oneOffDeliveries??[]).forEach(E=>{r.add(cn(E.date,e))})});let d=new Set(r);d.add(t);let h=Array.from(d).sort((v,E)=>v-E);this.taxYearOptions=h,this.hasMultiYearData=r.size>1;let g=this.readStoredTaxYear(),b=(g!=null&&d.has(g)?g:d.has(t)?t:h[h.length-1])??t;this.selectedTaxYear=b,this.persistSelectedTaxYear(b)})}readStoredTaxYear(){if(typeof localStorage>"u")return;let e=localStorage.getItem("selectedTaxYear");if(!e)return;let t=Number(e);return Number.isFinite(t)?Math.trunc(t):void 0}persistSelectedTaxYear(e){typeof localStorage>"u"||localStorage.setItem("selectedTaxYear",e.toString())}resolveBaselineYear(e){if(typeof localStorage>"u")return e;let t=localStorage.getItem("lastImportAt");if(!t)return e;let r=new Date(t);return Number.isNaN(r.getTime())?e:r.getFullYear()}maybeBackupBeforeRestore(){return ee(this,null,function*(){if(!window.confirm(`You already have delivery data loaded. Restoring from a backup will replace all current deliveries, routes, and run history.

It is strongly recommended to export a backup first so you keep a copy of your past runs and donations.

Press OK to export a backup now and then continue with Restore (CSV), or Cancel to abort.`))return!1;try{return this.isExporting=!0,yield this.backupService.exportAll(this.selectedTaxYear),this.lastBackupAt=localStorage.getItem("lastBackupAt")||void 0,this.toast.show("Backup ready"),!0}catch(r){return console.error("Backup before import failed",r),this.toast.show("Backup failed. Restore cancelled.","error"),!1}finally{this.isExporting=!1}})}importSampleDataIfAvailable(){return ee(this,null,function*(){try{let e=yield fetch("sample-deliveries.csv",{cache:"no-cache"});if(!e.ok)return;let t=yield e.text(),r=yield this.parseCsvText(t);yield this.storage.importDeliveries(r),localStorage.setItem("lastImportSource","sample"),yield this.refreshRoutes(),this.autoselectRoute(),yield this.refreshTaxYearOptions(),this.toast.show("Loaded sample deliveries")}catch(e){console.warn("Sample CSV could not be loaded",e)}})}parseCsv(e){return ee(this,null,function*(){let t=yield e.text();return this.parseCsvText(t)})}parseCsvText(e){return new Promise((t,r)=>{zy.default.parse(e,{header:!0,skipEmptyLines:!0,complete:i=>{try{let o=i.meta.fields??[],a=o.some(h=>h.toLowerCase()==="rowtype")?i.data.filter(h=>{let g=h.RowType??h.rowtype??h.ROWTYPE;return!g||g.toString().toLowerCase()==="delivery"}):i.data,c=this.normalizeRows(a,o),d=this.buildImportState(o,i.data);this.storage.saveImportState({id:"default",headers:o,rowsByBaseRowId:d,mode:"baseline"}),t(c)}catch(o){r(o)}},error:i=>r(i)})})}normalizeRows(e,t){let r=new Date().toISOString(),i=new Map,o="",s=t.find(d=>["schedule","\uFEFFschedule","date"].includes(d.toLowerCase()))??null;if(!s)throw new Error('Missing required column "Schedule" (or "Date").');let a=t.find(d=>d.toLowerCase()==="delivery order")??null;e.forEach((d,h)=>{let b=((s?d[s]:void 0)||d.Schedule||d.schedule||d.Date||d.date||d["\uFEFFSchedule"]||d["\uFEFFschedule"]||""||"").trim();if(!b){let re=h+2;throw new Error(`Row ${re}: Missing value for "Schedule".`)}let v=b.replace(/\s+/g,"")||"Schedule",E=d.Dozens||d.dozens||d.Qty||"0",H=Number(E);if(Number.isNaN(H)){let re=h+2;throw new Error(`Row ${re}: "Dozens" must be a number.`)}let W=(a?d[a]:void 0)||d["Delivery Order"]||d["delivery order"]||d.Order,oe=W?Number(W)||0:h,T=(d.BaseRowId||d.baseRowId||d.BaseRowID||"").trim()||`ROW_${h}`,B=(d.Subscribed||d.subscribed||"").toString().trim().toLowerCase(),K=B===""?!0:B==="true"||B==="yes"||B==="1",G=b,I=this.buildDonationFromRow(d,H),M={id:crypto.randomUUID(),runId:G,baseRowId:T,week:v,routeDate:b,name:(d.Name||d.name||"").trim(),address:(d.Address||d.address||"").trim(),city:(d.City||d.city||"").trim(),state:(d.State||d.state||"").trim(),zip:(d.ZIP||d.Zip||d.zip||"").trim()||void 0,dozens:H,originalDozens:H,notes:(d.Notes||d.notes||"").trim()||void 0,sortIndex:0,deliveryOrder:oe,status:o,donation:I,subscribed:K,createdAt:r,updatedAt:r,synced:!1},$=i.get(b)??[];$.push(M),i.set(b,$)});let c=[];return i.forEach(d=>{d.forEach((h,g)=>{h.sortIndex=g,h.deliveryOrder=g,h.donation||(h.donation={status:"NoDonation",amount:0,suggestedAmount:h.dozens*this.storage.getSuggestedRate()})}),c.push(...d)}),c}buildImportState(e,t){let r={};return t.forEach((i,o)=>{let s=(i.BaseRowId||i.baseRowId||i.BaseRowID||"").trim()||`ROW_${o}`,a=e.map(c=>i[c]??"");r[s]=a}),r}buildDonationFromRow(e,t){let r=e.DonationStatus||e.donationstatus,i=e.DonationMethod||e.donationmethod,o=e.DonationAmount||e.donationamount,s=o?Number(o):void 0;return{status:r??"NoDonation",method:i,amount:s,suggestedAmount:t*this.storage.getSuggestedRate()}}coerceEventDate(e){let t=Zt(e);if(!t)return;let r=new Date(t);return Number.isNaN(r.getTime())?void 0:t}restoreFromBackupFile(e){return ee(this,null,function*(){let t=yield e.text(),r=yield new Promise((T,B)=>{zy.default.parse(t,{header:!0,skipEmptyLines:!0,complete:T,error:B})}),i=r.meta.fields??[],o=r.data,s=i.find(T=>T.toLowerCase()==="rowtype")??null,a=[],c=[],d=[],h=[];o.forEach(T=>{let K=((s?T[s]??T.RowType??T.rowtype:T.RowType??T.rowtype)??"").toString().toLowerCase();!K||K==="delivery"?a.push(T):K==="runentry"?c.push(T):K==="oneoffdonation"?d.push(T):K==="oneoffdelivery"&&h.push(T)});let g=this.normalizeRows(a,i);if(d.length||h.length){let T=new Map;g.forEach(B=>{let K=B.baseRowId,G=T.get(K)??[];G.push(B),T.set(K,G)}),d.forEach(B=>{let K=(B.BaseRowId||B.baseRowId||B.BaseRowID||B.RunBaseRowId||"").trim();if(!K)return;let G=T.get(K);if(!G||!G.length)return;let I=B.EventDate||B.eventdate||B.Date||B.date||"",M=this.coerceEventDate(I),re=B.RunDonationStatus||B.DonationStatus||B.donationstatus||""||"NotRecorded",ce=B.RunDonationMethod||B.DonationMethod||B.donationmethod||"",we=B.SuggestedAmount||B.suggestedamount||"",Ve=B.RunDonationAmount||B.DonationAmount||B.donationamount||"",Fe=we?Number(we):void 0,yt=Ve?Number(Ve):Fe,Ee=B.RunTaxableAmount||B.TaxableAmount||B.taxableamount||"",se=Ee?Number(Ee):void 0,te={status:re,method:ce||void 0,suggestedAmount:Fe,amount:yt,taxableAmount:se};G.forEach(he=>{let fe=this.coerceEventDate(he.routeDate),Me=M??fe??"",ve=Ce(Z({},te),{date:Me});he.oneOffDonations=[...he.oneOffDonations??[],ve]})}),h.forEach(B=>{let K=(B.BaseRowId||B.baseRowId||B.BaseRowID||B.RunBaseRowId||"").trim();if(!K)return;let G=T.get(K);if(!G||!G.length)return;let I=B.EventDate||B.eventdate||B.Date||B.date||"",M=this.coerceEventDate(I),$=B.RunDozens||B.Dozens||B.dozens||B.Qty||"",re=$&&Number($)||0,we=B.RunDonationStatus||B.DonationStatus||B.donationstatus||""||"NotRecorded",Ve=B.RunDonationMethod||B.DonationMethod||B.donationmethod||"",Fe=B.SuggestedAmount||B.suggestedamount||"",yt=B.RunDonationAmount||B.DonationAmount||B.donationamount||"",Ee=Fe?Number(Fe):void 0,se=yt?Number(yt):Ee,te=B.RunTaxableAmount||B.TaxableAmount||B.taxableamount||"",he=te?Number(te):void 0,fe=we==="NotRecorded"&&!Ve&&se==null?void 0:{status:we,method:Ve||void 0,suggestedAmount:Ee,amount:se,taxableAmount:he};G.forEach(Me=>{let ve=this.coerceEventDate(Me.routeDate),Qe=M??ve??"",it=fe?Ce(Z({},fe),{date:Qe}):void 0,Ae=[...Me.oneOffDeliveries??[]];Ae.push({deliveredDozens:re,donation:it,date:Qe}),Me.oneOffDeliveries=Ae})})}let b=this.buildImportState(i,a),v={id:"default",headers:i,rowsByBaseRowId:b,mode:"restored"},E=new Map,H=[];c.forEach(T=>{let B=(T.RunId||T.runid||"").trim();if(!B)return;if(!E.has(B)){let Ae=(T.RouteDate||T.routedate||"").trim(),Wt=(T.ScheduleId||T.scheduleid||"").toString().trim()||Ae.replace(/\s+/g,"")||"Schedule",He=(T.RunStatus||T.runstatus||"").toString().trim().toLowerCase(),ie=He==="endedearly"||He==="ended_early"?"endedEarly":He==="completed"?"completed":void 0,ct=T.RunCompletedAt||T.runcompletedat||T.EventDate||T.eventdate||"",Pe=this.coerceEventDate(ct),Te=this.coerceEventDate(Ae),_t=Pe??Te??new Date().toISOString(),wt={id:B,date:_t,weekType:Wt,label:Ae?`${Ae} \u2013 restored`:"Restored run",status:ie,routeDate:Ae||void 0};E.set(B,wt)}let K=(T.RunBaseRowId||T.BaseRowId||T.baseRowId||T.BaseRowID||"").trim();if(!K)return;let G=E.get(B),I=T.EventDate||T.eventdate||T.RunCompletedAt||T.runcompletedat||"",$=this.coerceEventDate(I)??G?.date,re=T.RunDeliveryOrder||T.deliveryorder||T.RunOrder||"",ce=Number(re)||0,Ve=(T.RunEntryStatus||T.status||"").toString().toLowerCase()==="skipped"?"skipped":"delivered",Fe=Number(T.RunDozens||T.dozens||T.Dozens||0)||0,Ee=T.RunDonationStatus||T.donationstatus||"NotRecorded"||"NotRecorded",se=T.RunDonationMethod||T.donationmethod||"",te=Number(T.RunDonationAmount||T.donationamount||0)||0,he=Number(T.RunTaxableAmount||T.taxableamount||0)||0,fe=(T.Name||T.name||"").trim(),Me=(T.Address||T.address||"").trim(),ve=(T.City||T.city||"").trim(),Qe=(T.State||T.state||"").trim(),it=(T.ZIP||T.Zip||T.zip||"").trim()||void 0;H.push({id:crypto.randomUUID(),runId:B,baseRowId:K,name:fe,address:Me,city:ve,state:Qe,zip:it,status:Ve,dozens:Fe,deliveryOrder:ce,donationStatus:Ee,donationMethod:Ee==="Donated"&&se?se:void 0,donationAmount:Ee==="Donated"?te:0,taxableAmount:he,eventDate:$??void 0})});let W=Array.from(E.values());yield this.storage.restoreAllFromBackup(g,v,W,H);let oe=new Date().toISOString();localStorage.setItem("lastRestoreAt",oe),this.lastRestoreAt=oe,localStorage.removeItem("lastBackupAt"),localStorage.removeItem("lastImportAt"),this.lastBackupAt=void 0,this.lastImportAt=void 0})}changeSuggested(e){let t=Math.max(0,Math.min(100,Number(this.suggestedRate)+e));this.suggestedRate=t,this.storage.setSuggestedRate(t),this.toast.show(`Suggested donation set to $${t}`)}toggleHelp(){this.showHelp=!this.showHelp}onRestoreClick(e){if(!(this.isImporting||this.isExporting)){if(this.pendingRestoreAfterBackup){this.pendingRestoreAfterBackup=!1,this.showRestoreHint=!1,e.click();return}this.handleRestoreWithBackup(e)}}handleRestoreWithBackup(e){return ee(this,null,function*(){(yield this.maybeBackupBeforeRestore())&&(this.pendingRestoreAfterBackup=!0,this.showRestoreHint=!0,this.toast.show('Backup ready. Tap "Restore (CSV)" again to choose a file.'))})}onRestoreSelected(e){return ee(this,null,function*(){let t=e.target,r=t.files?.[0];if(!r)return;if(!window.confirm(`Restoring from backup will replace all current deliveries, routes, run history, and import data in this app with the contents of this file.

This cannot be undone. Are you sure you want to continue?`)){t.value="";return}this.isImporting=!0,this.errorMessage="";try{yield this.restoreFromBackupFile(r),yield this.refreshRoutes(),localStorage.removeItem("currentRoute"),this.currentRoute=void 0,this.autoselectRoute(),yield this.refreshTaxYearOptions(),this.toast.show("Restore complete")}catch(s){console.error("Restore failed",s);let a=s instanceof Error&&s.message?s.message:typeof s=="string"?s:"";a?this.errorMessage=`Restore failed: ${a}`:this.errorMessage="Restore failed. The backup file could not be processed.",this.toast.show(this.errorMessage,"error")}finally{this.isImporting=!1,t.value=""}})}toggleDarkMode(){this.darkModeEnabled=!this.darkModeEnabled,localStorage.setItem("darkModeEnabled",this.darkModeEnabled?"true":"false"),this.applyTheme(this.darkModeEnabled),this.toast.show(this.darkModeEnabled?"Dark mode on":"Dark mode off")}applyTheme(e){if(typeof document>"u")return;let t=document.documentElement;e?t.setAttribute("data-theme","dark"):t.removeAttribute("data-theme")}autoselectRoute(){let e=localStorage.getItem("lastSelectedRoute"),t=this.currentRoute&&this.routes.find(r=>r.routeDate===this.currentRoute)?.routeDate||e&&this.routes.find(r=>r.routeDate===e)?.routeDate||(this.routes.length===1?this.routes[0]?.routeDate:null);t&&this.onSelectRoute(t)}resumeIfNeeded(){return ee(this,null,function*(){let e=localStorage.getItem("currentRoute");if(!e)return;(yield this.storage.getDeliveriesByRoute(e)).some(i=>i.status===""||i.status==="changed")?this.currentRoute=e:(localStorage.removeItem("currentRoute"),this.currentRoute=void 0)})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Bt({type:n,selectors:[["app-home"]],decls:72,vars:22,consts:[["fileInput",""],["restoreInput",""],["importBackupInfo",""],[1,"card","hero"],[1,"actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","file","accept",".csv,text/csv","hidden","",3,"change"],["class","subtext text-muted",4,"ngIf","ngIfElse"],["class","error",4,"ngIf"],[1,"card","settings-card","tax-year-card"],[1,"settings-row"],["for","tax-year-select",1,"settings-title"],["id","tax-year-help",1,"text-muted","settings-subtitle"],[1,"select-row"],["id","tax-year-select",1,"form-control","compact",3,"change","value"],[3,"value"],["id","tax-year-warning",1,"tax-year-warning"],[1,"card","settings-card"],[1,"settings-title"],[1,"text-muted","settings-subtitle"],["type","button","title","Dark mode",1,"btn",3,"click","ngClass"],["type","button","title","Keep the screen awake while using the app",1,"btn",3,"click","ngClass","disabled"],["class","text-muted",4,"ngIf"],[1,"qty-picker"],["type","button",1,"qty-btn",3,"click"],[1,"qty-display"],["type","button",1,"btn",3,"click","ngClass"],["class","card build-card",4,"ngIf"],["class","help-overlay",4,"ngIf"],[1,"subtext","text-muted"],["class","subtext text-muted",4,"ngIf"],[4,"ngIf"],[1,"error"],[1,"text-muted"],[1,"card","build-card"],[1,"text-muted","small"],[1,"help-overlay"],[1,"help-dialog","card"],[1,"help-content"],[1,"help-actions"]],template:function(t,r){if(t&1){let i=tt();_(0,"section",3)(1,"div",4)(2,"button",5),le("click",function(){X(i);let s=ti(9);return J(r.onImportClick(s))}),w(3),D(),_(4,"button",5),le("click",function(){return X(i),J(r.exportCsv())}),w(5),D(),_(6,"button",5),le("click",function(){X(i);let s=ti(11);return J(r.onRestoreClick(s))}),w(7," Restore CSV "),D(),_(8,"input",6,0),le("change",function(s){return X(i),J(r.onFileSelected(s))}),D(),_(10,"input",6,1),le("change",function(s){return X(i),J(r.onRestoreSelected(s))}),D()(),be(12,DL,3,4,"div",7)(13,SL,2,2,"ng-template",null,2,zo)(15,EL,2,1,"div",8),D(),_(16,"section",9)(17,"div",10)(18,"div")(19,"label",11),w(20,"Tax year"),D(),_(21,"div",12),w(22," Totals and backups use this year. "),D()(),_(23,"div",13)(24,"select",14),le("change",function(s){return X(i),J(r.onTaxYearChange(s))}),Ad(25,xL,2,2,"option",15,yw),D()()(),be(27,IL,2,0,"div",16),D(),_(28,"section",17)(29,"div",10)(30,"div")(31,"div",18),w(32,"Dark mode"),D(),_(33,"div",19),w(34,"Toggle dark mode."),D()(),_(35,"button",20),le("click",function(){return X(i),J(r.toggleDarkMode())}),w(36),D()()(),_(37,"section",17)(38,"div",10)(39,"div")(40,"div",18),w(41,"Keep screen awake"),D(),_(42,"div",19),w(43," Prevents the display from sleeping while you use the app. "),D()(),_(44,"button",21),le("click",function(){return X(i),J(r.toggleWakeLock())}),w(45),D()(),be(46,ML,2,0,"div",22),D(),_(47,"section",17)(48,"div",10)(49,"div")(50,"div",18),w(51,"Suggested donation/dozen"),D(),_(52,"div",19),w(53," Used across planner and run screens. "),D()(),_(54,"div",23)(55,"button",24),le("click",function(){return X(i),J(r.changeSuggested(-1))}),w(56," \u2212 "),D(),_(57,"span",25),w(58),D(),_(59,"button",24),le("click",function(){return X(i),J(r.changeSuggested(1))}),w(60," + "),D()()()(),_(61,"section",17)(62,"div",10)(63,"div")(64,"div",18),w(65,"Help"),D(),_(66,"div",19),w(67,"Open the in-app guide."),D()(),_(68,"button",26),le("click",function(){return X(i),J(r.toggleHelp())}),w(69),D()()(),be(70,TL,5,7,"section",27)(71,OL,92,0,"div",28)}if(t&2){let i=ti(14);S(2),Y("disabled",r.isImporting),S(),Ie(" ",r.isImporting?"Importing\u2026":"Import CSV"," "),S(),Y("disabled",r.isExporting),S(),Ie(" ",r.isExporting?"Preparing\u2026":"Backup CSV"," "),S(),Y("disabled",r.isImporting||r.isExporting),S(6),Y("ngIf",r.lastRestoreAt)("ngIfElse",i),S(3),Y("ngIf",r.errorMessage),S(9),Y("value",r.selectedTaxYear),Ut("aria-describedby",r.hasMultiYearData?"tax-year-help tax-year-warning":"tax-year-help"),S(),Pd(r.taxYearOptions),S(2),Dt(r.hasMultiYearData?27:-1),S(8),Y("ngClass",r.darkModeEnabled?"btn-primary":"btn-secondary"),S(),Ie(" ",r.darkModeEnabled?"On":"Off"," "),S(8),Y("ngClass",r.wakeLockActive?"btn-primary":"btn-secondary")("disabled",!r.wakeLockSupported),S(),Ie(" ",r.wakeLockActive?"On":"Off"," "),S(),Y("ngIf",!r.wakeLockSupported),S(12),Ie("$",r.suggestedRate,""),S(10),Y("ngClass",r.showHelp?"btn-primary":"btn-secondary"),S(),Ie(" ",r.showHelp?"Hide":"Help"," "),S(),Y("ngIf",r.buildInfo),S(),Y("ngIf",r.showHelp)}},dependencies:[ar,av,br,ah,lh,Uo],styles:[".page-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:var(--spacing-4);margin-bottom:var(--spacing-2)}.lede[_ngcontent-%COMP%]{margin:0 auto var(--spacing-3);max-width:44ch;text-align:center}.hero[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-0)}.settings-card[_ngcontent-%COMP%]{margin-top:var(--spacing-3);display:grid;gap:var(--spacing-2)}.tax-year-card[_ngcontent-%COMP%]   .select-row[_ngcontent-%COMP%]{justify-content:flex-end}.tax-year-warning[_ngcontent-%COMP%]{color:var(--color-danger);font-size:var(--font-size-sm);font-weight:var(--font-weight-medium)}.build-card[_ngcontent-%COMP%]{margin-top:var(--spacing-3)}.hero[_ngcontent-%COMP%], .build-card[_ngcontent-%COMP%]{background:transparent;border:none;box-shadow:none}[data-theme=dark][_nghost-%COMP%]   .hero[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .hero[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .build-card[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .build-card[_ngcontent-%COMP%]{background:transparent;border:none;box-shadow:none}.settings-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--spacing-2)}.settings-title[_ngcontent-%COMP%]{font-weight:var(--font-weight-semibold)}.settings-subtitle[_ngcontent-%COMP%]{font-size:var(--font-size-sm)}.form-control.compact[_ngcontent-%COMP%]{min-width:120px;padding:8px 10px}.actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-2);align-items:stretch;flex-wrap:nowrap;width:100%}.actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1 1 0;min-width:0}.actions[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{border-color:var(--color-primary);color:var(--color-primary);background:var(--color-surface)}.actions[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]{background:var(--color-surface);color:var(--color-primary);border:1px solid var(--color-primary)}.actions[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--color-primary) 12%,var(--color-surface) 88%);color:var(--color-primary);border-color:var(--color-primary)}[data-theme=dark][_nghost-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark);color:#fff;border-color:var(--color-primary-dark)}.actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--color-primary) 12%,var(--color-surface) 88%);color:var(--color-primary);border-color:var(--color-primary)}[data-theme=dark][_nghost-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark);color:#fff;border-color:var(--color-primary-dark)}.subtext[_ngcontent-%COMP%]{font-size:var(--font-size-sm);text-align:center}.error[_ngcontent-%COMP%]{color:var(--color-danger);font-weight:var(--font-weight-medium)}.routes[_ngcontent-%COMP%]{margin-top:var(--spacing-4);display:grid;gap:var(--spacing-3)}.routes-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.select-row[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-2);align-items:center;flex-wrap:wrap}.form-control[_ngcontent-%COMP%]{padding:12px;border:1px solid var(--color-border);border-radius:var(--radius-md);min-width:220px;font-size:var(--font-size-base);background:var(--color-surface);color:var(--color-text)}.form-control.compact[_ngcontent-%COMP%]{min-width:120px;padding:8px 10px;background:var(--color-surface);color:var(--color-text);appearance:auto}.settings-card[_ngcontent-%COMP%]   .qty-picker[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-md);padding:2px 4px;max-width:160px;width:auto}.settings-card[_ngcontent-%COMP%]   .qty-btn[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:var(--radius-md);border:1px solid var(--color-border);background:var(--color-bg);font-size:18px;display:inline-flex;align-items:center;justify-content:center}.settings-card[_ngcontent-%COMP%]   .qty-btn[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--color-primary) 12%,var(--color-surface) 88%);color:var(--color-primary);border-color:var(--color-primary)}[data-theme=dark][_nghost-%COMP%]   .settings-card[_ngcontent-%COMP%]   .qty-btn[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .settings-card[_ngcontent-%COMP%]   .qty-btn[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark);color:#fff;border-color:var(--color-primary-dark)}.settings-card[_ngcontent-%COMP%]   .qty-display[_ngcontent-%COMP%]{min-width:25px;padding:2px 0;text-align:center;font-weight:var(--font-weight-semibold)}.route-summary[_ngcontent-%COMP%]{padding:var(--spacing-3);border-radius:var(--radius-md);background:#f9fafb;border:1px solid var(--color-border);display:grid;gap:var(--spacing-1)}.route-name[_ngcontent-%COMP%]{font-weight:var(--font-weight-semibold)}.tag[_ngcontent-%COMP%]{margin-left:var(--spacing-2);padding:4px 10px;border-radius:var(--radius-pill);background:#ecfeff;color:#0ea5e9;font-size:var(--font-size-sm)}.empty[_ngcontent-%COMP%]{margin-top:var(--spacing-4);display:grid;gap:var(--spacing-2);text-align:left}"]})};var Hy;function AL(){if(Hy==null){let n=typeof document<"u"?document.head:null;Hy=!!(n&&(n.createShadowRoot||n.attachShadow))}return Hy}function gh(n){if(AL()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function dc(n){return n.composedPath?n.composedPath()[0]:n.target}function GE(n){return n.buttons===0||n.detail===0}function KE(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}function mh(n,e=0){return PL(n)?Number(n):arguments.length===2?e:0}function PL(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function ci(n){return n instanceof Qt?n.nativeElement:n}function ro(n,e,t,r,i){let o=parseInt(Qm.major),s=parseInt(Qm.minor);return o>19||o===19&&s>0||o===0&&s===0?n.listen(e,t,r,i):(e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)})}var vh=new WeakMap,YE=(()=>{class n{_appRef;_injector=U(gn);_environmentInjector=U(kn);load(t){let r=this._appRef=this._appRef||this._injector.get(mr),i=vh.get(r);i||(i={loaders:new Set,refs:[]},vh.set(r,i),r.onDestroy(()=>{vh.get(r)?.refs.forEach(o=>o.destroy()),vh.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(Aw(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Uy;try{Uy=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Uy=!1}var $y=(()=>{class n{_platformId=U(Lo);isBrowser=this._platformId?fv(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||Uy)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var kL=new Se("cdk-dir-doc",{providedIn:"root",factory:NL});function NL(){return U(Ft)}var FL=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function LL(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?FL.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var qy=(()=>{class n{value="ltr";change=new st;constructor(){let t=U(kL,{optional:!0});if(t){let r=t.body?t.body.dir:null,i=t.documentElement?t.documentElement.dir:null;this.value=LL(r||i||"ltr")}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var VL=20,QE=(()=>{class n{_ngZone=U(gt);_platform=U($y);_renderer=U(Hn).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new ke;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=VL){return this._platform.isBrowser?new Be(r=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let i=t>0?this._scrolled.pipe(Eu(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):Le()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){let i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Jt(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(t){let r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,t)&&r.push(o)}),r}_scrollableContainsElement(t,r){let i=ci(r),o=t.getElementRef().nativeElement;do if(i==o)return!0;while(i=i.parentElement);return!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var jL=20,ZE=(()=>{class n{_platform=U($y);_listeners;_viewportSize;_change=new ke;_document=U(Ft,{optional:!0});constructor(){let t=U(gt),r=U(Hn).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let i=o=>this._change.next(o);this._listeners=[r.listen("window","resize",i),r.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,r=this._getWindow(),i=t.documentElement,o=i.getBoundingClientRect(),s=-o.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,a=-o.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0;return{top:s,left:a}}change(t=jL){return t>0?this._change.pipe(Eu(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var XE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$n({type:n});static \u0275inj=Un({})}return n})();var Wy={},JE=(()=>{class n{_appId=U(dl);getId(t){return this._appId!=="ng"&&(t+=this._appId),Wy.hasOwnProperty(t)||(Wy[t]=0),`${t}${Wy[t]++}`}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ex(n){return Array.isArray(n)?n:[n]}function gx(n){let e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return r==="canvas"?rx(n,e):(r==="input"||r==="select"||r==="textarea")&&nx(n,e),tx("canvas",n,e,rx),tx("input, textarea, select",n,e,nx),e}function tx(n,e,t,r){let i=e.querySelectorAll(n);if(i.length){let o=t.querySelectorAll(n);for(let s=0;s<i.length;s++)r(i[s],o[s])}}var BL=0;function nx(n,e){e.type!=="file"&&(e.value=n.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${BL++}`)}function rx(n,e){let t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}function t_(n){let e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function Yy(n,e,t){let{top:r,bottom:i,left:o,right:s}=n;return t>=r&&t<=i&&e>=o&&e<=s}function pc(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function ix(n,e,t,r){let{top:i,right:o,bottom:s,left:a,width:c,height:d}=n,h=c*e,g=d*e;return r>i-g&&r<s+g&&t>a-h&&t<o+h}var yh=class{_document;positions=new Map;constructor(e){this._document=e}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:t_(t)})})}handleScroll(e){let t=dc(e),r=this.positions.get(t);if(!r)return null;let i=r.scrollPosition,o,s;if(t===this._document){let d=this.getViewportScrollPosition();o=d.top,s=d.left}else o=t.scrollTop,s=t.scrollLeft;let a=i.top-o,c=i.left-s;return this.positions.forEach((d,h)=>{d.clientRect&&t!==h&&t.contains(h)&&pc(d.clientRect,a,c)}),i.top=o,i.left=s,{top:a,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function mx(n,e){let t=n.rootNodes;if(t.length===1&&t[0].nodeType===e.ELEMENT_NODE)return t[0];let r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function n_(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function xa(n,e){let t=e?"":"none";n_(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function ox(n,e,t){n_(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function _h(n,e){return e&&e!="none"?n+" "+e:n}function sx(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=Dh(e.left,e.top)}function Dh(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function ax(n){let e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function zL(n){let e=getComputedStyle(n),t=Gy(e,"transition-property"),r=t.find(a=>a==="transform"||a==="all");if(!r)return 0;let i=t.indexOf(r),o=Gy(e,"transition-duration"),s=Gy(e,"transition-delay");return ax(o[i])+ax(s[i])}function Gy(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}var HL=new Set(["position"]),Qy=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(e,t,r,i,o,s,a,c,d,h){this._document=e,this._rootElement=t,this._direction=r,this._initialDomRect=i,this._previewTemplate=o,this._previewClass=s,this._pickupPositionOnPage=a,this._initialTransform=c,this._zIndex=d,this._renderer=h}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),lx(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return zL(this._preview)}addEventListener(e,t){return this._renderer.listen(this._preview,e,t)}_createPreview(){let e=this._previewTemplate,t=this._previewClass,r=e?e.template:null,i;if(r&&e){let o=e.matchSize?this._initialDomRect:null,s=e.viewContainer.createEmbeddedView(r,e.context);s.detectChanges(),i=mx(s,this._document),this._previewEmbeddedView=s,e.matchSize?sx(i,o):i.style.transform=Dh(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=gx(this._rootElement),sx(i,this._initialDomRect),this._initialTransform&&(i.style.transform=this._initialTransform);return n_(i.style,{"pointer-events":"none",margin:lx(i)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},HL),xa(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("popover","manual"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(o=>i.classList.add(o)):i.classList.add(t)),i}};function lx(n){return"showPopover"in n}var UL={passive:!0},cx={passive:!1},$L={passive:!1,capture:!0},qL=800,ux=new Set(["position"]),Zy=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_anchor;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=Nr(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new ke;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=mt.EMPTY;_pointerUpSubscription=mt.EMPTY;_scrollSubscription=mt.EMPTY;_resizeSubscription=mt.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>xa(t,e)))}_disabled=!1;beforeStarted=new ke;started=new ke;released=new ke;ended=new ke;entered=new ke;exited=new ke;dropped=new ke;moved=this._moveEvents;data;constrainPosition;constructor(e,t,r,i,o,s,a){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=o,this._dragDropRegistry=s,this._renderer=a,this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new yh(r),s.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>ci(r)),this._handles.forEach(r=>xa(r,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let t=ci(e);return t!==this._rootElement&&(this._removeRootElementListeners(),this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[ro(this._renderer,t,"mousedown",this._pointerDown,cx),ro(this._renderer,t,"touchstart",this._pointerDown,UL),ro(this._renderer,t,"dragstart",this._nativeDragStart,cx)]),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?ci(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),xa(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),xa(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)};_pointerMove=e=>{let t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging()){let i=Math.abs(t.x-this._pickupPositionOnPage.x),o=Math.abs(t.y-this._pickupPositionOnPage.y);if(i+o>=this._config.dragStartThreshold){let a=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),c=this._dropContainer;if(!a){this._endDragSequence(e);return}(!c||!c.isDragging()&&!c.isReceiving())&&(e.cancelable&&e.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(e)))}return}e.cancelable&&e.preventDefault();let r=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(r),this._dropContainer)this._updateActiveDropContainer(r,t);else{let i=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,o=this._activeTransform;o.x=r.x-i.x+this._passiveTransform.x,o.y=r.y-i.y+this._passiveTransform.y,this._applyRootElementTransform(o.x,o.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:r,event:e,distance:this._getDragDistance(r),delta:this._pointerDirectionDelta})})};_pointerUp=e=>{this._endDragSequence(e)};_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){fc(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),r=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=ro(this._renderer,t,"selectstart",WL,$L)}),r){let i=this._rootElement,o=i.parentNode,s=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment("");o.insertBefore(a,i),this._initialTransform=i.style.transform||"",this._preview=new Qy(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(o,t)),ox(i,!1,ux),this._document.body.appendChild(o.replaceChild(s,i)),this.started.next({source:this,event:e}),r.start(),this._initialContainer=r,this._initialIndex=r.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(r?r.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();let r=this.isDragging(),i=fc(t),o=!i&&t.button!==0,s=this._rootElement,a=dc(t),c=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+qL>Date.now(),d=i?KE(t):GE(t);if(a&&a.draggable&&t.type==="mousedown"&&t.preventDefault(),r||o||c||d)return;if(this._handles.length){let b=s.style;this._rootElementTapHighlight=b.webkitTapHighlightColor||"",b.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(b=>this._updateOnScroll(b)),this._boundaryElement&&(this._boundaryRect=t_(this._boundaryElement));let h=this._previewTemplate;this._pickupPositionInElement=h&&h.template&&!h.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);let g=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:g.x,y:g.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){ox(this._rootElement,!0,ux),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),o=this._getDragDistance(i),s=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:o,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:o,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,s,o,i,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let o=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,e,t,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{let i=a=>{(!a||this._preview&&dc(a)===this._preview.element&&a.propertyName==="transform")&&(s(),r(),clearTimeout(o))},o=setTimeout(i,t*1.5),s=this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,t=e?e.template:null,r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=mx(this._placeholderRef,this._document)):r=gx(this._rootElement),r.style.pointerEvents="none",r.classList.add("cdk-drag-placeholder"),r}_getPointerPositionInElement(e,t,r){let i=t===this._rootElement?null:t,o=i?i.getBoundingClientRect():e,s=fc(r)?r.targetTouches[0]:r,a=this._getViewportScrollPosition(),c=s.pageX-o.left-a.left,d=s.pageY-o.top-a.top;return{x:o.left-e.left+c,y:o.top-e.top+d}}_getPointerPositionOnPage(e){let t=this._getViewportScrollPosition(),r=fc(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,o=r.pageY-t.top;if(this._ownerSVGElement){let s=this._ownerSVGElement.getScreenCTM();if(s){let a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=o,a.matrixTransform(s.inverse())}}return{x:i,y:o}}_getConstrainedPointerPosition(e){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||t==="x"?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:s}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:c,height:d}=this._getPreviewRect(),h=a.top+s,g=a.bottom-(d-s),b=a.left+o,v=a.right-(c-o);r=dx(r,b,v),i=dx(i,h,g)}return{x:r,y:i}}_updatePointerDirectionDelta(e){let{x:t,y:r}=e,i=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,s=Math.abs(t-o.x),a=Math.abs(r-o.y);return s>this._config.pointerDirectionChangeThreshold&&(i.x=t>o.x?1:-1,o.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=r>o.y?1:-1,o.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,xa(this._rootElement,e))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(e=>e()),this._rootElementCleanups=void 0}_applyRootElementTransform(e,t){let r=1/this.scale,i=Dh(e*r,t*r),o=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=o.transform&&o.transform!="none"?o.transform:""),o.transform=_h(i,this._initialTransform)}_applyPreviewTransform(e,t){let r=this._previewTemplate?.template?void 0:this._initialTransform,i=Dh(e,t);this._preview.setTransform(_h(i,r))}_getDragDistance(e){let t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(e===0&&t===0||this.isDragging()||!this._boundaryElement)return;let r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(i.width===0&&i.height===0||r.width===0&&r.height===0)return;let o=i.left-r.left,s=r.right-i.right,a=i.top-r.top,c=r.bottom-i.bottom;i.width>r.width?(o>0&&(e+=o),s>0&&(e-=s)):e=0,i.height>r.height?(a>0&&(t+=a),c>0&&(t-=c)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){let t=this.dragStartDelay;return typeof t=="number"?t:fc(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){let t=this._parentPositions.handleScroll(e);if(t){let r=dc(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&pc(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=gh(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){let r=this._previewContainer||"global";if(r==="parent")return e;if(r==="global"){let i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return ci(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=e=>{if(this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&e.preventDefault()}else this.disabled||e.preventDefault()};_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}};function dx(n,e,t){return Math.max(e,Math.min(t,n))}function fc(n){return n.type[0]==="t"}function WL(n){n.preventDefault()}function wh(n,e,t){let r=fx(e,n.length-1),i=fx(t,n.length-1);if(r===i)return;let o=n[r],s=i<r?-1:1;for(let a=r;a!==i;a+=s)n[a]=n[a+s];n[i]=o}function fx(n,e){return Math.max(0,Math.min(e,n))}var bh=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(e){this._dragDropRegistry=e}_previousSwap={drag:null,delta:0,overlaps:!1};start(e){this.withItems(e)}sort(e,t,r,i){let o=this._itemPositions,s=this._getItemIndexFromPointerPosition(e,t,r,i);if(s===-1&&o.length>0)return null;let a=this.orientation==="horizontal",c=o.findIndex(W=>W.drag===e),d=o[s],h=o[c].clientRect,g=d.clientRect,b=c>s?1:-1,v=this._getItemOffsetPx(h,g,b),E=this._getSiblingOffsetPx(c,o,b),H=o.slice();return wh(o,c,s),o.forEach((W,oe)=>{if(H[oe]===W)return;let T=W.drag===e,B=T?v:E,K=T?e.getPlaceholderElement():W.drag.getRootElement();W.offset+=B;let G=Math.round(W.offset*(1/W.drag.scale));a?(K.style.transform=_h(`translate3d(${G}px, 0, 0)`,W.initialTransform),pc(W.clientRect,0,B)):(K.style.transform=_h(`translate3d(0, ${G}px, 0)`,W.initialTransform),pc(W.clientRect,B,0))}),this._previousSwap.overlaps=Yy(g,t,r),this._previousSwap.drag=d.drag,this._previousSwap.delta=a?i.x:i.y,{previousIndex:c,currentIndex:s}}enter(e,t,r,i){let o=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,s=this._activeDraggables,a=s.indexOf(e),c=e.getPlaceholderElement(),d=s[o];if(d===e&&(d=s[o+1]),!d&&(o==null||o===-1||o<s.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(d=s[0]),a>-1&&s.splice(a,1),d&&!this._dragDropRegistry.isDragging(d)){let h=d.getRootElement();h.parentElement.insertBefore(c,h),s.splice(o,0,e)}else this._element.appendChild(c),s.push(e);c.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables?.forEach(e=>{let t=e.getRootElement();if(t){let r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(r=>r.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{pc(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}withElementContainer(e){this._element=e}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:t_(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getItemOffsetPx(e,t,r){let i=this.orientation==="horizontal",o=i?t.left-e.left:t.top-e.top;return r===-1&&(o+=i?t.width-e.width:t.height-e.height),o}_getSiblingOffsetPx(e,t,r){let i=this.orientation==="horizontal",o=t[e].clientRect,s=t[e+r*-1],a=o[i?"width":"height"]*r;if(s){let c=i?"left":"top",d=i?"right":"bottom";r===-1?a-=s.clientRect[c]-o[d]:a+=o[c]-s.clientRect[d]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;let r=this._itemPositions,i=this.orientation==="horizontal";if(r[0].drag!==this._activeDraggables[0]){let s=r[r.length-1].clientRect;return i?e>=s.right:t>=s.bottom}else{let s=r[0].clientRect;return i?e<=s.left:t<=s.top}}_getItemIndexFromPointerPosition(e,t,r,i){let o=this.orientation==="horizontal",s=this._itemPositions.findIndex(({drag:a,clientRect:c})=>{if(a===e)return!1;if(i){let d=o?i.x:i.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&d===this._previousSwap.delta)return!1}return o?t>=Math.floor(c.left)&&t<Math.floor(c.right):r>=Math.floor(c.top)&&r<Math.floor(c.bottom)});return s===-1||!this._sortPredicate(s,e)?-1:s}},Xy=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(e,t){this._document=e,this._dragDropRegistry=t}start(e){let t=this._element.childNodes;this._relatedNodes=[];for(let r=0;r<t.length;r++){let i=t[r];this._relatedNodes.push([i,i.nextSibling])}this.withItems(e)}sort(e,t,r,i){let o=this._getItemIndexFromPointerPosition(e,t,r),s=this._previousSwap;if(o===-1||this._activeItems[o]===e)return null;let a=this._activeItems[o];if(s.drag===a&&s.overlaps&&s.deltaX===i.x&&s.deltaY===i.y)return null;let c=this.getItemIndex(e),d=e.getPlaceholderElement(),h=a.getRootElement();o>c?h.after(d):h.before(d),wh(this._activeItems,c,o);let g=this._getRootNode().elementFromPoint(t,r);return s.deltaX=i.x,s.deltaY=i.y,s.drag=a,s.overlaps=h===g||h.contains(g),{previousIndex:c,currentIndex:o}}enter(e,t,r,i){let o=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i;o===-1&&(o=this._getClosestItemIndexToPointer(e,t,r));let s=this._activeItems[o],a=this._activeItems.indexOf(e);a>-1&&this._activeItems.splice(a,1),s&&!this._dragDropRegistry.isDragging(s)?(this._activeItems.splice(o,0,e),s.getRootElement().before(e.getPlaceholderElement())):(this._activeItems.push(e),this._element.appendChild(e.getPlaceholderElement()))}withItems(e){this._activeItems=e.slice()}withSortPredicate(e){this._sortPredicate=e}reset(){let e=this._element,t=this._previousSwap;for(let r=this._relatedNodes.length-1;r>-1;r--){let[i,o]=this._relatedNodes[r];i.parentNode===e&&i.nextSibling!==o&&(o===null?e.appendChild(i):o.parentNode===e&&e.insertBefore(i,o))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(e){return this._activeItems.indexOf(e)}updateOnScroll(){this._activeItems.forEach(e=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(e){e!==this._element&&(this._element=e,this._rootNode=void 0)}_getItemIndexFromPointerPosition(e,t,r){let i=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(r)),o=i?this._activeItems.findIndex(s=>{let a=s.getRootElement();return i===a||a.contains(i)}):-1;return o===-1||!this._sortPredicate(o,e)?-1:o}_getRootNode(){return this._rootNode||(this._rootNode=gh(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(e,t,r){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let i=1/0,o=-1;for(let s=0;s<this._activeItems.length;s++){let a=this._activeItems[s];if(a!==e){let{x:c,y:d}=a.getRootElement().getBoundingClientRect(),h=Math.hypot(t-c,r-d);h<i&&(i=h,o=s)}}return o}},hx=.05,vx=.05,Cr=function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n}(Cr||{}),Vn=function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n}(Vn||{}),Jy=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new ke;entered=new ke;exited=new ke;dropped=new ke;sorted=new ke;receivingStarted=new ke;receivingStopped=new ke;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=mt.EMPTY;_verticalScrollDirection=Cr.NONE;_horizontalScrollDirection=Vn.NONE;_scrollNode;_stopScrollTimers=new ke;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(e,t,r,i,o){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=o;let s=this.element=ci(e);this._document=r,this.withOrientation("vertical").withElementContainer(s),t.registerDropContainer(this),this._parentPositions=new yh(r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),i==null&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,o,s,a,c={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:o,distance:s,dropPoint:a,event:c})}withItems(e){let t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>e.indexOf(i)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._direction=e,this._sortStrategy instanceof bh&&(this._sortStrategy.direction=e),this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){if(e==="mixed")this._sortStrategy=new Xy(this._document,this._dragDropRegistry);else{let t=new bh(this._dragDropRegistry);t.direction=this._direction,t.orientation=e,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,r)=>this.sortPredicate(t,r,this)),this}withScrollableParents(e){let t=this._container;return this._scrollableElements=e.indexOf(t)===-1?[t,...e]:e.slice(),this}withElementContainer(e){if(e===this._container)return this;let t=ci(this.element),r=this._scrollableElements.indexOf(this._container),i=this._scrollableElements.indexOf(e);return r>-1&&this._scrollableElements.splice(r,1),i>-1&&this._scrollableElements.splice(i,1),this._sortStrategy&&this._sortStrategy.withElementContainer(e),this._cachedShadowRoot=null,this._scrollableElements.unshift(e),this._container=e,this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._domRect||!ix(this._domRect,hx,t,r))return;let o=this._sortStrategy.sort(e,t,r,i);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=Cr.NONE,o=Vn.NONE;if(this._parentPositions.positions.forEach((s,a)=>{a===this._document||!s.clientRect||r||ix(s.clientRect,hx,e,t)&&([i,o]=GL(a,s.clientRect,this._direction,e,t),(i||o)&&(r=a))}),!i&&!o){let{width:s,height:a}=this._viewportRuler.getViewportSize(),c={width:s,height:a,top:0,right:s,bottom:a,left:0};i=yx(c,t),o=_x(c,e),r=window}r&&(i!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=o,this._scrollNode=r,(i||o)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let e=this._container.style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),Pp(0,ru).pipe(vi(this._stopScrollTimers)).subscribe(()=>{let e=this._scrollNode,t=this.autoScrollStep;this._verticalScrollDirection===Cr.UP?e.scrollBy(0,-t):this._verticalScrollDirection===Cr.DOWN&&e.scrollBy(0,t),this._horizontalScrollDirection===Vn.LEFT?e.scrollBy(-t,0):this._horizontalScrollDirection===Vn.RIGHT&&e.scrollBy(t,0)})};_isOverContainer(e,t){return this._domRect!=null&&Yy(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._domRect||!Yy(this._domRect,t,r)||!this.enterPredicate(e,this))return!1;let i=this._getShadowRoot().elementFromPoint(t,r);return i?i===this._container||this._container.contains(i):!1}_startReceiving(e,t){let r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=gh(this._container);this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}};function yx(n,e){let{top:t,bottom:r,height:i}=n,o=i*vx;return e>=t-o&&e<=t+o?Cr.UP:e>=r-o&&e<=r+o?Cr.DOWN:Cr.NONE}function _x(n,e){let{left:t,right:r,width:i}=n,o=i*vx;return e>=t-o&&e<=t+o?Vn.LEFT:e>=r-o&&e<=r+o?Vn.RIGHT:Vn.NONE}function GL(n,e,t,r,i){let o=yx(e,i),s=_x(e,r),a=Cr.NONE,c=Vn.NONE;if(o){let d=n.scrollTop;o===Cr.UP?d>0&&(a=Cr.UP):n.scrollHeight-d>n.clientHeight&&(a=Cr.DOWN)}if(s){let d=n.scrollLeft;t==="rtl"?s===Vn.RIGHT?d<0&&(c=Vn.RIGHT):n.scrollWidth+d>n.clientWidth&&(c=Vn.LEFT):s===Vn.LEFT?d>0&&(c=Vn.LEFT):n.scrollWidth-d>n.clientWidth&&(c=Vn.RIGHT)}return[a,c]}var hc={capture:!0},Ky={passive:!1,capture:!0},KL=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Bt({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(r,i){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return n})(),r_=(()=>{class n{_ngZone=U(gt);_document=U(Ft);_styleLoader=U(YE);_renderer=U(Hn).createRenderer(null,null);_cleanupDocumentTouchmove;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=Nr([]);_globalListeners;_draggingPredicate=t=>t.isDragging();_domNodesToDirectives=null;pointerMove=new ke;pointerUp=new ke;scroll=new ke;constructor(){}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=ro(this._renderer,this._document,"touchmove",this._persistentTouchmoveListener,Ky)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(t,r){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._styleLoader.load(KL),this._activeDragInstances.update(i=>[...i,t]),this._activeDragInstances().length===1)){let i=r.type.startsWith("touch"),o=a=>this.pointerUp.next(a),s=[["scroll",a=>this.scroll.next(a),hc],["selectstart",this._preventDefaultWhileDragging,Ky]];i?s.push(["touchend",o,hc],["touchcancel",o,hc]):s.push(["mouseup",o,hc]),i||s.push(["mousemove",a=>this.pointerMove.next(a),Ky]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=s.map(([a,c,d])=>ro(this._renderer,this._document,a,c,d))})}}stopDragging(t){this._activeDragInstances.update(r=>{let i=r.indexOf(t);return i>-1?(r.splice(i,1),[...r]):r}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){let r=[this.scroll];return t&&t!==this._document&&r.push(new Be(i=>this._ngZone.runOutsideAngular(()=>{let o=ro(this._renderer,t,"scroll",s=>{this._activeDragInstances().length&&i.next(s)},hc);return()=>{o()}}))),qa(...r)}registerDirectiveNode(t,r){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(t,r)}removeDirectiveNode(t){this._domNodesToDirectives?.delete(t)}getDragDirectiveForNode(t){return this._domNodesToDirectives?.get(t)||null}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=t=>{this._activeDragInstances().length>0&&t.preventDefault()};_persistentTouchmoveListener=t=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))};_clearGlobalListeners(){this._globalListeners?.forEach(t=>t()),this._globalListeners=void 0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),YL={dragStartThreshold:5,pointerDirectionChangeThreshold:5},i_=(()=>{class n{_document=U(Ft);_ngZone=U(gt);_viewportRuler=U(ZE);_dragDropRegistry=U(r_);_renderer=U(Hn).createRenderer(null,null);constructor(){}createDrag(t,r=YL){return new Zy(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(t){return new Jy(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),e_=new Se("CDK_DRAG_PARENT");var Dx=new Se("CdkDragHandle"),bx=(()=>{class n{element=U(Qt);_parentDrag=U(e_,{optional:!0,skipSelf:!0});_dragDropRegistry=U(r_);_stateChanges=new ke;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._stateChanges.next(this)}_disabled=!1;constructor(){this._parentDrag?._addHandle(this)}ngAfterViewInit(){if(!this._parentDrag){let t=this.element.nativeElement.parentElement;for(;t;){let r=this._dragDropRegistry.getDragDirectiveForNode(t);if(r){this._parentDrag=r,r._addHandle(this);break}t=t.parentElement}}}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275dir=dt({type:n,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",Wn]},features:[Ln([{provide:Dx,useExisting:n}])]})}return n})(),wx=new Se("CDK_DRAG_CONFIG"),Cx=new Se("CdkDropList"),Sx=(()=>{class n{element=U(Qt);dropContainer=U(Cx,{optional:!0,skipSelf:!0});_ngZone=U(gt);_viewContainerRef=U(sr);_dir=U(qy,{optional:!0});_changeDetectorRef=U(Lr);_selfHandle=U(Dx,{optional:!0,self:!0});_parentDrag=U(e_,{optional:!0,skipSelf:!0});_dragDropRegistry=U(r_);_destroyed=new ke;_handles=new Yt([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new st;released=new st;ended=new st;entered=new st;exited=new st;dropped=new st;moved=new Be(t=>{let r=this._dragRef.moved.pipe(Ke(i=>({source:this,pointerPosition:i.pointerPosition,event:i.event,delta:i.delta,distance:i.distance}))).subscribe(t);return()=>{r.unsubscribe()}});_injector=U(gn);constructor(){let t=this.dropContainer,r=U(wx,{optional:!0}),i=U(i_);this._dragRef=i.createDrag(this.element,{dragStartThreshold:r&&r.dragStartThreshold!=null?r.dragStartThreshold:5,pointerDirectionChangeThreshold:r&&r.pointerDirectionChangeThreshold!=null?r.pointerDirectionChangeThreshold:5,zIndex:r?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),r&&this._assignDefaults(r),t&&(this._dragRef._withDropContainer(t._dropListRef),t.addItem(this),t._dropListRef.beforeStarted.pipe(vi(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){fl(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(t){let r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){let r=this._handles.getValue();r.push(t),this._handles.next(r)}_removeHandle(t){let r=this._handles.getValue(),i=r.indexOf(t);i>-1&&(r.splice(i,1),this._handles.next(r))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let t=this.element.nativeElement,r=t;this.rootElementSelector&&(r=t.closest!==void 0?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||t)}_getBoundaryElement(){let t=this.boundaryElement;return t?typeof t=="string"?this.element.nativeElement.closest(t):ci(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){let r=this._dir,i=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.scale=this.scale,t.dragStartDelay=typeof i=="object"&&i?i:mh(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(s).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe(yn(1)).subscribe(()=>{if(this._parentDrag){t.withParent(this._parentDrag._dragRef);return}let r=this.element.nativeElement.parentElement;for(;r;){let i=this._dragDropRegistry.getDragDirectiveForNode(r);if(i){t.withParent(i._dragRef);break}r=r.parentElement}})}_handleEvents(t){t.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(t){let{lockAxis:r,dragStartDelay:i,constrainPosition:o,previewClass:s,boundaryElement:a,draggingDisabled:c,rootElementSelector:d,previewContainer:h}=t;this.disabled=c??!1,this.dragStartDelay=i||0,r&&(this.lockAxis=r),o&&(this.constrainPosition=o),s&&(this.previewClass=s),a&&(this.boundaryElement=a),d&&(this.rootElementSelector=d),h&&(this.previewContainer=h)}_setupHandlesListener(){this._handles.pipe(sn(t=>{let r=t.map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),on(t=>qa(...t.map(r=>r._stateChanges.pipe(_o(r))))),vi(this._destroyed)).subscribe(t=>{let r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=dt({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,i){r&2&&Mt("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",Wn],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",Tw]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[Ln([{provide:e_,useExisting:n}]),Nn]})}return n})(),px=new Se("CdkDropListGroup");var Ex=(()=>{class n{element=U(Qt);_changeDetectorRef=U(Lr);_scrollDispatcher=U(QE);_dir=U(qy,{optional:!0});_group=U(px,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new ke;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=U(JE).getId("cdk-drop-list-");lockAxis;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=t}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;dropped=new st;entered=new st;exited=new st;sorted=new st;_unsortedItems=new Set;constructor(){let t=U(i_),r=U(wx,{optional:!0});this._dropListRef=t.createDropList(this.element),this._dropListRef.data=this,r&&this._assignDefaults(r),this._dropListRef.enterPredicate=(i,o)=>this.enterPredicate(i.data,o.data),this._dropListRef.sortPredicate=(i,o,s)=>this.sortPredicate(i,o.data,s.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(r=>r._dragRef))}removeItem(t){if(this._unsortedItems.delete(t),this._latestSortedRefs){let r=this._latestSortedRefs.indexOf(t._dragRef);r>-1&&(this._latestSortedRefs.splice(r,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((t,r)=>t._dragRef.getVisibleElement().compareDocumentPosition(r._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let t=n._dropLists.indexOf(this);t>-1&&n._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe(_o(this._dir.value),vi(this._destroyed)).subscribe(r=>t.withDirection(r)),t.beforeStarted.subscribe(()=>{let r=ex(this.connectedTo).map(i=>{if(typeof i=="string"){let o=n._dropLists.find(s=>s.id===i);return o}return i});if(this._group&&this._group._items.forEach(i=>{r.indexOf(i)===-1&&r.push(i)}),!this._scrollableParentsResolved){let i=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(i),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let i=this.element.nativeElement.querySelector(this.elementContainerSelector);t.withElementContainer(i)}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=this.sortingDisabled,t.autoScrollDisabled=this.autoScrollDisabled,t.autoScrollStep=mh(this.autoScrollStep,2),t.connectedTo(r.filter(i=>i&&i!==this).map(i=>i._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(r=>r._dragRef)),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:this,item:r.item.data,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:this,item:r.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(r=>{this.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:r.item.data})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),qa(t.receivingStarted,t.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(t){let{lockAxis:r,draggingDisabled:i,sortingDisabled:o,listAutoScrollDisabled:s,listOrientation:a}=t;this.disabled=i??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=s??!1,this.orientation=a||"vertical",r&&(this.lockAxis=r)}_syncItemsWithRef(t){this._latestSortedRefs=t,this._dropListRef.withItems(t)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=dt({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(r,i){r&2&&(Ut("id",i.id),Mt("cdk-drop-list-disabled",i.disabled)("cdk-drop-list-dragging",i._dropListRef.isDragging())("cdk-drop-list-receiving",i._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",Wn],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",Wn],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",Wn],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[Ln([{provide:px,useValue:void 0},{provide:Cx,useExisting:n}])]})}return n})();var xx=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$n({type:n});static \u0275inj=Un({providers:[i_],imports:[XE]})}return n})();function ZL(n,e){if(n&1&&(_(0,"option",9),w(1),D()),n&2){let t=e.$implicit;Y("ngValue","route:"+t.routeDate),S(),Rn(" ",t.routeDate," (",t.totalStops," stops) ")}}function XL(n,e){n&1&&(_(0,"span"),w(1," (ended early)"),D())}function JL(n,e){if(n&1&&(_(0,"option",9),w(1),ft(2,"date"),be(3,XL,2,0,"span",20),D()),n&2){let t=e.$implicit;Y("ngValue","run:"+t.id),S(),Rn(" ",t.routeDate," \u2014 ",qt(2,4,t.date,"shortDate")," "),S(2),Y("ngIf",t.status==="endedEarly")}}function e2(n,e){if(n&1&&(_(0,"optgroup",21)(1,"option",9),w(2),D(),be(3,JL,4,7,"option",10),D()),n&2){let t=k();S(),Y("ngValue","receipts:all"),S(),Ie(" All receipts (",t.selectedTaxYearLabel,") "),S(),Y("ngForOf",t.allRuns)}}function t2(n,e){if(n&1){let t=tt();_(0,"button",22),le("click",function(){X(t);let i=k();return J(i.toggleReorder())}),_(1,"span",15),w(2,"\u21C5"),D()()}if(n&2){let t=k();Mt("active",t.reorderEnabled),Y("title",t.reorderEnabled?"Disable reordering":"Enable reordering"),Ut("aria-pressed",t.reorderEnabled)("aria-label",t.reorderEnabled?"Disable reordering":"Enable reordering")}}function n2(n,e){if(n&1){let t=tt();_(0,"button",23),le("click",function(){X(t);let i=k();return J(i.openNewDeliveryForm())}),_(1,"span",15),w(2,"+"),D()()}}function r2(n,e){if(n&1){let t=tt();_(0,"div",24)(1,"input",25),Et("ngModelChange",function(i){X(t);let o=k();return Rt(o.searchTerm,i)||(o.searchTerm=i),J(i)}),le("ngModelChange",function(){X(t);let i=k();return J(i.applyFilter())}),D(),_(2,"button",26),le("click",function(){X(t);let i=k();return i.searchTerm="",i.applyFilter(!1),J(i.toggleSearch())}),w(3," \xD7 "),D()()}if(n&2){let t=k();S(),St("ngModel",t.searchTerm)}}function i2(n,e){n&1&&(_(0,"div",30),w(1,"Loading receipts..."),D())}function o2(n,e){if(n&1&&(w(0),ft(1,"date")),n&2){let t=k().$implicit;Ie(" ",$i(1,1,t.date,"shortDate",void 0,"en-US")," ")}}function s2(n,e){n&1&&(_(0,"span",35),w(1,"No date"),D())}function a2(n,e){if(n&1&&(_(0,"span",36),w(1,"\u2022"),D(),_(2,"span",39),w(3),D()),n&2){let t=k().$implicit,r=k(4);S(3),Ie(" ",r.formatReceiptDozens(t)," ")}}function l2(n,e){if(n&1&&(_(0,"span",36),w(1,"\u2022"),D(),_(2,"span",40),w(3),ft(4,"number"),D()),n&2){let t=k().$implicit,r=k(4);S(3),Rn(" ",r.formatReceiptDonationMethod(t.donationMethod)," $",qt(4,2,t.donationAmount,"1.2-2")," ")}}function c2(n,e){if(n&1){let t=tt();_(0,"div",38)(1,"button",41),le("click",function(){X(t);let i=k().$implicit,o=k(4);return J(o.confirmDeleteReceiptHistory(i))}),w(2," Delete "),D()()}if(n&2){let t=k().$implicit,r=k(4);S(),Ut("aria-label",r.getReceiptHistoryDeleteLabel(t))}}function u2(n,e){if(n&1&&(_(0,"li",32)(1,"div",33)(2,"span",34),be(3,o2,2,6)(4,s2,2,0,"span",35),D(),_(5,"span",36),w(6,"\u2022"),D(),_(7,"span",37),w(8),D(),be(9,a2,4,1)(10,l2,5,5),D(),be(11,c2,3,1,"div",38),D()),n&2){let t=e.$implicit,r=k(4);S(3),Dt(t.date?3:4),S(4),Mt("is-delivered",t.status==="delivered")("is-skipped",t.status==="skipped")("is-donation",t.status==="donation"),S(),Ie(" ",r.formatReceiptStatus(t.status)," "),S(),Dt(t.status==="delivered"?9:-1),S(),Dt(t.donationStatus==="Donated"?10:-1),S(),Dt(r.canDeleteReceiptHistoryEntry(t)?11:-1)}}function d2(n,e){if(n&1&&(_(0,"ul",31),Ad(1,u2,12,11,"li",32,vw),D()),n&2){let t=k(3);S(),Pd(t.receiptHistory)}}function f2(n,e){n&1&&(_(0,"div",30),w(1,"No previous receipts yet."),D())}function h2(n,e){if(n&1&&be(0,d2,3,0,"ul",31)(1,f2,2,0,"div",30),n&2){let t=k(2);Dt(t.receiptHistory.length?0:1)}}function p2(n,e){if(n&1&&(_(0,"div",27),$t(1,"div",28),_(2,"div",29),w(3),D(),be(4,i2,2,0,"div",30)(5,h2,2,1),D()),n&2){let t=k();S(3),Ie(" Previous receipts \xB7 Tax year ",t.selectedTaxYearLabel," "),S(),Dt(t.receiptHistoryLoading?4:5)}}function g2(n,e){n&1&&(_(0,"div",42),w(1,"Loading\u2026"),D())}function m2(n,e){if(n&1&&(_(0,"div",43),w(1),D()),n&2){let t=k();S(),Pt(t.errorMessage)}}function v2(n,e){if(n&1&&(_(0,"option",9),w(1),D()),n&2){let t=e.$implicit;Y("ngValue",t.routeDate),S(),Ie(" ",t.routeDate," ")}}function y2(n,e){if(n&1&&(_(0,"div",65),w(1),D()),n&2){let t=e.$implicit;S(),Pt(t)}}function _2(n,e){if(n&1&&(_(0,"div",63),be(1,y2,2,1,"div",64),D()),n&2){let t=k(2);S(),Y("ngForOf",t.newDeliveryErrors)}}function D2(n,e){if(n&1){let t=tt();_(0,"div",44)(1,"div",45)(2,"h3",46),w(3,"Add delivery"),D()(),_(4,"form",47),le("submit",function(i){return X(t),J(i.preventDefault())}),_(5,"label"),w(6," Schedule "),_(7,"select",48),Et("ngModelChange",function(i){X(t);let o=k();return Rt(o.newDelivery.routeDate,i)||(o.newDelivery.routeDate=i),J(i)}),be(8,v2,2,2,"option",10),D()(),_(9,"label"),w(10," Name "),_(11,"input",49),Et("ngModelChange",function(i){X(t);let o=k();return Rt(o.newDelivery.name,i)||(o.newDelivery.name=i),J(i)}),D()(),_(12,"label"),w(13," Address "),_(14,"input",50),Et("ngModelChange",function(i){X(t);let o=k();return Rt(o.newDelivery.address,i)||(o.newDelivery.address=i),J(i)}),D()(),_(15,"label"),w(16," City "),_(17,"input",51),Et("ngModelChange",function(i){X(t);let o=k();return Rt(o.newDelivery.city,i)||(o.newDelivery.city=i),J(i)}),D()(),_(18,"label"),w(19," State "),_(20,"input",52),Et("ngModelChange",function(i){X(t);let o=k();return Rt(o.newDelivery.state,i)||(o.newDelivery.state=i),J(i)}),D()(),_(21,"label"),w(22," ZIP "),_(23,"input",53),Et("ngModelChange",function(i){X(t);let o=k();return Rt(o.newDelivery.zip,i)||(o.newDelivery.zip=i),J(i)}),D()(),_(24,"label"),w(25," Order in route "),_(26,"input",54),Et("ngModelChange",function(i){X(t);let o=k();return Rt(o.newDelivery.deliveryOrder,i)||(o.newDelivery.deliveryOrder=i),J(i)}),D()(),_(27,"label"),w(28," Dozen "),_(29,"input",55),Et("ngModelChange",function(i){X(t);let o=k();return Rt(o.newDelivery.dozens,i)||(o.newDelivery.dozens=i),J(i)}),D()(),_(30,"label",56),w(31," Notes "),_(32,"textarea",57),Et("ngModelChange",function(i){X(t);let o=k();return Rt(o.newDelivery.notes,i)||(o.newDelivery.notes=i),J(i)}),D()(),be(33,_2,2,1,"div",58),_(34,"div",59),w(35," Address fields can be left blank if unknown. You can reorder or edit later. "),D()(),_(36,"div",60)(37,"button",61),le("click",function(){X(t);let i=k();return J(i.cancelNewDelivery())}),w(38,"Cancel"),D(),_(39,"button",62),le("click",function(){X(t);let i=k();return J(i.saveNewDelivery())}),w(40),D()()()}if(n&2){let t=k();S(7),St("ngModel",t.newDelivery.routeDate),S(),Y("ngForOf",t.routes),S(3),St("ngModel",t.newDelivery.name),S(3),St("ngModel",t.newDelivery.address),S(3),St("ngModel",t.newDelivery.city),S(3),St("ngModel",t.newDelivery.state),S(3),St("ngModel",t.newDelivery.zip),S(3),Y("max",t.deliveries.length+1),St("ngModel",t.newDelivery.deliveryOrder),S(3),St("ngModel",t.newDelivery.dozens),S(3),St("ngModel",t.newDelivery.notes),S(),Y("ngIf",t.newDeliveryErrors.length),S(6),Y("disabled",!t.canSaveNew||t.savingNew),S(),Ie(" ",t.savingNew?"Saving\u2026":"Save"," ")}}function b2(n,e){if(n&1&&(Ui(0),_(1,"div",88)(2,"span",15),w(3,"\u2261"),D(),_(4,"span",89),w(5),D()(),jo()),n&2){let t=k().$implicit;S(5),Ie(" ",t.deliveryOrder+1," ")}}function w2(n,e){if(n&1&&(_(0,"div",90)(1,"span",89),w(2),D()()),n&2){let t=k().$implicit;S(2),Ie(" ",t.deliveryOrder+1," ")}}function C2(n,e){n&1&&(_(0,"span"),w(1,","),D())}function S2(n,e){if(n&1&&(_(0,"option",9),w(1),D()),n&2){let t=e.$implicit;Y("ngValue",t.routeDate),S(),Ie(" ",t.routeDate," ")}}function E2(n,e){if(n&1){let t=tt();_(0,"button",73),le("click",function(){X(t);let i=k(4);return J(i.resubscribeStop(i.editingStop))}),w(1," Resubscribe "),D()}}function x2(n,e){if(n&1){let t=tt();_(0,"button",107),le("click",function(){X(t);let i=k(4);return J(i.unsubscribeStop(i.editingStop))}),w(1," Unsubscribe "),D()}}function I2(n,e){if(n&1){let t=tt();_(0,"div",91)(1,"h3"),w(2,"Edit delivery"),D(),_(3,"div",92)(4,"label"),w(5," Schedule "),_(6,"select",93),Et("ngModelChange",function(i){X(t);let o=k(3);return Rt(o.editDraft.routeDate,i)||(o.editDraft.routeDate=i),J(i)}),be(7,S2,2,2,"option",10),D()(),_(8,"label"),w(9," Name "),_(10,"input",94),Et("ngModelChange",function(i){X(t);let o=k(3);return Rt(o.editDraft.name,i)||(o.editDraft.name=i),J(i)}),D()(),_(11,"label"),w(12," Address "),_(13,"input",95),Et("ngModelChange",function(i){X(t);let o=k(3);return Rt(o.editDraft.address,i)||(o.editDraft.address=i),J(i)}),D()(),_(14,"label"),w(15," City "),_(16,"input",96),Et("ngModelChange",function(i){X(t);let o=k(3);return Rt(o.editDraft.city,i)||(o.editDraft.city=i),J(i)}),D()(),_(17,"label"),w(18," State "),_(19,"input",97),Et("ngModelChange",function(i){X(t);let o=k(3);return Rt(o.editDraft.state,i)||(o.editDraft.state=i),J(i)}),D()(),_(20,"label"),w(21," ZIP "),_(22,"input",98),Et("ngModelChange",function(i){X(t);let o=k(3);return Rt(o.editDraft.zip,i)||(o.editDraft.zip=i),J(i)}),D()(),_(23,"label"),w(24," Order in route "),_(25,"input",99),Et("ngModelChange",function(i){X(t);let o=k(3);return Rt(o.editDraft.deliveryOrder,i)||(o.editDraft.deliveryOrder=i),J(i)}),D()(),_(26,"label"),w(27," Dozen "),_(28,"input",100),Et("ngModelChange",function(i){X(t);let o=k(3);return Rt(o.editDraft.dozens,i)||(o.editDraft.dozens=i),J(i)}),D()(),_(29,"label",56),w(30," Notes "),_(31,"textarea",101),Et("ngModelChange",function(i){X(t);let o=k(3);return Rt(o.editDraft.notes,i)||(o.editDraft.notes=i),J(i)}),D()()(),_(32,"div",60)(33,"div",102),be(34,E2,2,0,"button",103)(35,x2,2,0,"button",104),D(),_(36,"div",105)(37,"button",61),le("click",function(){X(t);let i=k(3);return J(i.cancelEdit())}),w(38,"Cancel"),D(),_(39,"button",106),le("click",function(){X(t);let i=k(3);return J(i.saveEdit())}),w(40,"Save"),D()()()()}if(n&2){let t=k(3);S(6),St("ngModel",t.editDraft.routeDate),S(),Y("ngForOf",t.routes),S(3),St("ngModel",t.editDraft.name),S(3),St("ngModel",t.editDraft.address),S(3),St("ngModel",t.editDraft.city),S(3),St("ngModel",t.editDraft.state),S(3),St("ngModel",t.editDraft.zip),S(3),Y("max",t.deliveries.length),St("ngModel",t.editDraft.deliveryOrder),S(3),St("ngModel",t.editDraft.dozens),S(3),St("ngModel",t.editDraft.notes),S(3),Y("ngIf",t.editingStop&&t.isUnsubscribed(t.editingStop)),S(),Y("ngIf",t.editingStop&&!t.isUnsubscribed(t.editingStop))}}function M2(n,e){if(n&1&&(_(0,"p",115),w(1),D()),n&2){let t=k(4);S(),Ie(" ",t.oneOffDonationDateError," ")}}function R2(n,e){if(n&1&&(_(0,"p",65),w(1),D()),n&2){let t=k(4);S(),Pt(t.oneOffDonationTypeError)}}function T2(n,e){if(n&1){let t=tt();_(0,"div",108)(1,"h3",109),w(2,"One-Time Donation"),D(),_(3,"div",110)(4,"div",111)(5,"app-donation-controls",112),le("donationStatusChange",function(i){X(t);let o=k(3);return J(o.setDonationStatus(i))})("donationMethodChange",function(i){X(t);let o=k(3);return J(o.setDonationMethod(i))})("amountChange",function(i){X(t);let o=k(3);return J(o.onDonationAmountChange(i))}),D(),_(6,"label",113),w(7," Donation date "),_(8,"input",114),le("ngModelChange",function(i){X(t);let o=k(3);return J(o.onOneOffDonationDateChange(i))}),D()(),be(9,M2,2,1,"p",115),D(),be(10,R2,2,1,"p",65),_(11,"div",60)(12,"button",61),le("click",function(){X(t);let i=k(3);return J(i.closeDonationModal(!0))}),w(13,"Cancel"),D(),_(14,"button",62),le("click",function(){X(t);let i=k(3);return J(i.saveDonation())}),w(15," Save "),D()(),_(16,"div",116)(17,"div",117)(18,"span"),w(19,"Total Donations"),D(),_(20,"span"),w(21),ft(22,"number"),D()(),_(23,"div",117)(24,"span"),w(25,"Total Dozen"),D(),_(26,"span"),w(27),D()(),_(28,"div",117)(29,"span"),w(30,"Baseline value"),D(),_(31,"span"),w(32),ft(33,"number"),D()(),_(34,"div",117)(35,"span"),w(36,"Deductible charitable contribution"),D(),_(37,"span"),w(38),ft(39,"number"),D()(),kd(40,118),D()()()}if(n&2){let t,r=k(3),i=ti(17);S(5),Y("donation",(r.donationDraft==null?null:r.donationDraft.donation)||null)("suggestedAmount",(r.donationDraft==null||r.donationDraft.donation==null?null:r.donationDraft.donation.suggestedAmount)||((t=r.donationModalStop==null?null:r.donationModalStop.dozens)!==null&&t!==void 0?t:0)*r.getSuggestedRate())("showNoDonation",!0)("allowReselect",!0)("showQty",!1),S(3),Y("min",r.oneOffDateMin)("max",r.oneOffDateMax)("ngModel",r.oneOffDonationDate),Ut("aria-invalid",r.oneOffDonationDateError?"true":null)("aria-describedby",r.oneOffDonationDateError?"one-off-donation-date-error":null),S(),Dt(r.oneOffDonationDateError?9:-1),S(),Dt(r.oneOffDonationTypeError?10:-1),S(4),Y("disabled",!!r.oneOffDonationDateError||!!r.oneOffDonationTypeError),S(7),Ie("$",qt(22,18,r.donationTotals.donationTotal,"1.2-2"),""),S(6),Pt(r.donationTotals.dozensTotal),S(5),Ie("$",qt(33,21,r.donationTotals.baselineTotal,"1.2-2"),""),S(6),Ie("$",qt(39,24,r.donationTotals.taxableTotal,"1.2-2"),""),S(2),Y("ngTemplateOutlet",i)}}function O2(n,e){if(n&1&&(_(0,"p",122),w(1),D()),n&2){let t=k(4);S(),Ie(" ",t.oneOffDeliveryDateError," ")}}function A2(n,e){if(n&1&&(_(0,"p",65),w(1),D()),n&2){let t=k(4);S(),Pt(t.oneOffDeliveryTypeError)}}function P2(n,e){if(n&1){let t=tt();_(0,"div",108)(1,"h3",109),w(2,"One-Time Delivery"),D(),_(3,"div",110)(4,"div",119)(5,"app-stop-delivery-card",120),le("adjustQty",function(i){X(t);let o=k(3);return J(o.adjustOffDelivered(i))})("donationStatusChange",function(i){X(t);let o=k(3);return J(o.setOffDonationStatus(i))})("donationMethodChange",function(i){X(t);let o=k(3);return J(o.setOffDonationMethod(i))})("amountChange",function(i){X(t);let o=k(3);return J(o.onOffAmountChange(i))})("copyAddress",function(){X(t);let i=k(3);return J(i.copyAddress(i.offScheduleStop))})("openMap",function(){X(t);let i=k(3);return J(i.openMaps(i.offScheduleStop))}),D(),_(6,"label",113),w(7," Delivery date "),_(8,"input",121),le("ngModelChange",function(i){X(t);let o=k(3);return J(o.onOneOffDeliveryDateChange(i))}),D()(),be(9,O2,2,1,"p",122),D(),be(10,A2,2,1,"p",65),_(11,"div",60)(12,"button",61),le("click",function(){X(t);let i=k(3);return J(i.closeOffSchedule(!0))}),w(13,"Cancel"),D(),_(14,"button",62),le("click",function(){X(t);let i=k(3);return J(i.saveOffSchedule())}),w(15," Save "),D()(),_(16,"div",116)(17,"div",117)(18,"span"),w(19,"Total Donations"),D(),_(20,"span"),w(21),ft(22,"number"),D()(),_(23,"div",117)(24,"span"),w(25,"Total Dozen"),D(),_(26,"span"),w(27),D()(),_(28,"div",117)(29,"span"),w(30,"Baseline value"),D(),_(31,"span"),w(32),ft(33,"number"),D()(),_(34,"div",117)(35,"span"),w(36,"Deductible charitable contribution"),D(),_(37,"span"),w(38),ft(39,"number"),D()(),kd(40,118),D()()()}if(n&2){let t,r=k(3),i=ti(17);S(5),Y("stop",r.offScheduleStop)("deliveredQty",r.offDeliveredQty)("donation",r.offDonationDraft)("suggestedAmount",(t=r.offDonationDraft==null?null:r.offDonationDraft.suggestedAmount)!==null&&t!==void 0?t:r.offDeliveredQty*4)("showNoDonation",!0)("allowDonationReselect",!1)("showNotes",!1)("showHeaderInfo",!1)("showStatusPill",!1)("showAddressText",!1),S(3),Y("min",r.oneOffDateMin)("max",r.oneOffDateMax)("ngModel",r.oneOffDeliveryDate),Ut("aria-invalid",r.oneOffDeliveryDateError?"true":null)("aria-describedby",r.oneOffDeliveryDateError?"one-off-delivery-date-error":null),S(),Dt(r.oneOffDeliveryDateError?9:-1),S(),Dt(r.oneOffDeliveryTypeError?10:-1),S(4),Y("disabled",!!r.oneOffDeliveryDateError||!!r.oneOffDeliveryTypeError),S(7),Ie("$",qt(22,23,r.donationTotals.donationTotal,"1.2-2"),""),S(6),Pt(r.donationTotals.dozensTotal),S(5),Ie("$",qt(33,26,r.donationTotals.baselineTotal,"1.2-2"),""),S(6),Ie("$",qt(39,29,r.donationTotals.taxableTotal,"1.2-2"),""),S(2),Y("ngTemplateOutlet",i)}}function k2(n,e){if(n&1){let t=tt();_(0,"div",68),le("cdkDragStarted",function(){X(t);let i=k(2);return J(i.handleDragStart())}),_(1,"div",69)(2,"div",70)(3,"button",71),le("click",function(i){let o=X(t).$implicit,s=k(2);return s.onBackActionClick(i),J(s.isUnsubscribed(o)?s.resubscribeStop(o):s.isSkipped(o)?s.unskipStop(o):s.skipStop(o))}),w(4),D(),_(5,"button",61),le("click",function(i){let o=X(t).$implicit,s=k(2);return s.onBackActionClick(i),J(s.openEdit(o))}),w(6,"Edit"),D(),_(7,"button",72),le("click",function(i){let o=X(t).$implicit,s=k(2);return s.onBackActionClick(i),J(s.resetStop(o))}),w(8,"Reset"),D()(),_(9,"div",70)(10,"button",73),le("click",function(i){let o=X(t).$implicit,s=k(2);return s.onBackActionClick(i),J(s.openDonationDetails(o))}),w(11,"Donation"),D(),_(12,"button",73),le("click",function(i){let o=X(t).$implicit,s=k(2);return s.onBackActionClick(i),J(s.openOffScheduleDelivery(o))}),w(13,"Delivery"),D()()(),_(14,"div",74),le("pointerdown",function(i){let o=X(t).$implicit,s=k(2);return J(s.startSwipe(i,o))})("pointermove",function(i){let o=X(t).$implicit,s=k(2);return J(s.moveSwipe(i,o))})("pointerup",function(i){let o=X(t).$implicit,s=k(2);return J(s.endSwipe(i,o))})("click",function(){let i=X(t).$implicit,o=k(2);return J(o.toggleRow(i))}),be(15,b2,6,1,"ng-container",75)(16,w2,3,1,"ng-template",null,1,zo),_(18,"div",76)(19,"div",77)(20,"div",78),w(21),D(),_(22,"div",79)(23,"span",80),w(24),ft(25,"titlecase"),D()()(),_(26,"div",81)(27,"div",82),w(28),$t(29,"br"),w(30),be(31,C2,2,0,"span",20),w(32),D(),_(33,"div",83)(34,"button",84),le("click",function(i){let o=X(t).$implicit;return k(2).adjustPlanned(o,-1),J(i.stopPropagation())}),w(35,"\u2212"),D(),_(36,"span",85),w(37),D(),_(38,"button",84),le("click",function(i){let o=X(t).$implicit;return k(2).adjustPlanned(o,1),J(i.stopPropagation())}),w(39,"+"),D()()()()(),be(40,I2,41,13,"div",86)(41,T2,41,27,"div",87)(42,P2,41,32,"div",87),D()}if(n&2){let t=e.$implicit,r=ti(17),i=k(2);Mt("open",i.openRowId===t.id),Y("cdkDragDisabled",i.isSwiping||!i.reorderEnabled),S(4),Ie(" ",i.isUnsubscribed(t)?"Resubscribe":i.isSkipped(t)?"Unskip":"Skip"," "),S(10),Xs("transform",i.getRowTransform(t)),S(),Y("ngIf",i.reorderEnabled)("ngIfElse",r),S(6),Pt(t.name),S(2),Mt("pending",!t.status)("delivered",t.status==="delivered")("skipped",t.status==="skipped")("changed",t.status==="changed")("unsubscribed",i.isUnsubscribed(t)),S(),Ie(" ",i.isUnsubscribed(t)?"Unsubscribed":t.status?Bo(25,29,t.status):"Pending"," "),S(4),Ie(" ",t.address||"(no address)"," "),S(2),Ie(" ",t.city,""),S(),Y("ngIf",t.city&&t.state),S(),Rn(" ",t.state," ",t.zip," "),S(5),Pt(t.dozens),S(3),Y("ngIf",(i.editingStop==null?null:i.editingStop.id)===t.id),S(),Y("ngIf",(i.donationModalStop==null?null:i.donationModalStop.id)===t.id),S(),Y("ngIf",(i.offScheduleStop==null?null:i.offScheduleStop.id)===t.id)}}function N2(n,e){if(n&1){let t=tt();_(0,"div")(1,"div",66),le("cdkDropListDropped",function(i){X(t);let o=k();return J(o.drop(i))}),be(2,k2,43,31,"div",67),D()()}if(n&2){let t=k();S(),Y("cdkDropListData",t.filteredDeliveries)("cdkDropListDisabled",t.showSearch&&t.searchTerm.trim()||t.routeDate===t.ALL_SCHEDULES||!t.reorderEnabled),S(),Y("ngForOf",t.filteredDeliveries)}}function F2(n,e){if(n&1&&(_(0,"div",128),w(1),D()),n&2){let t=k(2);S(),Ie(" All receipts \xB7 Tax year ",t.selectedTaxYearLabel," ")}}function L2(n,e){if(n&1&&(_(0,"span",89),w(1),D()),n&2){let t=k().$implicit;S(),Ie(" ",t.deliveryOrder+1," ")}}function V2(n,e){n&1&&(_(0,"span"),w(1,"No donation"),D())}function j2(n,e){n&1&&(_(0,"span"),w(1,"Donation not recorded"),D())}function B2(n,e){if(n&1&&(_(0,"span"),w(1),ft(2,"titlecase"),ft(3,"number"),D()),n&2){let t=k(2).$implicit;S(),Rn(" ",t.donationMethod?Bo(2,2,t.donationMethod):"Donated"," $",qt(3,4,t.donationAmount,"1.2-2")," ")}}function z2(n,e){if(n&1&&(Ui(0),w(1),Ui(2,138),be(3,V2,2,0,"span",139)(4,j2,2,0,"span",139)(5,B2,4,7,"span",139),jo()()),n&2){let t=k().$implicit;S(),Ie(" ",t.dozens," dozen \xA0\u2013\xA0 "),S(),Y("ngSwitch",t.donationStatus),S(),Y("ngSwitchCase","NoDonation"),S(),Y("ngSwitchCase","NotRecorded"),S(),Y("ngSwitchCase","Donated")}}function H2(n,e){n&1&&(_(0,"span"),w(1,"No donation"),D())}function U2(n,e){n&1&&(_(0,"span"),w(1,"Donation not recorded"),D())}function $2(n,e){if(n&1&&(_(0,"span"),w(1),ft(2,"titlecase"),ft(3,"number"),D()),n&2){let t=k(2).$implicit;S(),Rn(" ",t.donationMethod?Bo(2,2,t.donationMethod):"Donated"," $",qt(3,4,t.donationAmount,"1.2-2")," ")}}function q2(n,e){if(n&1&&(Ui(0,138),be(1,H2,2,0,"span",139)(2,U2,2,0,"span",139)(3,$2,4,7,"span",139),jo()),n&2){let t=k().$implicit;Y("ngSwitch",t.donationStatus),S(),Y("ngSwitchCase","NoDonation"),S(),Y("ngSwitchCase","NotRecorded"),S(),Y("ngSwitchCase","Donated")}}function W2(n,e){if(n&1&&(Ui(0),w(1),ft(2,"date"),jo()),n&2){let t=k().$implicit;S(),Ie(" ",$i(2,1,t.eventDate,"short",void 0,"en-US")," ")}}function G2(n,e){if(n&1){let t=tt();_(0,"button",140),le("click",function(){X(t);let i=k().$implicit,o=k(2);return J(o.confirmDeleteRunEntry(i))}),w(1," Delete "),D()}if(n&2){let t=k().$implicit,r=k(2);Ut("aria-label",r.getRunEntryDeleteLabel(t))}}function K2(n,e){n&1&&(_(0,"span",141),w(1,"(no date)"),D())}function Y2(n,e){if(n&1&&(_(0,"p",147),w(1),D()),n&2){let t=k(5);S(),Ie(" ",t.runEntryDateError," ")}}function Q2(n,e){if(n&1){let t=tt();_(0,"label",113),w(1),_(2,"input",146),le("ngModelChange",function(i){X(t);let o=k(4);return J(o.onRunEntryDateChange(i))}),D()(),be(3,Y2,2,1,"p",147)}if(n&2){let t=k(4);S(),Ie(" ",(t.editingRunEntry==null?null:t.editingRunEntry.oneOffKind)==="donation"?"Donation date":"Delivery date"," "),S(),Y("min",t.oneOffDateMin)("max",t.oneOffDateMax)("ngModel",t.runEntryDate),Ut("aria-invalid",t.runEntryDateError?"true":null)("aria-describedby",t.runEntryDateError?"run-entry-date-error":null),S(),Dt(t.runEntryDateError?3:-1)}}function Z2(n,e){if(n&1){let t=tt();_(0,"label"),w(1," Status "),_(2,"select",148),Et("ngModelChange",function(i){X(t);let o=k(4);return Rt(o.runEntryDraft.status,i)||(o.runEntryDraft.status=i),J(i)}),_(3,"option",149),w(4,"Delivered"),D(),_(5,"option",150),w(6,"Skipped"),D()()()}if(n&2){let t=k(4);S(2),St("ngModel",t.runEntryDraft.status)}}function X2(n,e){if(n&1){let t=tt();_(0,"label"),w(1," Order in route "),_(2,"input",151),Et("ngModelChange",function(i){X(t);let o=k(4);return Rt(o.runEntryDraft.deliveryOrder,i)||(o.runEntryDraft.deliveryOrder=i),J(i)}),D()()}if(n&2){let t=k(4);S(2),Y("max",t.runEntries.length),St("ngModel",t.runEntryDraft.deliveryOrder)}}function J2(n,e){if(n&1){let t=tt();_(0,"label"),w(1," Dozen "),_(2,"input",152),Et("ngModelChange",function(i){X(t);let o=k(4);return Rt(o.runEntryDraft.dozens,i)||(o.runEntryDraft.dozens=i),J(i)}),D()()}if(n&2){let t=k(4);S(2),St("ngModel",t.runEntryDraft.dozens)}}function eV(n,e){if(n&1&&(_(0,"p",154),w(1),D()),n&2){let t=k(5);S(),Ie(" ",t.runEntrySuggestedError," ")}}function tV(n,e){if(n&1){let t=tt();_(0,"label"),w(1," Suggested amount (baseline) "),_(2,"input",153),le("ngModelChange",function(i){X(t);let o=k(4);return J(o.onRunEntrySuggestedAmountChange(i))}),D(),be(3,eV,2,1,"p",154),D()}if(n&2){let t=k(4);S(2),Y("ngModel",t.runEntryDraft.suggestedAmount),Ut("aria-invalid",t.runEntrySuggestedError?"true":null)("aria-describedby",t.runEntrySuggestedError?"run-entry-suggested-error":null),S(),Dt(t.runEntrySuggestedError?3:-1)}}function nV(n,e){if(n&1){let t=tt();_(0,"label"),w(1," Donation method "),_(2,"select",155),Et("ngModelChange",function(i){X(t);let o=k(4);return Rt(o.runEntryDraft.donationMethod,i)||(o.runEntryDraft.donationMethod=i),J(i)}),_(3,"option",156),w(4,"(none)"),D(),_(5,"option",157),w(6,"Cash"),D(),_(7,"option",158),w(8,"Ach"),D(),_(9,"option",159),w(10,"Venmo"),D(),_(11,"option",160),w(12,"Paypal"),D(),_(13,"option",161),w(14,"Other"),D()()()}if(n&2){let t=k(4);S(2),St("ngModel",t.runEntryDraft.donationMethod)}}function rV(n,e){if(n&1&&(_(0,"p",163),w(1),D()),n&2){let t=k(5);S(),Ie(" ",t.runEntryAmountError," ")}}function iV(n,e){if(n&1){let t=tt();_(0,"label"),w(1," Donation amount "),_(2,"input",162),le("ngModelChange",function(i){X(t);let o=k(4);return J(o.onRunEntryDonationAmountChange(i))}),D(),be(3,rV,2,1,"p",163),D()}if(n&2){let t=k(4);S(2),Y("ngModel",t.runEntryDraft.donationAmount),Ut("aria-invalid",t.runEntryAmountError?"true":null)("aria-describedby",t.runEntryAmountError?"run-entry-amount-error":null),S(),Dt(t.runEntryAmountError?3:-1)}}function oV(n,e){if(n&1){let t=tt();_(0,"div",108)(1,"h3"),w(2,"Edit receipt"),D(),_(3,"div",110)(4,"div",142)(5,"div",92),be(6,Q2,4,7)(7,Z2,7,1,"label",20)(8,X2,3,2,"label",20)(9,J2,3,1,"label",20)(10,tV,4,4,"label",20),_(11,"label"),w(12," Donation status "),_(13,"select",143),le("ngModelChange",function(i){X(t);let o=k(3);return J(o.onRunEntryDonationStatusChange(i))}),_(14,"option",144),w(15,"No donation"),D(),_(16,"option",145),w(17,"Donated"),D()()(),be(18,nV,15,1,"label",20)(19,iV,4,4,"label",20),D(),_(20,"div",60)(21,"button",61),le("click",function(){X(t);let i=k(3);return J(i.cancelRunEntryEdit())}),w(22," Cancel "),D(),_(23,"button",62),le("click",function(){X(t);let i=k(3);return J(i.saveRunEntryEdit())}),w(24," Save "),D()()()()()}if(n&2){let t=k(3);S(6),Dt((t.editingRunEntry==null?null:t.editingRunEntry.runId)==="oneoff"?6:-1),S(),Y("ngIf",(t.editingRunEntry==null?null:t.editingRunEntry.runId)!=="oneoff"),S(),Y("ngIf",(t.editingRunEntry==null?null:t.editingRunEntry.runId)!=="oneoff"),S(),Y("ngIf",(t.editingRunEntry==null?null:t.editingRunEntry.runId)!=="oneoff"||(t.editingRunEntry==null?null:t.editingRunEntry.oneOffKind)==="delivery"),S(),Y("ngIf",(t.editingRunEntry==null?null:t.editingRunEntry.runId)==="oneoff"&&t.runEntryDraft.donationStatus==="Donated"),S(3),Y("ngModel",t.runEntryDraft.donationStatus),S(5),Y("ngIf",t.runEntryDraft.donationStatus==="Donated"),S(),Y("ngIf",t.runEntryDraft.donationStatus==="Donated"),S(4),Y("disabled",(t.editingRunEntry==null?null:t.editingRunEntry.runId)==="oneoff"&&!!t.runEntryDateError||!!t.runEntryAmountError||!!t.runEntrySuggestedError)}}function sV(n,e){if(n&1){let t=tt();_(0,"div",129)(1,"div",130)(2,"div",90),be(3,L2,2,1,"span",131),D(),_(4,"div",76)(5,"div",77)(6,"div",78),w(7),D(),_(8,"div",79)(9,"span",80),w(10),ft(11,"titlecase"),D()()(),_(12,"div",81)(13,"div",132),be(14,z2,6,5,"ng-container",75)(15,q2,4,4,"ng-template",null,2,zo),D()(),_(17,"div",133)(18,"div",134),be(19,W2,3,6,"ng-container",75),D(),_(20,"div",135)(21,"button",136),le("click",function(){let i=X(t).$implicit,o=k(2);return J(o.openRunEntryEdit(i))}),w(22," Edit "),D(),be(23,G2,2,1,"button",137),D()(),be(24,K2,2,0,"ng-template",null,3,zo),D()(),be(26,oV,25,9,"div",87),D()}if(n&2){let t=e.$implicit,r=ti(16),i=ti(25),o=k(2);S(3),Y("ngIf",!o.viewingAllReceipts),S(4),Ie(" ",t.name," "),S(2),Mt("delivered",t.status==="delivered")("skipped",t.status==="skipped")("donation",t.status==="donation"),S(),Ie(" ",Bo(11,15,t.status)," "),S(4),Y("ngIf",t.status!=="donation")("ngIfElse",r),S(5),Y("ngIf",t.eventDate)("ngIfElse",i),S(4),Dt(o.canDeleteRunEntry(t)?23:-1),S(3),Y("ngIf",(o.editingRunEntry==null?null:o.editingRunEntry.id)===t.id&&o.runEntryDraft)}}function aV(n,e){n&1&&(_(0,"div",164),w(1,` No deliveries found for this route.
`),D())}function lV(n,e){if(n&1){let t=tt();_(0,"div",165)(1,"app-donation-amount-picker",166),le("cancel",function(){X(t);let i=k(2);return J(i.closeAmountPicker())})("save",function(i){X(t);let o=k(2);return J(o.confirmAmountFromPicker(i))}),D()()}if(n&2){let t,r=k(2);S(),Y("currentAmount",r.selectedAmount)("suggestedAmount",(t=r.donationDraft==null||r.donationDraft.donation==null?null:r.donationDraft.donation.suggestedAmount)!==null&&t!==void 0?t:0)}}function cV(n,e){if(n&1&&(_(0,"div"),be(1,F2,2,1,"div",123),_(2,"div",124),be(3,sV,27,17,"div",125),D(),be(4,aV,2,0,"div",126)(5,lV,2,2,"div",127),D()),n&2){let t=k();S(),Y("ngIf",t.viewingAllReceipts),S(2),Y("ngForOf",t.filteredRunEntries),S(),Y("ngIf",!t.loading&&!t.errorMessage&&!t.viewingRun&&!t.deliveries.length),S(),Y("ngIf",t.showAmountPicker)}}var gc=class n{ALL_SCHEDULES="__ALL_SCHEDULES__";route=U(dr);storage=U(wr);router=U(Zn);toast=U(li);backup=U(no);zone=U(gt);routeDate;routes=[];deliveries=[];filteredDeliveries=[];loading=!0;errorMessage="";donationModalStop=null;donationDraft;donationTotals={donationTotal:0,dozensTotal:0,taxableTotal:0,baselineTotal:0};oneOffMinYear=new Date().getFullYear();oneOffMaxYear=this.oneOffMinYear+1;oneOffDateMin=`${this.oneOffMinYear}-01-01`;oneOffDateMax=`${this.oneOffMaxYear}-12-31`;oneOffYearRangeLabel=`${this.oneOffMinYear} and ${this.oneOffMaxYear}`;selectedTaxYearLabel=new Date().getFullYear();oneOffDonationDate="";oneOffDonationDateError="";oneOffDonationDateTouched=!1;oneOffDonationTypeError="";oneOffDeliveryDate="";oneOffDeliveryDateError="";oneOffDeliveryDateTouched=!1;oneOffDeliveryTypeError="";showAmountPicker=!1;selectedAmount=0;donationAmountMax=9999;offScheduleStop=null;offDonationDraft=null;offDeliveredQty=0;pickerMode=null;openRowId=null;isSwiping=!1;swipeThreshold=24;swipeDistance=210;swipeStartX=null;swipeStartY=null;swipeMode="none";showSearch=!1;searchTerm="";showNewForm=!1;savingNew=!1;reorderEnabled=!1;runOptions=[];selectedRunId="live";viewingRun=!1;viewingAllReceipts=!1;runEntries=[];filteredRunEntries=[];receiptHistory=[];receiptHistoryLoading=!1;receiptHistoryBaseRowId=null;allRuns=[];selectedRouteOrRun=null;editingRunEntry=null;runEntryDraft=null;runEntryDate="";runEntryDateError="";runEntryAmountError="";runEntrySuggestedError="";newDelivery={deliveryOrder:0,routeDate:"",name:"",address:"",city:"",state:"",zip:"",dozens:1,notes:""};editingStop=null;editDraft={deliveryOrder:0,routeDate:"",name:"",address:"",city:"",state:"",zip:"",dozens:1,notes:""};noop(){}formatDateInput(e){let t=e.getFullYear(),r=`${e.getMonth()+1}`.padStart(2,"0"),i=`${e.getDate()}`.padStart(2,"0");return`${t}-${r}-${i}`}getTodayDateInput(){return this.formatDateInput(new Date)}formatEventDateForInput(e){if(!e)return"";let t=Zt(e);if(!t)return"";let r=new Date(t);return Number.isNaN(r.getTime())?"":this.formatDateInput(r)}readSelectedTaxYear(){if(typeof localStorage>"u")return;let e=localStorage.getItem("selectedTaxYear");if(!e)return;let t=Number(e);return Number.isFinite(t)?Math.trunc(t):void 0}syncSelectedTaxYear(){let t=this.readSelectedTaxYear()??new Date().getFullYear();return this.selectedTaxYearLabel=t,t}validateOneOffDate(e){return e?/^\d{4}-\d{2}-\d{2}$/.test(e)?e<this.oneOffDateMin||e>this.oneOffDateMax?`Date must be between ${this.oneOffYearRangeLabel}.`:"":"Enter a valid date.":"Date is required."}refreshOneOffDateRange(){return ee(this,null,function*(){let e=new Date,t=e.getFullYear(),r=this.syncSelectedTaxYear(),i=new Set,o=this.resolveBaselineYear(t);i.add(o),i.add(r);let[s,a,c]=yield Promise.all([this.storage.getAllDeliveries(),this.storage.getAllRunEntries(),this.storage.getAllRuns()]),d=new Map;c.forEach(b=>{let v=b.date??b.routeDate;v&&(d.set(b.id,v),i.add(cn(v,e)))}),a.forEach(b=>{let v=b.eventDate??d.get(b.runId);v&&i.add(cn(v,e))}),s.forEach(b=>{b.status==="delivered"&&i.add(cn(b.deliveredAt,e)),(b.oneOffDonations??[]).forEach(v=>{i.add(cn(v.date,e))}),(b.oneOffDeliveries??[]).forEach(v=>{i.add(cn(v.date,e))})});let h=i.size>0?Math.min(...i):t,g=i.size>0?Math.max(...i):t;this.setOneOffDateRange(h,g)})}setOneOffDateRange(e,t){this.oneOffMinYear=e,this.oneOffMaxYear=t,this.oneOffDateMin=`${e}-01-01`,this.oneOffDateMax=`${t}-12-31`,this.oneOffYearRangeLabel=e===t?`${e}`:`${e} and ${t}`,this.oneOffDonationDateTouched&&(this.oneOffDonationDateError=this.validateOneOffDate(this.oneOffDonationDate)),this.oneOffDeliveryDateTouched&&(this.oneOffDeliveryDateError=this.validateOneOffDate(this.oneOffDeliveryDate))}resolveBaselineYear(e){if(typeof localStorage>"u")return e;let t=localStorage.getItem("lastImportAt");if(!t)return e;let r=new Date(t);return Number.isNaN(r.getTime())?e:r.getFullYear()}validateDonationSelection(e,t){let r=t?.allowNotRecorded??!1;return!e||e.status==="NotRecorded"?r?"":"Select a donation type before saving.":e.status==="Donated"&&!e.method?"Select a donation method before saving.":""}parseAmountInput(e){if(e===""||e===null||e===void 0)return null;let t=Number(e);return Number.isFinite(t)?t:null}clampAmount(e){return Math.min(this.donationAmountMax,Math.max(0,e))}validateRunEntryAmount(e,t){return t!=="Donated"?"":e==null?"Donation amount is required when status is Donated.":e<0||e>this.donationAmountMax?`Donation amount must be between $0 and $${this.donationAmountMax}.`:""}validateRunEntrySuggestedAmount(e,t){return t!=="Donated"||e==null?"":e<0||e>this.donationAmountMax?`Suggested amount must be between $0 and $${this.donationAmountMax}.`:""}refreshRunEntryAmountError(){if(!this.runEntryDraft){this.runEntryAmountError="";return}this.runEntryAmountError=this.validateRunEntryAmount(this.runEntryDraft.donationAmount,this.runEntryDraft.donationStatus)}refreshRunEntrySuggestedError(){if(!this.runEntryDraft||this.editingRunEntry?.runId!=="oneoff"){this.runEntrySuggestedError="";return}this.runEntrySuggestedError=this.validateRunEntrySuggestedAmount(this.runEntryDraft.suggestedAmount??null,this.runEntryDraft.donationStatus)}ensureRunEntryAmount(){return this.refreshRunEntryAmountError(),!this.runEntryAmountError}ensureRunEntrySuggestedAmount(){return this.refreshRunEntrySuggestedError(),!this.runEntrySuggestedError}setOneOffDonationDate(e){this.oneOffDonationDate=e,this.oneOffDonationDateError=this.validateOneOffDate(e),this.donationDraft?.donation&&(this.donationDraft.donation.date=e)}setOneOffDeliveryDate(e){this.oneOffDeliveryDate=e,this.oneOffDeliveryDateError=this.validateOneOffDate(e),this.offDonationDraft&&(this.offDonationDraft.date=e)}setRunEntryDate(e){this.runEntryDate=e,this.runEntryDateError=this.validateOneOffDate(e)}resetOneOffDonationDate(){this.oneOffDonationDate="",this.oneOffDonationDateError="",this.oneOffDonationDateTouched=!1}resetOneOffDeliveryDate(){this.oneOffDeliveryDate="",this.oneOffDeliveryDateError="",this.oneOffDeliveryDateTouched=!1}resetRunEntryDate(){this.runEntryDate="",this.runEntryDateError=""}resetOneOffDonationTypeError(){this.oneOffDonationTypeError=""}resetOneOffDeliveryTypeError(){this.oneOffDeliveryTypeError=""}ensureOneOffDonationType(){let e=this.validateDonationSelection(this.donationDraft?.donation);return this.oneOffDonationTypeError=e,!e}ensureOneOffDeliveryType(){let e=this.validateDonationSelection(this.offDonationDraft);return this.oneOffDeliveryTypeError=e,!e}refreshOneOffDonationTypeError(){this.oneOffDonationTypeError&&(this.oneOffDonationTypeError=this.validateDonationSelection(this.donationDraft?.donation))}refreshOneOffDeliveryTypeError(){this.oneOffDeliveryTypeError&&(this.oneOffDeliveryTypeError=this.validateDonationSelection(this.offDonationDraft))}resolveOneOffDonationTimestamp(){return this.oneOffDonationDateTouched?this.oneOffDonationDate:new Date().toISOString()}resolveOneOffDeliveryTimestamp(){return this.oneOffDeliveryDateTouched?this.oneOffDeliveryDate:new Date().toISOString()}ensureOneOffDonationDate(){let e=this.validateOneOffDate(this.oneOffDonationDate);return this.oneOffDonationDateError=e,!e}ensureOneOffDeliveryDate(){let e=this.validateOneOffDate(this.oneOffDeliveryDate);return this.oneOffDeliveryDateError=e,!e}ensureRunEntryDate(){let e=this.validateOneOffDate(this.runEntryDate);return this.runEntryDateError=e,!e}onOneOffDonationDateChange(e){this.oneOffDonationDateTouched=!0,this.setOneOffDonationDate(e)}onOneOffDeliveryDateChange(e){this.oneOffDeliveryDateTouched=!0,this.setOneOffDeliveryDate(e)}onRunEntryDateChange(e){this.setRunEntryDate(e)}onRunEntryDonationStatusChange(e){this.runEntryDraft&&(this.runEntryDraft.donationStatus=e,e!=="Donated"&&(this.runEntryAmountError=""),this.refreshRunEntryAmountError(),this.refreshRunEntrySuggestedError())}onRunEntryDonationAmountChange(e){if(!this.runEntryDraft)return;let t=this.parseAmountInput(e);this.runEntryDraft.donationAmount=t,this.refreshRunEntryAmountError()}onRunEntrySuggestedAmountChange(e){if(!this.runEntryDraft)return;let t=this.parseAmountInput(e);this.runEntryDraft.suggestedAmount=t,this.refreshRunEntrySuggestedError()}startSwipe(e,t){this.swipeStartX=e.clientX,this.swipeStartY=e.clientY,this.swipeMode="none",this.isSwiping=!1}openOffScheduleDelivery(e){this.closeSwipe(),console.log("openOffScheduleDelivery fired for",e.id),this.offScheduleStop=e;let t=this.storage.getSuggestedRate(),r=(e.dozens??0)*t,i=this.getTodayDateInput();this.oneOffDeliveryDateTouched=!1;let o=e.donation?.status,s=o&&o!=="NotRecorded"?o:"NoDonation",a=e.donation?.amount??(s==="NoDonation"?0:void 0);this.offDonationDraft={status:s,method:e.donation?.method,amount:a??r,suggestedAmount:r,date:i},this.setOneOffDeliveryDate(i),this.resetOneOffDeliveryTypeError(),this.offDeliveredQty=e.deliveredDozens??e.dozens??0,this.donationTotals=this.computeOneOffTotals(e,this.syncSelectedTaxYear()),this.loadReceiptHistory(e)}closeOffSchedule(e=!1){e&&this.offScheduleStop&&this.toast.show(`Delivery edit cancelled for ${this.offScheduleStop.name}`,"error",2600),this.offScheduleStop=null,this.offDonationDraft=null,this.offDeliveredQty=0,this.pickerMode=null,this.resetOneOffDeliveryDate(),this.resetOneOffDeliveryTypeError(),this.clearReceiptHistory()}setOffDonationStatus(e){if(!this.offDonationDraft)return;let t=e==="NotRecorded"?"NoDonation":e;this.offDonationDraft.status=t,t==="NoDonation"?(this.offDonationDraft.amount=0,this.offDonationDraft.method=void 0):this.offDonationDraft.amount=this.offDonationDraft.amount??this.offDonationDraft.suggestedAmount??0,this.refreshOneOffDeliveryTypeError()}setOffDonationMethod(e){if(!this.offDonationDraft)return;let t=this.offDonationDraft.status==="NoDonation"||this.offDonationDraft.status==="NotRecorded"||this.offDonationDraft.amount==null||this.offDonationDraft.amount===0;this.offDonationDraft.status="Donated",this.offDonationDraft.method=e,t&&(this.offDonationDraft.amount=this.offDonationDraft.suggestedAmount??0),this.refreshOneOffDeliveryTypeError()}adjustOffDelivered(e){let t=this.offDeliveredQty||0,r=this.offDonationDraft?.suggestedAmount??t*4,i=Math.max(0,t+e);this.offDeliveredQty=i,this.offDonationDraft&&(this.offDonationDraft.suggestedAmount=i*4,this.offDonationDraft.status==="Donated"&&(this.offDonationDraft.amount==null||this.offDonationDraft.amount===r)&&(this.offDonationDraft.amount=i*4))}saveOffSchedule(){return ee(this,null,function*(){if(!this.offScheduleStop||!this.offDonationDraft){this.closeOffSchedule();return}if(!this.ensureOneOffDeliveryDate()||!this.ensureOneOffDeliveryType())return;let e=this.offScheduleStop,t=Ce(Z({},this.offDonationDraft),{date:this.resolveOneOffDeliveryTimestamp()});yield this.storage.appendOneOffDelivery(e.id,this.offDeliveredQty||e.dozens,t),this.toast.show("Delivery saved"),yield this.loadDeliveries(),this.closeOffSchedule()})}openOffAmountInput(){}onOffAmountChange(e){if(!this.offDonationDraft)return;let t=Math.max(0,Number(e)||0);(t>0||this.offDonationDraft.status==="Donated")&&(this.offDonationDraft.status="Donated"),this.offDonationDraft.amount=t,this.offDonationDraft.date=this.oneOffDeliveryDate||this.offDonationDraft.date,this.offDonationDraft.suggestedAmount=this.offDonationDraft.suggestedAmount??this.offDeliveredQty*4,this.refreshOneOffDeliveryTypeError()}copyAddress(e){return ee(this,null,function*(){let t=e??this.offScheduleStop;if(!t)return;let r=`${t.address}, ${t.city}, ${t.state} ${t.zip??""}`.trim();try{if(navigator.clipboard?.writeText)yield navigator.clipboard.writeText(r);else{let i=document.createElement("textarea");i.value=r,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i)}this.toast.show("Address copied")}catch(i){console.error("Copy failed",i),this.toast.show("Copy failed","error")}})}openMaps(e){let t=e??this.offScheduleStop;if(!t)return;let r=`${t.address}, ${t.city}, ${t.state} ${t.zip??""}`.trim(),i=encodeURIComponent(r);if(typeof navigator<"u"){let o=navigator.userAgent||"";if(/iPad|iPhone|iPod/.test(o)){this.navigateToUrl(`maps://?q=${i}`);return}if(/Android/i.test(o)){this.navigateToUrl(`geo:0,0?q=${i}`);return}}this.navigateToUrl(`https://www.google.com/maps/search/?api=1&query=${i}`)}navigateToUrl(e){window.location.assign(e)}moveSwipe(e,t){if(this.swipeStartX===null||this.swipeStartY===null)return;let r=e.clientX-this.swipeStartX,i=e.clientY-this.swipeStartY,o=Math.abs(r),s=Math.abs(i);this.swipeMode==="none"&&o>3&&o>=s&&(this.swipeMode="swipe",this.isSwiping=!0),this.swipeMode==="swipe"&&e.preventDefault()}endSwipe(e,t){if(this.swipeStartX===null)return;let r=e.clientX-this.swipeStartX;this.swipeMode==="swipe"&&(r<-this.swipeThreshold?(this.openRowId=t.id,(this.donationModalStop||this.offScheduleStop)&&(this.closeDonationModal(!0),this.closeOffSchedule(!0))):r>this.swipeThreshold&&(this.openRowId=null)),this.swipeStartX=null,this.swipeStartY=null,this.swipeMode="none",this.isSwiping=!1}toggleRow(e){if(this.isSwiping)return;this.editingStop&&(this.editingStop=null);let t=this.openRowId!==e.id;this.openRowId=t?e.id:null,t&&(this.donationModalStop||this.offScheduleStop)&&(this.closeDonationModal(!0),this.closeOffSchedule(!0))}onBackActionClick(e){e.stopPropagation(),e.preventDefault()}closeSwipe(){this.openRowId=null,this.isSwiping=!1}handleDragStart(){this.openRowId=null}getRowTransform(e){return this.openRowId===e.id?`translateX(-${this.swipeDistance}px)`:"translateX(0)"}openNewDeliveryForm(){this.showNewForm=!0,this.newDelivery.routeDate=this.routeDate??""}cancelNewDelivery(){this.showNewForm=!1,this.resetNewDelivery()}get canSaveNew(){return!!this.routeDate&&!!this.newDelivery.name.trim()&&Number(this.newDelivery.dozens)>0}get newDeliveryErrors(){let e=[];return this.newDelivery.name.trim()||e.push("Name is required."),Number(this.newDelivery.dozens)>0||e.push("Dozens must be greater than 0."),Number(this.newDelivery.deliveryOrder)>0||e.push("Order must be at least 1."),e}saveNewDelivery(){return ee(this,null,function*(){let e=this.newDelivery.routeDate||this.routeDate;if(!(!e||!this.canSaveNew)){this.savingNew=!0;try{yield this.storage.addDelivery(e,Ce(Z({},this.newDelivery),{dozens:Number(this.newDelivery.dozens)||0,routeDate:e})),this.routeDate=e,this.persistRouteSelection(),this.toast.show("Delivery added"),this.resetNewDelivery(),this.showNewForm=!1,yield this.loadDeliveries()}catch(t){console.error("Failed to add delivery",t),this.errorMessage="Failed to add delivery.",this.toast.show("Failed to add delivery","error")}finally{this.savingNew=!1}}})}resetNewDelivery(){let e=this.deliveries.length+1;this.newDelivery={deliveryOrder:e,routeDate:this.routeDate??"",name:"",address:"",city:"",state:"",zip:"",dozens:1,notes:""}}ngOnInit(){return ee(this,null,function*(){this.syncSelectedTaxYear(),this.routes=yield this.storage.getRoutes(),this.allRuns=yield this.storage.getAllRuns(),this.routeDate=this.route.snapshot.paramMap.get("routeDate")||void 0,this.routeDate||(this.routeDate=yield this.pickFallbackRoute());let e=localStorage.getItem("plannerReorderEnabled");if(this.reorderEnabled=e==="true",yield this.loadRunsForRoute(),this.newDelivery.routeDate=this.routeDate??"",this.routeDate?this.selectedRouteOrRun=`route:${this.routeDate}`:this.selectedRouteOrRun=null,!this.routeDate){this.errorMessage="No route selected.",this.loading=!1;return}yield this.loadDeliveries(),yield this.refreshOneOffDateRange(),this.persistRouteSelection()})}loadDeliveries(){return ee(this,null,function*(){this.loading=!0,this.errorMessage="";try{if(!this.routeDate){this.deliveries=[],this.filteredDeliveries=[],this.errorMessage="No route selected.";return}let e=[];this.routeDate===this.ALL_SCHEDULES?e=(yield this.storage.getAllDeliveries()).sort((r,i)=>{let o=(r.name||"").toLocaleLowerCase(),s=(i.name||"").toLocaleLowerCase(),a=o.localeCompare(s);if(a!==0)return a;let c=(r.routeDate||"").localeCompare(i.routeDate||"");return c!==0?c:(r.sortIndex??0)-(i.sortIndex??0)}):e=yield this.storage.getDeliveriesByRoute(this.routeDate),this.deliveries=e.map(t=>this.normalizeDelivery(t)),this.applyFilter(!1),yield this.loadRunsForRoute()}catch(e){console.error(e),this.errorMessage="Failed to load deliveries."}finally{this.loading=!1}})}drop(e){return ee(this,null,function*(){this.showSearch&&this.searchTerm.trim()||(wh(this.deliveries,e.previousIndex,e.currentIndex),this.deliveries=this.deliveries.map((t,r)=>Ce(Z({},t),{sortIndex:r,deliveryOrder:r})),yield this.storage.saveSortOrder(this.deliveries),this.applyFilter(!1))})}startRun(){this.routeDate&&(localStorage.setItem("currentRoute",this.routeDate),this.router.navigate(["/run",this.routeDate]))}resetStop(e){return ee(this,null,function*(){this.closeSwipe(),yield this.storage.resetDelivery(e.id),e.dozens=e.originalDozens??e.dozens,e.status="",e.deliveredDozens=void 0,e.donation={status:"NoDonation",amount:0,suggestedAmount:(e.dozens??0)*4},e.updatedAt=new Date().toISOString(),yield this.loadDeliveries(),this.applyFilter(!1)})}updatePlanned(e,t){return ee(this,null,function*(){let r=Math.max(0,Number(t)||0);e.originalDozens==null&&(e.originalDozens=e.dozens),yield this.storage.updatePlannedDozens(e.id,r),e.dozens=r,e.deliveredDozens=void 0,e.updatedAt=new Date().toISOString(),e.donation&&(e.donation.suggestedAmount=r*4),e.status=this.storage.computeChangeStatus(e),this.applyFilter(!1)})}skipStop(e){return ee(this,null,function*(){this.closeSwipe(),yield this.storage.markSkipped(e.id,"Canceled"),yield this.loadDeliveries(),this.applyFilter(!1)})}isSkipped(e){return!!e&&e.status==="skipped"}unskipStop(e){return ee(this,null,function*(){if(this.isUnsubscribed(e)){yield this.resubscribeStop(e);return}this.closeSwipe(),yield this.storage.updateDeliveryFields(e.id,{status:"",skippedAt:void 0,skippedReason:void 0,synced:!1,updatedAt:new Date().toISOString()}),yield this.loadDeliveries(),this.applyFilter(!1)})}resetRoute(){return ee(this,null,function*(){!this.routeDate||!window.confirm("Reset route? This will clear statuses, planned adjustments, and donation info.")||(yield this.storage.resetRoute(this.routeDate),yield this.loadDeliveries())})}pickFallbackRoute(){return ee(this,null,function*(){let e=localStorage.getItem("currentRoute"),t=this.routes.length?this.routes:yield this.storage.getRoutes();return e&&t.some(r=>r.routeDate===e)?e:t[0]?.routeDate})}adjustPlanned(e,t){return ee(this,null,function*(){let r=Math.max(0,(e.dozens||0)+t);yield this.updatePlanned(e,r)})}onRouteChange(e){if(!e){this.routeDate=void 0,this.deliveries=[],this.filteredDeliveries=[],this.selectedRouteOrRun=null;return}this.routeDate=e,e!==this.ALL_SCHEDULES&&this.persistRouteSelection(),this.selectedRouteOrRun=`route:${e}`,this.loadDeliveries()}persistRouteSelection(){this.routeDate&&this.routeDate!==this.ALL_SCHEDULES&&(localStorage.setItem("currentRoute",this.routeDate),localStorage.setItem("lastSelectedRoute",this.routeDate))}getDonationPillLabel(e){let t=(e.dozens??0)*this.storage.getSuggestedRate(),r=e.donation;if(!r||r.status==="NotRecorded")return"Donation";if(r.status==="NoDonation")return"No donation";let i=r.amount??t;switch(r.method){case"cash":return`Cash $${i}`;case"venmo":return`Venmo $${i}`;case"other":return`Donated $${i}`;default:return`Donated $${i}`}}getDonationPillClass(e){let t=e.donation;return!t||t.status==="NotRecorded"?"pill pill-muted":t.status==="NoDonation"?"pill pill-neutral":t.method==="cash"?"pill pill-cash":t.method==="venmo"?"pill pill-venmo":"pill pill-donated"}openDonationDetails(e){this.closeSwipe(),this.donationModalStop=e;let t=this.storage.getSuggestedRate(),r=this.getTodayDateInput();this.oneOffDonationDateTouched=!1;let i=e.donation?.status,o=i&&i!=="NotRecorded"?i:"NoDonation",s=e.donation?.amount??(o==="NoDonation"?0:void 0);this.donationDraft=Ce(Z({},e),{donation:{status:o,method:e.donation?.method,amount:s,suggestedAmount:(e.dozens??0)*t,date:r,note:e.donation?.note}}),this.setOneOffDonationDate(r),this.resetOneOffDonationTypeError(),this.donationTotals=this.computeOneOffTotals(e,this.syncSelectedTaxYear()),this.refreshDonationTotals(e),this.loadReceiptHistory(e)}closeDonationModal(e=!1){e&&this.donationModalStop&&this.toast.show(`Donation edit cancelled for ${this.donationModalStop.name}`,"error",2600),this.donationModalStop=null,this.donationDraft=void 0,this.showAmountPicker=!1,this.pickerMode=null,this.resetOneOffDonationDate(),this.resetOneOffDonationTypeError(),this.clearReceiptHistory()}onDonationQtyChange(e){if(!this.donationDraft)return;let t=this.storage.getSuggestedRate(),r=Math.max(0,Number(e)||0);this.donationDraft.dozens=r;let i=this.donationDraft.donation??{status:"NoDonation",amount:0,suggestedAmount:r*t},o=i.suggestedAmount??r*t;i.suggestedAmount=r*t,i.status==="Donated"&&(i.amount==null||i.amount===o)&&(i.amount=i.suggestedAmount),this.donationDraft.donation=i}saveDonation(){if(!this.donationModalStop||!this.donationDraft?.donation){this.closeDonationModal();return}if(!this.ensureOneOffDonationDate()||!this.ensureOneOffDonationType())return;let e=this.donationDraft.donation;if(e.suggestedAmount=(this.donationModalStop.dozens??0)*this.storage.getSuggestedRate(),e.date=this.resolveOneOffDonationTimestamp(),this.storage.appendOneOffDonation(this.donationModalStop.id,e),this.toast.show("Donation saved"),this.donationModalStop){let t=Array.isArray(this.donationModalStop.oneOffDonations)?[...this.donationModalStop.oneOffDonations]:[];t.push(e),this.donationModalStop.oneOffDonations=t,this.refreshDonationTotals(this.donationModalStop)}this.closeDonationModal()}loadReceiptHistory(e){return ee(this,null,function*(){let t=e.baseRowId,r=this.syncSelectedTaxYear();this.receiptHistoryBaseRowId=t,this.receiptHistoryLoading=!0,this.receiptHistory=[];try{let i=yield this.storage.getReceiptHistoryByBaseRowId(t,r);this.receiptHistoryBaseRowId===t&&(this.receiptHistory=i)}catch(i){console.error("Failed to load receipt history",i),this.receiptHistoryBaseRowId===t&&(this.receiptHistory=[])}finally{this.receiptHistoryBaseRowId===t&&(this.receiptHistoryLoading=!1)}})}clearReceiptHistory(){this.receiptHistoryBaseRowId=null,this.receiptHistoryLoading=!1,this.receiptHistory=[]}formatReceiptStatus(e){switch(e){case"delivered":return"Delivered";case"skipped":return"Skipped";case"donation":return"Donation";default:return"Receipt"}}formatReceiptDozens(e){let t=Math.max(0,Number(e.dozens)||0);return`${t} dozen${t===1?"":"s"}`}formatReceiptDonationMethod(e){switch(e){case"cash":return"Cash";case"venmo":return"Venmo";case"ach":return"ACH";case"paypal":return"PayPal";case"other":return"Other";default:return"Donated"}}canDeleteReceiptHistoryEntry(e){return e.kind==="run"?!!e.runEntryId:e.kind==="oneOffDonation"||e.kind==="oneOffDelivery"?!!e.deliveryId&&e.oneOffIndex!=null:!1}getReceiptHistoryDeleteLabel(e){let t=this.formatReceiptDateLabel(e.date);return`Delete ${this.formatReceiptStatus(e.status).toLowerCase()} receipt from ${t}`}confirmDeleteReceiptHistory(e){return ee(this,null,function*(){if(!this.canDeleteReceiptHistoryEntry(e))return;let t=this.getReceiptHistoryDeleteLabel(e);if(window.confirm(`${t}?

This cannot be undone.`))try{yield this.deleteReceiptHistoryEntry(e),this.toast.show("Receipt deleted");let i=this.getReceiptHistoryStop();i&&(yield this.loadReceiptHistory(i),yield this.refreshDonationTotals(i))}catch(i){console.error("Failed to delete receipt",i),this.toast.show("Failed to delete receipt","error")}})}canDeleteRunEntry(e){return e.runId==="oneoff"?!!e.deliveryId&&e.oneOffIndex!=null&&!!e.oneOffKind:!!e.id}getRunEntryDeleteLabel(e){let t=this.formatReceiptDateLabel(e.eventDate??""),r=this.formatReceiptStatus(e.status).toLowerCase(),i=e.name?.trim()?` for ${e.name}`:"";return`Delete ${r} receipt${i} from ${t}`}confirmDeleteRunEntry(e){return ee(this,null,function*(){if(!this.canDeleteRunEntry(e))return;let t=this.getRunEntryDeleteLabel(e);if(window.confirm(`${t}?

This cannot be undone.`))try{yield this.deleteRunEntry(e),this.toast.show("Receipt deleted"),this.editingRunEntry?.id===e.id&&this.cancelRunEntryEdit(),yield this.reloadRunEntriesView(),this.applyFilter(!1)}catch(i){console.error("Failed to delete receipt",i),this.toast.show("Failed to delete receipt","error")}})}formatReceiptDateLabel(e){if(!e)return"No date";let t=new Date(e);return Number.isNaN(t.valueOf())?"No date":t.toLocaleDateString("en-US")}getReceiptHistoryStop(){return this.donationModalStop??this.offScheduleStop??null}deleteReceiptHistoryEntry(e){return ee(this,null,function*(){if(e.kind==="run"&&e.runEntryId){yield this.storage.deleteRunEntry(e.runEntryId);return}if(e.kind==="oneOffDonation"&&e.deliveryId&&e.oneOffIndex!=null){yield this.storage.deleteOneOffDonationByIndex(e.deliveryId,e.oneOffIndex);return}e.kind==="oneOffDelivery"&&e.deliveryId&&e.oneOffIndex!=null&&(yield this.storage.deleteOneOffDeliveryByIndex(e.deliveryId,e.oneOffIndex))})}deleteRunEntry(e){return ee(this,null,function*(){if(e.runId==="oneoff"){e.oneOffKind==="donation"&&e.deliveryId&&e.oneOffIndex!=null?yield this.storage.deleteOneOffDonationByIndex(e.deliveryId,e.oneOffIndex):e.oneOffKind==="delivery"&&e.deliveryId&&e.oneOffIndex!=null&&(yield this.storage.deleteOneOffDeliveryByIndex(e.deliveryId,e.oneOffIndex));return}e.id&&(yield this.storage.deleteRunEntry(e.id))})}reloadRunEntriesView(){return ee(this,null,function*(){if(this.viewingAllReceipts){yield this.loadAllReceipts(),this.filteredRunEntries=[...this.runEntries];return}if(!this.selectedRunId)return;let e=this.allRuns.find(r=>r.id===this.selectedRunId)??null,t=yield this.storage.getRunEntries(this.selectedRunId);this.runEntries=t.slice().sort((r,i)=>(r.deliveryOrder??0)-(i.deliveryOrder??0)).map(r=>Ce(Z({},r),{eventDate:r.eventDate??e?.date})),this.filteredRunEntries=[...this.runEntries]})}setDonationStatus(e){if(!this.donationDraft)return;let t=this.storage.getSuggestedRate(),r=this.donationDraft.donation??{status:"NoDonation",amount:0,suggestedAmount:(this.donationDraft.dozens??0)*t},i=e==="NotRecorded"?"NoDonation":e;r.status=i,i==="NoDonation"&&(r.method=void 0,r.amount=0),r.suggestedAmount=(this.donationDraft.dozens??0)*t,this.donationDraft.donation=r,this.refreshOneOffDonationTypeError()}setDonationMethod(e){if(!this.donationDraft)return;let t=this.storage.getSuggestedRate(),r=this.donationDraft.donation??{status:"NoDonation",amount:0,suggestedAmount:(this.donationDraft.dozens??0)*t},i=r.status==="NoDonation"||r.status==="NotRecorded"||r.amount==null||r.amount===0;r.status="Donated",r.method=e,r.suggestedAmount=(this.donationDraft.dozens??0)*t,i&&(r.amount=r.suggestedAmount),this.donationDraft.donation=r,this.refreshOneOffDonationTypeError()}openAmountPicker(){this.donationDraft&&(this.pickerMode="main",this.selectedAmount=this.donationDraft.donation?.amount??this.donationDraft.donation?.suggestedAmount??(this.donationDraft.dozens??0)*4,this.showAmountPicker=!0)}closeAmountPicker(){this.showAmountPicker=!1}confirmAmountFromPicker(e){if(this.pickerMode==="off"){if(!this.offDonationDraft)return;this.offDonationDraft.status=this.offDonationDraft.status||"Donated",this.offDonationDraft.amount=e,this.offDonationDraft.date=this.oneOffDeliveryDate||this.offDonationDraft.date,this.refreshOneOffDeliveryTypeError()}else{if(!this.donationDraft)return;let t=this.donationDraft.donation??{status:"Donated",suggestedAmount:(this.donationDraft.dozens??0)*4};t.status="Donated",t.amount=e,t.date=this.oneOffDonationDate||t.date,t.suggestedAmount=(this.donationDraft.dozens??0)*4,this.donationDraft.donation=t,this.refreshOneOffDonationTypeError()}this.showAmountPicker=!1,this.pickerMode=null}onDonationAmountChange(e){if(!this.donationDraft?.donation)return;let t=this.donationDraft.donation,r=Math.max(0,Number(e)||0);(r>0||t.status==="Donated")&&(t.status="Donated"),t.amount=r,t.date=this.oneOffDonationDate||t.date,t.suggestedAmount=(this.donationDraft.dozens??0)*4,this.donationDraft.donation=t,this.refreshOneOffDonationTypeError()}openEdit(e){this.closeSwipe(),this.editingStop=e,this.editDraft={deliveryOrder:(e.deliveryOrder??e.sortIndex??0)+1,routeDate:e.routeDate,name:e.name,address:e.address,city:e.city,state:e.state,zip:e.zip??"",dozens:e.dozens,notes:e.notes??""}}cancelEdit(){this.editingStop=null}toggleReorder(){this.reorderEnabled=!this.reorderEnabled}openRunEntryEdit(e){this.editingRunEntry=e;let t=e.donationStatus==="NotRecorded"?"NoDonation":e.donationStatus,r=t==="Donated"?e.donationMethod??"":"",i=t==="NoDonation"?0:e.donationAmount;if(this.runEntryDraft={status:e.status,dozens:e.dozens,deliveryOrder:(e.deliveryOrder??0)+1,donationStatus:t,donationMethod:r,donationAmount:i},this.resetRunEntryDate(),this.refreshRunEntryAmountError(),this.refreshRunEntrySuggestedError(),e.runId==="oneoff"&&e.deliveryId&&e.oneOffIndex!=null){let o=this.formatEventDateForInput(e.eventDate);this.setRunEntryDate(o),this.loadOneOffSuggested(e)}}loadOneOffSuggested(e){return ee(this,null,function*(){if(!e.deliveryId&&e.oneOffIndex==null||!this.runEntryDraft||this.editingRunEntry?.id!==e.id)return;let r=yield this.storage.getDeliveryById(e.deliveryId);if(!r)return;let i;e.oneOffKind==="donation"?i=r.oneOffDonations?.[e.oneOffIndex]?.suggestedAmount:e.oneOffKind==="delivery"&&(i=r.oneOffDeliveries?.[e.oneOffIndex]?.donation?.suggestedAmount),i!=null&&this.editingRunEntry?.id===e.id&&this.runEntryDraft&&(this.runEntryDraft=Ce(Z({},this.runEntryDraft),{suggestedAmount:i}),this.refreshRunEntrySuggestedError())})}onRouteOrRunChange(e){return ee(this,null,function*(){if(this.selectedRouteOrRun=e,this.editingRunEntry=null,this.runEntryDraft=null,this.resetRunEntryDate(),this.resetRunEntryErrors(),this.searchTerm="",this.editingStop=null,this.openRowId=null,!e){this.routeDate=void 0,this.viewingRun=!1,this.viewingAllReceipts=!1,this.selectedRunId="live",this.deliveries=[],this.filteredDeliveries=[],this.runEntries=[],this.filteredRunEntries=[],localStorage.removeItem("currentRunId");return}if(e===this.ALL_SCHEDULES||e.startsWith("route:")){let t=e===this.ALL_SCHEDULES?this.ALL_SCHEDULES:e.slice(6);this.routeDate=t===this.ALL_SCHEDULES?this.ALL_SCHEDULES:t,this.routeDate&&this.routeDate!==this.ALL_SCHEDULES&&(this.persistRouteSelection(),localStorage.removeItem("currentRunId")),this.viewingRun=!1,this.viewingAllReceipts=!1,this.selectedRunId="live",this.runEntries=[],this.filteredRunEntries=[],yield this.loadDeliveries();return}if(e==="receipts:all"){this.viewingRun=!0,this.viewingAllReceipts=!0,this.selectedRunId=null,localStorage.setItem("currentRunId","__ALL_RECEIPTS__"),yield this.loadAllReceipts(),this.filteredRunEntries=[...this.runEntries];return}if(e.startsWith("run:")){let t=e.slice(4);this.selectedRunId=t,this.viewingRun=!0,this.viewingAllReceipts=!1,localStorage.setItem("currentRunId",t);let r=this.allRuns.find(o=>o.id===t)??null;r?.routeDate&&(this.routeDate=r.routeDate);let i=yield this.storage.getRunEntries(t);this.runEntries=i.slice().sort((o,s)=>(o.deliveryOrder??0)-(s.deliveryOrder??0)).map(o=>Ce(Z({},o),{eventDate:o.eventDate??r?.date})),this.filteredRunEntries=[...this.runEntries];return}})}cancelRunEntryEdit(){this.editingRunEntry=null,this.runEntryDraft=null,this.resetRunEntryDate(),this.resetRunEntryErrors()}resetRunEntryErrors(){this.runEntryAmountError="",this.runEntrySuggestedError=""}computeRunEntryTaxable(e,t,r){if(t!=="Donated")return 0;let i=e*this.storage.getSuggestedRate(),s=(Number.isFinite(r)?r:i)-i;return s>0?s:0}loadAllReceipts(){return ee(this,null,function*(){let e=new Date,t=this.syncSelectedTaxYear(),[r,i,o]=yield Promise.all([this.storage.getAllRuns(),this.storage.getAllRunEntries(),this.storage.getAllDeliveries()]),s=new Map;r.forEach(g=>{g.id&&g.date&&s.set(g.id,g.date)});let a=[];i.forEach(g=>{let b=Zt(g.eventDate??s.get(g.runId))??"";a.push({kind:"run",date:b,baseRowId:g.baseRowId,name:g.name,address:g.address,city:g.city,state:g.state,zip:g.zip,status:g.status,dozens:g.dozens,donationStatus:g.donationStatus,donationMethod:g.donationMethod,donationAmount:g.donationAmount,taxableAmount:g.taxableAmount,runId:g.runId,runEntryId:g.id})}),o.forEach(g=>{let b=g.baseRowId,v=g.name,E=g.address,H=g.city,W=g.state,oe=g.zip;(g.oneOffDonations??[]).forEach((T,B)=>{let K=Zt(T.date)??"",G=Number(T.suggestedAmount??0),I=Number(T.amount??G),M=T.taxableAmount??Math.max(0,I-G);a.push({kind:"oneOffDonation",date:K,baseRowId:b,name:v,address:E,city:H,state:W,zip:oe,status:"donation",dozens:0,donationStatus:T.status,donationMethod:T.method,donationAmount:I,taxableAmount:M,deliveryId:g.id,oneOffKind:"donation",oneOffIndex:B})}),(g.oneOffDeliveries??[]).forEach((T,B)=>{let K=Zt(T.date)??"",G=Number(T.deliveredDozens??0),I=T.donation,M=Number(I?.suggestedAmount??0),$=Number(I?.amount??M),re=I?.taxableAmount??Math.max(0,$-M);a.push({kind:"oneOffDelivery",date:K,baseRowId:b,name:v,address:E,city:H,state:W,zip:oe,status:"delivered",dozens:G,donationStatus:I?.status??"NoDonation",donationMethod:I?.method,donationAmount:$,taxableAmount:re,deliveryId:g.id,oneOffKind:"delivery",oneOffIndex:B})})});let c=Number.isFinite(t)?Math.trunc(t):void 0,d=c==null?a:a.filter(g=>cn(g.date,e)===c);d.sort((g,b)=>uc(b.date)-uc(g.date));let h=d.map((g,b)=>{let v=typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`receipt_${b}_${g.baseRowId}`;return{id:g.runEntryId??v,runId:g.kind==="run"?g.runId??"run":"oneoff",baseRowId:g.baseRowId,name:g.name,address:g.address,city:g.city,state:g.state,zip:g.zip,status:g.status,dozens:g.dozens,deliveryOrder:b,donationStatus:g.donationStatus,donationMethod:g.donationMethod,donationAmount:g.donationAmount,taxableAmount:g.taxableAmount,eventDate:g.date,deliveryId:g.deliveryId,oneOffKind:g.oneOffKind,oneOffIndex:g.oneOffIndex}});this.runEntries=h,this.filteredRunEntries=[...h]})}saveRunEntryEdit(){return ee(this,null,function*(){if(!this.editingRunEntry||!this.runEntryDraft)return;let e=this.editingRunEntry,t=this.runEntryDraft;if(!this.ensureRunEntryAmount()||!this.ensureRunEntrySuggestedAmount())return;let r=Math.max(0,Number(t.dozens)||0),i=this.parseAmountInput(t.donationAmount),o=this.clampAmount(i??0),s=this.computeRunEntryTaxable(r,t.donationStatus,o);if(e.runId==="oneoff"){if(!this.ensureRunEntryDate())return;let a=this.parseAmountInput(this.runEntryDraft.suggestedAmount),c=a!=null?this.clampAmount(a):void 0;e.oneOffKind==="donation"&&e.deliveryId!=null&&e.oneOffIndex!=null?yield this.storage.updateOneOffDonationByIndex(e.deliveryId,e.oneOffIndex,{donationStatus:t.donationStatus,donationMethod:t.donationMethod||void 0,donationAmount:o,suggestedAmount:c,date:this.runEntryDate}):e.oneOffKind==="delivery"&&e.deliveryId!=null&&e.oneOffIndex!=null&&(yield this.storage.updateOneOffDeliveryByIndex(e.deliveryId,e.oneOffIndex,{dozens:r,donationStatus:t.donationStatus,donationMethod:t.donationMethod||void 0,donationAmount:o,suggestedAmount:c,date:this.runEntryDate})),yield this.loadAllReceipts(),this.applyFilter(!1)}else if(this.viewingAllReceipts)yield this.storage.updateRunEntry(e.id,{dozens:r,donationStatus:t.donationStatus,donationMethod:t.donationStatus==="Donated"&&t.donationMethod||void 0,donationAmount:t.donationStatus==="Donated"?o:0,taxableAmount:s,status:t.status}),yield this.loadAllReceipts(),this.applyFilter(!1);else{let a=t.deliveryOrder||1,c=this.runEntries.length||1,d=Math.min(Math.max(1,a),c),h=this.runEntries.slice(),g=h.findIndex(b=>b.id===e.id);if(g!==-1){let[b]=h.splice(g,1);h.splice(d-1,0,b),h.forEach((v,E)=>{v.deliveryOrder=E,v.id===e.id&&(v.dozens=r,v.donationStatus=t.donationStatus,v.donationMethod=t.donationStatus==="Donated"&&t.donationMethod||void 0,v.donationAmount=t.donationStatus==="Donated"?o:0,v.taxableAmount=s,v.status=t.status)}),this.runEntries=h,yield this.storage.saveRunEntryOrdering(e.runId,h),yield this.storage.updateRunEntry(e.id,{dozens:r,donationStatus:t.donationStatus,donationMethod:t.donationStatus==="Donated"&&t.donationMethod||void 0,donationAmount:t.donationStatus==="Donated"?o:0,taxableAmount:s,status:t.status,deliveryOrder:d-1})}}this.editingRunEntry=null,this.runEntryDraft=null,this.resetRunEntryDate(),this.resetRunEntryErrors(),this.resetRunEntryErrors()})}getScheduleId(e){return e.replace(/\s+/g,"")||"Schedule"}loadRunsForRoute(){return ee(this,null,function*(){if(!this.routeDate||this.routeDate===this.ALL_SCHEDULES){this.runOptions=[],this.selectedRunId="live",this.viewingRun=!1;return}let e=this.getScheduleId(this.routeDate);this.runOptions=yield this.storage.getRunsForSchedule(e),this.selectedRunId="live",this.viewingRun=!1})}onRunChange(e){return ee(this,null,function*(){if(this.selectedRunId=e,e==="live"){this.viewingRun=!1,this.runEntries=[],this.editingRunEntry=null,this.runEntryDraft=null,this.resetRunEntryDate(),this.resetRunEntryErrors();return}this.viewingRun=!0;let t=yield this.storage.getRunEntries(e);this.runEntries=t.slice().sort((r,i)=>(r.deliveryOrder??0)-(i.deliveryOrder??0)),this.editingRunEntry=null,this.runEntryDraft=null,this.resetRunEntryDate(),this.resetRunEntryErrors()})}saveEdit(){return ee(this,null,function*(){if(!this.editingStop)return;let e=this.editingStop,t=this.editDraft.routeDate||e.routeDate,r=this.editDraft.deliveryOrder||1,o=this.deliveries.filter(d=>d.routeDate===e.routeDate).length||1,s=Math.min(Math.max(1,r),o),a={name:this.editDraft.name,address:this.editDraft.address,city:this.editDraft.city,state:this.editDraft.state,zip:this.editDraft.zip||void 0,notes:this.editDraft.notes||void 0};if(this.editDraft.dozens!==e.dozens){let d=Number(this.editDraft.dozens)||0;yield this.storage.updatePlannedDozens(e.id,d),a.dozens=d}if(t&&t!==e.routeDate){let h=(yield this.storage.getDeliveriesByRoute(t)).length;yield this.storage.updateDeliveryFields(e.id,Ce(Z({},a),{routeDate:t,runId:t,week:t.replace(/\s+/g,"")||"Schedule",sortIndex:h,deliveryOrder:h})),this.routeDate=t,this.persistRouteSelection()}else{yield this.storage.updateDeliveryFields(e.id,a),Object.assign(e,a);let d=[...this.deliveries],h=d.findIndex(g=>g.id===e.id);if(h!==-1){let[g]=d.splice(h,1),b=s-1;d.splice(b,0,g),d.forEach((v,E)=>{v.sortIndex=E,v.deliveryOrder=E}),yield this.storage.saveSortOrder(d)}}yield this.loadDeliveries(),this.editingStop=null})}unsubscribeStop(e){return ee(this,null,function*(){if(yield this.storage.markSkipped(e.id,"Unsubscribed"),yield this.storage.updateDeliveryFields(e.id,{subscribed:!1}),this.routeDate&&this.routeDate!==this.ALL_SCHEDULES){let t=yield this.storage.getDeliveriesByRoute(this.routeDate),r=t.findIndex(i=>i.id===e.id);if(r>=0){let[i]=t.splice(r,1);t.push(i),t.forEach((o,s)=>{o.sortIndex=s,o.deliveryOrder=s}),yield this.storage.saveSortOrder(t),this.deliveries=t}else yield this.loadDeliveries()}else yield this.loadDeliveries();this.applyFilter(!1),this.editingStop=null})}isUnsubscribed(e){if(!e)return!1;let t=e.skippedReason?.toLowerCase?.().trim()??"";return e.status==="skipped"&&t.includes("unsubscribed")}resubscribeStop(e){return ee(this,null,function*(){let t={status:"",skippedAt:void 0,skippedReason:void 0,subscribed:!0,updatedAt:new Date().toISOString(),synced:!1};yield this.storage.updateDeliveryFields(e.id,t),yield this.loadDeliveries(),this.editingStop=null})}toggleSearch(){this.showSearch=!this.showSearch,this.showSearch||(this.searchTerm="",this.applyFilter(!1))}get allSchedulesTotal(){return this.routes.reduce((e,t)=>e+(t.totalStops??0),0)}getSuggestedRate(){return this.storage.getSuggestedRate()}applyFilter(e=!0){let t=this.searchTerm.trim().toLowerCase();if(!t){this.viewingRun?this.filteredRunEntries=[...this.runEntries]:this.filteredDeliveries=[...this.deliveries];return}let r=(i,o,s)=>!!i?.toLowerCase().includes(t)||!!o?.toLowerCase().includes(t)||!!s?.toLowerCase().includes(t);this.viewingRun?this.filteredRunEntries=this.runEntries.filter(i=>r(i.name,i.address,i.city)):this.filteredDeliveries=this.deliveries.filter(i=>r(i.name,i.address,i.city))}normalizeDelivery(e){let t=e.originalDozens!=null?e.originalDozens:e.dozens??0;return e.originalDozens==null&&(e.originalDozens=t),e.originalDonation||(e.originalDonation={status:"NoDonation",amount:0,suggestedAmount:t*4}),e.donation||(e.donation={status:"NoDonation",amount:0,suggestedAmount:(e.dozens??0)*4}),e.status=this.storage.computeChangeStatus(e),e}computeOneOffTotals(e,t){let r=new Date,i=Number.isFinite(t)?Math.trunc(t):void 0,o=K=>i==null?!0:cn(K,r)===i,s=this.storage.getSuggestedRate(),a=(e.dozens??0)*s,c=e.status==="delivered"&&o(e.deliveredAt),d=c&&e.donation?.status==="Donated"?Number(e.donation.amount??e.donation.suggestedAmount??a):0,h=c&&e.donation?.status==="Donated"?Number(e.donation.taxableAmount??Math.max(0,d-Number(e.donation.suggestedAmount??a))):0,g=c&&e.deliveredDozens!=null?Number(e.deliveredDozens):c?Number(e.dozens??0):0,b=(e.oneOffDonations??[]).filter(K=>o(K.date)),v=(e.oneOffDeliveries??[]).filter(K=>o(K.date)),E=b.reduce((K,G)=>K+Number(G.amount??G.suggestedAmount??0),0)+v.reduce((K,G)=>K+Number(G.donation?.amount??G.donation?.suggestedAmount??0),0),H=b.reduce((K,G)=>{let I=Number(G.amount??G.suggestedAmount??0),M=I>0?I:0;return K+M},0)+v.reduce((K,G)=>{let I=Number(G.donation?.suggestedAmount??0),M=Number(G.donation?.amount??I),$=G.donation?.taxableAmount??Math.max(0,M-I);return K+$},0),W=v.reduce((K,G)=>K+Number(G.deliveredDozens??0),0),oe=c&&g>0?Number(e.donation?.suggestedAmount??g*s):0,T=v.reduce((K,G)=>{let I=Number(G.deliveredDozens??0);if(!I)return K;let M=Number(G.donation?.suggestedAmount??I*s);return K+M},0),B=oe+T;return{donationTotal:d+E,dozensTotal:g+W,taxableTotal:h+H,baselineTotal:B}}refreshDonationTotals(e){return ee(this,null,function*(){let t=this.syncSelectedTaxYear();try{let[r,i,o]=yield Promise.all([this.storage.getAllDeliveries(),this.storage.getAllRunEntries(),this.storage.getImportState("default")]),a=this.backup.computeTotalsByBase(r,i,o??void 0,t).get(e.baseRowId);if(a){let c=a,d=typeof c.baseline=="number"?c.baseline:Math.max(0,a.donation-a.taxable);this.donationTotals={donationTotal:a.donation,dozensTotal:a.dozens,taxableTotal:a.taxable,baselineTotal:d}}else this.donationTotals={donationTotal:0,dozensTotal:0,taxableTotal:0,baselineTotal:0}}catch(r){console.error("Failed to refresh donation totals",r),this.donationTotals={donationTotal:0,dozensTotal:0,taxableTotal:0,baselineTotal:0}}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Bt({type:n,selectors:[["app-route-planner"]],decls:23,vars:16,consts:[["receiptHistoryList",""],["orderOnly",""],["donationOnly",""],["noDate",""],[1,"page-header"],[1,"header-actions"],[1,"form-control","route-select",3,"ngModelChange","ngModel"],["disabled","",3,"ngValue"],["label","Routes"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["label","Past runs",4,"ngIf"],["class","btn btn-secondary icon-btn btn-reorder","type","button",3,"active","title","click",4,"ngIf"],["class","btn btn-secondary icon-btn btn-add","type","button","aria-label","Add delivery","title","Add delivery",3,"click",4,"ngIf"],["type","button","aria-label","Search deliveries","title","Search deliveries",1,"btn","btn-secondary","icon-btn","btn-search",3,"click"],[1,"glyph"],["class","search-row",4,"ngIf"],["class","status text-muted",4,"ngIf"],["class","status error",4,"ngIf"],["class","card new-delivery-card",4,"ngIf"],[4,"ngIf"],["label","Past runs"],["type","button",1,"btn","btn-secondary","icon-btn","btn-reorder",3,"click","title"],["type","button","aria-label","Add delivery","title","Add delivery",1,"btn","btn-secondary","icon-btn","btn-add",3,"click"],[1,"search-row"],["type","search","placeholder","Search deliveries\u2026",1,"form-control","search-input",3,"ngModelChange","ngModel"],["type","button","aria-label","Close search","title","Close search",1,"btn","btn-secondary","icon-btn",3,"click"],[1,"receipt-history"],["aria-hidden","true",1,"receipt-history-divider"],[1,"receipt-history-header"],[1,"receipt-history-empty","text-muted"],["role","list",1,"receipt-history-list"],[1,"receipt-history-item"],[1,"receipt-history-details"],[1,"receipt-history-date"],[1,"receipt-history-date-missing"],["aria-hidden","true",1,"receipt-history-sep"],[1,"receipt-history-status"],[1,"receipt-history-action"],[1,"receipt-history-dozens"],[1,"receipt-history-donation"],["type","button",1,"btn","btn-text","warn","receipt-delete-btn",3,"click"],[1,"status","text-muted"],[1,"status","error"],[1,"card","new-delivery-card"],[1,"new-header"],[1,"section-title"],[1,"new-form",3,"submit"],["name","newRouteDate",1,"form-control",3,"ngModelChange","ngModel"],["name","newName",1,"form-control",3,"ngModelChange","ngModel"],["name","newAddress",1,"form-control",3,"ngModelChange","ngModel"],["name","newCity",1,"form-control",3,"ngModelChange","ngModel"],["name","newState",1,"form-control",3,"ngModelChange","ngModel"],["name","newZip",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","1","name","newOrder",1,"form-control",3,"ngModelChange","max","ngModel"],["type","number","min","0","name","newDozens","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"full-width"],["rows","2","name","newNotes",1,"form-control",3,"ngModelChange","ngModel"],["class","form-hint full-width",4,"ngIf"],[1,"form-hint","full-width","text-muted"],[1,"donation-actions"],["type","button",1,"btn","btn-text",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"form-hint","full-width"],["class","error-text",4,"ngFor","ngForOf"],[1,"error-text"],["cdkDropList","",1,"drop-list",3,"cdkDropListDropped","cdkDropListData","cdkDropListDisabled"],["class","planner-swipe-row","cdkDrag","",3,"open","cdkDragDisabled","cdkDragStarted",4,"ngFor","ngForOf"],["cdkDrag","",1,"planner-swipe-row",3,"cdkDragStarted","cdkDragDisabled"],[1,"back-card"],[1,"action-row"],["type","button",1,"btn","btn-text","skip-btn",3,"click"],["type","button",1,"btn","btn-text","reset-warn",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"front-card","route-item","planner-row-content",3,"pointerdown","pointermove","pointerup","click"],[4,"ngIf","ngIfElse"],[1,"route-item-body"],[1,"row-top"],[1,"stop-name"],[1,"stop-meta"],[1,"status-pill"],[1,"row-bottom"],[1,"stop-address","text-muted"],[1,"stop-qty"],["type","button",1,"qty-btn",3,"click"],["aria-label","Planned dozen",1,"qty-display"],["class","edit-inline card",4,"ngIf"],["class","inline-donation card",4,"ngIf"],["cdkDragHandle","","aria-label","Reorder stop",1,"drag-handle"],[1,"order-number","text-muted"],[1,"drag-handle","order-only"],[1,"edit-inline","card"],[1,"new-form"],["name","editRouteDate",1,"form-control",3,"ngModelChange","ngModel"],["name","editName",1,"form-control",3,"ngModelChange","ngModel"],["name","editAddress",1,"form-control",3,"ngModelChange","ngModel"],["name","editCity",1,"form-control",3,"ngModelChange","ngModel"],["name","editState",1,"form-control",3,"ngModelChange","ngModel"],["name","editZip",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","1","name","editOrder",1,"form-control",3,"ngModelChange","max","ngModel"],["type","number","min","0","name","editDozens",1,"form-control",3,"ngModelChange","ngModel"],["rows","2","name","editNotes",1,"form-control",3,"ngModelChange","ngModel"],[1,"left-actions"],["class","btn btn-secondary","type","button",3,"click",4,"ngIf"],["class","btn btn-text warn","type","button",3,"click",4,"ngIf"],[1,"right-actions"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-text","warn",3,"click"],[1,"inline-donation","card"],[1,"one-off-title"],[1,"inline-donation-body"],[1,"card","donation-card"],[3,"donationStatusChange","donationMethodChange","amountChange","donation","suggestedAmount","showNoDonation","allowReselect","showQty"],[1,"date-field"],["type","date","name","oneOffDonationDate","required","",1,"form-control",3,"ngModelChange","min","max","ngModel"],["id","one-off-donation-date-error",1,"error-text"],[1,"card","totals-card"],[1,"totals-row"],[3,"ngTemplateOutlet"],[1,"delivery-card","card"],[3,"adjustQty","donationStatusChange","donationMethodChange","amountChange","copyAddress","openMap","stop","deliveredQty","donation","suggestedAmount","showNoDonation","allowDonationReselect","showNotes","showHeaderInfo","showStatusPill","showAddressText"],["type","date","name","oneOffDeliveryDate","required","",1,"form-control",3,"ngModelChange","min","max","ngModel"],["id","one-off-delivery-date-error",1,"error-text"],["class","run-history-header text-muted",4,"ngIf"],[1,"drop-list"],["class","planner-swipe-row",4,"ngFor","ngForOf"],["class","status text-muted card",4,"ngIf"],["class","amount-overlay",4,"ngIf"],[1,"run-history-header","text-muted"],[1,"planner-swipe-row"],[1,"route-item","run-history-card"],["class","order-number text-muted",4,"ngIf"],[1,"donation-summary","text-muted"],[1,"run-entry-meta"],[1,"entry-date","text-muted"],[1,"run-entry-actions"],["type","button",1,"btn","btn-text","btn-inline",3,"click"],["type","button",1,"btn","btn-text","btn-inline","warn"],[3,"ngSwitch"],[4,"ngSwitchCase"],["type","button",1,"btn","btn-text","btn-inline","warn",3,"click"],[1,"entry-date-missing"],[1,"card"],["name","runEntryDonationStatus",1,"form-control",3,"ngModelChange","ngModel"],["value","NoDonation"],["value","Donated"],["type","date","name","runEntryDate","required","",1,"form-control",3,"ngModelChange","min","max","ngModel"],["id","run-entry-date-error",1,"error-text"],["name","runEntryStatus",1,"form-control",3,"ngModelChange","ngModel"],["value","delivered"],["value","skipped"],["type","number","min","1","name","runEntryOrder",1,"form-control",3,"ngModelChange","max","ngModel"],["type","number","min","0","name","runEntryDozens",1,"form-control",3,"ngModelChange","ngModel"],["type","number","inputmode","decimal","min","0","max","9999","step","0.01","name","runEntrySuggested",1,"form-control",3,"ngModelChange","ngModel"],["id","run-entry-suggested-error",1,"error-text"],["name","runEntryDonationMethod",1,"form-control",3,"ngModelChange","ngModel"],["value",""],["value","cash"],["value","ach"],["value","venmo"],["value","paypal"],["value","other"],["type","number","inputmode","decimal","min","0","max","9999","step","0.01","name","runEntryDonationAmount",1,"form-control",3,"ngModelChange","ngModel"],["id","run-entry-amount-error",1,"error-text"],[1,"status","text-muted","card"],[1,"amount-overlay"],[3,"cancel","save","currentAmount","suggestedAmount"]],template:function(t,r){if(t&1){let i=tt();_(0,"div",4)(1,"div",5)(2,"select",6),Et("ngModelChange",function(s){return X(i),Rt(r.selectedRouteOrRun,s)||(r.selectedRouteOrRun=s),J(s)}),le("ngModelChange",function(s){return X(i),J(r.onRouteOrRunChange(s))}),_(3,"option",7),w(4,"Choose a route\u2026"),D(),_(5,"optgroup",8)(6,"option",9),w(7),D(),be(8,ZL,2,3,"option",10),D(),be(9,e2,4,3,"optgroup",11),D(),be(10,t2,3,5,"button",12)(11,n2,3,0,"button",13),_(12,"button",14),le("click",function(){return X(i),J(r.toggleSearch())}),_(13,"span",15),w(14,"\u{1F50D}"),D()()(),be(15,r2,4,1,"div",16),D(),be(16,p2,6,2,"ng-template",null,0,zo)(18,g2,2,0,"div",17)(19,m2,2,1,"div",18)(20,D2,41,14,"div",19)(21,N2,3,3,"div",20)(22,cV,6,4,"div",20)}t&2&&(Mt("searching",r.showSearch),S(2),St("ngModel",r.selectedRouteOrRun),S(),Y("ngValue",null),S(3),Y("ngValue",r.ALL_SCHEDULES),S(),Ie(" All Schedules (",r.allSchedulesTotal,") "),S(),Y("ngForOf",r.routes),S(),Y("ngIf",r.allRuns.length),S(),Y("ngIf",!r.viewingRun),S(),Y("ngIf",!r.viewingRun),S(4),Y("ngIf",r.showSearch),S(3),Y("ngIf",r.loading),S(),Y("ngIf",r.errorMessage),S(),Y("ngIf",r.showNewForm),S(),Y("ngIf",!r.loading&&!r.errorMessage&&r.deliveries.length&&!r.viewingRun),S(),Y("ngIf",!r.loading&&!r.errorMessage&&r.viewingRun))},dependencies:[On,Wd,ar,cv,Gd,lv,$o,Dl,Uo,xx,Ex,Sx,bx,br,LE,ah,lh,ai,ts,sh,Ji,OE,Ay,rs,ns,Ri,Ty,Ca,Sa,Ea],styles:[".page-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:var(--spacing-2);margin-bottom:var(--spacing-1);padding:0 var(--spacing-2);position:relative;min-height:44px;background:var(--color-muted)}[data-theme=dark][_nghost-%COMP%]   .page-header[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]{background:var(--color-bg)}.header-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-2);flex-wrap:nowrap;justify-content:center;align-items:center;width:100%}.page-header.searching[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{visibility:hidden}.route-select[_ngcontent-%COMP%]{flex:1 1 auto;min-width:120px;height:40px;padding:8px 10px;width:auto;background:var(--color-surface);color:var(--color-text)}.run-select[_ngcontent-%COMP%]{flex:0 0 auto;min-width:140px;height:40px;padding:8px 10px;background:var(--color-surface);color:var(--color-text)}.icon-btn[_ngcontent-%COMP%]{width:40px;height:40px;display:inline-flex;align-items:center;justify-content:center;font-size:18px;padding:0;line-height:1;flex:0 0 40px}.icon-btn[_ngcontent-%COMP%]   .glyph[_ngcontent-%COMP%]{display:inline-block;line-height:1}.btn-reset[_ngcontent-%COMP%]{font-size:27px;color:var(--color-danger);border:1px solid var(--color-danger);background:var(--color-surface)}.btn-search[_ngcontent-%COMP%]{font-size:16px}.btn-reorder.active[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--color-primary) 12%,var(--color-surface) 88%);color:var(--color-primary);border-color:var(--color-primary)}.skip-btn[_ngcontent-%COMP%]{color:#0ea5e9}.reset-warn[_ngcontent-%COMP%]{color:var(--color-danger)}.btn-reset[_ngcontent-%COMP%]   .glyph[_ngcontent-%COMP%]{transform:translate(.5px,-.5px)}.btn-add[_ngcontent-%COMP%]{font-size:22px}.btn-add[_ngcontent-%COMP%]   .glyph[_ngcontent-%COMP%]{transform:translateY(-.5px)}.search-row[_ngcontent-%COMP%]{position:absolute;top:0;left:var(--spacing-2);right:var(--spacing-2);display:flex;gap:var(--spacing-1);align-items:center;width:auto;z-index:2}.search-input[_ngcontent-%COMP%]{flex:1 1 auto;height:40px;padding:8px 10px}.status[_ngcontent-%COMP%]{margin-top:var(--spacing-2)}.status.error[_ngcontent-%COMP%]{color:var(--color-danger)}.drop-list[_ngcontent-%COMP%]{display:grid;row-gap:var(--spacing-1);column-gap:var(--spacing-2)}.run-history-header[_ngcontent-%COMP%]{margin:0 var(--spacing-3) var(--spacing-1);font-size:12px;font-weight:var(--font-weight-medium)}.planner-swipe-row[_ngcontent-%COMP%]{position:relative;background:transparent;border-radius:var(--radius-lg)}.back-card[_ngcontent-%COMP%]{position:absolute;inset:0;padding:0 var(--spacing-2);display:flex;flex-direction:column;justify-content:center;align-items:flex-end;gap:var(--spacing-1);background:var(--color-muted);opacity:0;transition:opacity .15s var(--easing-ease-out);z-index:1;pointer-events:none}.back-card[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-1);justify-content:flex-end}.planner-row-content[_ngcontent-%COMP%]{transition:transform .25s var(--easing-ease-out);position:relative;z-index:2;touch-action:pan-y pan-x}.front-card[_ngcontent-%COMP%]{background:var(--color-surface);box-shadow:var(--shadow-md);border:1px solid var(--color-border);border-radius:var(--radius-lg)}.planner-swipe-row.open[_ngcontent-%COMP%]   .back-card[_ngcontent-%COMP%]{pointer-events:auto;opacity:1}.route-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr auto;gap:var(--spacing-2);align-items:center;padding:var(--spacing-3);border-radius:0;border:none;background:transparent}.front-card.route-item[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-lg);border:1px solid var(--color-border)}[data-theme=dark][_nghost-%COMP%]   .front-card.route-item[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .front-card.route-item[_ngcontent-%COMP%]{background:var(--color-bg-elevated, #1f2933)}.drag-handle[_ngcontent-%COMP%]{cursor:grab;color:var(--color-text-muted);-webkit-user-select:none;user-select:none;font-weight:var(--font-weight-semibold);padding:10px 0;min-width:44px;display:flex;align-items:center;justify-content:center;gap:4px;margin-right:var(--spacing-2)}.drag-handle.order-only[_ngcontent-%COMP%]{cursor:default}.drag-handle[_ngcontent-%COMP%]   .order-number[_ngcontent-%COMP%]{font-size:var(--font-size-sm)}.route-item-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-2)}.row-top[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-2)}.stop-name[_ngcontent-%COMP%]{font-weight:var(--font-weight-semibold);font-size:var(--font-size-md);flex:1 1 auto}.stop-address[_ngcontent-%COMP%]{line-height:1.4;font-size:var(--font-size-sm)}.row-bottom[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:var(--spacing-2)}.row-bottom[_ngcontent-%COMP%]   .stop-address[_ngcontent-%COMP%]{flex:1 1 auto}.row-bottom[_ngcontent-%COMP%]   .stop-qty[_ngcontent-%COMP%]{flex-shrink:0}.run-history-card[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-2);background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-lg);box-shadow:var(--shadow-card);padding:var(--spacing-3)}[data-theme=dark][_nghost-%COMP%]   .run-history-card[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .run-history-card[_ngcontent-%COMP%]{background:var(--color-bg-elevated, #1f2933);border-color:color-mix(in srgb,#ffffff 10%,var(--color-border))}.stop-qty[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--spacing-1);background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-md);padding:4px 8px}.qty-btn[_ngcontent-%COMP%]{border:1px solid var(--color-border);background:var(--color-bg);color:var(--color-text);border-radius:var(--radius-sm);padding:6px 10px;min-width:36px;font-weight:var(--font-weight-semibold);cursor:pointer}.qty-btn[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--color-primary) 12%,var(--color-surface) 88%);color:var(--color-primary);border-color:var(--color-primary)}[data-theme=dark][_nghost-%COMP%]   .qty-btn[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .qty-btn[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark);color:#fff;border-color:var(--color-primary-dark)}.qty-display[_ngcontent-%COMP%]{min-width:36px;text-align:center;font-weight:var(--font-weight-semibold)}.qty-unit[_ngcontent-%COMP%]{font-size:14px}.stop-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-1);flex-wrap:nowrap;margin-top:var(--spacing-1)}.stop-meta[_ngcontent-%COMP%]   .pill-btn[_ngcontent-%COMP%]{padding:4px 8px;min-height:auto;white-space:nowrap}.run-history-card[_ngcontent-%COMP%]   .donation-summary[_ngcontent-%COMP%]{margin-top:0}.run-entry-meta[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:var(--spacing-2);margin-top:var(--spacing-1)}.run-entry-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-2)}.entry-date[_ngcontent-%COMP%]{font-size:var(--font-size-xs)}.entry-date-missing[_ngcontent-%COMP%]{font-size:var(--font-size-xs);opacity:.7}.run-entry-actions[_ngcontent-%COMP%]   .btn-inline[_ngcontent-%COMP%]{min-height:44px;padding:8px 12px;font-size:var(--font-size-sm)}.item-bottom[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-2)}.status-pill[_ngcontent-%COMP%]{padding:4px 10px;border-radius:var(--radius-pill);background:#e0f2fe;color:#0369a1;font-size:var(--font-size-sm);font-weight:var(--font-weight-medium)}.status-pill.pending[_ngcontent-%COMP%]{background:#f5f5f5;color:var(--color-text-muted)}.status-pill.delivered[_ngcontent-%COMP%]{background:#ecfdf3;color:#15803d}.status-pill.skipped[_ngcontent-%COMP%]{background:#e0f2fe;color:#0369a1}.status-pill.donation[_ngcontent-%COMP%]{background:#fef3c7;color:#c05621}.status-pill.changed[_ngcontent-%COMP%]{background:#fffbeb;color:#b45309}.status-pill.unsubscribed[_ngcontent-%COMP%]{background:#fef2f2;color:#b91c1c}.status-pill.inline[_ngcontent-%COMP%]{margin-left:var(--spacing-2)}[data-theme=dark][_nghost-%COMP%]   .status-pill[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .status-pill[_ngcontent-%COMP%]{background:#0b2536;color:#e2e8f0}[data-theme=dark][_nghost-%COMP%]   .status-pill.pending[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .status-pill.pending[_ngcontent-%COMP%]{background:#0f172a;color:#94a3b8}[data-theme=dark][_nghost-%COMP%]   .status-pill.delivered[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .status-pill.delivered[_ngcontent-%COMP%]{background:#0f2f1c;color:#4ade80}[data-theme=dark][_nghost-%COMP%]   .status-pill.skipped[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .status-pill.skipped[_ngcontent-%COMP%]{background:#0b2536;color:#7dd3fc}[data-theme=dark][_nghost-%COMP%]   .status-pill.donation[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .status-pill.donation[_ngcontent-%COMP%]{background:#3b2500;color:#fdba74}[data-theme=dark][_nghost-%COMP%]   .status-pill.changed[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .status-pill.changed[_ngcontent-%COMP%]{background:#2b1c00;color:#fbbf24}[data-theme=dark][_nghost-%COMP%]   .status-pill.unsubscribed[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .status-pill.unsubscribed[_ngcontent-%COMP%]{background:#3b0f0f;color:#fecdd3}.item-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-1);flex-wrap:wrap;justify-content:flex-end}.btn-text[_ngcontent-%COMP%]{padding:8px 10px}.warn[_ngcontent-%COMP%]{color:var(--color-danger)}.pill-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block}.pill[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:var(--radius-pill);font-size:14px;border:1px solid var(--color-border);background:#f8fafc}.pill-muted[_ngcontent-%COMP%]{color:var(--color-text-muted)}.pill-neutral[_ngcontent-%COMP%]{color:var(--color-text)}.pill-cash[_ngcontent-%COMP%]{color:#15803d}.pill-venmo[_ngcontent-%COMP%]{color:#2563eb}.pill-donated[_ngcontent-%COMP%]{color:var(--color-text)}.edit-inline.card[_ngcontent-%COMP%], .inline-donation.card[_ngcontent-%COMP%]{margin-top:var(--spacing-2);width:100%;padding:var(--spacing-3)}.one-off-title[_ngcontent-%COMP%]{margin:0;font-size:var(--font-size-lg);font-weight:var(--font-weight-semibold);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.inline-donation-body[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-1)}.inline-donation-body[_ngcontent-%COMP%] > .card[_ngcontent-%COMP%]{padding:var(--spacing-3)}.donation-card[_ngcontent-%COMP%]   .date-field[_ngcontent-%COMP%], .delivery-card[_ngcontent-%COMP%]   .date-field[_ngcontent-%COMP%]{margin-top:var(--spacing-2)}.sr-only[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.donation-dialog[_ngcontent-%COMP%]   .off-card[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-2);margin-top:var(--spacing-2)}.off-qty[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-1)}.off-qty[_ngcontent-%COMP%]   .qty-input[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--spacing-1);background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-md);padding:4px 8px}.donation-toggle.wide[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:var(--spacing-1)}.donation-amount-row[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-1)}.donation-amount-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-1);font-weight:var(--font-weight-medium)}.date-field[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-1);font-weight:var(--font-weight-medium);width:fit-content;max-width:100%;justify-items:center;text-align:center;margin:0 auto}.date-field[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:auto;min-width:0}.donation-amount-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.new-delivery-card[_ngcontent-%COMP%]{margin-top:var(--spacing-3);display:grid;gap:var(--spacing-3)}.new-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:var(--spacing-2)}.new-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-2);flex-wrap:wrap}.new-form[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-2);grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.new-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:grid;gap:var(--spacing-1);font-weight:var(--font-weight-medium);color:var(--color-text)}.new-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%}.new-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}.donation-dialog[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-lg);padding:var(--spacing-4);width:100%;max-width:420px;display:grid;gap:var(--spacing-3);box-shadow:var(--shadow-modal)}.donation-toggle[_ngcontent-%COMP%], .donation-methods[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-2);flex-wrap:wrap}.btn-chip[_ngcontent-%COMP%]{border:1px solid var(--color-border);background:var(--color-surface);color:var(--color-text);padding:8px 12px;border-radius:var(--radius-pill);font-weight:var(--font-weight-medium)}.btn-chip.active[_ngcontent-%COMP%]{border-color:var(--color-primary);color:var(--color-primary)}.btn-link[_ngcontent-%COMP%]{background:none;border:none;color:var(--color-primary);padding:0;font-weight:var(--font-weight-medium)}.donation-amount-row[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-2);align-items:center}.donation-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-2);justify-content:space-between;align-items:center;margin:var(--spacing-1) 0}.donation-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-height:40px;padding:8px 12px;font-size:var(--font-size-sm)}.donation-actions[_ngcontent-%COMP%]   .ghost[_ngcontent-%COMP%]{background:var(--color-surface);border:1px solid var(--color-primary);color:var(--color-primary);padding:8px 12px;border-radius:var(--radius-md)}.donation-actions[_ngcontent-%COMP%]   .ghost[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--color-primary) 12%,var(--color-surface) 88%);color:var(--color-primary);border-color:var(--color-primary)}[data-theme=dark][_nghost-%COMP%]   .donation-actions[_ngcontent-%COMP%]   .ghost[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .donation-actions[_ngcontent-%COMP%]   .ghost[_ngcontent-%COMP%]{background:var(--color-surface);color:var(--color-text);border-color:var(--color-border)}[data-theme=dark][_nghost-%COMP%]   .donation-actions[_ngcontent-%COMP%]   .ghost[_ngcontent-%COMP%]:hover, [data-theme=dark]   [_nghost-%COMP%]   .donation-actions[_ngcontent-%COMP%]   .ghost[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark);color:#fff;border-color:var(--color-primary-dark)}.totals-card[_ngcontent-%COMP%]{margin-top:var(--spacing-1);display:grid;gap:var(--spacing-1);padding:var(--spacing-2)}.donation-actions[_ngcontent-%COMP%] + .totals-card[_ngcontent-%COMP%]{margin-top:0}.receipt-history[_ngcontent-%COMP%]{margin-top:var(--spacing-1);display:grid;gap:4px}.receipt-history-divider[_ngcontent-%COMP%]{height:1px;background:var(--color-border);width:100%;margin-top:var(--spacing-1);margin-bottom:var(--spacing-1)}.receipt-history-header[_ngcontent-%COMP%]{font-size:12px;font-weight:var(--font-weight-medium);color:var(--color-text-muted)}.receipt-history-list[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none;display:grid;gap:2px}.receipt-history-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:13px;line-height:1.2;color:var(--color-text-muted)}.receipt-history-details[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px;flex:1 1 auto;min-width:0}.receipt-history-action[_ngcontent-%COMP%]{margin-left:auto;display:flex;align-items:center;flex:0 0 auto}.receipt-delete-btn[_ngcontent-%COMP%]{min-height:28px;padding:4px 8px;font-size:12px}.receipt-history-status[_ngcontent-%COMP%]{font-weight:var(--font-weight-medium);color:var(--color-text)}.receipt-history-status.is-delivered[_ngcontent-%COMP%]{color:var(--color-success)}.receipt-history-status.is-skipped[_ngcontent-%COMP%]{color:var(--color-danger)}.receipt-history-sep[_ngcontent-%COMP%]{color:var(--color-border)}.receipt-history-empty[_ngcontent-%COMP%]{font-size:13px}.totals-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-weight:var(--font-weight-medium)}.form-hint[_ngcontent-%COMP%]{font-size:14px}.error-text[_ngcontent-%COMP%]{color:var(--color-danger)}.left-actions[_ngcontent-%COMP%], .right-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-2);align-items:center}.edit-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000059;display:flex;align-items:center;justify-content:center;padding:var(--spacing-4);z-index:2000}[_nghost-%COMP%]     main.app-content>.card{margin-bottom:0;border-bottom:0}"]})};var Ix=[{path:"",component:ph,title:"Egg Delivery \u2013 Home"},{path:"plan",component:gc,title:"Egg Delivery \u2013 Planner"},{path:"plan/:routeDate",component:gc,title:"Egg Delivery \u2013 Planner"},{path:"run",redirectTo:""},{path:"run/:routeDate",component:fh,title:"Egg Delivery \u2013 Run"},{path:"**",redirectTo:""}];var Mx={providers:[Ew({eventCoalescing:!0}),bS(),wy(Ix),SS("ngsw-worker.js",{enabled:!Mw(),registrationStrategy:"registerWhenStable:30000"})]};var uV=()=>({exact:!0});function dV(n,e){if(n&1&&(_(0,"span",12),w(1),D()),n&2){let t=k(2);S(),Rn(" ",t.currentRouteSummary.dozensDelivered," / ",t.currentRouteSummary.dozensTotal," dozen ")}}function fV(n,e){n&1&&(_(0,"span",13),w(1," \xB7 "),D())}function hV(n,e){if(n&1&&(_(0,"div",8)(1,"div",9),be(2,dV,2,2,"span",10)(3,fV,2,0,"span",11),_(4,"span",12),w(5),D(),_(6,"span",13),w(7,"\xB7"),D(),_(8,"span",14),w(9),D()(),_(10,"div",15),$t(11,"div",16),D()()),n&2){let t=k();S(2),Y("ngIf",t.currentRouteSummary.dozensTotal),S(),Y("ngIf",t.currentRouteSummary.dozensTotal),S(2),Ie(" ",t.currentRouteSummary.skipped," skips "),S(4),Rn(" ",t.currentRouteSummary.delivered," / ",t.currentRouteSummary.total," stops "),S(2),Xs("width",t.routeProgress,"%")}}var Ch=class n{constructor(e,t){this.storage=e;this.router=t}plannerLink=["/plan"];runLink=["/run"];currentRouteSummary=null;routerSub;refreshTimer;ngOnInit(){this.refreshSummary(),this.routerSub=this.router.events.pipe(Jt(e=>e instanceof ur)).subscribe(()=>void this.refreshSummary()),this.refreshTimer=window.setInterval(()=>void this.refreshSummary(),1500)}ngOnDestroy(){this.routerSub?.unsubscribe(),this.refreshTimer&&window.clearInterval(this.refreshTimer)}refreshSummary(){return ee(this,null,function*(){let e=localStorage.getItem("currentRunId");if(e==="__ALL_RECEIPTS__"){let h=yield this.storage.getAllReceiptsSummary();if(!h){this.currentRouteSummary=null;return}this.currentRouteSummary={routeDate:"All receipts",delivered:h.delivered,skipped:h.skipped,total:h.total,dozensDelivered:h.dozensDelivered,dozensTotal:h.dozensTotal};return}if(e){let h=yield this.storage.getRunEntries(e);if(!h.length){this.currentRouteSummary=null;return}let g=h.filter(T=>T.status==="delivered"),b=h.filter(T=>T.status==="skipped"),v=h.length,E=h.reduce((T,B)=>T+(B.dozens??0),0),H=g.reduce((T,B)=>T+(B.dozens??0),0),W=yield this.storage.getRun(e),oe=W?.routeDate??W?.weekType??localStorage.getItem("currentRoute")??"Run";this.currentRouteSummary={routeDate:oe,delivered:g.length,skipped:b.length,total:v,dozensDelivered:H,dozensTotal:E};return}let t=localStorage.getItem("currentRoute")||localStorage.getItem("lastSelectedRoute");if(!t){this.currentRouteSummary=null;return}let i=(yield this.storage.getDeliveriesByRoute(t)).filter(h=>!(h.status==="skipped"&&(h.skippedReason?.toLowerCase?.().includes("unsubscribed")??!1))),o=i.filter(h=>h.status==="skipped").length,s=i.filter(h=>h.status==="delivered").length,a=Math.max(0,i.length-o),c=i.reduce((h,g)=>h+(g.dozens??0),0),d=i.filter(h=>h.status==="delivered").reduce((h,g)=>h+(g.deliveredDozens??g.dozens??0),0);this.currentRouteSummary={routeDate:t,delivered:s,skipped:o,total:a,dozensDelivered:d,dozensTotal:c}})}get routeProgress(){if(!this.currentRouteSummary||!this.currentRouteSummary.total)return 0;let e=this.currentRouteSummary.delivered/this.currentRouteSummary.total*100;return Math.min(100,Math.max(0,e))}static \u0275fac=function(t){return new(t||n)(Re(wr),Re(Zn))};static \u0275cmp=Bt({type:n,selectors:[["app-header"]],inputs:{plannerLink:"plannerLink",runLink:"runLink"},decls:12,vars:5,consts:[[1,"top-bar","card","safe-top"],[1,"brand-row"],[1,"brand","logo"],["src","icons/25095738__biruks-egg-project-orange.png","alt","Egg Deliveries logo"],["class","progress-inline",4,"ngIf"],[1,"nav"],["routerLink","/","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLinkActive","active",3,"routerLink"],[1,"progress-inline"],[1,"progress-line"],["class","progress-skipped",4,"ngIf"],["class","progress-divider",4,"ngIf"],[1,"progress-skipped"],[1,"progress-divider"],[1,"progress-summary"],[1,"bar"],[1,"fill"]],template:function(t,r){t&1&&(_(0,"header",0)(1,"div",1)(2,"div",2),$t(3,"img",3),D(),be(4,hV,12,7,"div",4),D(),_(5,"nav",5)(6,"a",6),w(7,"Home"),D(),_(8,"a",7),w(9,"Planner"),D(),_(10,"a",7),w(11,"Run"),D()()()),t&2&&(S(4),Y("ngIf",r.currentRouteSummary),S(2),Y("routerLinkActiveOptions",ww(4,uV)),S(2),Y("routerLink",r.plannerLink),S(2),Y("routerLink",r.runLink))},dependencies:[On,ar,_a,by],styles:[".top-bar[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-2);padding:var(--spacing-3);width:100%;position:sticky;top:env(safe-area-inset-top,0px);z-index:1500;background:var(--color-surface);box-shadow:0 2px 6px #00000014}.brand-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-2);width:100%}.brand[_ngcontent-%COMP%]{font-weight:var(--font-weight-semibold);font-size:20px;letter-spacing:.01em;padding:6px 8px;height:44px;display:inline-flex;align-items:center;white-space:nowrap;justify-content:flex-start}.brand.logo[_ngcontent-%COMP%]{background:#e5e7eb;border-radius:var(--radius-lg)}[data-theme=dark][_nghost-%COMP%]   .brand.logo[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .brand.logo[_ngcontent-%COMP%]{background:transparent}.brand.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50px;width:auto;display:block}.nav[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-2);flex-wrap:wrap;justify-content:flex-start;align-items:stretch;width:100%}.nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:0 12px;height:44px;flex:1 1 0;border-radius:var(--radius-md);border:1px solid var(--color-border);background:var(--color-surface);color:var(--color-text);font-weight:var(--font-weight-medium);transition:background-color var(--duration-fast) var(--easing-ease-out),color var(--duration-fast) var(--easing-ease-out),border-color var(--duration-fast) var(--easing-ease-out)}.nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--color-primary) 12%,var(--color-surface) 88%);color:var(--color-primary);border-color:var(--color-primary)}[data-theme=dark][_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark);color:#fff;border-color:var(--color-primary-dark)}.nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:var(--color-primary);border-color:var(--color-primary);color:#fff}.progress-inline[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:4px;min-width:0;width:100%;max-width:380px;margin-left:auto;align-items:stretch;padding:0 0 2px;text-align:right}.progress-line[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;flex-wrap:nowrap;justify-content:flex-end;min-width:0;white-space:nowrap;font-size:clamp(10px,2.6vw,var(--font-size-sm))}.progress-summary[_ngcontent-%COMP%]{font-size:inherit;color:var(--color-text)}.progress-divider[_ngcontent-%COMP%]{color:var(--color-text-subtle, #6b7280);font-size:inherit}.bar[_ngcontent-%COMP%]{height:6px;background:var(--color-border);border-radius:var(--radius-pill);overflow:hidden;width:100%;min-width:0}.progress-skipped[_ngcontent-%COMP%]{font-size:inherit;color:var(--color-text-subtle, #6b7280);white-space:nowrap}.fill[_ngcontent-%COMP%]{height:100%;background:var(--color-primary);transition:width var(--duration-base) var(--easing-ease-out)}"]})};function pV(n,e){if(n&1&&(_(0,"div",1),w(1),D()),n&2){let t=k();Mt("success",t.toast.type==="success")("error",t.toast.type==="error")("info",t.toast.type==="info"),S(),Ie(" ",t.toast.message,`
`)}}var Sh=class n{constructor(e){this.toastService=e}toast=null;sub;ngOnInit(){this.sub=this.toastService.messages$.subscribe(e=>{this.toast=e})}ngOnDestroy(){this.sub?.unsubscribe()}static \u0275fac=function(t){return new(t||n)(Re(li))};static \u0275cmp=Bt({type:n,selectors:[["app-toast"]],decls:1,vars:1,consts:[["class","toast",3,"success","error","info",4,"ngIf"],[1,"toast"]],template:function(t,r){t&1&&be(0,pV,2,7,"div",0),t&2&&Y("ngIf",r.toast)},dependencies:[On,ar],styles:[".toast[_ngcontent-%COMP%]{position:fixed;left:50%;bottom:calc(env(safe-area-inset-bottom,16px) + 80px);transform:translate(-50%);background:#111827e6;color:#fff;padding:10px 16px;border-radius:var(--radius-pill);font-size:var(--font-size-sm);font-weight:var(--font-weight-medium);box-shadow:0 6px 16px #0003;z-index:2000;transition:opacity var(--duration-base) var(--easing-ease-out),transform var(--duration-base) var(--easing-ease-out)}.toast.success[_ngcontent-%COMP%]{background:var(--color-primary);color:#111827}.toast.info[_ngcontent-%COMP%]{background:#3b82f6e6}.toast.error[_ngcontent-%COMP%]{background:#ef4444eb}"]})};function Rx(n){let e=localStorage.getItem("currentRoute");return e?[...n,e]:n}var Tx="noHoverEffects",Eh=class n{blurHandler=e=>{let t=e.target;if(!t)return;let r=t.closest("button, a");r instanceof HTMLElement&&r.blur?.()};get plannerLink(){return Rx(["/plan"])}get runLink(){return Rx(["/run"])}ngOnInit(){let e=localStorage.getItem("darkModeEnabled"),t=e===null?!0:e==="true";e===null&&localStorage.setItem("darkModeEnabled","true"),this.applyTheme(t);let r=localStorage.getItem(Tx),i=r===null?typeof window<"u"&&window.matchMedia?.("(hover: none)")?.matches:r==="true";r===null&&localStorage.setItem(Tx,i?"true":"false"),this.applyHoverPref(i),this.lockOrientation(),document.addEventListener("pointerup",this.blurHandler,{passive:!0})}ngOnDestroy(){document.removeEventListener("pointerup",this.blurHandler)}applyTheme(e){let t=document.documentElement;e?t.setAttribute("data-theme","dark"):t.removeAttribute("data-theme")}applyHoverPref(e){let t=document.documentElement;e?t.classList.add("no-hover-effects"):t.classList.remove("no-hover-effects")}lockOrientation(){try{"orientation"in screen&&screen.orientation.lock&&screen.orientation.lock("portrait").catch(()=>null)}catch{}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Bt({type:n,selectors:[["app-root"]],decls:7,vars:2,consts:[[1,"ios-statusbar-bg"],[1,"app-shell","safe-bottom","tight"],[1,"app-shell-inner"],[3,"plannerLink","runLink"],[1,"app-content"]],template:function(t,r){t&1&&($t(0,"div",0),_(1,"div",1)(2,"div",2),$t(3,"app-header",3),_(4,"main",4),$t(5,"router-outlet"),D()(),$t(6,"app-toast"),D()),t&2&&(S(3),Y("plannerLink",r.plannerLink)("runLink",r.runLink))},dependencies:[Zl,Ch,Sh],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;background:var(--color-bg);color:var(--color-text)}.app-content[_ngcontent-%COMP%]{margin-top:var(--spacing-1)}.ios-statusbar-bg[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;height:env(safe-area-inset-top,0px);background:color-mix(in srgb,var(--color-bg) 92%,transparent);pointer-events:none;z-index:3000}@supports (padding-top: constant(safe-area-inset-top)){.ios-statusbar-bg[_ngcontent-%COMP%]{height:constant(safe-area-inset-top)}}[data-theme=dark][_ngcontent-%COMP%]   .ios-statusbar-bg[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--color-bg) 92%,transparent)}.app-shell.tight[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-top:var(--spacing-1)}"]})};_v(Eh,Mx).catch(n=>console.error(n));
